define('iot/_public/InputCollection', [
    'exports',
    'module',
    'babel-runtime/helpers/class-call-check',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'esui/lib'
], function (exports, module, _babelRuntimeHelpersClassCallCheck, _underscore, _babelRuntimeHelpersInteropRequireDefault, _esuiLib) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _lib = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiLib);
    function _getData(inputs, fetchValue) {
        var store = {};
        for (var i = 0; i < inputs.length; i++) {
            var control = inputs[i];
            if (control.getCategory() === 'check' && !control.isChecked()) {
                continue;
            }
            if (control.isDisabled()) {
                continue;
            }
            var _name = control.get('name');
            var value = fetchValue(control);
            if (store.hasOwnProperty(_name)) {
                store[_name] = [].concat(store[_name], value);
            } else {
                store[_name] = value;
            }
        }
        return store;
    }
    var InputCollection = function () {
        function InputCollection(inputs) {
            _babelRuntimeHelpersClassCallCheck['default'](this, InputCollection);
            this.length = inputs.length;
            for (var i = 0; i < inputs.length; i++) {
                this[i] = inputs[i];
            }
        }
        InputCollection.prototype.splice = function splice() {
            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
                args[_key] = arguments[_key];
            }
            return Array.prototype.splice(args);
        };
        InputCollection.prototype.getData = function getData() {
            return _getData(this, function (control) {
                return control.getRawValue();
            });
        };
        InputCollection.prototype.getDataAsString = function getDataAsString() {
            var store = _getData(this, function (control) {
                return encodeURIComponent(control.getValue());
            });
            var valueString = '';
            _u['default'].each(store, function (value, key) {
                return valueString += encodeURIComponent(key) + '=' + value;
            });
            return valueString;
        };
        InputCollection.prototype.getValueAsString = function getValueAsString(name) {
            var data = this.getData();
            var values = data[name];
            var valueString = values ? typeof values === 'string' ? values : values.join(',') : '';
            return valueString;
        };
        InputCollection.prototype.checkAll = function checkAll() {
            for (var i = 0; i < this.length; i++) {
                var control = this[i];
                if (control.getCategory() === 'check') {
                    control.setChecked(true);
                }
            }
        };
        InputCollection.prototype.uncheckAll = function uncheckAll() {
            for (var i = 0; i < this.length; i++) {
                var control = this[i];
                if (control.getCategory() === 'check') {
                    control.setChecked(false);
                }
            }
        };
        InputCollection.prototype.checkInverse = function checkInverse() {
            for (var i = 0; i < this.length; i++) {
                var control = this[i];
                if (control.getCategory() === 'check') {
                    control.setChecked(!control.isChecked());
                }
            }
        };
        InputCollection.prototype.checkByValue = function checkByValue(values) {
            var map = _lib['default'].toDictionary(values);
            for (var i = 0; i < this.length; i++) {
                var control = this[i];
                if (control.getCategory() === 'check') {
                    var shouldBeChecked = map.hasOwnProperty(control.getValue());
                    control.setChecked(shouldBeChecked);
                }
            }
        };
        return InputCollection;
    }();
    module.exports = InputCollection;
});
define('iot/_public/mqttws', ['require'], function (require) {
    var global = window;
    var version = '0.0.0.0';
    var buildLevel = '@BUILDLEVEL@';
    var MESSAGE_TYPE = {
        CONNECT: 1,
        CONNACK: 2,
        PUBLISH: 3,
        PUBACK: 4,
        PUBREC: 5,
        PUBREL: 6,
        PUBCOMP: 7,
        SUBSCRIBE: 8,
        SUBACK: 9,
        UNSUBSCRIBE: 10,
        UNSUBACK: 11,
        PINGREQ: 12,
        PINGRESP: 13,
        DISCONNECT: 14
    };
    var validate = function (obj, keys) {
        for (key in obj) {
            if (obj.hasOwnProperty(key)) {
                if (keys.hasOwnProperty(key)) {
                    if (typeof obj[key] !== keys[key])
                        throw new Error(format(ERROR.INVALID_TYPE, [
                            typeof obj[key],
                            key
                        ]));
                } else {
                    var errorStr = 'Unknown property, ' + key + '. Valid properties are:';
                    for (key in keys)
                        if (keys.hasOwnProperty(key))
                            errorStr = errorStr + ' ' + key;
                    throw new Error(errorStr);
                }
            }
        }
    };
    var scope = function (f, scope) {
        return function () {
            return f.apply(scope, arguments);
        };
    };
    var ERROR = {
        OK: {
            code: 0,
            text: 'AMQJSC0000I OK.'
        },
        CONNECT_TIMEOUT: {
            code: 1,
            text: 'AMQJSC0001E Connect timed out.'
        },
        SUBSCRIBE_TIMEOUT: {
            code: 2,
            text: 'AMQJS0002E Subscribe timed out.'
        },
        UNSUBSCRIBE_TIMEOUT: {
            code: 3,
            text: 'AMQJS0003E Unsubscribe timed out.'
        },
        PING_TIMEOUT: {
            code: 4,
            text: 'AMQJS0004E Ping timed out.'
        },
        INTERNAL_ERROR: {
            code: 5,
            text: 'AMQJS0005E Internal error.'
        },
        CONNACK_RETURNCODE: {
            code: 6,
            text: 'AMQJS0006E Bad Connack return code:{0} {1}.'
        },
        SOCKET_ERROR: {
            code: 7,
            text: 'AMQJS0007E Socket error:{0}.'
        },
        SOCKET_CLOSE: {
            code: 8,
            text: 'AMQJS0008I Socket closed.'
        },
        MALFORMED_UTF: {
            code: 9,
            text: 'AMQJS0009E Malformed UTF data:{0} {1} {2}.'
        },
        UNSUPPORTED: {
            code: 10,
            text: 'AMQJS0010E {0} is not supported by this browser.'
        },
        INVALID_STATE: {
            code: 11,
            text: 'AMQJS0011E Invalid state {0}.'
        },
        INVALID_TYPE: {
            code: 12,
            text: 'AMQJS0012E Invalid type {0} for {1}.'
        },
        INVALID_ARGUMENT: {
            code: 13,
            text: 'AMQJS0013E Invalid argument {0} for {1}.'
        },
        UNSUPPORTED_OPERATION: {
            code: 14,
            text: 'AMQJS0014E Unsupported operation.'
        },
        INVALID_STORED_DATA: {
            code: 15,
            text: 'AMQJS0015E Invalid data in local storage key={0} value={1}.'
        },
        INVALID_MQTT_MESSAGE_TYPE: {
            code: 16,
            text: 'AMQJS0016E Invalid MQTT message type {0}.'
        },
        MALFORMED_UNICODE: {
            code: 17,
            text: 'AMQJS0017E Malformed Unicode string:{0} {1}.'
        }
    };
    var CONNACK_RC = {
        0: 'Connection Accepted',
        1: 'Connection Refused: unacceptable protocol version',
        2: 'Connection Refused: identifier rejected',
        3: 'Connection Refused: server unavailable',
        4: 'Connection Refused: bad user name or password',
        5: 'Connection Refused: not authorized'
    };
    var format = function (error, substitutions) {
        var text = error.text;
        if (substitutions) {
            for (var i = 0; i < substitutions.length; i++) {
                field = '{' + i + '}';
                start = text.indexOf(field);
                if (start > 0) {
                    var part1 = text.substring(0, start);
                    var part2 = text.substring(start + field.length);
                    text = part1 + substitutions[i] + part2;
                }
            }
        }
        return text;
    };
    var MqttProtoIdentifier = [
        0,
        6,
        77,
        81,
        73,
        115,
        100,
        112,
        3
    ];
    var WireMessage = function (type, options) {
        this.type = type;
        for (name in options) {
            if (options.hasOwnProperty(name)) {
                this[name] = options[name];
            }
        }
    };
    WireMessage.prototype.encode = function () {
        var first = (this.type & 15) << 4;
        remLength = 0;
        topicStrLength = new Array();
        if (this.messageIdentifier != undefined)
            remLength += 2;
        switch (this.type) {
        case MESSAGE_TYPE.CONNECT:
            remLength += MqttProtoIdentifier.length + 3;
            remLength += UTF8Length(this.clientId) + 2;
            if (this.willMessage != undefined) {
                remLength += UTF8Length(this.willMessage.destinationName) + 2;
                var willMessagePayloadBytes = this.willMessage.payloadBytes;
                if (!(willMessagePayloadBytes instanceof Uint8Array))
                    willMessagePayloadBytes = new Uint8Array(payloadBytes);
                remLength += willMessagePayloadBytes.byteLength + 2;
            }
            if (this.userName != undefined)
                remLength += UTF8Length(this.userName) + 2;
            if (this.password != undefined)
                remLength += UTF8Length(this.password) + 2;
            break;
        case MESSAGE_TYPE.SUBSCRIBE:
            first |= 2;
            for (var i = 0; i < this.topics.length; i++) {
                topicStrLength[i] = UTF8Length(this.topics[i]);
                remLength += topicStrLength[i] + 2;
            }
            remLength += this.requestedQos.length;
            break;
        case MESSAGE_TYPE.UNSUBSCRIBE:
            first |= 2;
            for (var i = 0; i < this.topics.length; i++) {
                topicStrLength[i] = UTF8Length(this.topics[i]);
                remLength += topicStrLength[i] + 2;
            }
            break;
        case MESSAGE_TYPE.PUBLISH:
            if (this.payloadMessage.duplicate)
                first |= 8;
            first = first |= this.payloadMessage.qos << 1;
            if (this.payloadMessage.retained)
                first |= 1;
            destinationNameLength = UTF8Length(this.payloadMessage.destinationName);
            remLength += destinationNameLength + 2;
            var payloadBytes = this.payloadMessage.payloadBytes;
            remLength += payloadBytes.byteLength;
            if (payloadBytes instanceof ArrayBuffer)
                payloadBytes = new Uint8Array(payloadBytes);
            else if (!(payloadBytes instanceof Uint8Array))
                payloadBytes = new Uint8Array(payloadBytes.buffer);
            break;
        case MESSAGE_TYPE.DISCONNECT:
            break;
        default:
            ;
        }
        var mbi = encodeMBI(remLength);
        var pos = mbi.length + 1;
        var buffer = new ArrayBuffer(remLength + pos);
        var byteStream = new Uint8Array(buffer);
        byteStream[0] = first;
        byteStream.set(mbi, 1);
        if (this.type == MESSAGE_TYPE.PUBLISH)
            pos = writeString(this.payloadMessage.destinationName, destinationNameLength, byteStream, pos);
        else if (this.type == MESSAGE_TYPE.CONNECT) {
            byteStream.set(MqttProtoIdentifier, pos);
            pos += MqttProtoIdentifier.length;
            var connectFlags = 0;
            if (this.cleanSession)
                connectFlags = 2;
            if (this.willMessage != undefined) {
                connectFlags |= 4;
                connectFlags |= this.willMessage.qos << 3;
                if (this.willMessage.retained) {
                    connectFlags |= 32;
                }
            }
            if (this.userName != undefined)
                connectFlags |= 128;
            if (this.password != undefined)
                connectFlags |= 64;
            byteStream[pos++] = connectFlags;
            pos = writeUint16(this.keepAliveInterval, byteStream, pos);
        }
        if (this.messageIdentifier != undefined)
            pos = writeUint16(this.messageIdentifier, byteStream, pos);
        switch (this.type) {
        case MESSAGE_TYPE.CONNECT:
            pos = writeString(this.clientId, UTF8Length(this.clientId), byteStream, pos);
            if (this.willMessage != undefined) {
                pos = writeString(this.willMessage.destinationName, UTF8Length(this.willMessage.destinationName), byteStream, pos);
                pos = writeUint16(willMessagePayloadBytes.byteLength, byteStream, pos);
                byteStream.set(willMessagePayloadBytes, pos);
                pos += willMessagePayloadBytes.byteLength;
            }
            if (this.userName != undefined)
                pos = writeString(this.userName, UTF8Length(this.userName), byteStream, pos);
            if (this.password != undefined)
                pos = writeString(this.password, UTF8Length(this.password), byteStream, pos);
            break;
        case MESSAGE_TYPE.PUBLISH:
            byteStream.set(payloadBytes, pos);
            break;
        case MESSAGE_TYPE.SUBSCRIBE:
            for (var i = 0; i < this.topics.length; i++) {
                pos = writeString(this.topics[i], topicStrLength[i], byteStream, pos);
                byteStream[pos++] = this.requestedQos[i];
            }
            break;
        case MESSAGE_TYPE.UNSUBSCRIBE:
            for (var i = 0; i < this.topics.length; i++)
                pos = writeString(this.topics[i], topicStrLength[i], byteStream, pos);
            break;
        default:
        }
        return buffer;
    };
    function decodeMessage(input) {
        var messageOffset = 0;
        var wireMessages = [];
        while (input.length > messageOffset) {
            var first = input[messageOffset++];
            var type = first >> 4;
            var messageInfo = first &= 15;
            var pos = messageOffset;
            var digit;
            var remLength = 0;
            var multiplier = 1;
            do {
                digit = input[pos++];
                messageOffset++;
                remLength += (digit & 127) * multiplier;
                multiplier *= 128;
            } while ((digit & 128) != 0);
            var wireMessage = new WireMessage(type);
            switch (type) {
            case MESSAGE_TYPE.CONNACK:
                wireMessage.topicNameCompressionResponse = input[pos++];
                wireMessage.returnCode = input[pos++];
                break;
            case MESSAGE_TYPE.PUBLISH:
                var qos = messageInfo >> 1 & 3;
                var varHeaderLen = 0;
                var len = readUint16(input, pos);
                pos += 2;
                varHeaderLen += 2;
                var topicName = parseUTF8(input, pos, len);
                pos += len;
                varHeaderLen += len;
                if (qos > 0) {
                    wireMessage.messageIdentifier = readUint16(input, pos);
                    pos += 2;
                    varHeaderLen += 2;
                }
                var message = new Message(input.subarray(pos, pos + remLength - varHeaderLen));
                if ((messageInfo & 1) == 1) {
                    message.retained = true;
                }
                if ((messageInfo & 8) == 8)
                    message.duplicate = true;
                message.qos = qos;
                message.destinationName = topicName;
                wireMessage.payloadMessage = message;
                break;
            case MESSAGE_TYPE.PUBACK:
            case MESSAGE_TYPE.PUBREC:
            case MESSAGE_TYPE.PUBREL:
            case MESSAGE_TYPE.PUBCOMP:
            case MESSAGE_TYPE.UNSUBACK:
                wireMessage.messageIdentifier = readUint16(input, pos);
                break;
            case MESSAGE_TYPE.SUBACK:
                wireMessage.messageIdentifier = readUint16(input, pos);
                pos += 2;
                wireMessage.grantedQos = input.subarray(pos);
                break;
            default:
                ;
            }
            wireMessages.push(wireMessage);
            messageOffset += remLength;
        }
        return wireMessages;
    }
    function writeUint16(input, buffer, offset) {
        buffer[offset++] = input >> 8;
        buffer[offset++] = input % 256;
        return offset;
    }
    function writeString(input, utf8Length, buffer, offset) {
        offset = writeUint16(utf8Length, buffer, offset);
        stringToUTF8(input, buffer, offset);
        return offset + utf8Length;
    }
    function readUint16(buffer, offset) {
        return 256 * buffer[offset] + buffer[offset + 1];
    }
    function encodeMBI(number) {
        var output = new Array(1);
        var numBytes = 0;
        do {
            var digit = number % 128;
            number = number >> 7;
            if (number > 0) {
                digit |= 128;
            }
            output[numBytes++] = digit;
        } while (number > 0 && numBytes < 4);
        return output;
    }
    function UTF8Length(input) {
        var output = 0;
        for (var i = 0; i < input.length; i++) {
            var charCode = input.charCodeAt(i);
            if (charCode > 2047) {
                if (55296 <= charCode && charCode <= 56319) {
                    i++;
                    output++;
                }
                output += 3;
            } else if (charCode > 127)
                output += 2;
            else
                output++;
        }
        return output;
    }
    function stringToUTF8(input, output, start) {
        var pos = start;
        for (var i = 0; i < input.length; i++) {
            var charCode = input.charCodeAt(i);
            if (55296 <= charCode && charCode <= 56319) {
                lowCharCode = input.charCodeAt(++i);
                if (isNaN(lowCharCode)) {
                    throw new Error(format(ERROR.MALFORMED_UNICODE, [
                        charCode,
                        lowCharCode
                    ]));
                }
                charCode = (charCode - 55296 << 10) + (lowCharCode - 56320) + 65536;
            }
            if (charCode <= 127) {
                output[pos++] = charCode;
            } else if (charCode <= 2047) {
                output[pos++] = charCode >> 6 & 31 | 192;
                output[pos++] = charCode & 63 | 128;
            } else if (charCode <= 65535) {
                output[pos++] = charCode >> 12 & 15 | 224;
                output[pos++] = charCode >> 6 & 63 | 128;
                output[pos++] = charCode & 63 | 128;
            } else {
                output[pos++] = charCode >> 18 & 7 | 240;
                output[pos++] = charCode >> 12 & 63 | 128;
                output[pos++] = charCode >> 6 & 63 | 128;
                output[pos++] = charCode & 63 | 128;
            }
            ;
        }
        return output;
    }
    function parseUTF8(input, offset, length) {
        var output = '';
        var utf16;
        var pos = offset;
        while (pos < offset + length) {
            var byte1 = input[pos++];
            if (byte1 < 128)
                utf16 = byte1;
            else {
                var byte2 = input[pos++] - 128;
                if (byte2 < 0)
                    throw new Error(format(ERROR.MALFORMED_UTF, [
                        byte1.toString(16),
                        byte2.toString(16),
                        ''
                    ]));
                if (byte1 < 224)
                    utf16 = 64 * (byte1 - 192) + byte2;
                else {
                    var byte3 = input[pos++] - 128;
                    if (byte3 < 0)
                        throw new Error(format(ERROR.MALFORMED_UTF, [
                            byte1.toString(16),
                            byte2.toString(16),
                            byte3.toString(16)
                        ]));
                    if (byte1 < 240)
                        utf16 = 4096 * (byte1 - 224) + 64 * byte2 + byte3;
                    else {
                        var byte4 = input[pos++] - 128;
                        if (byte4 < 0)
                            throw new Error(format(ERROR.MALFORMED_UTF, [
                                byte1.toString(16),
                                byte2.toString(16),
                                byte3.toString(16),
                                byte4.toString(16)
                            ]));
                        if (byte1 < 248)
                            utf16 = 262144 * (byte1 - 240) + 4096 * byte2 + 64 * byte3 + byte4;
                        else
                            throw new Error(format(ERROR.MALFORMED_UTF, [
                                byte1.toString(16),
                                byte2.toString(16),
                                byte3.toString(16),
                                byte4.toString(16)
                            ]));
                    }
                }
            }
            if (utf16 > 65535) {
                utf16 -= 65536;
                output += String.fromCharCode(55296 + (utf16 >> 10));
                utf16 = 56320 + (utf16 & 1023);
            }
            output += String.fromCharCode(utf16);
        }
        return output;
    }
    var Pinger = function (client, window, keepAliveInterval) {
        this._client = client;
        this._window = window;
        this._keepAliveInterval = keepAliveInterval * 1000;
        this.isReset = false;
        var pingReq = new WireMessage(MESSAGE_TYPE.PINGREQ).encode();
        var doTimeout = function (pinger) {
            return function () {
                return doPing.apply(pinger);
            };
        };
        var doPing = function () {
            if (!this.isReset) {
                this._client._trace('Pinger.doPing', 'Timed out');
                this._client._disconnected(ERROR.PING_TIMEOUT.code, format(ERROR.PING_TIMEOUT));
            } else {
                this.isReset = false;
                this._client._trace('Pinger.doPing', 'send PINGREQ');
                this._client.socket.send(pingReq);
                this.timeout = this._window.setTimeout(doTimeout(this), this._keepAliveInterval);
            }
        };
        this.reset = function () {
            this.isReset = true;
            this._window.clearTimeout(this.timeout);
            if (this._keepAliveInterval > 0)
                this.timeout = setTimeout(doTimeout(this), this._keepAliveInterval);
        };
        this.cancel = function () {
            this._window.clearTimeout(this.timeout);
        };
    };
    var Timeout = function (client, window, timeoutSeconds, action, args) {
        this._window = window;
        if (!timeoutSeconds)
            timeoutSeconds = 30;
        var doTimeout = function (action, client, args) {
            return function () {
                return action.apply(client, args);
            };
        };
        this.timeout = setTimeout(doTimeout(action, client, args), timeoutSeconds * 1000);
        this.cancel = function () {
            this._window.clearTimeout(this.timeout);
        };
    };
    var ClientImpl = function (host, port, clientId) {
        if (!('WebSocket' in global && global['WebSocket'] !== null)) {
            throw new Error(format(ERROR.UNSUPPORTED, ['WebSocket']));
        }
        if (!('localStorage' in global && global['localStorage'] !== null)) {
            throw new Error(format(ERROR.UNSUPPORTED, ['localStorage']));
        }
        if (!('ArrayBuffer' in global && global['ArrayBuffer'] !== null)) {
            throw new Error(format(ERROR.UNSUPPORTED, ['ArrayBuffer']));
        }
        this._trace('Messaging.Client', host, port, clientId);
        this.host = host;
        this.port = port;
        this.clientId = clientId;
        this._localKey = host + ':' + port + ':' + clientId + ':';
        this._msg_queue = [];
        this._sentMessages = {};
        this._receivedMessages = {};
        this._notify_msg_sent = {};
        this._message_identifier = 1;
        this._sequence = 0;
        for (key in localStorage)
            if (key.indexOf('Sent:' + this._localKey) == 0 || key.indexOf('Received:' + this._localKey) == 0)
                this.restore(key);
    };
    ClientImpl.prototype.host;
    ClientImpl.prototype.port;
    ClientImpl.prototype.clientId;
    ClientImpl.prototype.socket;
    ClientImpl.prototype.connected = false;
    ClientImpl.prototype.maxMessageIdentifier = 65536;
    ClientImpl.prototype.connectOptions;
    ClientImpl.prototype.hostIndex;
    ClientImpl.prototype.onConnectionLost;
    ClientImpl.prototype.onMessageDelivered;
    ClientImpl.prototype.onMessageArrived;
    ClientImpl.prototype._msg_queue = null;
    ClientImpl.prototype._connectTimeout;
    ClientImpl.prototype.sendPinger = null;
    ClientImpl.prototype.receivePinger = null;
    ClientImpl.prototype._traceBuffer = null;
    ClientImpl.prototype._MAX_TRACE_ENTRIES = 100;
    ClientImpl.prototype.connect = function (connectOptions) {
        var connectOptionsMasked = this._traceMask(connectOptions, 'password');
        this._trace('Client.connect', connectOptionsMasked, this.socket, this.connected);
        if (this.connected)
            throw new Error(format(ERROR.INVALID_STATE, ['already connected']));
        if (this.socket)
            throw new Error(format(ERROR.INVALID_STATE, ['already connected']));
        this.connectOptions = connectOptions;
        if (connectOptions.hosts) {
            this.hostIndex = 0;
            this._doConnect(connectOptions.hosts[0], connectOptions.ports[0]);
        } else {
            this._doConnect(this.host, this.port);
        }
    };
    ClientImpl.prototype.subscribe = function (filter, subscribeOptions) {
        this._trace('Client.subscribe', filter, subscribeOptions);
        if (!this.connected)
            throw new Error(format(ERROR.INVALID_STATE, ['not connected']));
        var wireMessage = new WireMessage(MESSAGE_TYPE.SUBSCRIBE);
        wireMessage.topics = [filter];
        if (subscribeOptions.qos != undefined)
            wireMessage.requestedQos = [subscribeOptions.qos];
        else
            wireMessage.requestedQos = [0];
        if (subscribeOptions.onSuccess) {
            wireMessage.callback = function () {
                subscribeOptions.onSuccess({ invocationContext: subscribeOptions.invocationContext });
            };
        }
        if (subscribeOptions.timeout) {
            wireMessage.timeOut = new Timeout(this, window, subscribeOptions.timeout, subscribeOptions.onFailure, [{
                    invocationContext: subscribeOptions.invocationContext,
                    errorCode: ERROR.SUBSCRIBE_TIMEOUT.code,
                    errorMessage: format(ERROR.SUBSCRIBE_TIMEOUT)
                }]);
        }
        this._requires_ack(wireMessage);
        this._schedule_message(wireMessage);
    };
    ClientImpl.prototype.unsubscribe = function (filter, unsubscribeOptions) {
        this._trace('Client.unsubscribe', filter, unsubscribeOptions);
        if (!this.connected)
            throw new Error(format(ERROR.INVALID_STATE, ['not connected']));
        var wireMessage = new WireMessage(MESSAGE_TYPE.UNSUBSCRIBE);
        wireMessage.topics = [filter];
        if (unsubscribeOptions.onSuccess) {
            wireMessage.callback = function () {
                unsubscribeOptions.onSuccess({ invocationContext: unsubscribeOptions.invocationContext });
            };
        }
        if (unsubscribeOptions.timeout) {
            wireMessage.timeOut = new Timeout(this, window, unsubscribeOptions.timeout, unsubscribeOptions.onFailure, [{
                    invocationContext: unsubscribeOptions.invocationContext,
                    errorCode: ERROR.UNSUBSCRIBE_TIMEOUT.code,
                    errorMessage: format(ERROR.UNSUBSCRIBE_TIMEOUT)
                }]);
        }
        this._requires_ack(wireMessage);
        this._schedule_message(wireMessage);
    };
    ClientImpl.prototype.send = function (message) {
        this._trace('Client.send', message);
        if (!this.connected)
            throw new Error(format(ERROR.INVALID_STATE, ['not connected']));
        wireMessage = new WireMessage(MESSAGE_TYPE.PUBLISH);
        wireMessage.payloadMessage = message;
        if (message.qos > 0)
            this._requires_ack(wireMessage);
        else if (this.onMessageDelivered)
            this._notify_msg_sent[wireMessage] = this.onMessageDelivered(wireMessage.payloadMessage);
        this._schedule_message(wireMessage);
    };
    ClientImpl.prototype.disconnect = function () {
        this._trace('Client.disconnect');
        if (!this.socket)
            throw new Error(format(ERROR.INVALID_STATE, ['not connecting or connected']));
        wireMessage = new WireMessage(MESSAGE_TYPE.DISCONNECT);
        this._notify_msg_sent[wireMessage] = scope(this._disconnected, this);
        this._schedule_message(wireMessage);
    };
    ClientImpl.prototype.getTraceLog = function () {
        if (this._traceBuffer !== null) {
            this._trace('Client.getTraceLog', new Date());
            this._trace('Client.getTraceLog in flight messages', this._sentMessages.length);
            for (key in this._sentMessages)
                this._trace('_sentMessages ', key, this._sentMessages[key]);
            for (key in this._receivedMessages)
                this._trace('_receivedMessages ', key, this._receivedMessages[key]);
            return this._traceBuffer;
        }
    };
    ClientImpl.prototype.startTrace = function () {
        if (this._traceBuffer === null) {
            this._traceBuffer = [];
        }
        this._trace('Client.startTrace', new Date(), version);
    };
    ClientImpl.prototype.stopTrace = function () {
        delete this._traceBuffer;
    };
    ClientImpl.prototype._doConnect = function (host, port) {
        if (this.connectOptions.useSSL)
            wsurl = [
                'wss://',
                host,
                ':',
                port,
                '/mqtt'
            ].join('');
        else
            wsurl = [
                'ws://',
                host,
                ':',
                port,
                '/mqtt'
            ].join('');
        this.connected = false;
        this.socket = new WebSocket(wsurl, 'mqttv3.1');
        this.socket.binaryType = 'arraybuffer';
        this.socket.onopen = scope(this._on_socket_open, this);
        this.socket.onmessage = scope(this._on_socket_message, this);
        this.socket.onerror = scope(this._on_socket_error, this);
        this.socket.onclose = scope(this._on_socket_close, this);
        this.sendPinger = new Pinger(this, window, this.connectOptions.keepAliveInterval);
        this.receivePinger = new Pinger(this, window, this.connectOptions.keepAliveInterval);
        this._connectTimeout = new Timeout(this, window, this.connectOptions.timeout, this._disconnected, [
            ERROR.CONNECT_TIMEOUT.code,
            format(ERROR.CONNECT_TIMEOUT)
        ]);
    };
    ClientImpl.prototype._schedule_message = function (message) {
        this._msg_queue.push(message);
        if (this.connected) {
            this._process_queue();
        }
    };
    ClientImpl.prototype.store = function (prefix, wireMessage) {
        storedMessage = {
            type: wireMessage.type,
            messageIdentifier: wireMessage.messageIdentifier,
            version: 1
        };
        switch (wireMessage.type) {
        case MESSAGE_TYPE.PUBLISH:
            if (wireMessage.pubRecReceived)
                storedMessage.pubRecReceived = true;
            storedMessage.payloadMessage = {};
            var hex = '';
            var messageBytes = wireMessage.payloadMessage.payloadBytes;
            for (var i = 0; i < messageBytes.length; i++) {
                if (messageBytes[i] <= 15)
                    hex = hex + '0' + messageBytes[i].toString(16);
                else
                    hex = hex + messageBytes[i].toString(16);
            }
            storedMessage.payloadMessage.payloadHex = hex;
            storedMessage.payloadMessage.qos = wireMessage.payloadMessage.qos;
            storedMessage.payloadMessage.destinationName = wireMessage.payloadMessage.destinationName;
            if (wireMessage.payloadMessage.duplicate)
                storedMessage.payloadMessage.duplicate = true;
            if (wireMessage.payloadMessage.retained)
                storedMessage.payloadMessage.retained = true;
            if (prefix.indexOf('Sent:') == 0) {
                if (wireMessage.sequence === undefined)
                    wireMessage.sequence = ++this._sequence;
                storedMessage.sequence = wireMessage.sequence;
            }
            break;
        default:
            throw Error(format(ERROR.INVALID_STORED_DATA, [
                key,
                storedMessage
            ]));
        }
        localStorage.setItem(prefix + this._localKey + wireMessage.messageIdentifier, JSON.stringify(storedMessage));
    };
    ClientImpl.prototype.restore = function (key) {
        var value = localStorage.getItem(key);
        var storedMessage = JSON.parse(value);
        var wireMessage = new WireMessage(storedMessage.type, storedMessage);
        switch (storedMessage.type) {
        case MESSAGE_TYPE.PUBLISH:
            var hex = storedMessage.payloadMessage.payloadHex;
            var buffer = new ArrayBuffer(hex.length / 2);
            var byteStream = new Uint8Array(buffer);
            var i = 0;
            while (hex.length >= 2) {
                var x = parseInt(hex.substring(0, 2), 16);
                hex = hex.substring(2, hex.length);
                byteStream[i++] = x;
            }
            var payloadMessage = new Message(byteStream);
            payloadMessage.qos = storedMessage.payloadMessage.qos;
            payloadMessage.destinationName = storedMessage.payloadMessage.destinationName;
            if (storedMessage.payloadMessage.duplicate)
                payloadMessage.duplicate = true;
            if (storedMessage.payloadMessage.retained)
                payloadMessage.retained = true;
            wireMessage.payloadMessage = payloadMessage;
            break;
        default:
            throw Error(format(ERROR.INVALID_STORED_DATA, [
                key,
                value
            ]));
        }
        if (key.indexOf('Sent:' + this._localKey) == 0) {
            this._sentMessages[wireMessage.messageIdentifier] = wireMessage;
        } else if (key.indexOf('Received:' + this._localKey) == 0) {
            this._receivedMessages[wireMessage.messageIdentifier] = wireMessage;
        }
    };
    ClientImpl.prototype._process_queue = function () {
        var message = null;
        var fifo = this._msg_queue.reverse();
        while (message = fifo.pop()) {
            this._socket_send(message);
            if (this._notify_msg_sent[message]) {
                this._notify_msg_sent[message]();
                delete this._notify_msg_sent[message];
            }
        }
    };
    ClientImpl.prototype._requires_ack = function (wireMessage) {
        var messageCount = Object.keys(this._sentMessages).length;
        if (messageCount > this.maxMessageIdentifier)
            throw Error('Too many messages:' + messageCount);
        while (this._sentMessages[this._message_identifier] !== undefined) {
            this._message_identifier++;
        }
        wireMessage.messageIdentifier = this._message_identifier;
        this._sentMessages[wireMessage.messageIdentifier] = wireMessage;
        if (wireMessage.type === MESSAGE_TYPE.PUBLISH) {
            this.store('Sent:', wireMessage);
        }
        if (this._message_identifier === this.maxMessagIdentifier) {
            this._message_identifier = 1;
        }
    };
    ClientImpl.prototype._on_socket_open = function () {
        var wireMessage = new WireMessage(MESSAGE_TYPE.CONNECT, this.connectOptions);
        wireMessage.clientId = this.clientId;
        this._socket_send(wireMessage);
    };
    ClientImpl.prototype._on_socket_message = function (event) {
        this._trace('Client._on_socket_message', event.data);
        this.receivePinger.reset();
        var byteArray = new Uint8Array(event.data);
        try {
            var wireMessages = decodeMessage(byteArray);
        } catch (error) {
            console.log(error);
            this._disconnected(ERROR.INTERNAL_ERROR.code, format(ERROR.INTERNAL_ERROR, [error.message]));
            return;
        }
        this._trace('Client._on_socket_message', wireMessages);
        for (var i = 0; i < wireMessages.length; ++i) {
            var wireMessage = wireMessages[i];
            switch (wireMessage.type) {
            case MESSAGE_TYPE.CONNACK:
                this._connectTimeout.cancel();
                if (this.connectOptions.cleanSession) {
                    for (key in this._sentMessages) {
                        var sentMessage = this._sentMessages[key];
                        localStorage.removeItem('Sent:' + this._localKey + sentMessage.messageIdentifier);
                    }
                    this._sentMessages = {};
                    for (key in this._receivedMessages) {
                        var receivedMessage = this._receivedMessages[key];
                        localStorage.removeItem('Received:' + this._localKey + receivedMessage.messageIdentifier);
                    }
                    this._receivedMessages = {};
                }
                if (wireMessage.returnCode === 0) {
                    this.connected = true;
                    if (this.connectOptions.hosts)
                        this.hostIndex = this.connectOptions.hosts.length;
                } else {
                    this._disconnected(ERROR.CONNACK_RETURNCODE.code, format(ERROR.CONNACK_RETURNCODE, [
                        wireMessage.returnCode,
                        CONNACK_RC[wireMessage.returnCode]
                    ]));
                    break;
                }
                var sequencedMessages = new Array();
                for (var msgId in this._sentMessages) {
                    if (this._sentMessages.hasOwnProperty(msgId))
                        sequencedMessages.push(this._sentMessages[msgId]);
                }
                var sequencedMessages = sequencedMessages.sort(function (a, b) {
                    return a.sequence - b.sequence;
                });
                for (var i = 0, len = sequencedMessages.length; i < len; i++) {
                    var sentMessage = sequencedMessages[i];
                    if (sentMessage.type == MESSAGE_TYPE.PUBLISH && sentMessage.pubRecReceived) {
                        var pubRelMessage = new WireMessage(MESSAGE_TYPE.PUBREL, { messageIdentifier: sentMessage.messageIdentifier });
                        this._schedule_message(pubRelMessage);
                    } else {
                        this._schedule_message(sentMessage);
                    }
                    ;
                }
                if (this.connectOptions.onSuccess) {
                    this.connectOptions.onSuccess({ invocationContext: this.connectOptions.invocationContext });
                }
                this._process_queue();
                break;
            case MESSAGE_TYPE.PUBLISH:
                this._receivePublish(wireMessage);
                break;
            case MESSAGE_TYPE.PUBACK:
                var sentMessage = this._sentMessages[wireMessage.messageIdentifier];
                if (sentMessage) {
                    delete this._sentMessages[wireMessage.messageIdentifier];
                    localStorage.removeItem('Sent:' + this._localKey + wireMessage.messageIdentifier);
                    if (this.onMessageDelivered)
                        this.onMessageDelivered(sentMessage.payloadMessage);
                }
                break;
            case MESSAGE_TYPE.PUBREC:
                var sentMessage = this._sentMessages[wireMessage.messageIdentifier];
                if (sentMessage) {
                    sentMessage.pubRecReceived = true;
                    var pubRelMessage = new WireMessage(MESSAGE_TYPE.PUBREL, { messageIdentifier: wireMessage.messageIdentifier });
                    this.store('Sent:', sentMessage);
                    this._schedule_message(pubRelMessage);
                }
                break;
            case MESSAGE_TYPE.PUBREL:
                var receivedMessage = this._receivedMessages[wireMessage.messageIdentifier];
                localStorage.removeItem('Received:' + this._localKey + wireMessage.messageIdentifier);
                if (receivedMessage) {
                    this._receiveMessage(receivedMessage);
                    delete this._receivedMessages[wireMessage.messageIdentifier];
                }
                pubCompMessage = new WireMessage(MESSAGE_TYPE.PUBCOMP, { messageIdentifier: wireMessage.messageIdentifier });
                this._schedule_message(pubCompMessage);
                break;
            case MESSAGE_TYPE.PUBCOMP:
                var sentMessage = this._sentMessages[wireMessage.messageIdentifier];
                delete this._sentMessages[wireMessage.messageIdentifier];
                localStorage.removeItem('Sent:' + this._localKey + wireMessage.messageIdentifier);
                if (this.onMessageDelivered)
                    this.onMessageDelivered(sentMessage.payloadMessage);
                break;
            case MESSAGE_TYPE.SUBACK:
                var sentMessage = this._sentMessages[wireMessage.messageIdentifier];
                if (sentMessage) {
                    if (sentMessage.timeOut)
                        sentMessage.timeOut.cancel();
                    if (sentMessage.callback) {
                        sentMessage.callback();
                    }
                    delete this._sentMessages[wireMessage.messageIdentifier];
                }
                break;
            case MESSAGE_TYPE.UNSUBACK:
                var sentMessage = this._sentMessages[wireMessage.messageIdentifier];
                if (sentMessage) {
                    if (sentMessage.timeOut)
                        sentMessage.timeOut.cancel();
                    if (sentMessage.callback) {
                        sentMessage.callback();
                    }
                    delete this._sentMessages[wireMessage.messageIdentifier];
                }
                break;
            case MESSAGE_TYPE.PINGRESP:
                this.sendPinger.reset();
                break;
            case MESSAGE_TYPE.DISCONNECT:
                this._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code, format(ERROR.INVALID_MQTT_MESSAGE_TYPE, [wireMessage.type]));
                break;
            default:
                this._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code, format(ERROR.INVALID_MQTT_MESSAGE_TYPE, [wireMessage.type]));
            }
            ;
        }
    };
    ClientImpl.prototype._on_socket_error = function (error) {
        this._disconnected(ERROR.SOCKET_ERROR.code, format(ERROR.SOCKET_ERROR, [error.data]));
    };
    ClientImpl.prototype._on_socket_close = function () {
        this._disconnected(ERROR.SOCKET_CLOSE.code, format(ERROR.SOCKET_CLOSE));
    };
    ClientImpl.prototype._socket_send = function (wireMessage) {
        if (wireMessage.type == 1) {
            var wireMessageMasked = this._traceMask(wireMessage, 'password');
            this._trace('Client._socket_send', wireMessageMasked);
        } else
            this._trace('Client._socket_send', wireMessage);
        this.socket.send(wireMessage.encode());
        this.sendPinger.reset();
    };
    ClientImpl.prototype._receivePublish = function (wireMessage) {
        switch (wireMessage.payloadMessage.qos) {
        case 'undefined':
        case 0:
            this._receiveMessage(wireMessage);
            break;
        case 1:
            var pubAckMessage = new WireMessage(MESSAGE_TYPE.PUBACK, { messageIdentifier: wireMessage.messageIdentifier });
            this._schedule_message(pubAckMessage);
            this._receiveMessage(wireMessage);
            break;
        case 2:
            this._receivedMessages[wireMessage.messageIdentifier] = wireMessage;
            this.store('Received:', wireMessage);
            var pubRecMessage = new WireMessage(MESSAGE_TYPE.PUBREC, { messageIdentifier: wireMessage.messageIdentifier });
            this._schedule_message(pubRecMessage);
            break;
        default:
            throw Error('Invaild qos=' + wireMmessage.payloadMessage.qos);
        }
        ;
    };
    ClientImpl.prototype._receiveMessage = function (wireMessage) {
        if (this.onMessageArrived) {
            this.onMessageArrived(wireMessage.payloadMessage);
        }
    };
    ClientImpl.prototype._disconnected = function (errorCode, errorText) {
        this._trace('Client._disconnected', errorCode, errorText);
        this.sendPinger.cancel();
        this.receivePinger.cancel();
        if (this._connectTimeout)
            this._connectTimeout.cancel();
        this._msg_queue = [];
        this._notify_msg_sent = {};
        if (this.socket) {
            this.socket.onopen = null;
            this.socket.onmessage = null;
            this.socket.onerror = null;
            this.socket.onclose = null;
            if (this.socket.readyState === 1)
                this.socket.close();
            delete this.socket;
        }
        if (this.connectOptions.hosts && this.hostIndex < this.connectOptions.hosts.length - 1) {
            this.hostIndex++;
            this._doConnect(this.connectOptions.hosts[this.hostIndex], this.connectOptions.ports[this.hostIndex]);
        } else {
            if (errorCode === undefined) {
                errorCode = ERROR.OK.code;
                errorText = format(ERROR.OK);
            }
            if (this.connected) {
                this.connected = false;
                if (this.onConnectionLost)
                    this.onConnectionLost({
                        errorCode: errorCode,
                        errorMessage: errorText
                    });
            } else {
                if (this.connectOptions.onFailure)
                    this.connectOptions.onFailure({
                        invocationContext: this.connectOptions.invocationContext,
                        errorCode: errorCode,
                        errorMessage: errorText
                    });
            }
        }
    };
    ClientImpl.prototype._trace = function () {
        if (this._traceBuffer !== null) {
            for (var i = 0, max = arguments.length; i < max; i++) {
                if (this._traceBuffer.length == this._MAX_TRACE_ENTRIES) {
                    this._traceBuffer.shift();
                }
                if (i === 0)
                    this._traceBuffer.push(arguments[i]);
                else if (typeof arguments[i] === 'undefined')
                    this._traceBuffer.push(arguments[i]);
                else
                    this._traceBuffer.push('  ' + JSON.stringify(arguments[i]));
            }
            ;
        }
        ;
    };
    ClientImpl.prototype._traceMask = function (traceObject, masked) {
        var traceObjectMasked = {};
        for (var attr in traceObject) {
            if (traceObject.hasOwnProperty(attr)) {
                if (attr == masked)
                    traceObjectMasked[attr] = '******';
                else
                    traceObjectMasked[attr] = traceObject[attr];
            }
        }
        return traceObjectMasked;
    };
    var Client = function (host, port, clientId) {
        if (typeof host !== 'string')
            throw new Error(format(ERROR.INVALID_TYPE, [
                typeof host,
                'host'
            ]));
        if (typeof port !== 'number' || port < 0)
            throw new Error(format(ERROR.INVALID_TYPE, [
                typeof port,
                'port'
            ]));
        var clientIdLength = 0;
        for (var i = 0; i < clientId.length; i++) {
            var charCode = clientId.charCodeAt(i);
            if (55296 <= charCode && charCode <= 56319) {
                i++;
            }
            clientIdLength++;
        }
        if (typeof clientId !== 'string' || clientIdLength < 1 | clientIdLength > 23)
            throw new Error(format(ERROR.INVALID_ARGUMENT, [
                clientId,
                'clientId'
            ]));
        var client = new ClientImpl(host, port, clientId);
        this._getHost = function () {
            return client.host;
        };
        this._setHost = function () {
            throw new Error(format(ERROR.UNSUPPORTED_OPERATION));
        };
        this._getPort = function () {
            return client.port;
        };
        this._setPort = function () {
            throw new Error(format(ERROR.UNSUPPORTED_OPERATION));
        };
        this._getClientId = function () {
            return client.clientId;
        };
        this._setClientId = function () {
            throw new Error(format(ERROR.UNSUPPORTED_OPERATION));
        };
        this._getOnConnectionLost = function () {
            return client.onConnectionLost;
        };
        this._setOnConnectionLost = function (newOnConnectionLost) {
            if (typeof newOnConnectionLost === 'function')
                client.onConnectionLost = newOnConnectionLost;
            else
                throw new Error(format(ERROR.INVALID_TYPE, [
                    typeof newOnConnectionLost,
                    'onConnectionLost'
                ]));
        };
        this._getOnMessageDelivered = function () {
            return client.onMessageDelivered;
        };
        this._setOnMessageDelivered = function (newOnMessageDelivered) {
            if (typeof newOnMessageDelivered === 'function')
                client.onMessageDelivered = newOnMessageDelivered;
            else
                throw new Error(format(ERROR.INVALID_TYPE, [
                    typeof newOnMessageDelivered,
                    'onMessageDelivered'
                ]));
        };
        this._getOnMessageArrived = function () {
            return client.onMessageArrived;
        };
        this._setOnMessageArrived = function (newOnMessageArrived) {
            if (typeof newOnMessageArrived === 'function')
                client.onMessageArrived = newOnMessageArrived;
            else
                throw new Error(format(ERROR.INVALID_TYPE, [
                    typeof newOnMessageArrived,
                    'onMessageArrived'
                ]));
        };
        this.connect = function (connectOptions) {
            connectOptions = connectOptions || {};
            validate(connectOptions, {
                timeout: 'number',
                userName: 'string',
                password: 'string',
                willMessage: 'object',
                keepAliveInterval: 'number',
                cleanSession: 'boolean',
                useSSL: 'boolean',
                invocationContext: 'object',
                onSuccess: 'function',
                onFailure: 'function',
                hosts: 'object',
                ports: 'object'
            });
            if (connectOptions.keepAliveInterval === undefined)
                connectOptions.keepAliveInterval = 60;
            if (connectOptions.willMessage) {
                if (!(connectOptions.willMessage instanceof Message))
                    throw new Error(format(ERROR.INVALID_TYPE, [
                        connectOptions.willMessage,
                        'connectOptions.willMessage'
                    ]));
                connectOptions.willMessage.stringPayload;
                if (typeof connectOptions.willMessage.destinationName === 'undefined')
                    throw new Error(format(ERROR.INVALID_TYPE, [
                        typeof connectOptions.willMessage.destinationName,
                        'connectOptions.willMessage.destinationName'
                    ]));
            }
            if (typeof connectOptions.cleanSession === 'undefined')
                connectOptions.cleanSession = true;
            if (connectOptions.hosts) {
                if (!connectOptions.ports)
                    throw new Error(format(ERROR.INVALID_ARGUMENT, [
                        connectOptions.ports,
                        'connectOptions.ports'
                    ]));
                if (!(connectOptions.hosts instanceof Array))
                    throw new Error(format(ERROR.INVALID_ARGUMENT, [
                        connectOptions.hosts,
                        'connectOptions.hosts'
                    ]));
                if (!(connectOptions.ports instanceof Array))
                    throw new Error(format(ERROR.INVALID_ARGUMENT, [
                        connectOptions.ports,
                        'connectOptions.ports'
                    ]));
                if (connectOptions.hosts.length < 1)
                    throw new Error(format(ERROR.INVALID_ARGUMENT, [
                        connectOptions.hosts,
                        'connectOptions.hosts'
                    ]));
                if (connectOptions.hosts.length != connectOptions.ports.length)
                    throw new Error(format(ERROR.INVALID_ARGUMENT, [
                        connectOptions.ports,
                        'connectOptions.ports'
                    ]));
                for (var i = 0; i < connectOptions.hosts.length; i++) {
                    if (typeof connectOptions.hosts[i] !== 'string')
                        throw new Error(format(ERROR.INVALID_TYPE, [
                            typeof connectOptions.hosts[i],
                            'connectOptions.hosts[' + i + ']'
                        ]));
                    if (typeof connectOptions.ports[i] !== 'number' || connectOptions.ports[i] < 0)
                        throw new Error(format(ERROR.INVALID_TYPE, [
                            typeof connectOptions.ports[i],
                            'connectOptions.ports[' + i + ']'
                        ]));
                }
            }
            client.connect(connectOptions);
        };
        this.subscribe = function (filter, subscribeOptions) {
            if (typeof filter !== 'string')
                throw new Error('Invalid argument:' + filter);
            subscribeOptions = subscribeOptions || {};
            validate(subscribeOptions, {
                qos: 'number',
                invocationContext: 'object',
                onSuccess: 'function',
                onFailure: 'function',
                timeout: 'number'
            });
            if (subscribeOptions.timeout && !subscribeOptions.onFailure)
                throw new Error('subscribeOptions.timeout specified with no onFailure callback.');
            if (typeof subscribeOptions.qos !== 'undefined' && !(subscribeOptions.qos === 0 || subscribeOptions.qos === 1 || subscribeOptions.qos === 2))
                throw new Error(format(ERROR.INVALID_ARGUMENT, [
                    subscribeOptions.qos,
                    'subscribeOptions.qos'
                ]));
            client.subscribe(filter, subscribeOptions);
        };
        this.unsubscribe = function (filter, unsubscribeOptions) {
            if (typeof filter !== 'string')
                throw new Error('Invalid argument:' + filter);
            unsubscribeOptions = unsubscribeOptions || {};
            validate(unsubscribeOptions, {
                invocationContext: 'object',
                onSuccess: 'function',
                onFailure: 'function',
                timeout: 'number'
            });
            if (unsubscribeOptions.timeout && !unsubscribeOptions.onFailure)
                throw new Error('unsubscribeOptions.timeout specified with no onFailure callback.');
            client.unsubscribe(filter, unsubscribeOptions);
        };
        this.send = function (message) {
            if (!(message instanceof Message))
                throw new Error('Invalid argument:' + typeof message);
            if (typeof message.destinationName === 'undefined')
                throw new Error('Invalid parameter Message.destinationName:' + message.destinationName);
            client.send(message);
        };
        this.disconnect = function () {
            client.disconnect();
        };
        this.getTraceLog = function () {
            return client.getTraceLog();
        };
        this.startTrace = function () {
            client.startTrace();
        };
        this.stopTrace = function () {
            client.stopTrace();
        };
    };
    Client.prototype = {
        get host() {
            return this._getHost();
        },
        set host(newHost) {
            this._setHost(newHost);
        },
        get port() {
            return this._getPort();
        },
        set port(newPort) {
            this._setPort(newPort);
        },
        get clientId() {
            return this._getClientId();
        },
        set clientId(newClientId) {
            this._setClientId(newClientId);
        },
        get onConnectionLost() {
            return this._getOnConnectionLost();
        },
        set onConnectionLost(newOnConnectionLost) {
            this._setOnConnectionLost(newOnConnectionLost);
        },
        get onMessageDelivered() {
            return this._getOnMessageDelivered();
        },
        set onMessageDelivered(newOnMessageDelivered) {
            this._setOnMessageDelivered(newOnMessageDelivered);
        },
        get onMessageArrived() {
            return this._getOnMessageArrived();
        },
        set onMessageArrived(newOnMessageArrived) {
            this._setOnMessageArrived(newOnMessageArrived);
        }
    };
    var Message = function (newPayload) {
        var payload;
        if (typeof newPayload === 'string' || newPayload instanceof ArrayBuffer || newPayload instanceof Int8Array || newPayload instanceof Uint8Array || newPayload instanceof Int16Array || newPayload instanceof Uint16Array || newPayload instanceof Int32Array || newPayload instanceof Uint32Array || newPayload instanceof Float32Array || newPayload instanceof Float64Array) {
            payload = newPayload;
        } else {
            throw format(ERROR.INVALID_ARGUMENT, [
                newPayload,
                'newPayload'
            ]);
        }
        this._getPayloadString = function () {
            if (typeof payload === 'string')
                return payload;
            else
                return parseUTF8(payload, 0, payload.length);
        };
        this._getPayloadBytes = function () {
            if (typeof payload === 'string') {
                var buffer = new ArrayBuffer(UTF8Length(payload));
                var byteStream = new Uint8Array(buffer);
                stringToUTF8(payload, byteStream, 0);
                return byteStream;
            } else {
                return payload;
            }
            ;
        };
        var destinationName = undefined;
        this._getDestinationName = function () {
            return destinationName;
        };
        this._setDestinationName = function (newDestinationName) {
            if (typeof newDestinationName === 'string')
                destinationName = newDestinationName;
            else
                throw new Error(format(ERROR.INVALID_ARGUMENT, [
                    newDestinationName,
                    'newDestinationName'
                ]));
        };
        var qos = 0;
        this._getQos = function () {
            return qos;
        };
        this._setQos = function (newQos) {
            if (newQos === 0 || newQos === 1 || newQos === 2)
                qos = newQos;
            else
                throw new Error('Invalid argument:' + newQos);
        };
        var retained = false;
        this._getRetained = function () {
            return retained;
        };
        this._setRetained = function (newRetained) {
            if (typeof newRetained === 'boolean')
                retained = newRetained;
            else
                throw new Error(format(ERROR.INVALID_ARGUMENT, [
                    newRetained,
                    'newRetained'
                ]));
        };
        var duplicate = false;
        this._getDuplicate = function () {
            return duplicate;
        };
        this._setDuplicate = function (newDuplicate) {
            duplicate = newDuplicate;
        };
    };
    Message.prototype = {
        get payloadString() {
            return this._getPayloadString();
        },
        get payloadBytes() {
            return this._getPayloadBytes();
        },
        get destinationName() {
            return this._getDestinationName();
        },
        set destinationName(newDestinationName) {
            this._setDestinationName(newDestinationName);
        },
        get qos() {
            return this._getQos();
        },
        set qos(newQos) {
            this._setQos(newQos);
        },
        get retained() {
            return this._getRetained();
        },
        set retained(newRetained) {
            this._setRetained(newRetained);
        },
        get duplicate() {
            return this._getDuplicate();
        },
        set duplicate(newDuplicate) {
            this._setDuplicate(newDuplicate);
        }
    };
    return {
        Client: Client,
        Message: Message
    };
});
define('iot/_public/regions', ['require'], function (require) {
    'use strict';
    var region = [{
            id: '086',
            name: '\u4E2D\u56FD',
            provinces: [
                {
                    id: 110000,
                    name: '\u5317\u4EAC\u5E02',
                    cities: []
                },
                {
                    id: 120000,
                    name: '\u5929\u6D25\u5E02',
                    cities: []
                },
                {
                    id: 130000,
                    name: '\u6CB3\u5317\u7701',
                    cities: [
                        {
                            id: 130100,
                            name: '\u77F3\u5BB6\u5E84\u5E02'
                        },
                        {
                            id: 130200,
                            name: '\u5510\u5C71\u5E02'
                        },
                        {
                            id: 130300,
                            name: '\u79E6\u7687\u5C9B\u5E02'
                        },
                        {
                            id: 130400,
                            name: '\u90AF\u90F8\u5E02'
                        },
                        {
                            id: 130500,
                            name: '\u90A2\u53F0\u5E02'
                        },
                        {
                            id: 130600,
                            name: '\u4FDD\u5B9A\u5E02'
                        },
                        {
                            id: 130700,
                            name: '\u5F20\u5BB6\u53E3\u5E02'
                        },
                        {
                            id: 130800,
                            name: '\u627F\u5FB7\u5E02'
                        },
                        {
                            id: 130900,
                            name: '\u6CA7\u5DDE\u5E02'
                        },
                        {
                            id: 131000,
                            name: '\u5ECA\u574A\u5E02'
                        },
                        {
                            id: 131100,
                            name: '\u8861\u6C34\u5E02'
                        }
                    ]
                },
                {
                    id: 140000,
                    name: '\u5C71\u897F\u7701',
                    cities: [
                        {
                            id: 140100,
                            name: '\u592A\u539F\u5E02'
                        },
                        {
                            id: 140200,
                            name: '\u5927\u540C\u5E02'
                        },
                        {
                            id: 140300,
                            name: '\u9633\u6CC9\u5E02'
                        },
                        {
                            id: 140400,
                            name: '\u957F\u6CBB\u5E02'
                        },
                        {
                            id: 140500,
                            name: '\u664B\u57CE\u5E02'
                        },
                        {
                            id: 140600,
                            name: '\u6714\u5DDE\u5E02'
                        },
                        {
                            id: 140700,
                            name: '\u664B\u4E2D\u5E02'
                        },
                        {
                            id: 140800,
                            name: '\u8FD0\u57CE\u5E02'
                        },
                        {
                            id: 140900,
                            name: '\u5FFB\u5DDE\u5E02'
                        },
                        {
                            id: 141000,
                            name: '\u4E34\u6C7E\u5E02'
                        },
                        {
                            id: 141100,
                            name: '\u5415\u6881\u5E02'
                        }
                    ]
                },
                {
                    id: 150000,
                    name: '\u5185\u8499\u53E4\u81EA\u6CBB\u533A',
                    cities: [
                        {
                            id: 150100,
                            name: '\u547C\u548C\u6D69\u7279\u5E02'
                        },
                        {
                            id: 150200,
                            name: '\u5305\u5934\u5E02'
                        },
                        {
                            id: 150300,
                            name: '\u4E4C\u6D77\u5E02'
                        },
                        {
                            id: 150400,
                            name: '\u8D64\u5CF0\u5E02'
                        },
                        {
                            id: 150500,
                            name: '\u901A\u8FBD\u5E02'
                        },
                        {
                            id: 150600,
                            name: '\u9102\u5C14\u591A\u65AF\u5E02'
                        },
                        {
                            id: 150700,
                            name: '\u547C\u4F26\u8D1D\u5C14\u5E02'
                        },
                        {
                            id: 150800,
                            name: '\u5DF4\u5F66\u6DD6\u5C14\u5E02'
                        },
                        {
                            id: 150900,
                            name: '\u4E4C\u5170\u5BDF\u5E03\u5E02'
                        },
                        {
                            id: 152200,
                            name: '\u5174\u5B89\u76DF'
                        },
                        {
                            id: 152500,
                            name: '\u9521\u6797\u90ED\u52D2\u76DF'
                        },
                        {
                            id: 152900,
                            name: '\u963F\u62C9\u5584\u76DF'
                        }
                    ]
                },
                {
                    id: 210000,
                    name: '\u8FBD\u5B81\u7701',
                    cities: [
                        {
                            id: 210100,
                            name: '\u6C88\u9633\u5E02'
                        },
                        {
                            id: 210200,
                            name: '\u5927\u8FDE\u5E02'
                        },
                        {
                            id: 210300,
                            name: '\u978D\u5C71\u5E02'
                        },
                        {
                            id: 210400,
                            name: '\u629A\u987A\u5E02'
                        },
                        {
                            id: 210500,
                            name: '\u672C\u6EAA\u5E02'
                        },
                        {
                            id: 210600,
                            name: '\u4E39\u4E1C\u5E02'
                        },
                        {
                            id: 210700,
                            name: '\u9526\u5DDE\u5E02'
                        },
                        {
                            id: 210800,
                            name: '\u8425\u53E3\u5E02'
                        },
                        {
                            id: 210900,
                            name: '\u961C\u65B0\u5E02'
                        },
                        {
                            id: 211000,
                            name: '\u8FBD\u9633\u5E02'
                        },
                        {
                            id: 211100,
                            name: '\u76D8\u9526\u5E02'
                        },
                        {
                            id: 211200,
                            name: '\u94C1\u5CAD\u5E02'
                        },
                        {
                            id: 211300,
                            name: '\u671D\u9633\u5E02'
                        },
                        {
                            id: 211400,
                            name: '\u846B\u82A6\u5C9B\u5E02'
                        }
                    ]
                },
                {
                    id: 220000,
                    name: '\u5409\u6797\u7701',
                    cities: [
                        {
                            id: 220100,
                            name: '\u957F\u6625\u5E02'
                        },
                        {
                            id: 220200,
                            name: '\u5409\u6797\u5E02'
                        },
                        {
                            id: 220300,
                            name: '\u56DB\u5E73\u5E02'
                        },
                        {
                            id: 220400,
                            name: '\u8FBD\u6E90\u5E02'
                        },
                        {
                            id: 220500,
                            name: '\u901A\u5316\u5E02'
                        },
                        {
                            id: 220600,
                            name: '\u767D\u5C71\u5E02'
                        },
                        {
                            id: 220700,
                            name: '\u677E\u539F\u5E02'
                        },
                        {
                            id: 220800,
                            name: '\u767D\u57CE\u5E02'
                        },
                        {
                            id: 222400,
                            name: '\u5EF6\u8FB9\u671D\u9C9C\u65CF\u81EA\u6CBB\u5DDE'
                        }
                    ]
                },
                {
                    id: 230000,
                    name: '\u9ED1\u9F99\u6C5F\u7701',
                    cities: [
                        {
                            id: 230100,
                            name: '\u54C8\u5C14\u6EE8\u5E02'
                        },
                        {
                            id: 230200,
                            name: '\u9F50\u9F50\u54C8\u5C14\u5E02'
                        },
                        {
                            id: 230300,
                            name: '\u9E21\u897F\u5E02'
                        },
                        {
                            id: 230400,
                            name: '\u9E64\u5C97\u5E02'
                        },
                        {
                            id: 230500,
                            name: '\u53CC\u9E2D\u5C71\u5E02'
                        },
                        {
                            id: 230600,
                            name: '\u5927\u5E86\u5E02'
                        },
                        {
                            id: 230700,
                            name: '\u4F0A\u6625\u5E02'
                        },
                        {
                            id: 230800,
                            name: '\u4F73\u6728\u65AF\u5E02'
                        },
                        {
                            id: 230900,
                            name: '\u4E03\u53F0\u6CB3\u5E02'
                        },
                        {
                            id: 231000,
                            name: '\u7261\u4E39\u6C5F\u5E02'
                        },
                        {
                            id: 231100,
                            name: '\u9ED1\u6CB3\u5E02'
                        },
                        {
                            id: 231200,
                            name: '\u7EE5\u5316\u5E02'
                        },
                        {
                            id: 232700,
                            name: '\u5927\u5174\u5B89\u5CAD\u5730\u533A'
                        }
                    ]
                },
                {
                    id: 310000,
                    name: '\u4E0A\u6D77\u5E02',
                    cities: []
                },
                {
                    id: 320000,
                    name: '\u6C5F\u82CF\u7701',
                    cities: [
                        {
                            id: 320100,
                            name: '\u5357\u4EAC\u5E02'
                        },
                        {
                            id: 320200,
                            name: '\u65E0\u9521\u5E02'
                        },
                        {
                            id: 320300,
                            name: '\u5F90\u5DDE\u5E02'
                        },
                        {
                            id: 320400,
                            name: '\u5E38\u5DDE\u5E02'
                        },
                        {
                            id: 320500,
                            name: '\u82CF\u5DDE\u5E02'
                        },
                        {
                            id: 320600,
                            name: '\u5357\u901A\u5E02'
                        },
                        {
                            id: 320700,
                            name: '\u8FDE\u4E91\u6E2F\u5E02'
                        },
                        {
                            id: 320800,
                            name: '\u6DEE\u5B89\u5E02'
                        },
                        {
                            id: 320900,
                            name: '\u76D0\u57CE\u5E02'
                        },
                        {
                            id: 321000,
                            name: '\u626C\u5DDE\u5E02'
                        },
                        {
                            id: 321100,
                            name: '\u9547\u6C5F\u5E02'
                        },
                        {
                            id: 321200,
                            name: '\u6CF0\u5DDE\u5E02'
                        },
                        {
                            id: 321300,
                            name: '\u5BBF\u8FC1\u5E02'
                        }
                    ]
                },
                {
                    id: 330000,
                    name: '\u6D59\u6C5F\u7701',
                    cities: [
                        {
                            id: 330100,
                            name: '\u676D\u5DDE\u5E02'
                        },
                        {
                            id: 330200,
                            name: '\u5B81\u6CE2\u5E02'
                        },
                        {
                            id: 330300,
                            name: '\u6E29\u5DDE\u5E02'
                        },
                        {
                            id: 330400,
                            name: '\u5609\u5174\u5E02'
                        },
                        {
                            id: 330500,
                            name: '\u6E56\u5DDE\u5E02'
                        },
                        {
                            id: 330600,
                            name: '\u7ECD\u5174\u5E02'
                        },
                        {
                            id: 330700,
                            name: '\u91D1\u534E\u5E02'
                        },
                        {
                            id: 330800,
                            name: '\u8862\u5DDE\u5E02'
                        },
                        {
                            id: 330900,
                            name: '\u821F\u5C71\u5E02'
                        },
                        {
                            id: 331000,
                            name: '\u53F0\u5DDE\u5E02'
                        },
                        {
                            id: 331100,
                            name: '\u4E3D\u6C34\u5E02'
                        }
                    ]
                },
                {
                    id: 340000,
                    name: '\u5B89\u5FBD\u7701',
                    cities: [
                        {
                            id: 340100,
                            name: '\u5408\u80A5\u5E02'
                        },
                        {
                            id: 340200,
                            name: '\u829C\u6E56\u5E02'
                        },
                        {
                            id: 340300,
                            name: '\u868C\u57E0\u5E02'
                        },
                        {
                            id: 340400,
                            name: '\u6DEE\u5357\u5E02'
                        },
                        {
                            id: 340500,
                            name: '\u9A6C\u978D\u5C71\u5E02'
                        },
                        {
                            id: 340600,
                            name: '\u6DEE\u5317\u5E02'
                        },
                        {
                            id: 340700,
                            name: '\u94DC\u9675\u5E02'
                        },
                        {
                            id: 340800,
                            name: '\u5B89\u5E86\u5E02'
                        },
                        {
                            id: 341000,
                            name: '\u9EC4\u5C71\u5E02'
                        },
                        {
                            id: 341100,
                            name: '\u6EC1\u5DDE\u5E02'
                        },
                        {
                            id: 341200,
                            name: '\u961C\u9633\u5E02'
                        },
                        {
                            id: 341300,
                            name: '\u5BBF\u5DDE\u5E02'
                        },
                        {
                            id: 341400,
                            name: '\u5DE2\u6E56\u5E02'
                        },
                        {
                            id: 341500,
                            name: '\u516D\u5B89\u5E02'
                        },
                        {
                            id: 341600,
                            name: '\u4EB3\u5DDE\u5E02'
                        },
                        {
                            id: 341700,
                            name: '\u6C60\u5DDE\u5E02'
                        },
                        {
                            id: 341800,
                            name: '\u5BA3\u57CE\u5E02'
                        }
                    ]
                },
                {
                    id: 350000,
                    name: '\u798F\u5EFA\u7701',
                    cities: [
                        {
                            id: 350100,
                            name: '\u798F\u5DDE\u5E02'
                        },
                        {
                            id: 350200,
                            name: '\u53A6\u95E8\u5E02'
                        },
                        {
                            id: 350300,
                            name: '\u8386\u7530\u5E02'
                        },
                        {
                            id: 350400,
                            name: '\u4E09\u660E\u5E02'
                        },
                        {
                            id: 350500,
                            name: '\u6CC9\u5DDE\u5E02'
                        },
                        {
                            id: 350600,
                            name: '\u6F33\u5DDE\u5E02'
                        },
                        {
                            id: 350700,
                            name: '\u5357\u5E73\u5E02'
                        },
                        {
                            id: 350800,
                            name: '\u9F99\u5CA9\u5E02'
                        },
                        {
                            id: 350900,
                            name: '\u5B81\u5FB7\u5E02'
                        }
                    ]
                },
                {
                    id: 360000,
                    name: '\u6C5F\u897F\u7701',
                    cities: [
                        {
                            id: 360100,
                            name: '\u5357\u660C\u5E02'
                        },
                        {
                            id: 360200,
                            name: '\u666F\u5FB7\u9547\u5E02'
                        },
                        {
                            id: 360300,
                            name: '\u840D\u4E61\u5E02'
                        },
                        {
                            id: 360400,
                            name: '\u4E5D\u6C5F\u5E02'
                        },
                        {
                            id: 360500,
                            name: '\u65B0\u4F59\u5E02'
                        },
                        {
                            id: 360600,
                            name: '\u9E70\u6F6D\u5E02'
                        },
                        {
                            id: 360700,
                            name: '\u8D63\u5DDE\u5E02'
                        },
                        {
                            id: 360800,
                            name: '\u5409\u5B89\u5E02'
                        },
                        {
                            id: 360900,
                            name: '\u5B9C\u6625\u5E02'
                        },
                        {
                            id: 361000,
                            name: '\u629A\u5DDE\u5E02'
                        },
                        {
                            id: 361100,
                            name: '\u4E0A\u9976\u5E02'
                        }
                    ]
                },
                {
                    id: 370000,
                    name: '\u5C71\u4E1C\u7701',
                    cities: [
                        {
                            id: 370100,
                            name: '\u6D4E\u5357\u5E02'
                        },
                        {
                            id: 370200,
                            name: '\u9752\u5C9B\u5E02'
                        },
                        {
                            id: 370300,
                            name: '\u6DC4\u535A\u5E02'
                        },
                        {
                            id: 370400,
                            name: '\u67A3\u5E84\u5E02'
                        },
                        {
                            id: 370500,
                            name: '\u4E1C\u8425\u5E02'
                        },
                        {
                            id: 370600,
                            name: '\u70DF\u53F0\u5E02'
                        },
                        {
                            id: 370700,
                            name: '\u6F4D\u574A\u5E02'
                        },
                        {
                            id: 370800,
                            name: '\u6D4E\u5B81\u5E02'
                        },
                        {
                            id: 370900,
                            name: '\u6CF0\u5B89\u5E02'
                        },
                        {
                            id: 371000,
                            name: '\u5A01\u6D77\u5E02'
                        },
                        {
                            id: 371100,
                            name: '\u65E5\u7167\u5E02'
                        },
                        {
                            id: 371200,
                            name: '\u83B1\u829C\u5E02'
                        },
                        {
                            id: 371300,
                            name: '\u4E34\u6C82\u5E02'
                        },
                        {
                            id: 371400,
                            name: '\u5FB7\u5DDE\u5E02'
                        },
                        {
                            id: 371500,
                            name: '\u804A\u57CE\u5E02'
                        },
                        {
                            id: 371600,
                            name: '\u6EE8\u5DDE\u5E02'
                        },
                        {
                            id: 371700,
                            name: '\u83CF\u6CFD\u5E02'
                        }
                    ]
                },
                {
                    id: 410000,
                    name: '\u6CB3\u5357\u7701',
                    cities: [
                        {
                            id: 410100,
                            name: '\u90D1\u5DDE\u5E02'
                        },
                        {
                            id: 410200,
                            name: '\u5F00\u5C01\u5E02'
                        },
                        {
                            id: 410300,
                            name: '\u6D1B\u9633\u5E02'
                        },
                        {
                            id: 410400,
                            name: '\u5E73\u9876\u5C71\u5E02'
                        },
                        {
                            id: 410500,
                            name: '\u5B89\u9633\u5E02'
                        },
                        {
                            id: 410600,
                            name: '\u9E64\u58C1\u5E02'
                        },
                        {
                            id: 410700,
                            name: '\u65B0\u4E61\u5E02'
                        },
                        {
                            id: 410800,
                            name: '\u7126\u4F5C\u5E02'
                        },
                        {
                            id: 410900,
                            name: '\u6FEE\u9633\u5E02'
                        },
                        {
                            id: 411000,
                            name: '\u8BB8\u660C\u5E02'
                        },
                        {
                            id: 411100,
                            name: '\u6F2F\u6CB3\u5E02'
                        },
                        {
                            id: 411200,
                            name: '\u4E09\u95E8\u5CE1\u5E02'
                        },
                        {
                            id: 411300,
                            name: '\u5357\u9633\u5E02'
                        },
                        {
                            id: 411400,
                            name: '\u5546\u4E18\u5E02'
                        },
                        {
                            id: 411500,
                            name: '\u4FE1\u9633\u5E02'
                        },
                        {
                            id: 411600,
                            name: '\u5468\u53E3\u5E02'
                        },
                        {
                            id: 411700,
                            name: '\u9A7B\u9A6C\u5E97\u5E02'
                        }
                    ]
                },
                {
                    id: 420000,
                    name: '\u6E56\u5317\u7701',
                    cities: [
                        {
                            id: 420100,
                            name: '\u6B66\u6C49\u5E02'
                        },
                        {
                            id: 420200,
                            name: '\u9EC4\u77F3\u5E02'
                        },
                        {
                            id: 420300,
                            name: '\u5341\u5830\u5E02'
                        },
                        {
                            id: 420500,
                            name: '\u5B9C\u660C\u5E02'
                        },
                        {
                            id: 420600,
                            name: '\u8944\u6A0A\u5E02'
                        },
                        {
                            id: 420700,
                            name: '\u9102\u5DDE\u5E02'
                        },
                        {
                            id: 420800,
                            name: '\u8346\u95E8\u5E02'
                        },
                        {
                            id: 420900,
                            name: '\u5B5D\u611F\u5E02'
                        },
                        {
                            id: 421000,
                            name: '\u8346\u5DDE\u5E02'
                        },
                        {
                            id: 421100,
                            name: '\u9EC4\u5188\u5E02'
                        },
                        {
                            id: 421200,
                            name: '\u54B8\u5B81\u5E02'
                        },
                        {
                            id: 421300,
                            name: '\u968F\u5DDE\u5E02'
                        },
                        {
                            id: 422800,
                            name: '\u6069\u65BD\u571F\u5BB6\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 429000,
                            name: '\u7701\u76F4\u8F96\u884C\u653F\u5355\u4F4D'
                        }
                    ]
                },
                {
                    id: 430000,
                    name: '\u6E56\u5357\u7701',
                    cities: [
                        {
                            id: 430100,
                            name: '\u957F\u6C99\u5E02'
                        },
                        {
                            id: 430200,
                            name: '\u682A\u6D32\u5E02'
                        },
                        {
                            id: 430300,
                            name: '\u6E58\u6F6D\u5E02'
                        },
                        {
                            id: 430400,
                            name: '\u8861\u9633\u5E02'
                        },
                        {
                            id: 430500,
                            name: '\u90B5\u9633\u5E02'
                        },
                        {
                            id: 430600,
                            name: '\u5CB3\u9633\u5E02'
                        },
                        {
                            id: 430700,
                            name: '\u5E38\u5FB7\u5E02'
                        },
                        {
                            id: 430800,
                            name: '\u5F20\u5BB6\u754C\u5E02'
                        },
                        {
                            id: 430900,
                            name: '\u76CA\u9633\u5E02'
                        },
                        {
                            id: 431000,
                            name: '\u90F4\u5DDE\u5E02'
                        },
                        {
                            id: 431100,
                            name: '\u6C38\u5DDE\u5E02'
                        },
                        {
                            id: 431200,
                            name: '\u6000\u5316\u5E02'
                        },
                        {
                            id: 431300,
                            name: '\u5A04\u5E95\u5E02'
                        },
                        {
                            id: 433100,
                            name: '\u6E58\u897F\u571F\u5BB6\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE'
                        }
                    ]
                },
                {
                    id: 440000,
                    name: '\u5E7F\u4E1C\u7701',
                    cities: [
                        {
                            id: 440100,
                            name: '\u5E7F\u5DDE\u5E02'
                        },
                        {
                            id: 440200,
                            name: '\u97F6\u5173\u5E02'
                        },
                        {
                            id: 440300,
                            name: '\u6DF1\u5733\u5E02'
                        },
                        {
                            id: 440400,
                            name: '\u73E0\u6D77\u5E02'
                        },
                        {
                            id: 440500,
                            name: '\u6C55\u5934\u5E02'
                        },
                        {
                            id: 440600,
                            name: '\u4F5B\u5C71\u5E02'
                        },
                        {
                            id: 440700,
                            name: '\u6C5F\u95E8\u5E02'
                        },
                        {
                            id: 440800,
                            name: '\u6E5B\u6C5F\u5E02'
                        },
                        {
                            id: 440900,
                            name: '\u8302\u540D\u5E02'
                        },
                        {
                            id: 441200,
                            name: '\u8087\u5E86\u5E02'
                        },
                        {
                            id: 441300,
                            name: '\u60E0\u5DDE\u5E02'
                        },
                        {
                            id: 441400,
                            name: '\u6885\u5DDE\u5E02'
                        },
                        {
                            id: 441500,
                            name: '\u6C55\u5C3E\u5E02'
                        },
                        {
                            id: 441600,
                            name: '\u6CB3\u6E90\u5E02'
                        },
                        {
                            id: 441700,
                            name: '\u9633\u6C5F\u5E02'
                        },
                        {
                            id: 441800,
                            name: '\u6E05\u8FDC\u5E02'
                        },
                        {
                            id: 441900,
                            name: '\u4E1C\u839E\u5E02'
                        },
                        {
                            id: 442000,
                            name: '\u4E2D\u5C71\u5E02'
                        },
                        {
                            id: 445100,
                            name: '\u6F6E\u5DDE\u5E02'
                        },
                        {
                            id: 445200,
                            name: '\u63ED\u9633\u5E02'
                        },
                        {
                            id: 445300,
                            name: '\u4E91\u6D6E\u5E02'
                        }
                    ]
                },
                {
                    id: 450000,
                    name: '\u5E7F\u897F\u58EE\u65CF\u81EA\u6CBB\u533A',
                    cities: [
                        {
                            id: 450100,
                            name: '\u5357\u5B81\u5E02'
                        },
                        {
                            id: 450200,
                            name: '\u67F3\u5DDE\u5E02'
                        },
                        {
                            id: 450300,
                            name: '\u6842\u6797\u5E02'
                        },
                        {
                            id: 450400,
                            name: '\u68A7\u5DDE\u5E02'
                        },
                        {
                            id: 450500,
                            name: '\u5317\u6D77\u5E02'
                        },
                        {
                            id: 450600,
                            name: '\u9632\u57CE\u6E2F\u5E02'
                        },
                        {
                            id: 450700,
                            name: '\u94A6\u5DDE\u5E02'
                        },
                        {
                            id: 450800,
                            name: '\u8D35\u6E2F\u5E02'
                        },
                        {
                            id: 450900,
                            name: '\u7389\u6797\u5E02'
                        },
                        {
                            id: 451000,
                            name: '\u767E\u8272\u5E02'
                        },
                        {
                            id: 451100,
                            name: '\u8D3A\u5DDE\u5E02'
                        },
                        {
                            id: 451200,
                            name: '\u6CB3\u6C60\u5E02'
                        },
                        {
                            id: 451300,
                            name: '\u6765\u5BBE\u5E02'
                        },
                        {
                            id: 451400,
                            name: '\u5D07\u5DE6\u5E02'
                        }
                    ]
                },
                {
                    id: 460000,
                    name: '\u6D77\u5357\u7701',
                    cities: [
                        {
                            id: 460100,
                            name: '\u6D77\u53E3\u5E02'
                        },
                        {
                            id: 460200,
                            name: '\u4E09\u4E9A\u5E02'
                        },
                        {
                            id: 469000,
                            name: '\u7701\u76F4\u8F96\u53BF\u7EA7\u884C\u653F\u5355\u4F4D'
                        }
                    ]
                },
                {
                    id: 500000,
                    name: '\u91CD\u5E86\u5E02',
                    cities: []
                },
                {
                    id: 510000,
                    name: '\u56DB\u5DDD\u7701',
                    cities: [
                        {
                            id: 510100,
                            name: '\u6210\u90FD\u5E02'
                        },
                        {
                            id: 510300,
                            name: '\u81EA\u8D21\u5E02'
                        },
                        {
                            id: 510400,
                            name: '\u6500\u679D\u82B1\u5E02'
                        },
                        {
                            id: 510500,
                            name: '\u6CF8\u5DDE\u5E02'
                        },
                        {
                            id: 510600,
                            name: '\u5FB7\u9633\u5E02'
                        },
                        {
                            id: 510700,
                            name: '\u7EF5\u9633\u5E02'
                        },
                        {
                            id: 510800,
                            name: '\u5E7F\u5143\u5E02'
                        },
                        {
                            id: 510900,
                            name: '\u9042\u5B81\u5E02'
                        },
                        {
                            id: 511000,
                            name: '\u5185\u6C5F\u5E02'
                        },
                        {
                            id: 511100,
                            name: '\u4E50\u5C71\u5E02'
                        },
                        {
                            id: 511300,
                            name: '\u5357\u5145\u5E02'
                        },
                        {
                            id: 511400,
                            name: '\u7709\u5C71\u5E02'
                        },
                        {
                            id: 511500,
                            name: '\u5B9C\u5BBE\u5E02'
                        },
                        {
                            id: 511600,
                            name: '\u5E7F\u5B89\u5E02'
                        },
                        {
                            id: 511700,
                            name: '\u8FBE\u5DDE\u5E02'
                        },
                        {
                            id: 511800,
                            name: '\u96C5\u5B89\u5E02'
                        },
                        {
                            id: 511900,
                            name: '\u5DF4\u4E2D\u5E02'
                        },
                        {
                            id: 512000,
                            name: '\u8D44\u9633\u5E02'
                        },
                        {
                            id: 513200,
                            name: '\u963F\u575D\u85CF\u65CF\u7F8C\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 513300,
                            name: '\u7518\u5B5C\u85CF\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 513400,
                            name: '\u51C9\u5C71\u5F5D\u65CF\u81EA\u6CBB\u5DDE'
                        }
                    ]
                },
                {
                    id: 520000,
                    name: '\u8D35\u5DDE\u7701',
                    cities: [
                        {
                            id: 520100,
                            name: '\u8D35\u9633\u5E02'
                        },
                        {
                            id: 520200,
                            name: '\u516D\u76D8\u6C34\u5E02'
                        },
                        {
                            id: 520300,
                            name: '\u9075\u4E49\u5E02'
                        },
                        {
                            id: 520400,
                            name: '\u5B89\u987A\u5E02'
                        },
                        {
                            id: 522200,
                            name: '\u94DC\u4EC1\u5730\u533A'
                        },
                        {
                            id: 522300,
                            name: '\u9ED4\u897F\u5357\u5E03\u4F9D\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 522400,
                            name: '\u6BD5\u8282\u5730\u533A'
                        },
                        {
                            id: 522600,
                            name: '\u9ED4\u4E1C\u5357\u82D7\u65CF\u4F97\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 522700,
                            name: '\u9ED4\u5357\u5E03\u4F9D\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE'
                        }
                    ]
                },
                {
                    id: 530000,
                    name: '\u4E91\u5357\u7701',
                    cities: [
                        {
                            id: 530100,
                            name: '\u6606\u660E\u5E02'
                        },
                        {
                            id: 530300,
                            name: '\u66F2\u9756\u5E02'
                        },
                        {
                            id: 530400,
                            name: '\u7389\u6EAA\u5E02'
                        },
                        {
                            id: 530500,
                            name: '\u4FDD\u5C71\u5E02'
                        },
                        {
                            id: 530600,
                            name: '\u662D\u901A\u5E02'
                        },
                        {
                            id: 530700,
                            name: '\u4E3D\u6C5F\u5E02'
                        },
                        {
                            id: 530800,
                            name: '\u666E\u6D31\u5E02'
                        },
                        {
                            id: 530900,
                            name: '\u4E34\u6CA7\u5E02'
                        },
                        {
                            id: 532300,
                            name: '\u695A\u96C4\u5F5D\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 532500,
                            name: '\u7EA2\u6CB3\u54C8\u5C3C\u65CF\u5F5D\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 532600,
                            name: '\u6587\u5C71\u58EE\u65CF\u82D7\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 532800,
                            name: '\u897F\u53CC\u7248\u7EB3\u50A3\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 532900,
                            name: '\u5927\u7406\u767D\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 533100,
                            name: '\u5FB7\u5B8F\u50A3\u65CF\u666F\u9887\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 533300,
                            name: '\u6012\u6C5F\u5088\u50F3\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 533400,
                            name: '\u8FEA\u5E86\u85CF\u65CF\u81EA\u6CBB\u5DDE'
                        }
                    ]
                },
                {
                    id: 540000,
                    name: '\u897F\u85CF\u81EA\u6CBB\u533A',
                    cities: [
                        {
                            id: 540100,
                            name: '\u62C9\u8428\u5E02'
                        },
                        {
                            id: 542100,
                            name: '\u660C\u90FD\u5730\u533A'
                        },
                        {
                            id: 542200,
                            name: '\u5C71\u5357\u5730\u533A'
                        },
                        {
                            id: 542300,
                            name: '\u65E5\u5580\u5219\u5730\u533A'
                        },
                        {
                            id: 542400,
                            name: '\u90A3\u66F2\u5730\u533A'
                        },
                        {
                            id: 542500,
                            name: '\u963F\u91CC\u5730\u533A'
                        },
                        {
                            id: 542600,
                            name: '\u6797\u829D\u5730\u533A'
                        }
                    ]
                },
                {
                    id: 610000,
                    name: '\u9655\u897F\u7701',
                    cities: [
                        {
                            id: 610100,
                            name: '\u897F\u5B89\u5E02'
                        },
                        {
                            id: 610200,
                            name: '\u94DC\u5DDD\u5E02'
                        },
                        {
                            id: 610300,
                            name: '\u5B9D\u9E21\u5E02'
                        },
                        {
                            id: 610400,
                            name: '\u54B8\u9633\u5E02'
                        },
                        {
                            id: 610500,
                            name: '\u6E2D\u5357\u5E02'
                        },
                        {
                            id: 610600,
                            name: '\u5EF6\u5B89\u5E02'
                        },
                        {
                            id: 610700,
                            name: '\u6C49\u4E2D\u5E02'
                        },
                        {
                            id: 610800,
                            name: '\u6986\u6797\u5E02'
                        },
                        {
                            id: 610900,
                            name: '\u5B89\u5EB7\u5E02'
                        },
                        {
                            id: 611000,
                            name: '\u5546\u6D1B\u5E02'
                        }
                    ]
                },
                {
                    id: 620000,
                    name: '\u7518\u8083\u7701',
                    cities: [
                        {
                            id: 620100,
                            name: '\u5170\u5DDE\u5E02'
                        },
                        {
                            id: 620200,
                            name: '\u5609\u5CEA\u5173\u5E02'
                        },
                        {
                            id: 620300,
                            name: '\u91D1\u660C\u5E02'
                        },
                        {
                            id: 620400,
                            name: '\u767D\u94F6\u5E02'
                        },
                        {
                            id: 620500,
                            name: '\u5929\u6C34\u5E02'
                        },
                        {
                            id: 620600,
                            name: '\u6B66\u5A01\u5E02'
                        },
                        {
                            id: 620700,
                            name: '\u5F20\u6396\u5E02'
                        },
                        {
                            id: 620800,
                            name: '\u5E73\u51C9\u5E02'
                        },
                        {
                            id: 620900,
                            name: '\u9152\u6CC9\u5E02'
                        },
                        {
                            id: 621000,
                            name: '\u5E86\u9633\u5E02'
                        },
                        {
                            id: 621100,
                            name: '\u5B9A\u897F\u5E02'
                        },
                        {
                            id: 621200,
                            name: '\u9647\u5357\u5E02'
                        },
                        {
                            id: 622900,
                            name: '\u4E34\u590F\u56DE\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 623000,
                            name: '\u7518\u5357\u85CF\u65CF\u81EA\u6CBB\u5DDE'
                        }
                    ]
                },
                {
                    id: 630000,
                    name: '\u9752\u6D77\u7701',
                    cities: [
                        {
                            id: 630100,
                            name: '\u897F\u5B81\u5E02'
                        },
                        {
                            id: 632100,
                            name: '\u6D77\u4E1C\u5730\u533A'
                        },
                        {
                            id: 632200,
                            name: '\u6D77\u5317\u85CF\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 632300,
                            name: '\u9EC4\u5357\u85CF\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 632500,
                            name: '\u6D77\u5357\u85CF\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 632600,
                            name: '\u679C\u6D1B\u85CF\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 632700,
                            name: '\u7389\u6811\u85CF\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 632800,
                            name: '\u6D77\u897F\u8499\u53E4\u65CF\u85CF\u65CF\u81EA\u6CBB\u5DDE'
                        }
                    ]
                },
                {
                    id: 640000,
                    name: '\u5B81\u590F\u56DE\u65CF\u81EA\u6CBB\u533A',
                    cities: [
                        {
                            id: 640100,
                            name: '\u94F6\u5DDD\u5E02'
                        },
                        {
                            id: 640200,
                            name: '\u77F3\u5634\u5C71\u5E02'
                        },
                        {
                            id: 640300,
                            name: '\u5434\u5FE0\u5E02'
                        },
                        {
                            id: 640400,
                            name: '\u56FA\u539F\u5E02'
                        },
                        {
                            id: 640500,
                            name: '\u4E2D\u536B\u5E02'
                        }
                    ]
                },
                {
                    id: 650000,
                    name: '\u65B0\u7586\u7EF4\u543E\u5C14\u81EA\u6CBB\u533A',
                    cities: [
                        {
                            id: 650100,
                            name: '\u4E4C\u9C81\u6728\u9F50\u5E02'
                        },
                        {
                            id: 650200,
                            name: '\u514B\u62C9\u739B\u4F9D\u5E02'
                        },
                        {
                            id: 650300,
                            name: '\u77F3\u6CB3\u5B50\u5E02'
                        },
                        {
                            id: 652100,
                            name: '\u5410\u9C81\u756A\u5730\u533A'
                        },
                        {
                            id: 652200,
                            name: '\u54C8\u5BC6\u5730\u533A'
                        },
                        {
                            id: 652300,
                            name: '\u660C\u5409\u56DE\u65CF\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 652700,
                            name: '\u535A\u5C14\u5854\u62C9\u8499\u53E4\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 652800,
                            name: '\u5DF4\u97F3\u90ED\u695E\u8499\u53E4\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 652900,
                            name: '\u963F\u514B\u82CF\u5730\u533A'
                        },
                        {
                            id: 653000,
                            name: '\u514B\u5B5C\u52D2\u82CF\u67EF\u5C14\u514B\u5B5C\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 653100,
                            name: '\u5580\u4EC0\u5730\u533A'
                        },
                        {
                            id: 653200,
                            name: '\u548C\u7530\u5730\u533A'
                        },
                        {
                            id: 654000,
                            name: '\u4F0A\u7281\u54C8\u8428\u514B\u81EA\u6CBB\u5DDE'
                        },
                        {
                            id: 654200,
                            name: '\u5854\u57CE\u5730\u533A'
                        },
                        {
                            id: 654300,
                            name: '\u963F\u52D2\u6CF0\u5730\u533A'
                        },
                        {
                            id: 659000,
                            name: '\u7701\u76F4\u8F96\u884C\u653F\u5355\u4F4D'
                        }
                    ]
                },
                {
                    id: 710000,
                    name: '\u53F0\u6E7E',
                    cities: []
                },
                {
                    id: 810000,
                    name: '\u9999\u6E2F',
                    cities: []
                },
                {
                    id: 820000,
                    name: '\u6FB3\u95E8',
                    cities: []
                }
            ]
        }];
    return region;
});
define('iot/_public/RegionSelect', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'esui',
    'esui/InputControl',
    'esui/painters',
    'esui/Select'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _underscore, _babelRuntimeHelpersInteropRequireDefault, _esui, _esuiInputControl, _esuiPainters, _esuiSelect) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ui = _babelRuntimeHelpersInteropRequireDefault['default'](_esui);
    var _InputControl2 = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiInputControl);
    var _paint = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiPainters);
    var INPUT_RULES_MAPPING = {
        required: {
            name: 'required',
            type: 'boolean'
        },
        pattern: {
            name: 'pattern',
            type: 'regexp'
        },
        min: {
            name: 'min',
            type: 'number'
        },
        max: {
            name: 'max',
            type: 'number'
        },
        validityLabel: {
            name: 'validityLabel',
            type: 'string'
        }
    };
    function extraRulesFromMain(control) {
        var rules = {};
        _u['default'].each(INPUT_RULES_MAPPING, function (item) {
            var rule = control[item.name];
            if (rule) {
                var type = item.type;
                switch (type) {
                case 'boolean':
                    rules[item.name] = !!rule;
                    break;
                case 'number':
                    rules[item.name] = parseInt(rule, 10);
                    break;
                case 'regexp':
                    rules[item.name] = new Function('return ' + rule)();
                    break;
                default:
                    rules[item.name] = rule;
                }
            }
        });
        return rules;
    }
    function getRegions(regions) {
        return _u['default'].map(regions, function (region) {
            return {
                name: region.name,
                value: region.id
            };
        });
    }
    function findIndex(array, func) {
        if (_u['default'].isArray(array) && _u['default'].isFunction(func)) {
            for (var i = 0, _length = array.length; i < _length; i++) {
                if (func(array[i])) {
                    return i;
                }
            }
        }
        return -1;
    }
    function updateDatasource(box, datasource) {
        var country = box.getChild('country');
        var province = box.getChild('province');
        var city = box.getChild('city');
        var defaultValue = {
            country: '',
            province: '',
            city: ''
        };
        var value = _u['default'].extend(defaultValue, box.rawValue);
        var countryIndex = findIndex(datasource, function (item) {
            return item.id == value.country;
        });
        country.setProperties({
            selectedIndex: countryIndex,
            datasource: datasource ? getRegions(datasource) : [{
                    name: box.country.emptyText,
                    value: ''
                }]
        });
        var provinceData = datasource[countryIndex] && datasource[countryIndex].provinces;
        var provinceIndex = findIndex(provinceData, function (item) {
            return item.id == value.province;
        });
        province.setProperties({
            selectedIndex: provinceIndex,
            datasource: provinceData ? getRegions(provinceData) : [{
                    name: box.province.emptyText,
                    value: ''
                }]
        });
        var currentProvince = provinceData && provinceData[provinceIndex];
        var cityData = currentProvince && currentProvince.cities;
        var cityDatasource = cityData ? getRegions(cityData) : [];
        if (!cityDatasource.length) {
            cityDatasource.push(currentProvince ? {
                name: currentProvince.name,
                value: currentProvince.id
            } : {
                name: box.city.emptyText,
                value: ''
            });
        }
        var cityIndex = findIndex(cityDatasource, function (item) {
            return item.value == value.city;
        });
        city.setProperties({
            selectedIndex: cityIndex,
            datasource: cityDatasource
        });
    }
    var RegionSelect = function (_InputControl) {
        _babelRuntimeHelpersInherits['default'](RegionSelect, _InputControl);
        function RegionSelect(options) {
            _babelRuntimeHelpersClassCallCheck['default'](this, RegionSelect);
            _InputControl.call(this, options);
        }
        RegionSelect.prototype.initOptions = function initOptions(options) {
            var defaultOptions = {
                country: {
                    emptyText: '- \u56FD\u5BB6 -',
                    title: '\u56FD\u5BB6\u4FE1\u606F'
                },
                province: {
                    emptyText: '- \u7701\u4EFD -',
                    title: '\u7701\u4EFD\u4FE1\u606F'
                },
                city: {
                    emptyText: '- \u57CE\u5E02 -',
                    title: '\u57CE\u5E02\u4FE1\u606F'
                }
            };
            _u['default'].extend(defaultOptions, options);
            _InputControl.prototype.initOptions.call(this, defaultOptions);
        };
        RegionSelect.prototype.initStructure = function initStructure() {
            var options = {
                height: this.height,
                extensions: this.extensions,
                viewContext: this.viewContext
            };
            _u['default'].extend(options, extraRulesFromMain(this));
            var countryOptions = _u['default'].extend({ childName: 'country' }, options, this.country);
            var provinceOptions = _u['default'].extend({ childName: 'province' }, options, this.province);
            var cityOptions = _u['default'].extend({ childName: 'city' }, options, this.city);
            var country = _ui['default'].create('Select', countryOptions);
            var province = _ui['default'].create('Select', provinceOptions);
            var city = _ui['default'].create('Select', cityOptions);
            country.appendTo(this.main);
            province.appendTo(this.main);
            city.appendTo(this.main);
            this.addChild(country);
            this.addChild(province);
            this.addChild(city);
        };
        RegionSelect.prototype.initEvents = function initEvents() {
            var country = this.getChild('country');
            var province = this.getChild('province');
            var city = this.getChild('city');
            country.on('change', this.changeCountry, this);
            province.on('change', this.changeProvince, this);
            city.on('change', this.changeCity, this);
        };
        RegionSelect.prototype.changeCountry = function changeCountry(e) {
            var countryData = this.datasource[e.target.selectedIndex];
            this.getChild('province').setProperties({
                selectedIndex: -1,
                datasource: countryData ? getRegions(countryData.provinces) : []
            });
            this.getChild('city').updateDatasource([{
                    name: this.city.emptyText,
                    value: ''
                }]);
            this.fire('countryChange', { source: countryData });
            this.fire('change');
        };
        RegionSelect.prototype.changeProvince = function changeProvince(e) {
            var countryData = this.datasource[this.getChild('country').selectedIndex];
            var provinceData = countryData && countryData.provinces[e.target.selectedIndex];
            var citySelect = this.getChild('city');
            var cityDatasource = provinceData ? getRegions(provinceData.cities) : [];
            if (!cityDatasource.length) {
                cityDatasource = provinceData ? [{
                        name: provinceData.name,
                        value: provinceData.id
                    }] : [];
            }
            citySelect.setProperties({
                selectedIndex: -1,
                datasource: cityDatasource
            });
            this.fire('provinceChange', { source: provinceData });
            this.fire('change');
        };
        RegionSelect.prototype.changeCity = function changeCity(e) {
            var countryData = this.datasource[this.getChild('country').selectedIndex];
            var provinceData = countryData && countryData.provinces[this.getChild('province').selectedIndex];
            var cityData = provinceData && provinceData.cities[e.target.selectedIndex];
            this.fire('cityChange', { source: cityData });
            this.fire('change');
        };
        RegionSelect.prototype.validate = function validate() {
            var result = true;
            _u['default'].each(this.children, function (child) {
                result = result && child.validate();
            });
            return result;
        };
        RegionSelect.prototype.setValue = function setValue(value) {
            _InputControl.prototype.setValue.call(this, value);
            updateDatasource(this, this.datasource);
        };
        RegionSelect.prototype.getValue = function getValue() {
            return this.getRawValue();
        };
        RegionSelect.prototype.getRawValue = function getRawValue() {
            return {
                country: this.getChild('country').getValue(),
                province: this.getChild('province').getValue(),
                city: this.getChild('city').getValue()
            };
        };
        _babelRuntimeHelpersCreateClass['default'](RegionSelect, [
            {
                key: 'type',
                get: function get() {
                    return 'RegionSelect';
                }
            },
            {
                key: 'repaint',
                get: function get() {
                    return _paint['default'].createRepaint(_InputControl.prototype.repaint, {
                        name: 'datasource',
                        paint: function paint(box, datasource) {
                            updateDatasource(box, datasource);
                        }
                    });
                }
            }
        ]);
        return RegionSelect;
    }(_InputControl2['default']);
    _ui['default'].register(RegionSelect);
    module.exports = RegionSelect;
});
define('iot/_public/storage', [
    'exports',
    'module',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'common/constants',
    'fc-storage/sessionStorage'
], function (exports, module, _underscore, _babelRuntimeHelpersInteropRequireDefault, _commonConstants, _fcStorageSessionStorage) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _constants = _babelRuntimeHelpersInteropRequireDefault['default'](_commonConstants);
    var _sessionStorage = _babelRuntimeHelpersInteropRequireDefault['default'](_fcStorageSessionStorage);
    function getStandAloneMethods(subject, keyGenerator) {
        var getKey = function getKey() {
            return '__IOT__' + keyGenerator();
        };
        var methods = {
            dump: function dump() {
                var data = subject.getItem(getKey());
                if (!_u['default'].isObject(data)) {
                    data = {};
                }
                return _u['default'].clone(data);
            },
            get: function get(key) {
                var data = this.dump();
                return _u['default'].clone(data[key]);
            },
            set: function set(key, value) {
                var data = this.dump();
                data[key] = value;
                subject.setItem(getKey(), data);
            },
            clear: function clear() {
                subject.removeItem(getKey());
            },
            remove: function remove(key) {
                var data = this.dump();
                if (_u['default'].isObject(data) && data[key] !== undefined) {
                    delete data[key];
                }
                subject.setItem(getKey(), data);
            },
            update: function update(key, value) {
                var _toUpdate;
                var toUpdate = (_toUpdate = {}, _toUpdate[key] = value, _toUpdate);
                subject.updateItem(getKey(), toUpdate);
            }
        };
        return methods;
    }
    function getStandAloneKey() {
        return _constants['default'].userid || 'default-user';
    }
    module.exports = getStandAloneMethods(_sessionStorage['default'], getStandAloneKey);
});
define('iot/_public/SuggestInput', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'esui',
    'etpl',
    'esui/lib',
    'esui/InputControl',
    'esui/painters',
    'esui/validator/ValidityState'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _underscore, _babelRuntimeHelpersInteropRequireDefault, _esui, _etpl, _esuiLib, _esuiInputControl, _esuiPainters, _esuiValidatorValidityState) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ui = _babelRuntimeHelpersInteropRequireDefault['default'](_esui);
    var _etpl2 = _babelRuntimeHelpersInteropRequireDefault['default'](_etpl);
    var _lib = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiLib);
    var _InputControl2 = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiInputControl);
    var _paint = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiPainters);
    var _ValidityState = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiValidatorValidityState);
    var BOX_TEMPLATE = [
        '<div class="${prefix}-input-box" id="${inputId}"></div>',
        '<div class="${prefix}-create-tip" id="${createTipId}" ',
        'title="\u53D6\u6D88\u521B\u5EFA${title}" style="display:none;">',
        '<span>\u521B\u5EFA${title}</span>',
        '<a href="javascript:;">\xD7</a>',
        '</div>',
        '<div class="${prefix}-list-layer" id="${layerId}">',
        '<div class="${prefix}-list" id="${listId}"></div>',
        '<!-- if: ${needFoot} -->',
        '<div class="${prefix}-create-item" id="${createId}">\uFF0B\u521B\u5EFA</div>',
        '<!-- /if -->',
        '</div>'
    ].join('');
    var ITEM_TEMPLATE = [
        '<div class="${prefix}-item" data-index="${index}" ',
        'action-type="item" action-data="${title}">',
        '${title}',
        '</div>'
    ].join('');
    var INPUT_RULES_MAPPING = {
        required: {
            name: 'required',
            type: 'boolean'
        },
        pattern: {
            name: 'pattern',
            type: 'regexp'
        },
        min: {
            name: 'min',
            type: 'number'
        },
        max: {
            name: 'max',
            type: 'number'
        },
        validityLabel: {
            name: 'validityLabel',
            type: 'string'
        }
    };
    var STATUS = {
        CREATING: 'creating',
        NORMAL: 'normal'
    };
    function extraRulesFromMain(control) {
        var rules = {};
        _u['default'].each(INPUT_RULES_MAPPING, function (item) {
            var rule = control[item.name];
            if (rule) {
                var type = item.type;
                switch (type) {
                case 'boolean':
                    rules[item.name] = !!rule;
                    break;
                case 'number':
                    rules[item.name] = parseInt(rule, 10);
                    break;
                case 'regexp':
                    rules[item.name] = new Function('return ' + rule)();
                    break;
                default:
                    rules[item.name] = rule;
                }
            }
        });
        return rules;
    }
    var SuggestInput = function (_InputControl) {
        _babelRuntimeHelpersInherits['default'](SuggestInput, _InputControl);
        function SuggestInput() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SuggestInput);
            _InputControl.apply(this, arguments);
        }
        SuggestInput.prototype.initOptions = function initOptions(options) {
            var defaultOptions = {
                needFoot: true,
                maxListLength: 10,
                validMessage: '\u6821\u9A8C\u5931\u8D25',
                params: {},
                _index: -1,
                _listLength: 0,
                _inputProperties: {},
                _fetchCount: 0,
                _status: STATUS.NORMAL
            };
            _u['default'].extend(defaultOptions, options);
            if (options.disabled === 'false') {
                options.disabled = false;
            }
            _u['default'].each(options, function (prop, key) {
                var matches = key.match(/^input\-(.*)?$/i);
                if (matches && matches[1]) {
                    var newKey = matches[1];
                    defaultOptions._inputProperties[newKey] = prop;
                    delete defaultOptions[key];
                }
            });
            _InputControl.prototype.initOptions.call(this, defaultOptions);
        };
        SuggestInput.prototype.initStructure = function initStructure() {
            var boxHtml = _etpl2['default'].compile(BOX_TEMPLATE)({
                prefix: this.helper.getPrimaryClassName(),
                title: this.title,
                inputId: this.helper.getId('input'),
                layerId: this.helper.getId('layer'),
                listId: this.helper.getId('list'),
                createId: this.helper.getId('create'),
                createTipId: this.helper.getId('tip'),
                needFoot: this.needFoot
            });
            this.main.innerHTML = boxHtml;
            var options = {
                height: this.height,
                width: this.width,
                title: this.title,
                placeholder: this.placeholder,
                disabled: this.disabled,
                readOnly: this.readOnly,
                childName: 'text',
                viewContext: this.viewContext
            };
            _u['default'].extend(options, extraRulesFromMain(this));
            var textBox = _ui['default'].create('TextBox', options);
            textBox.appendTo(this.helper.getPart('input'));
            this.addChild(textBox);
            var input = _lib['default'].getChildren(textBox.main)[0];
            _u['default'].each(this._inputProperties, function (prop, key) {
                return _lib['default'].setAttribute(input, key, prop);
            });
            this._input = input;
            if (this.rawValue) {
                this.setValue(this.rawValue, { keyword: '' });
            }
        };
        SuggestInput.prototype.initEvents = function initEvents() {
            var createTip = this.helper.getPart('tip');
            var textBox = this.getChild('text');
            textBox.on('input', _u['default'].debounce(this.onInput, 50), this);
            textBox.on('enter', this.onEnter, this);
            this.helper.addDOMEvent(this._input, 'keydown', this.onKeydown);
            this.helper.addDOMEvent(this._input, 'click', this.onInputClick);
            this.helper.addDOMEvent(createTip, 'click', this.cancelCreate);
            this.helper.addDOMEvent(document, 'click', this.documentClick);
            this.delegateEvent('item', 'click', this.onSelect);
            if (this.needFoot) {
                var createButton = this.helper.getPart('create');
                this.helper.addDOMEvent(createButton, 'click', this.onCreate);
            }
        };
        SuggestInput.prototype.onInput = function onInput(e) {
            this.search(e.target.getValue());
        };
        SuggestInput.prototype.onInputClick = function onInputClick(e) {
            var _this = this;
            if (this.hasRelativeItem()) {
                this.toggleLayer(true);
            } else {
                this.search(this.getValue()).done(function () {
                    return _this.toggleLayer(true);
                });
            }
        };
        SuggestInput.prototype.onKeydown = function onKeydown(e) {
            var keyCode = e.which || e.keyCode;
            var maxIndex = this._listLength - 1;
            var minIndex = -1;
            if (keyCode === 38) {
                this._index = this._index - 1;
                if (this._index < minIndex) {
                    this._index = maxIndex;
                }
                this.select(this._index);
            } else if (keyCode === 40) {
                this._index = this._index + 1;
                if (this._index > maxIndex) {
                    this._index = minIndex;
                }
                this.select(this._index);
            }
        };
        SuggestInput.prototype.onEnter = function onEnter() {
            this.onSelect({ index: this._index });
        };
        SuggestInput.prototype.select = function select(index) {
            index = _u['default'].isNumber(index) ? index : this._index;
            this._index = index;
            var clazz = 'active';
            var list = this.helper.getPart('list');
            var lastItem = list.querySelector('.' + clazz);
            var currentItem = list.querySelector('[data-index="' + index + '"]');
            _lib['default'].removeClass(lastItem, clazz);
            if (currentItem) {
                _lib['default'].addClass(currentItem, clazz);
                this.setValue(_lib['default'].getAttribute(currentItem, 'action-data'));
            } else {
                this.setValue(this._inputValue);
            }
            window.setTimeout(_u['default'].bind(this.setCursorEnd, this), -1);
        };
        SuggestInput.prototype.onSelect = function onSelect(e) {
            var index = _u['default'].isNumber(e.index) ? e.index : _lib['default'].getAttribute(e.target, 'data-index');
            this.select(parseInt(index, 10));
            _u['default'].delay(_u['default'].bind(this.toggleLayer, this, false), 100);
        };
        SuggestInput.prototype.onCreate = function onCreate(e) {
            this.fire('create', e);
            this.updateStatus(STATUS.CREATING);
            this.toggleLayer(false);
        };
        SuggestInput.prototype.cancelCreate = function cancelCreate(e) {
            this.fire('cancelcreate', e);
            this.updateStatus(STATUS.NORMAL);
        };
        SuggestInput.prototype.updateStatus = function updateStatus(status) {
            var createTip = this.helper.getPart('tip');
            switch (status) {
            case STATUS.CREATING:
                this.setValue('');
                this.showValidationMessage('valid');
                createTip.style.display = 'block';
                break;
            default:
                createTip.style.display = 'none';
            }
            this._status = status;
        };
        SuggestInput.prototype.isCreating = function isCreating() {
            return this._status === STATUS.CREATING;
        };
        SuggestInput.prototype.documentClick = function documentClick(e) {
            var target = _lib['default'].event.getTarget(e);
            if (!_lib['default'].dom.contains(this.main, target)) {
                this.toggleLayer(false);
            }
        };
        SuggestInput.prototype.validate = function validate() {
            if (this._status === STATUS.CREATING) {
                return true;
            }
            var validity = this.getValidationResult();
            if (this._fetchCount > 0) {
                validity.addState('invalid', new _ValidityState['default'](false, this.title + '\u6821\u9A8C\u4E2D'));
            } else if (this.getValue() && !this.hasRelativeItem()) {
                validity.addState('invalid', new _ValidityState['default'](false, this.validMessage));
            }
            this.showValidity(validity);
            return validity.isValid();
        };
        SuggestInput.prototype.hasRelativeItem = function hasRelativeItem() {
            var list = this.helper.getPart('list');
            return _lib['default'].getChildren(list).length > 0;
        };
        SuggestInput.prototype.toggleLayer = function toggleLayer(flag) {
            var layer = this.helper.getPart('layer');
            layer.style.display = flag ? 'block' : 'none';
        };
        SuggestInput.prototype.search = function search(keyword) {
            var _this2 = this;
            this._inputValue = keyword;
            this._fetchCount++;
            return this.action(_u['default'].extend({ keyword: keyword }, this.params), { 'X-silence': true }).done(function (data) {
                _this2._fetchCount--;
                _this2.buildSuggestList(data);
            });
        };
        SuggestInput.prototype.buildSuggestList = function buildSuggestList(data) {
            var _this3 = this;
            this._listData = data;
            this._listLength = Math.min(data.length, this.maxListLength);
            var html = _u['default'].map(data, function (item, index) {
                var title = _u['default'].isFunction(_this3.formatter) ? _this3.formatter(item, index) : _u['default'].values(item)[0] || '';
                return _etpl2['default'].compile(ITEM_TEMPLATE)({
                    prefix: _this3.helper.getPrimaryClassName(),
                    index: index,
                    title: title
                });
            });
            this.helper.getPart('list').innerHTML = html.join('');
        };
        SuggestInput.prototype.setValue = function setValue(value, search) {
            this.getChild('text').setValue(value);
            search && this.search(_u['default'].has(search, 'keyword') ? search.keyword : value);
        };
        SuggestInput.prototype.getValue = function getValue() {
            return this.getRawValue();
        };
        SuggestInput.prototype.getRawValue = function getRawValue() {
            return this.getChild('text').getValue() || '';
        };
        SuggestInput.prototype.dispose = function dispose() {
            _InputControl.prototype.dispose.call(this);
            this.helper.removeDOMEvent(document, 'click', this.documentClick);
        };
        SuggestInput.prototype.delegateEvent = function delegateEvent(attr, eventType, handler) {
            var _this4 = this;
            this.helper.addDOMEvent(this.main, eventType, function (e) {
                var target = _lib['default'].event.getTarget(e);
                var attribute = target.getAttribute('action-type');
                var args = target.getAttribute('action-data');
                if (attribute && attribute === attr) {
                    handler.call(_this4, {
                        target: target,
                        eventType: eventType,
                        originEvent: e,
                        args: args
                    });
                }
            });
        };
        SuggestInput.prototype.setCursorEnd = function setCursorEnd() {
            var input = this._input;
            var end = this.getValue().length;
            if (input.setSelectionRange) {
                input.setSelectionRange(end, end);
                input.focus();
            } else {
                var range = input.createTextRange();
                range.collapse(true);
                range.moveEnd('character', end);
                range.moveStart('character', end);
                range.select();
            }
        };
        _babelRuntimeHelpersCreateClass['default'](SuggestInput, [
            {
                key: 'type',
                get: function get() {
                    return 'SuggestInput';
                }
            },
            {
                key: 'repaint',
                get: function get() {
                    return _paint['default'].createRepaint(_InputControl.prototype.repaint, {
                        name: 'width',
                        paint: function paint(box, width) {
                            box.helper.getPart('layer').style.width = width + 'px';
                        }
                    }, {
                        name: 'disabled',
                        paint: function paint(box, disabled) {
                            box._input.disabled = disabled;
                        }
                    });
                }
            }
        ]);
        return SuggestInput;
    }(_InputControl2['default']);
    _ui['default'].register(SuggestInput);
    module.exports = SuggestInput;
});
define('iot/_public/util', [
    'exports',
    'module',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'esui',
    '../config'
], function (exports, module, _underscore, _babelRuntimeHelpersInteropRequireDefault, _esui, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ui = _babelRuntimeHelpersInteropRequireDefault['default'](_esui);
    var _commonConfig = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    module.exports = {
        autoValidateExt: function () {
            return [_ui['default'].createExtension('AutoValidate', { prevent: true })];
        }(),
        formatMoney: function formatMoney(value) {
            var result = '-';
            if (value || value === 0) {
                result = Number(value).toFixed(2);
            }
            return result;
        },
        hasAuth: function hasAuth(field, item) {
            var auth = _commonConfig['default'].IOT_AUTH || {};
            var rule = auth[field] || [];
            var result = true;
            if (rule) {
                result = _u['default'].contains(rule, item.domainStatus);
            }
            return result;
        },
        getInputControls: function getInputControls(root, name, type) {
            var result = [];
            var isValidControl = function isValidControl(control) {
                var category = control && control.getCategory();
                return category && (category === 'input' || category === 'check');
            };
            var walk = function walk(root) {
                var children = root.children;
                _u['default'].each(children, function (element, index) {
                    if (element.nodeType !== 1) {
                        return false;
                    }
                    var control = _ui['default'].getControlByDOM(element);
                    if (control && isValidControl(control) && (!name || control.get('name') === name) && (!type || control.get('type') === type)) {
                        result.push(control);
                    } else {
                        walk(element);
                    }
                });
            };
            walk(root);
            return result;
        },
        getUIControls: function getUIControls(root, name, type) {
            var result = [];
            var walk = function walk(root) {
                var children = root.children;
                _u['default'].each(children, function (element, index) {
                    if (element.nodeType !== 1) {
                        return false;
                    }
                    var control = _ui['default'].getControlByDOM(element);
                    if (control && (!name || control.get('name') === name) && (!type || control.get('type') === type)) {
                        result.push(control);
                    } else {
                        walk(element);
                    }
                });
            };
            walk(root);
            return result;
        },
        setControlsDisabled: function setControlsDisabled(controls, disable) {
            if (!controls) {
                return;
            }
            _u['default'].each(controls, function (control) {
                disable ? control.disable() : control.enable();
            });
        },
        indexOf: function indexOf(array, item) {
            if (array == null)
                return -1;
            for (var i = 0; i < array.length; i++) {
                if (array[i].value === item)
                    return i;
            }
            return -1;
        }
    };
});
define('iot/app/base', [
    'exports',
    'module',
    'babel-runtime/helpers/class-call-check'
], function (exports, module, _babelRuntimeHelpersClassCallCheck) {
    var Application = function () {
        function Application() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Application);
            this.type = null;
            this.sidebar = null;
        }
        Application.prototype.start = function start() {
        };
        Application.prototype.stop = function stop() {
        };
        return Application;
    }();
    module.exports = Application;
});
define('iot/app/config', ['exports'], function (exports) {
    exports.__esModule = true;
    var HUB_SIDEBAR_CONFIG = {
        type: 'IOT_HUB',
        depth: 3,
        hideActions: [
            '#/iot/order/initnotify',
            '#/iot/order/initcreate',
            '#/iot/order/upgradeUnicom',
            '#/iot/order/notify',
            '#/iot/order/create',
            '#/iot/order/upgrade',
            '#/iot/temp/error',
            '#/iot/turnkey/choose',
            '#/iot/turnkey/confirm',
            '#/iot/turnkey/detail',
            '#/iot/turnkey/success',
            '#/iot/turnkey/list',
            '#/iot/turnkey/listdetail',
            '#/region/404'
        ],
        config: [
            { title: '\u7269\u63A5\u5165' },
            {
                title: '\u5B9E\u4F8B\u5217\u8868',
                service: 'endpoint-list',
                icon: 'icon-list',
                url: '#/iot/endpoint/list',
                anchors: [
                    '#/iot/endpoint/initlist',
                    '#/iot/endpoint/allStats',
                    '#/iot/endpoint/package',
                    '#/iot/endpoint/unicomStats',
                    '#/iot/endpoint/unicomPackage'
                ],
                navs: [
                    [
                        {
                            title: '&lt;\u8FD4\u56DE\u5B9E\u4F8B\u5217\u8868',
                            url: '#/iot/endpoint/list'
                        },
                        {
                            title: '\u7528\u91CF\u7EDF\u8BA1-\u7269\u63A5\u5165',
                            service: 'endpoint-stats',
                            url: '#/iot/endpoint/stats~[uuid][name][from]'
                        },
                        {
                            title: '\u7528\u91CF\u7EDF\u8BA1-\u7269\u63A5\u5165SIM\u7248',
                            service: 'endpoint-unicom-stats',
                            url: '#/iot/endpoint/uStats~[uuid][name][from]'
                        }
                    ],
                    [
                        {
                            title: '&lt;\u8FD4\u56DE\u5B9E\u4F8B\u5217\u8868',
                            url: '#/iot/endpoint/list'
                        },
                        {
                            title: '\u8BBE\u5907\u5217\u8868',
                            service: 'thing-list',
                            url: '#/iot/thing/list~[endpointName]'
                        },
                        {
                            title: '\u8EAB\u4EFD\u5217\u8868',
                            service: 'principal-list',
                            url: '#/iot/principal/list~[endpointName]'
                        },
                        {
                            title: '\u7B56\u7565\u5217\u8868',
                            service: 'policy-list',
                            url: '#/iot/policy/list~[endpointName]'
                        },
                        {
                            title: '\u6570\u636E\u5B58\u50A8',
                            service: 'storage-list',
                            url: '#/iot/storage/list~[endpointName]'
                        }
                    ]
                ]
            }
        ]
    };
    exports.HUB_SIDEBAR_CONFIG = HUB_SIDEBAR_CONFIG;
    var HUB_SUBUSER_SIDEBAR_CONFIG = {
        type: 'IOT_HUB',
        depth: 3,
        hideActions: [
            '#/iot/order/notify',
            '#/iot/order/create',
            '#/iot/order/upgrade',
            '#/iot/temp/error',
            '#/iot/turnkey/choose',
            '#/iot/turnkey/confirm',
            '#/iot/turnkey/detail',
            '#/iot/turnkey/success',
            '#/iot/turnkey/list',
            '#/iot/turnkey/listdetail',
            '#/region/404'
        ],
        config: [
            { title: '\u7269\u63A5\u5165' },
            {
                title: '\u5B9E\u4F8B\u5217\u8868',
                service: 'endpoint-list',
                icon: 'icon-list',
                url: '#/iot/endpoint/list',
                anchors: [
                    '#/iot/endpoint/initlist',
                    '#/iot/endpoint/allStats',
                    '#/iot/endpoint/package',
                    '#/iot/endpoint/unicomStats',
                    '#/iot/endpoint/unicomPackage'
                ],
                navs: [
                    [
                        {
                            title: '&lt;\u8FD4\u56DE\u5B9E\u4F8B\u5217\u8868',
                            url: '#/iot/endpoint/list'
                        },
                        {
                            title: '\u7528\u91CF\u7EDF\u8BA1-\u7269\u63A5\u5165',
                            service: 'endpoint-stats',
                            url: '#/iot/endpoint/stats~[uuid][name][from]'
                        },
                        {
                            title: '\u7528\u91CF\u7EDF\u8BA1-\u7269\u63A5\u5165SIM\u7248',
                            service: 'endpoint-unicom-stats',
                            url: '#/iot/endpoint/uStats~[uuid][name][from]'
                        }
                    ],
                    [
                        {
                            title: '&lt;\u8FD4\u56DE\u5B9E\u4F8B\u5217\u8868',
                            url: '#/iot/endpoint/list'
                        },
                        {
                            title: '\u8BBE\u5907\u5217\u8868',
                            service: 'thing-list',
                            url: '#/iot/thing/list~[endpointName]'
                        },
                        {
                            title: '\u8EAB\u4EFD\u5217\u8868',
                            service: 'principal-list',
                            url: '#/iot/principal/list~[endpointName]'
                        },
                        {
                            title: '\u7B56\u7565\u5217\u8868',
                            service: 'policy-list',
                            url: '#/iot/policy/list~[endpointName]'
                        }
                    ]
                ]
            }
        ]
    };
    exports.HUB_SUBUSER_SIDEBAR_CONFIG = HUB_SUBUSER_SIDEBAR_CONFIG;
    var PARSER_SIDEBAR_CONFIG = {
        type: 'IOT_MODBUS',
        depth: 3,
        hideActions: ['#/iot/modbus/landing'],
        config: [
            { title: '\u7269\u89E3\u6790' },
            {
                title: '\u7F51\u5173\u8BBE\u5907\u7BA1\u7406',
                service: 'manage',
                icon: 'icon-iam-user',
                url: '#/iot/modbus/manage'
            },
            {
                title: '\u89E3\u6790\u9879\u76EE',
                service: 'analysis',
                icon: 'icon-searchall',
                url: '#/iot/modbus/analysis',
                navs: [
                    {
                        title: '&lt;\u8FD4\u56DE\u89E3\u6790\u9879\u76EE',
                        url: '#/iot/modbus/analysis'
                    },
                    {
                        title: '\u89E3\u6790\u8BBE\u7F6E',
                        service: 'settings',
                        url: '#/iot/modbus/analysis/settings~[parserObjectUuid:uuid][name][rawState][gatewayUuid]'
                    },
                    {
                        title: '\u6570\u636E\u9A8C\u8BC1',
                        service: 'verify',
                        url: '#/iot/modbus/analysis/verify~[uuid:parserObjectUuid][name][rawState][gatewayUuid]'
                    }
                ]
            },
            {
                title: '\u9AD8\u7EA7\u8BBE\u7F6E',
                service: 'advanced',
                icon: 'icon-sdk',
                url: '#/iot/modbus/advanced'
            }
        ]
    };
    exports.PARSER_SIDEBAR_CONFIG = PARSER_SIDEBAR_CONFIG;
});
define('iot/app/helper', ['exports'], function (exports) {
    exports.__esModule = true;
    var ApplicationType = {
        MODBUS: 1,
        HUBBUS: 2
    };
    exports.ApplicationType = ApplicationType;
    var getApplicationType = function getApplicationType() {
        if (location.href.indexOf('#/iot/modbus') > -1) {
            return ApplicationType.MODBUS;
        }
        return ApplicationType.HUBBUS;
    };
    exports.getApplicationType = getApplicationType;
});
define('iot/app/hubbus', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/class-call-check',
    '../endpoint/config',
    '../thing/config',
    '../principal/config',
    '../policy/config',
    '../storage/config',
    '../order/config',
    '../turnkey/config',
    'inf-ria/sidebar/Sidebar',
    'babel-runtime/helpers/interop-require-default',
    'common/storage',
    './base',
    './config',
    './helper'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersClassCallCheck, _endpointConfig, _thingConfig, _principalConfig, _policyConfig, _storageConfig, _orderConfig, _turnkeyConfig, _infRiaSidebarSidebar, _babelRuntimeHelpersInteropRequireDefault, _commonStorage, _base, _config, _helper) {
    var _Sidebar = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaSidebarSidebar);
    var _storage = _babelRuntimeHelpersInteropRequireDefault['default'](_commonStorage);
    var _Application2 = _babelRuntimeHelpersInteropRequireDefault['default'](_base);
    var cookieUserKey = 'BCE_IOT_MODBUS_SUBUSER';
    var HubbusApplication = function (_Application) {
        _babelRuntimeHelpersInherits['default'](HubbusApplication, _Application);
        function HubbusApplication() {
            _babelRuntimeHelpersClassCallCheck['default'](this, HubbusApplication);
            _Application.call(this);
            this.type = _helper.ApplicationType.HUBBUS;
            var sidebarConfig = _storage['default'].get(cookieUserKey) ? _config.HUB_SUBUSER_SIDEBAR_CONFIG : _config.HUB_SIDEBAR_CONFIG;
            this.sidebar = new _Sidebar['default'](sidebarConfig);
        }
        return HubbusApplication;
    }(_Application2['default']);
    module.exports = HubbusApplication;
});
define('iot/app/manager', [
    'exports',
    'module',
    'babel-runtime/helpers/class-call-check',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'er/events',
    './modbus',
    './hubbus',
    './helper'
], function (exports, module, _babelRuntimeHelpersClassCallCheck, _underscore, _babelRuntimeHelpersInteropRequireDefault, _erEvents, _modbus, _hubbus, _helper) {
    var _ConstructorMap;
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _events = _babelRuntimeHelpersInteropRequireDefault['default'](_erEvents);
    var _ModbusApplication = _babelRuntimeHelpersInteropRequireDefault['default'](_modbus);
    var _HubbusApplication = _babelRuntimeHelpersInteropRequireDefault['default'](_hubbus);
    var ConstructorMap = (_ConstructorMap = {}, _ConstructorMap[_helper.ApplicationType.MODBUS] = _ModbusApplication['default'], _ConstructorMap[_helper.ApplicationType.HUBBUS] = _HubbusApplication['default'], _ConstructorMap);
    var ApplicationManager = function () {
        function ApplicationManager() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ApplicationManager);
            this.app = null;
            this.eventHandler = _u['default'].bind(this.eventHandler, this);
        }
        ApplicationManager.prototype.eventHandler = function eventHandler(e) {
            if (e.isChildAction) {
                return;
            }
            var appType = _helper.getApplicationType();
            var app = this.current();
            if (app.type !== appType) {
                this.switchTo(appType);
            }
        };
        ApplicationManager.prototype.current = function current() {
            if (!this.app) {
                this.create();
            }
            return this.app;
        };
        ApplicationManager.prototype.switchTo = function switchTo(appType) {
            var Constructor = ConstructorMap[appType];
            if (typeof Constructor === 'function') {
                this.app = new Constructor();
            }
        };
        ApplicationManager.prototype.create = function create() {
            var appType = _helper.getApplicationType();
            this.switchTo(appType);
        };
        ApplicationManager.prototype.start = function start() {
            _events['default'].on('enteractioncomplete', this.eventHandler);
            var app = this.current();
            if (app) {
                app.start();
            }
        };
        ApplicationManager.prototype.dispose = function dispose() {
            _events['default'].un('enteractioncomplete', this.eventHandler);
            var app = this.current();
            if (app) {
                app.stop();
                this.app = null;
            }
        };
        return ApplicationManager;
    }();
    module.exports = new ApplicationManager();
});
define('iot/app/modbus', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/class-call-check',
    '../modbus/manage/config',
    '../modbus/manage-v2/config',
    '../modbus/analysis/config',
    '../modbus/common/config',
    '../modbus/advanced/config',
    '../modbus/landing/config',
    'inf-ria/sidebar/Sidebar',
    'babel-runtime/helpers/interop-require-default',
    './base',
    './config',
    './helper'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersClassCallCheck, _modbusManageConfig, _modbusManageV2Config, _modbusAnalysisConfig, _modbusCommonConfig, _modbusAdvancedConfig, _modbusLandingConfig, _infRiaSidebarSidebar, _babelRuntimeHelpersInteropRequireDefault, _base, _config, _helper) {
    var _Sidebar = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaSidebarSidebar);
    var _Application2 = _babelRuntimeHelpersInteropRequireDefault['default'](_base);
    var ModbusApplication = function (_Application) {
        _babelRuntimeHelpersInherits['default'](ModbusApplication, _Application);
        function ModbusApplication() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ModbusApplication);
            _Application.call(this);
            this.type = _helper.ApplicationType.MODBUS;
            this.sidebar = new _Sidebar['default'](_config.PARSER_SIDEBAR_CONFIG);
        }
        return ModbusApplication;
    }(_Application2['default']);
    module.exports = ModbusApplication;
});
define('iot/common.tpl', [], function () {
    return '<!-- target: TPL_iot_name_tip -->\n<span data-ui-type="Tip"\n    data-ui-arrow="true">\u540D\u79F0\u7531\u82F1\u6587\u5B57\u6BCD\uFF08a-z\uFF0C\u4E0D\u533A\u5206\u5927\u5C0F\u5199\uFF09\u3001\u6570\u5B57\uFF080-9\uFF09\u3001\u4E0B\u5212\u7EBF\u201C_\u201D\u4EE5\u53CA\u8FDE\u5B57\u7B26\u201C-\u201D\uFF08\u5373\u4E2D\u6A2A\u7EBF\uFF09\u6784\u6210\uFF0C\u4E0D\u80FD\u4F7F\u7528\u7A7A\u683C\u53CA\u7279\u6B8A\u5B57\u7B26\uFF08\u5982\uFF01\u3001$\u3001&\u3001?\u7B49\uFF09\u3002\u201C-\u201D \u4E0D\u80FD\u5355\u72EC\u6216\u8FDE\u7EED\u4F7F\u7528\uFF0C\u4E0D\u80FD\u653E\u5728\u5F00\u5934\u6216\u7ED3\u5C3E\u3002</span>\n\n<!-- target: TPL_iot_topic_tip -->\n<span data-ui-type="Tip"\n    data-ui-arrow="true">\u4E3B\u9898\u540D\u4E0D\u8D85\u8FC7256\u4E2A\u5B57\u7B26\uFF0C\u4EC5\u652F\u6301ASCII\u5B57\u7B26\uFF0C\u4E0D\u652F\u6301\u4E2D\u6587\u3002</span>\n\n<!-- target: TPL_modbus_name_tip -->\n<span data-ui-type="Tip"\n    data-ui-arrow="true">\u8BE5\u5B57\u6BB5\u4F5C\u4E3A\u89E3\u6790\u540E\u7684JSON\u4E32\u7684KEY\u503C\u3002</span>\n\n<!-- target: TPL_modbus_bit_tip -->\n<span data-ui-type="Tip"\n    data-ui-arrow="true">\u82E5\u586B\u5199\uFF0C\u5219\u53EA\u89E3\u6790\u8BE5\u4F4D\u6570\u636E\uFF0C0\u8868\u793A\u8BE5\u5BC4\u5B58\u5668\u6700\u53F3\u4F4D\uFF08least significant bit\uFF09\u3002</span>\n\n<!-- target: TPL_modbus_formula_tip -->\n<span data-ui-type="Tip"\n    data-ui-arrow="true">\u53EF\u4EE5\u81EA\u5B9A\u4E49\u4E00\u4E2A\u516C\u5F0F\u6765\u8BA1\u7B97\u6700\u7EC8\u5E0C\u671B\u5F97\u5230\u7684\u6570\u636E\uFF0C\u516C\u5F0F\u4E2D\u7528X\u4EE3\u8868\u539F\u59CB\u4E8C\u8FDB\u5236\u6570\u636E\u89E3\u6790\u540E\u7684\u503C\uFF0C\u5E76\u53EF\u4EE5\u5F15\u7528RH\u548CRL\u3002<a href="https://cloud.baidu.com/doc/Parser/GUIGettingStarted.html#.E8.A7.A3.E6.9E.90.E9.A1.B9.E7.9B.AE" target="_blank">\u67E5\u770B\u5E2E\u52A9</a></span>\n\n<!-- target: TPL_modbus_upload_tip -->\n<span data-ui-type="Tip" data-ui-arrow="true" data-ui-id="uploaderTip">\n    \u6807\u51C6\u6837\u4F8B<br></br>\n    <img src="/iot/src/img/hint.png" style="width: 600px; height: auto;"></span>\n\n<!-- target: TPL_iot_policy_fragment -->\n<i class="iconfont icon-minus" action-type="delete-topic"></i>\n<div class="form-row">\n    <label><i>\uFF0A</i>\u4E3B\u9898\uFF1A</label>\n    <div class="form-value">\n        <div data-ui-type="TextBox"\n            data-ui-name="topic${index}"\n            data-ui-id="topic${index}"></div>\n        <!-- import: TPL_iot_topic_tip -->\n    </div>\n</div>\n<div class="form-row operations-form-row">\n    <label><i>\uFF0A</i>\u6743\u9650\uFF1A</label>\n    <div class="form-value">\n        <div data-ui-type="BoxGroup"\n            data-ui-name="operations${index}"\n            data-ui-id="operations${index}"\n            data-ui-box-type="checkbox"></div>\n    </div>\n</div>\n\n<!-- target: TPL_iot_turnkey_enter -->\n<span class="ui-turnkey">\n    <button data-ui-id="turnkey"\n            data-ui-type="Button">\u7269\u8054\u7F51\u5FEB\u901F\u5E94\u7528\u901A\u9053</button>\n</span>\n';
});
define('iot/config', [
    'exports',
    'module',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'er/controller',
    'common/config',
    'common/constants'
], function (exports, module, _underscore, _babelRuntimeHelpersInteropRequireDefault, _erController, _commonConfig, _commonConstants) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var _commonConfig2 = _babelRuntimeHelpersInteropRequireDefault['default'](_commonConfig);
    var _K = _babelRuntimeHelpersInteropRequireDefault['default'](_commonConstants);
    var api = {
        iotEndpointList: '/api/iot/endpoint/list',
        iotEndpointCreate: '/api/iot/endpoint/create',
        iotEndpointDelete: '/api/iot/endpoint/delete',
        iotEndpointDetail: '/api/iot/endpoint/detail',
        updateEndpointDesp: '/api/iot/endpoint/update',
        iotThingList: '/api/iot/thing/list',
        iotThingCreate: '/api/iot/thing/create',
        iotThingCreateV2: '/api/iot/thing/create_v2',
        iotThingDelete: '/api/iot/thing/delete',
        iotThingDetail: '/api/iot/thing/detail',
        iotThingEdit: '/api/iot/thing/edit',
        iotThingEditV2: '/api/iot/thing/edit_v2',
        updateThingDesp: '/api/iot/thing/update',
        iotPrincipalList: '/api/iot/principal/list',
        iotPrincipalCreate: '/api/iot/principal/create',
        iotPrincipalCreateV2: '/api/iot/principal/create_v2',
        iotPrincipalDelete: '/api/iot/principal/delete',
        iotPrincipalDetail: '/api/iot/principal/detail',
        iotPrincipalSearch: '/api/iot/principal/search',
        iotPrincipalEdit: '/api/iot/principal/edit',
        iotPrincipalEditV2: '/api/iot/principal/edit_v2',
        iotPrincipalGetPassword: '/api/iot/principal/get_password',
        iotPolicyList: '/api/iot/policy/list',
        iotPolicySearch: '/api/iot/policy/search',
        iotPolicyCreate: '/api/iot/policy/create',
        iotPolicyDetail: '/api/iot/policy/detail',
        iotPolicyEdit: '/api/iot/policy/edit',
        iotPolicyDelete: '/api/iot/policy/delete',
        iotStorageCopylist: '/api/iot/storage/list',
        iotStorageCopyDelete: '/api/iot/storage/delete',
        iotStorageCreate: '/api/iot/storage/create',
        iotStorageDetail: '/api/iot/storage/detail',
        iotStorageEdit: '/api/iot/storage/edit',
        iotStorageList: '/api/iot/kafka/list',
        iotKafkaTopic: '/api/iot/kafka/kafka_topic/list',
        iotKafkaDelete: '/api/iot/kafka/delete',
        iotKafkaCreate: '/api/iot/kafka/create',
        iotKafkaEdit: '/api/iot/kafka/edit',
        iotBosCheckStatus: '/api/iot/bos/check_bos_status',
        iotBosBucketList: '/api/iot/bos/bucket/list',
        iotBosFolderList: '/api/iot/bos/object/folder',
        iotBosObjectList: '/api/iot/bos/object/list',
        iotBosCreateBucket: '/api/iot/bos/create',
        getGatewayList: '/api/iot/modbus/gateway/list',
        createGateway: '/api/iot/modbus/gateway/create',
        deleteGateway: '/api/iot/modbus/gateway/delete',
        getGatewaySublist: '/api/iot/modbus/device/list',
        createDevice: '/api/iot/modbus/device/create',
        deleteDevice: '/api/iot/modbus/device/delete',
        editDevice: '/api/iot/modbus/device/edit',
        updateDeviceState: '/api/iot/modbus/device/update_state',
        resetPassword: '/api/iot/modbus/gateway/regenerate_password',
        updateGatewayState: '/api/iot/modbus/gateway/update_state',
        getParseProjectList: '/api/iot/modbus/parseproject/list',
        updateParseproject: '/api/iot/modbus/parseproject/update',
        editParseproject: '/api/iot/modbus/parseproject/edit',
        deleteParseProject: '/api/iot/modbus/parseproject/delete',
        createParseproject: '/api/iot/modbus/parseproject/create',
        verifyData: '/api/iot/modbus/parsedata',
        getTrantableList: '/api/iot/modbus/trantable/list',
        getSlaveList: '/api/iot/modbus/slavepolicy/list',
        deleteSlave: '/api/iot/modbus/slavepolicy/delete',
        deleteTrantable: '/api/iot/modbus/trantable/delete',
        updateTrantable: '/api/iot/modbus/trantable/update',
        createTrantable: '/api/iot/modbus/trantable/create',
        editTrantable: '/api/iot/modbus/trantable/edit',
        createSlavePolicy: '/api/iot/modbus/slavepolicy/create',
        getIotInfor: '/api/iot/modbus/slavepolicy/iotinfor',
        activateDeploy: '/api/iot/modbus/deploy_modbus',
        activateDeploySingle: '/api/iot/modbus/deploy_modbus_single',
        createCustomProperty: '/api/iot/modbus/custom-property/create',
        getCustomPropertyList: '/api/iot/modbus/custom-property/list',
        deleteCustomProperty: '/api/iot/modbus/custom-property/delete',
        modbusLandingPage: '/api/iot/modbus/landingpage',
        getPrice: '/api/iot/order/price',
        getUpgradePrice: '/api/iot/order/upgrade_price',
        createOrder: '/api/iot/order/confirm',
        getPackageDetail: '/api/iot/order/iotresource/detail',
        getUnicomDetail: '/api/iot/order/iotresource/detail_unicom',
        getOverdueStatus: '/api/iot/validate/finance/check',
        getUnicomTester: '/api/iot/order/unicom/tester_quota',
        getDashboardSummary: '/api/iot/v2/dashboard/summary',
        getDashboardHistory: '/api/iot/v2/dashboard/historical-usage',
        getEndpointSummary: '/api/iot/v2/dashboard/endpoint/summary',
        getEndpointHistory: '/api/iot/v2/dashboard/endpoint/historical-usage',
        confirmTurnkey: '/api/iot/turnkey/project/confirm',
        createTurnkey: '/api/iot/turnkey/project/create',
        detailTurnkey: '/api/iot/turnkey/project/detail',
        listTurnkey: '/api/iot/turnkey/project/list',
        permissionTurnkey: '/api/iot/turnkey/project/permission',
        checkNameTurnkey: '/api/iot/turnkey/project/name/check',
        subPermission: '/api/iot/endpoint/permission',
        getRealNameStatus: '/api/iot/real-name/status'
    };
    var actionsConfig = [];
    _controller['default'].registerAction(actionsConfig);
    var config = _commonConfig2['default'].getConfig();
    _u['default'].extend(config.api, api);
    _u['default'].extend(config, {
        index: '/iot/endpoint/list',
        pageSize: 10,
        region: _u['default'].map(_u['default'].pick(_K['default'].REGION, [
            'gz',
            'bj'
        ]), function (val, key) {
            return {
                name: val,
                value: key
            };
        }),
        nameRegExp: /^(?!-)(?!.*?-$)(?!.*?-{2,}.*?)(?!(?:test|bce|iot|bridge|default)$)[a-zA-Z0-9-_]{3,32}$/,
        topicRegExp: /^[a-zA-Z0-9_\-+=%~`!@#$\^\&\*:'",.;:<>\/\?\(\)\[\]\{\}\\\|]{1,255}$/,
        serviceType: 'IOT',
        maxMessagesNum: 1000
    });
    module.exports = config;
});
define('iot/endpoint/AllStats', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    'common/util/timeUtil',
    'moment',
    './AllStatsModel',
    './AllStatsView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTimeUtil, _moment, _AllStatsModel, _AllStatsView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _moment2 = _babelRuntimeHelpersInteropRequireDefault['default'](_moment);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_AllStatsModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_AllStatsView);
    var AllStats = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](AllStats, _BaseAction);
        function AllStats() {
            _babelRuntimeHelpersClassCallCheck['default'](this, AllStats);
            _BaseAction.apply(this, arguments);
        }
        AllStats.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('REFRESH_CHART', this.refreshChart, this);
            this.view.on('UPGRADE', this.upgrade, this);
            this.view.on('REBUY', this.rebuy, this);
            this.refreshChart();
        };
        AllStats.prototype.upgrade = function upgrade() {
            this.redirect('/iot/order/upgrade');
        };
        AllStats.prototype.rebuy = function rebuy() {
            this.redirect('/iot/order/create');
        };
        AllStats.prototype.refreshChart = function refreshChart() {
            var _this = this;
            var timeRange = this.view.get('rangeCalendar').getValue().split(/,/);
            var timeLenght = _moment2['default'](timeRange[1]).valueOf() - _moment2['default'](timeRange[0]).valueOf();
            if (timeLenght / 1000 > 31536000) {
                this.view.waitAlert({
                    title: '\u63D0\u793A',
                    content: '\u65F6\u95F4\u8303\u56F4\u6700\u5927\u4E3A\u4E00\u5E74\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9',
                    width: 420
                });
                return;
            }
            var nowTime = new Date().valueOf();
            if (_moment2['default'](timeRange[1]).valueOf() > nowTime) {
                this.view.waitAlert({
                    title: '\u63D0\u793A',
                    content: '\u6240\u9009\u65F6\u95F4\u8D85\u8FC7\u5F53\u524D\u65F6\u95F4\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9',
                    width: 420
                });
                return;
            }
            var request = {
                start: _timeUtil['default'].timeToUtc(timeRange[0]),
                end: _timeUtil['default'].timeToUtc(timeRange[1]),
                pace: this.view.get('cycleUnit').getValue(),
                type: 'COMMON'
            };
            this.model.getDashboardHistory(request).then(function (data) {
                return _this.view.renderNewLineChart(data);
            }).fail(function () {
                return _this.view.showToast('\u83B7\u53D6\u65B0\u589E\u56FE\u8868\u5931\u8D25\uFF01', { messageType: 'error' });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](AllStats, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return AllStats;
    }(_BaseAction2['default']);
    module.exports = AllStats;
});
define('iot/endpoint/allStats.tpl', [], function () {
    return '<!-- target: TPL_iot_endpoint_allStats -->\n<div class="iot-all-stats iot-main-wrap main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u7269\u63A5\u5165-\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u7528\u91CF\u7EDF\u8BA1</span>\n        </p>\n        <div class="detail-content list-content">\n            <h2>\u672C\u6708\u6982\u89C8</h2>\n            <div class="main-content">\n                <div class="detail-parts-table">\n                    <dl class="detail-part-1-col basic-info" id="config-wrap">\n                        <dt>\n                            <h4>\u57FA\u672C\u4FE1\u606F</h4>\n                        </dt>\n                        <div data-ui-type="EChart" data-ui-chart-type="pie" data-ui-id="summaryPie"\n                             id="summaryPie" class="summary-pie"></div>\n                        <dd class="stats">\n                            <div class="detail-row">\n                                <label>\u5B9E\u4F8B\u6570\uFF1A</label>\n                                <span>${summary.endpointCount} \u4E2A</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u672C\u6708\u8D26\u671F\uFF1A</label>\n                                <span>${summary.billMonthStart} \u81F3 ${summary.billMonthEnd}</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u672C\u6708\u989D\u5EA6\uFF1A</label>\n                                <span>${summary.quotaNum} \u6761</span>\n                            </div>\n                            <div class="detail-row">\n                                <!-- if: ${summary.quota} >= 1000 -->\n                                 <span class="disabled">\n                                    <span data-ui-type="Tip" data-ui-id="ui-tip-0" data-ui-layer-width="auto" class="ui-ctrl ui-tip">\u60A8\u5DF2\u662F\u6700\u9AD8\u989D\u5EA6\uFF0C\u82E5\u60F3\u7EE7\u7EED\u5347\u914D\uFF0C\u8BF7\u63D0\u5DE5\u5355 </span>\n                                    <esui-button class="upgrade-button ui-button-disabled state-disabled skin-danger-disabled skin-danger-button-disabled gray" data-ui-id="upgradeConfig" data-ui-disabled="disabled">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                                </span>\n                                <!-- elif: ${summary.status} !== \'EXPIRED\' && ${overdueStatus.pass} -->\n                                <esui-button class="upgrade-button"\n                                    data-ui-id="upgradeConfig">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                                <!-- elif: ${summary.status} !== \'EXPIRED\' && !${overdueStatus.pass} -->\n                                <span class="disabled">\n                                    <span data-ui-type="Tip" data-ui-id="ui-tip-0" data-ui-layer-width="auto" class="ui-ctrl ui-tip">\u60A8\u5DF2\u6B20\u8D39!\u8BF7<a href="/finance/#/finance/account/recharge">\u5145\u503C</a>\u540E\u8D2D\u4E70</span>\n                                    <esui-button class="upgrade-button ui-button-disabled state-disabled skin-danger-disabled skin-danger-button-disabled gray" data-ui-id="upgradeConfig" data-ui-disabled="disabled">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                                </span>\n                                <!-- /if -->\n                            </div>\n                        </dd>\n                        <dd class="stats">\n                            <div class="detail-row">\n                                <label>\u5DF2\u7528\uFF1A</label>\n                                <span>${summary.usedNum} \u6761</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u5269\u4F59\uFF1A</label>\n                                <span>${summary.remainNum} \u6761</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u5269\u4F59\u65E5\u5747\uFF1A</label>\n                                <span>${summary.remainPerDayNum} \u6761</span>\n                            </div>\n                        </dd>\n                    </dl>\n                    <dl class="detail-part-1-col" id="config-wrap">\n                        <dt>\n                            <h4>\u7D2F\u8BA1\u4FE1\u606F</h4>\n                        </dt>\n                        <div class="stats-chart">\n                            <div class="wrapper" >\n                                <div class="chart" id="accStats"></div>\n                            </div>\n                        </div>\n                    </dl>\n                    <dl class="detail-part-1-col" id="new-wrap">\n                        <dt>\n                            <h4>\u65B0\u589E\u4FE1\u606F</h4>\n                        </dt>\n                        <div class="option">\n                            <span>\u65F6\u95F4\u9009\u62E9\uFF1A</span>\n                            <input data-ui-type="RangeCalendar" name="rangeCalendar"\n                               data-ui-id="rangeCalendar" class="range-calendar"\n                               data-ui-time="true"/>\n                        </div>\n                        <div class="option">\n                            <span>\u91C7\u6837\u5468\u671F\uFF1A</span>\n                            <esui-select class="cycle-unit"\n                                data-ui-id="cycleUnit" data-ui-name="cycleUnit"\n                                data-ui-width="80"\n                                data-ui-datasource="@cycleList"></esui-select>\n                        </div>\n                        <esui-button class="refresh-chart" data-ui-skin="refresh"\n                                data-ui-id="refreshChart"></esui-button>\n                        <div class="stats-chart">\n                            <div class="wrapper" >\n                                <div class="chart" id="newStats"></div>\n                            </div>\n                        </div>\n                    </dl>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/endpoint/AllStatsModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    'common/util/timeUtil',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTimeUtil, _config) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var AllStatsModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](AllStatsModel, _BaseModel);
        function AllStatsModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, AllStatsModel);
            _BaseModel.apply(this, arguments);
        }
        AllStatsModel.prototype.getDashboardHistory = function getDashboardHistory(request) {
            return _config.api.getDashboardHistory(request);
        };
        AllStatsModel.prototype.outputdollars = function outputdollars(number) {
            number = number.toString();
            if (number.length <= 3) {
                return number === '' ? '0' : number;
            }
            var mod = number.length % 3;
            var output = mod === 0 ? '' : number.substring(0, mod);
            var i = 0;
            for (i = 0; i < Math.floor(number.length / 3); i++) {
                if (mod === 0 && i === 0) {
                    output += number.substring(mod + 3 * i, mod + 3 * i + 3);
                } else {
                    output += ',' + number.substring(mod + 3 * i, mod + 3 * i + 3);
                }
            }
            return output;
        };
        _babelRuntimeHelpersCreateClass['default'](AllStatsModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        summary: function summary(model) {
                            return _config.api.getDashboardSummary({ type: 'COMMON' }).then(function (item) {
                                item.billMonthEnd = _timeUtil['default'].toTime(item.billMonthEnd);
                                item.billMonthStart = _timeUtil['default'].toTime(item.billMonthStart);
                                item.quotaNum = model.outputdollars(item.quota);
                                item.usedNum = model.outputdollars(item.usage);
                                item.remainNum = model.outputdollars(item.remain);
                                item.remainPerDayNum = model.outputdollars(item.remainPerDay);
                                item.quota = item.quota / 1000000;
                                return item;
                            });
                        },
                        cycleList: function cycleList(model) {
                            return [
                                {
                                    text: '1\u5C0F\u65F6',
                                    value: 'hourly'
                                },
                                {
                                    text: '1\u5929',
                                    value: 'daily'
                                }
                            ];
                        },
                        overdueStatus: function overdueStatus(model) {
                            return _config.api.getOverdueStatus();
                        }
                    };
                }
            }]);
        return AllStatsModel;
    }(_BaseModel2['default']);
    module.exports = AllStatsModel;
});
define('iot/endpoint/AllStatsView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./allStats.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'jquery',
    'moment',
    'echarts',
    'echarts/chart/line',
    'inf-ria/utils/mtools'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplAllStatsTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _jquery, _moment, _echarts, _echartsChartLine, _infRiaUtilsMtools) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _moment2 = _babelRuntimeHelpersInteropRequireDefault['default'](_moment);
    var _echarts2 = _babelRuntimeHelpersInteropRequireDefault['default'](_echarts);
    var _mtools = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaUtilsMtools);
    var AllStatsView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](AllStatsView, _BaseView);
        function AllStatsView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, AllStatsView);
            _BaseView.apply(this, arguments);
        }
        AllStatsView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'cycleUnit:change': function cycleUnitChange(e) {
                    return _this.fire('REFRESH_CHART', e);
                },
                'rangeCalendar:change': function rangeCalendarChange(e) {
                    return _this.fire('REFRESH_CHART', e);
                },
                'refreshChart:click': function refreshChartClick(e) {
                    return _this.fire('REFRESH_CHART', e);
                },
                'upgradeConfig:click': function upgradeConfigClick(e) {
                    return _this.fire('UPGRADE', e);
                },
                'reBuy:click': function reBuyClick(e) {
                    return _this.fire('REBUY', e);
                }
            };
        };
        AllStatsView.prototype.renderPieChart = function renderPieChart(data) {
            var chartsOption = {
                animation: false,
                color: [
                    '#CFE8FC',
                    '#108cee'
                ],
                series: [{
                        type: 'pie',
                        center: [
                            '50%',
                            '50%'
                        ],
                        radius: [
                            '71%',
                            '100%'
                        ],
                        itemStyle: { emphasis: { label: { formatter: '{b}\n{d}%' } } },
                        label: {
                            normal: {
                                show: false,
                                position: 'center'
                            },
                            emphasis: {
                                show: true,
                                textStyle: {
                                    fontSize: '13',
                                    fontWeight: 'bold'
                                },
                                formatter: '{b}\n{d}%',
                                label: { formatter: '{b}\n{d}%' }
                            }
                        },
                        data: [
                            {
                                name: 'REMAIN',
                                value: data.remain
                            },
                            {
                                name: 'USED',
                                value: data.usage
                            }
                        ]
                    }]
            };
            var pieChart = this.get('summaryPie');
            pieChart.setOption(chartsOption);
            _$['default'](window).on('resize.echarts', pieChart.echartsInstance.resize);
        };
        AllStatsView.prototype.renderAccLineChart = function renderAccLineChart(data) {
            var metric = {
                name: 'ACC-CHART',
                unit: '',
                metrics: []
            };
            var type = 'sum';
            var fixedData = _mtools['default'].adjustSeriesData(data, 'sum');
            metric.statistics = type;
            _u['default'].each(data.series, function (item) {
                metric.metrics.push({
                    name: item.name,
                    value: item.name
                });
            });
            var chartOption = _mtools['default'].getChartOptions(fixedData, metric, null, {});
            var panelChart = _echarts2['default'].init(document.getElementById('accStats'));
            panelChart.setOption(chartOption, true);
        };
        AllStatsView.prototype.renderNewLineChart = function renderNewLineChart(data) {
            var metric = {
                name: 'NEW-CHART',
                unit: '',
                metrics: []
            };
            var type = 'sum';
            var fixedData = _mtools['default'].adjustSeriesData(data, 'sum');
            metric.statistics = type;
            _u['default'].each(data.series, function (item) {
                metric.metrics.push({
                    name: item.name,
                    value: item.name
                });
            });
            var chartOption = _mtools['default'].getChartOptions(fixedData, metric, null, {});
            var panelChart = _echarts2['default'].init(document.getElementById('newStats'));
            panelChart.setOption(chartOption, true);
        };
        AllStatsView.prototype.enterDocument = function enterDocument() {
            _BaseView.prototype.enterDocument.call(this);
            this.renderPieChart(this.model.get('summary'));
            this.renderAccLineChart(this.model.get('summary'));
        };
        _babelRuntimeHelpersCreateClass['default'](AllStatsView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_endpoint_allStats';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        rangeCalendar: {
                            rawValue: {
                                begin: _moment2['default']().subtract(12, 'h').toDate(),
                                end: new Date()
                            },
                            range: {
                                begin: _moment2['default']().subtract(1, 'y').toDate(),
                                end: new Date()
                            }
                        }
                    };
                }
            }
        ]);
        return AllStatsView;
    }(_BaseView2['default']);
    module.exports = AllStatsView;
});
define('iot/endpoint/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default',
    'common/component/action_category'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault, _commonComponentAction_category) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var _ActionCategory = _babelRuntimeHelpersInteropRequireDefault['default'](_commonComponentAction_category);
    var actionsConfig = [
        {
            type: 'iot/endpoint/List',
            path: '/iot/endpoint/initlist',
            category: _ActionCategory['default'].LIST
        },
        {
            type: 'iot/endpoint/List2',
            path: '/iot/endpoint/list',
            category: _ActionCategory['default'].LIST
        },
        {
            type: 'iot/endpoint/dialog/Create',
            path: '/iot/endpoint/create'
        },
        {
            type: 'iot/endpoint/Detail',
            path: '/iot/endpoint/package'
        },
        {
            type: 'iot/endpoint/UnicomDetail',
            path: '/iot/endpoint/unicomPackage'
        },
        {
            type: 'iot/endpoint/AllStats',
            path: '/iot/endpoint/allStats'
        },
        {
            type: 'iot/endpoint/UnicomStats',
            path: '/iot/endpoint/unicomStats'
        },
        {
            type: 'iot/endpoint/EndpointStats',
            path: '/iot/endpoint/stats'
        },
        {
            type: 'iot/endpoint/UnicomEndpointStats',
            path: '/iot/endpoint/uStats'
        }
    ];
    _controller['default'].registerAction(actionsConfig);
    module.exports = {
        noDataHtml: [
            '<div><p>\u4F60\u8FD8\u6CA1\u521B\u5EFA\u4EFB\u4F55\u5B9E\u4F8B</br>',
            '\u70B9\u51FB\u5DE6\u4E0A\u89D2\u6309\u94AE\u7ACB\u5373\u521B\u5EFA',
            '</p></div>'
        ].join(''),
        noDataHtmlsubuser: [
            '<div><p>\u6CA1\u6709\u4EFB\u4F55\u5B9E\u4F8B</br>',
            '\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u6388\u6743',
            '</p></div>'
        ].join(''),
        tpl: {
            command: '<span class="operations"><button data-command="<%- command %>" ' + 'data-command-args="<%- args %>" class="cmd-button <%- className %>" <%- disabled %>>' + '<%- label %></button></span>',
            cmdWithTip: '<span class="operations <%- disabled %>">' + '<span data-ui-type="Tip" data-ui-id="<%- tipId %>" data-ui-layer-width="auto" ' + 'class="<%- tipClassName %>"><%- tipText %></span>' + '<button data-command="<%- command %>" data-command-args="<%- args %>" ' + 'class="cmd-button <%- className %>" <%- disabled %>><%- label %></button>' + '</span>'
        },
        status: {
            RUNNING: {
                text: '\u6B63\u5E38',
                css: 'green'
            },
            EXPIRED: {
                text: '\u5DF2\u8FC7\u671F',
                css: 'red'
            },
            STOPPED: {
                text: '\u672C\u6708\u914D\u989D\u5DF2\u7528\u5B8C',
                css: 'red'
            },
            CREATING: {
                text: '\u521B\u5EFA\u4E2D',
                css: 'green'
            }
        }
    };
});
define('iot/endpoint/Detail', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/helper',
    './DetailModel',
    './DetailView',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _infRiaHelper, _DetailModel, _DetailView, _config) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _helper = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaHelper);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailView);
    var Detail = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Detail, _BaseAction);
        function Detail() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Detail);
            _BaseAction.apply(this, arguments);
        }
        Detail.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('UPGRADE', this.upgrade, this);
            this.view.on('REBUY', this.rebuy, this);
            this.view.on('RENEW', this.renew, this);
        };
        Detail.prototype.upgrade = function upgrade() {
            this.redirect('/iot/order/upgrade');
        };
        Detail.prototype.rebuy = function rebuy() {
            this.redirect('/iot/order/create');
        };
        Detail.prototype.renew = function renew() {
            var _model$get = this.model.get('basicInfo');
            var resourceId = _model$get.resourceId;
            var region = _model$get.region;
            _helper['default'].redirectToModule('billing', '/billing/recharge/list', {
                serviceType: _config.serviceType,
                instanceIds: resourceId,
                region: region
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Detail, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Detail;
    }(_BaseAction2['default']);
    module.exports = Detail;
});
define('iot/endpoint/detail.tpl', [], function () {
    return '<!-- target: TPL_iot_endpoint_detail -->\n<div class="iot-package-detail iot-main-wrap main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u7269\u63A5\u5165-\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u8BA1\u8D39\u5957\u9910\u8BE6\u60C5</span>\n        </p>\n        <div class="detail-content list-content">\n            <h2>\u8BA1\u8D39\u5957\u9910\u8BE6\u60C5</h2>\n            <div class="main-content">\n                <div class="detail-parts-table">\n                    <div class="row-12">\n                        <div class="col-6">\n                            <dl class="detail-part-1-col with-desc-editor">\n                                <dt>\n                                    <h4>\u57FA\u672C\u4FE1\u606F</h4>\n                                </dt>\n                                <dd class="col-2">\n                                    <div class="detail-row">\n                                        <label>\u533A\u57DF\uFF1A</label>\n                                        <span>${basicInfo.locationTxt}</span>\n                                    </div>\n                                    <div class="detail-row">\n                                        <label>\u72B6\u6001\uFF1A</label>\n                                        <span class="status status-${basicInfo.state.css}"> ${basicInfo.state.text}</span>\n                                    </div>\n                                </dd>\n                            </dl>\n                        </div>\n                        <div class="col-6">\n                            <dl class="detail-part-1-col">\n                                <dt>\n                                    <h4>\u652F\u4ED8\u4FE1\u606F</h4>\n                                </dt>\n                                <dd>\n                                    <div class="detail-row">\n                                        <label>\u652F\u4ED8\u65B9\u5F0F\uFF1A</label>\n                                        <span>${basicInfo.payType}\n                                        </span>\n                                    </div>\n                                    <div class="detail-row">\n                                        <label>\u521B\u5EFA\u65F6\u95F4\uFF1A</label>\n                                        <span>${basicInfo.createTime}</span>\n                                    </div>\n                                    <div class="detail-row">\n                                        <label>\u5230\u671F\u65F6\u95F4\uFF1A</label>\n                                        <span>${basicInfo.expireTime}</span>\n                                    </div>\n                                    <div class="detail-row">\n                                        <!-- if: ${overdueStatus.pass} && ${basicInfo.recharge} -->\n                                        <esui-button data-ui-id="renewButton" data-ui-type="Button">\u7EED\u8D39</esui-button>\n                                        <!-- else -->\n                                        <span class="disabled">\n                                            <span data-ui-type="Tip" data-ui-id="ui-tip-0" data-ui-layer-width="auto" class="ui-ctrl ui-tip">\n                                                <!-- if: !${overdueStatus.pass} -->\n                                                    \u60A8\u5DF2\u6B20\u8D39!\u8BF7<a href="/finance/#/finance/account/recharge">\u5145\u503C</a>\u540E\u8D2D\u4E70\n                                                <!-- else -->\n                                                    \u8D26\u671F\u5DF2\u7ECF\u5927\u4E8E\u4E00\u5E74\uFF0C\u4E0D\u7B26\u5408\u7EED\u8D39\u6761\u4EF6\n                                                <!-- /if -->\n                                            </span>\n                                            <esui-button class="ui-button-disabled state-disabled skin-danger-disabled skin-danger-button-disabled" data-ui-type="Button" data-ui-disabled="disabled">\u7EED\u8D39</esui-button>\n                                        </span>\n                                        <!-- /if -->\n                                    </div>\n                                </dd>\n                            </dl>\n                        </div>\n                    </div>\n\n                    <dl class="detail-part-1-col" id="config-wrap">\n                        <dt>\n                            <h4>\u914D\u7F6E\u4FE1\u606F</h4>\n                        </dt>\n                        <dd class="col-2">\n                            <div class="detail-row">\n                                <label>\u8D2D\u4E70\u89C4\u683C\uFF1A</label>\n                                <span>${basicInfo.messagesNum} \u767E\u4E07\u6761/\u6708</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u8D2D\u4E70\u65F6\u957F\uFF1A</label>\n                                <span>${basicInfo.purchaseMonths} \u4E2A\u6708</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u672C\u6708\u8D26\u671F\uFF1A</label>\n                                <span>${basicInfo.beginningAccount} \u81F3 ${basicInfo.endAccount}</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u672C\u6708\u8D26\u671F\u5185\u5269\u4F59\uFF1A</label>\n                                <span>${basicInfo.remainderNum} \u6761</span>\n                            </div>\n                            <!-- if: ${basicInfo.status} !== \'EXPIRED\' && ${overdueStatus.pass} && ${basicInfo.messagesNum} < 1000 -->\n                            <esui-button data-ui-id="upgradeConfig">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                            <!-- else -->\n                            <span class="disabled">\n                                <span data-ui-type="Tip" data-ui-id="ui-tip-0" data-ui-layer-width="auto" class="ui-ctrl ui-tip">\n                                    <!-- if: ${basicInfo.status} === \'EXPIRED\' -->\n                                        \u8D44\u6E90\u5DF2\u8FC7\u671F\n                                    <!-- elif: ${basicInfo.messagesNum} >= 1000 -->\n                                        \u60A8\u5DF2\u662F\u6700\u9AD8\u989D\u5EA6\uFF0C\u82E5\u60F3\u7EE7\u7EED\u5347\u914D\uFF0C\u8BF7\u63D0\u5DE5\u5355\n                                    <!-- else -->\n                                        \u60A8\u5DF2\u6B20\u8D39!\u8BF7<a href="/finance/#/finance/account/recharge">\u5145\u503C</a>\u540E\u8D2D\u4E70\n                                    <!-- /if -->\n                                </span>\n                                <esui-button data-ui-id="upgradeConfig" class="ui-button-disabled state-disabled skin-danger-disabled skin-danger-button-disabled" data-ui-disabled="disabled">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                            </span>\n                            <!-- /if -->\n                        </dd>\n                    </dl>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/endpoint/DetailModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'common/util/timeUtil',
    './config',
    '../config',
    '../enum'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _commonUtilTimeUtil, _config, _config3, _enum) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    var DetailModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](DetailModel, _BaseModel);
        function DetailModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailModel);
            _BaseModel.apply(this, arguments);
        }
        DetailModel.prototype.outputdollars = function outputdollars(number) {
            number = number.toString();
            if (number.length <= 3) {
                return number === '' ? '0' : number;
            }
            var mod = number.length % 3;
            var output = mod === 0 ? '' : number.substring(0, mod);
            var i = 0;
            for (i = 0; i < Math.floor(number.length / 3); i++) {
                if (mod === 0 && i === 0) {
                    output += number.substring(mod + 3 * i, mod + 3 * i + 3);
                } else {
                    output += ',' + number.substring(mod + 3 * i, mod + 3 * i + 3);
                }
            }
            return output;
        };
        DetailModel.prototype.prepare = function prepare() {
            var basicInfo = this.get('basicInfo');
            var locationItem = _u['default'].find(_config3.region, { value: basicInfo.region });
            _u['default'].extend(basicInfo, {
                localTime: _timeUtil['default'].toTime(basicInfo.createTime),
                locationTxt: locationItem ? locationItem.name : '',
                hostNameList: _u['default'].map(basicInfo.hostname, function (host) {
                    return '<p>' + host + '</p>';
                }).join(''),
                configureTxt: _enum.ENDPOINT_CONFIG.getTextFromValue(basicInfo.configure)
            });
            this.set('basicInfo', basicInfo);
        };
        _babelRuntimeHelpersCreateClass['default'](DetailModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        basicInfo: function basicInfo(model) {
                            return _config3.api.getPackageDetail().then(function (item) {
                                item.state = {
                                    css: _config2['default'].status[item.status].css,
                                    text: _config2['default'].status[item.status].text
                                };
                                item.payType = item.productType === 'prepay' ? '\u9884\u4ED8\u8D39' : '\u540E\u4ED8\u8D39';
                                item.remainderNum = item.remainderNum;
                                item.beginningAccount = _timeUtil['default'].toTime(item.beginningAccount);
                                item.endAccount = _timeUtil['default'].toTime(item.endAccount);
                                item.createTime = _timeUtil['default'].toTime(item.createTime);
                                item.expireTime = _timeUtil['default'].toTime(item.expireTime);
                                item.remainderNum = model.outputdollars(item.remainderNum);
                                return item;
                            });
                        },
                        overdueStatus: function overdueStatus(model) {
                            return _config3.api.getOverdueStatus();
                        }
                    };
                }
            }]);
        return DetailModel;
    }(_BaseModel2['default']);
    module.exports = DetailModel;
});
define('iot/endpoint/DetailView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./detail.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplDetailTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var DetailView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](DetailView, _BaseView);
        function DetailView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailView);
            _BaseView.apply(this, arguments);
        }
        DetailView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'upgradeConfig:click': function upgradeConfigClick(e) {
                    return _this.fire('UPGRADE', e);
                },
                'reBuy:click': function reBuyClick(e) {
                    return _this.fire('REBUY', e);
                },
                'renewButton:click': function renewButtonClick(e) {
                    return _this.fire('RENEW', e);
                }
            };
        };
        DetailView.prototype.enterDocument = function enterDocument() {
            _BaseView.prototype.enterDocument.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](DetailView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_endpoint_detail';
                }
            }]);
        return DetailView;
    }(_BaseView2['default']);
    module.exports = DetailView;
});
define('iot/endpoint/dialog/Create', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../events',
    './CreateModel',
    './CreateView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _underscore, _events, _CreateModel, _CreateView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateView);
    var Create = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Create, _FormAction);
        function Create() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Create);
            _FormAction.apply(this, arguments);
        }
        Create.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].INPUT, this.syncWithName, this);
        };
        Create.prototype.syncWithName = function syncWithName(e) {
            var input = this.view.get('endpointName');
            var labels = this.view.getGroup('endpointName');
            var value = input.getValue();
            _u['default'].each(labels, function (label) {
                return label.setText(value ? value + '.' : '');
            });
        };
        Create.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u5B9E\u4F8B\u521B\u5EFA\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Create.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        Create.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Create, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u5B9E\u4F8B\u521B\u5EFA\u6210\u529F\uFF01';
                }
            }
        ]);
        return Create;
    }(_FormAction2['default']);
    module.exports = Create;
});
define('iot/endpoint/dialog/create.tpl', [], function () {
    return '<!-- target: TPL_iot_create_endpoint -->\n<div class="iot-dialog-form iot-endpoint-create order-recharge">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-data-body">\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u540D\u79F0\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                        data-ui-name="endpointName"\n                        data-ui-id="endpointName"></div>\n                    <!-- import: TPL_iot_name_tip -->\n                </div>\n            </div>\n            <div class="form-row">\n                <label>\u533A\u57DF\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="RadioSelect"\n                        data-ui-id="location"\n                        class="ui-radioselect-custom"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label>\u5730\u5740\uFF1A</label>\n                <div class="form-value">\n                    <div class="default-txt">\n                        <p>\n                            tcp://<span data-ui-type="Label"\n                                data-ui-group="endpointName"></span>mqtt.iot.${region}.baidubce.com:1883\n                        </p>\n                        <p>\n                            ssl://<span data-ui-type="Label"\n                                data-ui-group="endpointName"></span>mqtt.iot.${region}.baidubce.com:1884\n                        </p>\n                        <p>\n                            wss://<span data-ui-type="Label"\n                                data-ui-group="endpointName"></span>mqtt.iot.${region}.baidubce.com:8884\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<!-- target: TPL_iot_create_endpoint_child -->\n<!-- import: TPL_iot_create_endpoint -->\n';
});
define('iot/endpoint/dialog/CreateModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'common/region',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _commonRegion, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var _R = _babelRuntimeHelpersInteropRequireDefault['default'](_commonRegion);
    var CreateModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreateModel, _FormModel);
        function CreateModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateModel);
            _FormModel.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](CreateModel, [
            {
                key: 'submitRequester',
                get: function get() {
                    return _config.api.iotEndpointCreate;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        location: function location(model) {
                            var region = _R['default'].getCurrentRegion();
                            return [{
                                    name: region.label,
                                    value: region.id
                                }];
                        },
                        region: function region(model) {
                            var region = _R['default'].getCurrentRegion();
                            return region.id;
                        }
                    };
                }
            }
        ]);
        return CreateModel;
    }(_FormModel2['default']);
    module.exports = CreateModel;
});
define('iot/endpoint/dialog/CreateView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./create.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    '../../events',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreateTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _events, _config) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var CreateView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreateView, _FormView);
        function CreateView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateView);
            _FormView.apply(this, arguments);
        }
        CreateView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'endpointName:input': function endpointNameInput(e) {
                    return _this.fire(_EVENTS['default'].INPUT, e);
                }
            };
        };
        CreateView.prototype.getExtraFormData = function getExtraFormData() {
            return {
                location: this.get('location').getValue(),
                configure: 'free'
            };
        };
        _babelRuntimeHelpersCreateClass['default'](CreateView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_create_endpoint';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        endpointName: {
                            title: '\u540D\u79F0',
                            width: 200,
                            placeholder: '\u8BF7\u586B\u5199\u540D\u79F0\uFF0C\u957F\u5EA63-32',
                            required: 'required',
                            pattern: _config.nameRegExp
                        },
                        location: { datasource: '@location' }
                    };
                }
            }
        ]);
        return CreateView;
    }(_FormView2['default']);
    module.exports = CreateView;
});
define('iot/endpoint/EndpointStats', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    'common/util/timeUtil',
    'moment',
    './EndpointStatsModel',
    './EndpointStatsView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTimeUtil, _moment, _EndpointStatsModel, _EndpointStatsView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _moment2 = _babelRuntimeHelpersInteropRequireDefault['default'](_moment);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_EndpointStatsModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_EndpointStatsView);
    var EndpointStats = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](EndpointStats, _BaseAction);
        function EndpointStats() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EndpointStats);
            _BaseAction.apply(this, arguments);
        }
        EndpointStats.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('REFRESH_CHART', this.refreshChart, this);
            this.view.on('UPGRADE', this.upgrade, this);
            this.refreshChart();
        };
        EndpointStats.prototype.upgrade = function upgrade() {
            this.redirect('/iot/order/upgrade');
        };
        EndpointStats.prototype.refreshChart = function refreshChart() {
            var _this = this;
            var timeRange = this.view.get('rangeCalendar').getValue().split(/,/);
            var timeLenght = _moment2['default'](timeRange[1]).valueOf() - _moment2['default'](timeRange[0]).valueOf();
            if (timeLenght / 1000 > 31536000) {
                this.view.waitAlert({
                    title: '\u63D0\u793A',
                    content: '\u65F6\u95F4\u8303\u56F4\u6700\u5927\u4E3A\u4E00\u5E74\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9',
                    width: 420
                });
                return;
            }
            var nowTime = new Date().valueOf();
            if (_moment2['default'](timeRange[1]).valueOf() > nowTime) {
                this.view.waitAlert({
                    title: '\u63D0\u793A',
                    content: '\u6240\u9009\u65F6\u95F4\u8D85\u8FC7\u5F53\u524D\u65F6\u95F4\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9',
                    width: 420
                });
                return;
            }
            var request = {
                endpointUuid: this.model.get('uuid'),
                endpointName: this.model.get('name'),
                start: _timeUtil['default'].timeToUtc(timeRange[0]),
                end: _timeUtil['default'].timeToUtc(timeRange[1]),
                pace: this.view.get('cycleUnit').getValue(),
                type: 'COMMON'
            };
            this.model.getEndpointHistory(request).then(function (data) {
                return _this.view.renderNewLineChart(data);
            }).fail(function () {
                return _this.view.showToast('\u83B7\u53D6\u65B0\u589E\u56FE\u8868\u5931\u8D25\uFF01', { messageType: 'error' });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](EndpointStats, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return EndpointStats;
    }(_BaseAction2['default']);
    module.exports = EndpointStats;
});
define('iot/endpoint/endpointStats.tpl', [], function () {
    return '<!-- target: TPL_iot_endpoint_stats -->\n<div class="iot-endpoint-stats iot-main-wrap main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u7269\u63A5\u5165-\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u7528\u91CF\u7EDF\u8BA1</span>\n        </p>\n        <div class="detail-content list-content">\n            <h2>\u5B9E\u4F8B ${name}<span>\u672C\u5B9E\u4F8B\u7531${summary.from}\u521B\u5EFA</span></h2>\n            <div class="main-content">\n                <div class="detail-parts-table">\n                    <dl class="detail-part-1-col basic-info" id="config-wrap">\n                        <dt>\n                            <h4>\u57FA\u672C\u4FE1\u606F</h4>\n                        </dt>\n                        <dd class="stats">\n                            <div class="detail-row">\n                                <label>\u672C\u6708\u8D26\u671F\uFF1A</label>\n                                <span>${summary.billMonthStart} \u81F3 ${summary.billMonthEnd}</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u5DF2\u7528\uFF1A</label>\n                                <span>${summary.usedNum} \u6761</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u5F53\u524D\u8FDE\u63A5\u6570\uFF1A</label>\n                                <span>${summary.connectedNum}\u4E2A \uFF08\u5F53\u524D/\u6700\u5927\u8FDE\u63A5\u6570\uFF1A${summary.connectedNum}/${summary.connectedLimitNum}\uFF09</span>\n                            </div>\n                        </dd>\n                    </dl>\n                    <dl class="detail-part-1-col" id="config-wrap">\n                        <dt>\n                            <h4>\u7D2F\u8BA1\u4FE1\u606F</h4>\n                        </dt>\n                        <div class="stats-chart">\n                            <div class="wrapper" >\n                                <div class="chart" id="accStats"></div>\n                            </div>\n                        </div>\n                    </dl>\n                    <dl class="detail-part-1-col" id="new-wrap">\n                        <dt>\n                            <h4>\u65B0\u589E\u4FE1\u606F</h4>\n                        </dt>\n                        <div class="option">\n                            <span>\u65F6\u95F4\u9009\u62E9\uFF1A</span>\n                            <input data-ui-type="RangeCalendar" name="rangeCalendar"\n                               data-ui-id="rangeCalendar" class="range-calendar"\n                               data-ui-time="true"/>\n                        </div>\n                        <div class="option">\n                            <span>\u91C7\u6837\u5468\u671F\uFF1A</span>\n                            <esui-select class="cycle-unit"\n                                data-ui-id="cycleUnit" data-ui-name="cycleUnit"\n                                data-ui-width="80"\n                                data-ui-datasource="@cycleList"></esui-select>\n                        </div>\n                        <esui-button class="refresh-chart" data-ui-skin="refresh"\n                                data-ui-id="refreshChart"></esui-button>\n                        <div class="stats-chart">\n                            <div class="wrapper" >\n                                <div class="chart" id="newStats"></div>\n                            </div>\n                        </div>\n                    </dl>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/endpoint/EndpointStatsModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    'common/util/timeUtil',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTimeUtil, _config) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var EndpointStatsModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](EndpointStatsModel, _BaseModel);
        function EndpointStatsModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EndpointStatsModel);
            _BaseModel.apply(this, arguments);
        }
        EndpointStatsModel.prototype.getEndpointHistory = function getEndpointHistory(request) {
            return _config.api.getEndpointHistory(request);
        };
        EndpointStatsModel.prototype.outputdollars = function outputdollars(number) {
            number = number.toString();
            if (number.length <= 3) {
                return number === '' ? '0' : number;
            }
            var mod = number.length % 3;
            var output = mod === 0 ? '' : number.substring(0, mod);
            var i = 0;
            for (i = 0; i < Math.floor(number.length / 3); i++) {
                if (mod === 0 && i === 0) {
                    output += number.substring(mod + 3 * i, mod + 3 * i + 3);
                } else {
                    output += ',' + number.substring(mod + 3 * i, mod + 3 * i + 3);
                }
            }
            return output;
        };
        _babelRuntimeHelpersCreateClass['default'](EndpointStatsModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        summary: function summary(model) {
                            return _config.api.getEndpointSummary({
                                endpointUuid: model.get('uuid'),
                                endpointName: model.get('name'),
                                type: 'COMMON'
                            }).then(function (item) {
                                item.billMonthEnd = _timeUtil['default'].toTime(item.billMonthEnd);
                                item.billMonthStart = _timeUtil['default'].toTime(item.billMonthStart);
                                item.usedNum = model.outputdollars(item.usage);
                                item.connectedNum = model.outputdollars(item.connectedClients);
                                item.connectedLimitNum = model.outputdollars(item.connectedClientLimit);
                                if (model.get('from') === 'DM') {
                                    item.from = '\u7269\u7BA1\u7406';
                                } else if (model.get('from') === 'USER') {
                                    item.from = '\u7269\u63A5\u5165';
                                } else if (model.get('from') === 'PARSER') {
                                    item.from = '\u7269\u89E3\u6790';
                                }
                                return item;
                            });
                        },
                        cycleList: function cycleList(model) {
                            return [
                                {
                                    text: '1\u5C0F\u65F6',
                                    value: 'hourly'
                                },
                                {
                                    text: '1\u5929',
                                    value: 'daily'
                                }
                            ];
                        }
                    };
                }
            }]);
        return EndpointStatsModel;
    }(_BaseModel2['default']);
    module.exports = EndpointStatsModel;
});
define('iot/endpoint/EndpointStatsView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./endpointStats.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'moment',
    'echarts',
    'echarts/chart/line',
    'inf-ria/utils/mtools'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplEndpointStatsTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _moment, _echarts, _echartsChartLine, _infRiaUtilsMtools) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _moment2 = _babelRuntimeHelpersInteropRequireDefault['default'](_moment);
    var _echarts2 = _babelRuntimeHelpersInteropRequireDefault['default'](_echarts);
    var _mtools = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaUtilsMtools);
    var EndpointStatsView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](EndpointStatsView, _BaseView);
        function EndpointStatsView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EndpointStatsView);
            _BaseView.apply(this, arguments);
        }
        EndpointStatsView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'cycleUnit:change': function cycleUnitChange(e) {
                    return _this.fire('REFRESH_CHART', e);
                },
                'rangeCalendar:change': function rangeCalendarChange(e) {
                    return _this.fire('REFRESH_CHART', e);
                },
                'refreshChart:click': function refreshChartClick(e) {
                    return _this.fire('REFRESH_CHART', e);
                },
                'upgradeConfig:click': function upgradeConfigClick(e) {
                    return _this.fire('UPGRADE', e);
                }
            };
        };
        EndpointStatsView.prototype.renderAccLineChart = function renderAccLineChart(data) {
            var metric = {
                name: 'ACC-CHART',
                unit: '',
                metrics: []
            };
            var type = 'sum';
            var fixedData = _mtools['default'].adjustSeriesData(data, 'sum');
            metric.statistics = type;
            _u['default'].each(data.series, function (item) {
                metric.metrics.push({
                    name: item.name,
                    value: item.name
                });
            });
            var chartOption = _mtools['default'].getChartOptions(fixedData, metric, null, {});
            var panelChart = _echarts2['default'].init(document.getElementById('accStats'));
            panelChart.setOption(chartOption, true);
        };
        EndpointStatsView.prototype.renderNewLineChart = function renderNewLineChart(data) {
            var metric = {
                name: 'NEW-CHART',
                unit: '',
                metrics: []
            };
            var type = 'sum';
            var fixedData = _mtools['default'].adjustSeriesData(data, 'sum');
            metric.statistics = type;
            _u['default'].each(data.series, function (item) {
                metric.metrics.push({
                    name: item.name,
                    value: item.name
                });
            });
            var chartOption = _mtools['default'].getChartOptions(fixedData, metric, null, {});
            var panelChart = _echarts2['default'].init(document.getElementById('newStats'));
            panelChart.setOption(chartOption, true);
        };
        EndpointStatsView.prototype.enterDocument = function enterDocument() {
            _BaseView.prototype.enterDocument.call(this);
            this.renderAccLineChart(this.model.get('summary'));
        };
        _babelRuntimeHelpersCreateClass['default'](EndpointStatsView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_endpoint_stats';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        rangeCalendar: {
                            rawValue: {
                                begin: _moment2['default']().subtract(12, 'h').toDate(),
                                end: new Date()
                            },
                            range: {
                                begin: _moment2['default']().subtract(1, 'y').toDate(),
                                end: new Date()
                            }
                        }
                    };
                }
            }
        ]);
        return EndpointStatsView;
    }(_BaseView2['default']);
    module.exports = EndpointStatsView;
});
define('iot/endpoint/List', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    '../events',
    '../operations',
    './ListModel',
    './ListView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _events, _operations, _ListModel, _ListView) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ListModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ListView);
    var EndpointList = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](EndpointList, _ListAction);
        function EndpointList() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EndpointList);
            _ListAction.apply(this, arguments);
        }
        EndpointList.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].REFRESH, this.reload, this);
            this.view.on(_EVENTS['default'].CREATE, this.create, this);
            this.view.on(_EVENTS['default'].RELEASE, this.release, this);
            this.view.on(_EVENTS['default'].VIEW_PACKAGE, this.viewPackage, this);
            this.view.on(_EVENTS['default'].VIEW_STATS, this.viewStats, this);
            this.view.on(_EVENTS['default'].VIEW_ENDPOINT_STATS, this.viewEndpointStats, this);
            this.view.on(_EVENTS['default'].EDIT_TABLE_CELL, this.editTableCell, this);
            this.view.on(_EVENTS['default'].START_TURNKEY, _operations2['default'].startTurnkey, this);
        };
        EndpointList.prototype.editTableCell = function editTableCell(e) {
            var _this = this;
            if (!this.model.get('mainUser')) {
                this.view.showToast('\u6CA1\u6709\u6743\u9650\u4FEE\u6539\uFF01', { messageType: 'error' });
                return;
            }
            var rowDatasource = this.view.get('table').datasource[e.rowIndex];
            if (e.value === rowDatasource.description) {
                return;
            }
            var data = {
                endpointName: rowDatasource.endpointName,
                description: e.value
            };
            this.model.updateDescription(data).then(function () {
                return _this.view.showToast('\u4FEE\u6539\u5B9E\u4F8B\u63CF\u8FF0\u6210\u529F\uFF01');
            }).then(function () {
                _this.view.get('table').setCellText(e.value, e.rowIndex, e.columnIndex);
                rowDatasource.description = e.value;
            }).fail(function () {
                return _this.view.showToast('\u4FEE\u6539\u5B9E\u4F8B\u63CF\u8FF0\u5931\u8D25\uFF01');
            });
        };
        EndpointList.prototype.viewPackage = function viewPackage() {
            this.redirect('/iot/endpoint/package');
        };
        EndpointList.prototype.viewEndpointStats = function viewEndpointStats(e) {
            this.redirect('/iot/endpoint/stats~' + e.args);
        };
        EndpointList.prototype.viewStats = function viewStats() {
            this.redirect('/iot/endpoint/allStats');
        };
        EndpointList.prototype.create = function create() {
            if (this.model.get('realName').status !== 'PASS') {
                this.view.waitAlert({
                    title: '\u63D0\u793A',
                    content: '\u4E3A\u4FDD\u8BC1\u5B89\u5168\uFF0C\u521B\u5EFA\u65B0\u5B9E\u4F8B\u9700\u5B9E\u540D\u8BA4\u8BC1\uFF0C\u5DF2\u7ECF\u521B\u5EFA\u7684\u5B9E\u4F8B\u4ECD\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\u4E0D\u53D7\u5F71\u54CD\u3002' + '<a href="/qualify/#/qualify/index" target="_blank">\u7ACB\u5373\u53BB\u8BA4\u8BC1</a>',
                    width: 580,
                    encode: false
                });
                return;
            }
            _operations2['default'].createEndpoint.call(this, { parentAction: this });
        };
        EndpointList.prototype.release = function release(e) {
            _operations2['default'].confirmHandler({
                title: '\u5220\u9664\u5B9E\u4F8B',
                content: '\u786E\u8BA4\u5220\u9664\u8BE5\u5B9E\u4F8B?',
                width: 300
            }, 'endpoint.release', this.view, { endpointName: e.args });
        };
        _babelRuntimeHelpersCreateClass['default'](EndpointList, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return EndpointList;
    }(_ListAction2['default']);
    module.exports = EndpointList;
});
define('iot/endpoint/list.tpl', [], function () {
    return '<!-- target: TPL_iot_endpoint_list -->\n<div class="iot-main-wrap endpoint-list main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <span class="active">\u7269\u63A5\u5165-\u5B9E\u4F8B\u5217\u8868</span>\n        </p>\n        <div class="list-content">\n            <h2>\u5B9E\u4F8B\u5217\u8868\n                <!-- if: ${mainUser}-->\n                <div class="button-sets">\n                    <esui-button class="button"\n                        data-ui-id="viewPackage">\u8BA1\u8D39\u5957\u9910\u8BE6\u60C5</esui-button>\n                    <esui-button class="button"\n                        data-ui-id="viewStats">\u67E5\u770B\u7528\u91CF\u8BE6\u60C5</esui-button>\n                </div>\n                <!-- /if -->\n                <span class="status status-${basicInfo.css}" style="<!-- if: !${mainUser}-->left:100px<!-- /if -->">${basicInfo.text}</span>\n                <!-- if: ${mainUser} && ${realName.status} === \'PASS\'-->\n                <!-- import: TPL_iot_turnkey_enter -->\n                <!-- /if -->\n            </h2>\n            <div class="table-full-wrap">\n                <!-- if: ${mainUser}-->\n                <div class="operation-wrap">\n                    <button data-ui-id="create"\n                        data-ui-type="Button"\n                        data-ui-skin="create"\n                        title="\u521B\u5EFA\u5B9E\u4F8B">\u521B\u5EFA\u5B9E\u4F8B</button>\n                    <span data-ui-arrow="false" data-ui-type="Tip" data-ui-layer-width="160" class="ssl-tip">\u6700\u591A\u53EF\u521B\u5EFA100\u4E2A\u5B9E\u4F8B\uFF0C\u53EF<a href="http://ticket.bce.baidu.com/#/ticket/create ">\u63D0\u4EA4\u5DE5\u5355</a>\u7533\u8BF7\u66F4\u591A\u989D\u5EA6</span>\n                </div>\n                <!-- /if -->\n                <div data-ui-type="Table" data-ui-id="table"\n                     data-ui-datasource="@tableData"\n                     data-ui-order-by="@orderBy" data-ui-order="@order"\n                     data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                     data-ui-extension-command-type="Command"\n                     data-ui-extension-tableedit-type="TableEdit"\n                     data-ui-extension-tableex-type="TableEx">\n                </div>\n                <div class="ui-row">\n                    <!-- import: listPager -->\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/endpoint/List2', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/helper',
    '../events',
    '../operations',
    '../config',
    './List2Model',
    './List2View'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _infRiaHelper, _events, _operations, _config, _List2Model, _List2View) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _helper = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaHelper);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_List2Model);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_List2View);
    var EndpointList = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](EndpointList, _ListAction);
        function EndpointList() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EndpointList);
            _ListAction.apply(this, arguments);
        }
        EndpointList.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].REFRESH, this.reload, this);
            this.view.on(_EVENTS['default'].CREATE, this.create, this);
            this.view.on(_EVENTS['default'].RELEASE, this.release, this);
            this.view.on(_EVENTS['default'].VIEW_PACKAGE, this.viewPackage, this);
            this.view.on(_EVENTS['default'].VIEW_STATS, this.viewStats, this);
            this.view.on(_EVENTS['default'].VIEW_UNICOM_PACKAGE, this.viewUnicomPackage, this);
            this.view.on(_EVENTS['default'].VIEW_UNICOM_STATS, this.viewUnicomStats, this);
            this.view.on(_EVENTS['default'].VIEW_ENDPOINT_STATS, this.viewEndpointStats, this);
            this.view.on(_EVENTS['default'].EDIT_TABLE_CELL, this.editTableCell, this);
            this.view.on(_EVENTS['default'].START_TURNKEY, _operations2['default'].startTurnkey, this);
            this.view.on(_EVENTS['default'].UPGRADE_CONFIG, this.upgrade, this);
            this.view.on(_EVENTS['default'].UPGRADE_UNICOM_CONFIG, this.upgradeUnicom, this);
            this.view.on(_EVENTS['default'].RENEW, this.renew, this);
            this.view.on(_EVENTS['default'].RENEW_UNICOM, this.renewUnicom, this);
            this.view.on(_EVENTS['default'].CREATE_HUB, this.createHub, this);
            this.view.on(_EVENTS['default'].CREATE_UNICOM, this.createUnicom, this);
        };
        EndpointList.prototype.createHub = function createHub() {
            this.redirect('/iot/order/create~hub');
        };
        EndpointList.prototype.createUnicom = function createUnicom() {
            this.redirect('/iot/order/create~unicom');
        };
        EndpointList.prototype.upgrade = function upgrade() {
            this.redirect('/iot/order/upgrade');
        };
        EndpointList.prototype.upgradeUnicom = function upgradeUnicom() {
            this.redirect('/iot/order/upgradeUnicom');
        };
        EndpointList.prototype.renew = function renew() {
            var _model$get = this.model.get('basicInfo');
            var resourceId = _model$get.resourceId;
            var region = _model$get.region;
            this.redirectToBilling(resourceId, region);
        };
        EndpointList.prototype.renewUnicom = function renewUnicom() {
            var _model$get2 = this.model.get('unicomInfo');
            var resourceId = _model$get2.resourceId;
            var region = _model$get2.region;
            this.redirectToBilling(resourceId, region);
        };
        EndpointList.prototype.redirectToBilling = function redirectToBilling(resourceId, region) {
            _helper['default'].redirectToModule('billing', '/billing/recharge/list', {
                serviceType: _config.serviceType,
                instanceIds: resourceId,
                region: region
            });
        };
        EndpointList.prototype.editTableCell = function editTableCell(e) {
            var _this = this;
            if (!this.model.get('mainUser')) {
                this.view.showToast('\u6CA1\u6709\u6743\u9650\u4FEE\u6539\uFF01', { messageType: 'error' });
                return;
            }
            var rowDatasource = this.view.get('table').datasource[e.rowIndex];
            if (e.value === rowDatasource.description) {
                return;
            }
            var data = {
                endpointName: rowDatasource.endpointName,
                description: e.value
            };
            this.model.updateDescription(data).then(function () {
                return _this.view.showToast('\u4FEE\u6539\u5B9E\u4F8B\u63CF\u8FF0\u6210\u529F\uFF01');
            }).then(function () {
                _this.view.get('table').setCellText(e.value, e.rowIndex, e.columnIndex);
                rowDatasource.description = e.value;
            }).fail(function () {
                return _this.view.showToast('\u4FEE\u6539\u5B9E\u4F8B\u63CF\u8FF0\u5931\u8D25\uFF01');
            });
        };
        EndpointList.prototype.viewPackage = function viewPackage() {
            this.redirect('/iot/endpoint/package');
        };
        EndpointList.prototype.viewUnicomPackage = function viewUnicomPackage() {
            this.redirect('/iot/endpoint/unicomPackage');
        };
        EndpointList.prototype.viewEndpointStats = function viewEndpointStats(e) {
            this.redirect('/iot/endpoint/stats~' + e.args);
        };
        EndpointList.prototype.viewStats = function viewStats() {
            this.redirect('/iot/endpoint/allStats');
        };
        EndpointList.prototype.viewUnicomStats = function viewUnicomStats() {
            this.redirect('/iot/endpoint/unicomStats');
        };
        EndpointList.prototype.create = function create() {
            if (this.model.get('realName').status !== 'PASS') {
                this.view.waitAlert({
                    title: '\u63D0\u793A',
                    content: '\u4E3A\u4FDD\u8BC1\u5B89\u5168\uFF0C\u521B\u5EFA\u65B0\u5B9E\u4F8B\u9700\u5B9E\u540D\u8BA4\u8BC1\uFF0C\u5DF2\u7ECF\u521B\u5EFA\u7684\u5B9E\u4F8B\u4ECD\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\u4E0D\u53D7\u5F71\u54CD\u3002' + '<a href="/qualify/#/qualify/index" target="_blank">\u7ACB\u5373\u53BB\u8BA4\u8BC1</a>',
                    width: 580,
                    encode: false
                });
                return;
            }
            _operations2['default'].createEndpoint.call(this, { parentAction: this });
        };
        EndpointList.prototype.release = function release(e) {
            _operations2['default'].confirmHandler({
                title: '\u5220\u9664\u5B9E\u4F8B',
                content: '\u786E\u8BA4\u5220\u9664\u8BE5\u5B9E\u4F8B?',
                width: 300
            }, 'endpoint.release', this.view, { endpointName: e.args });
        };
        _babelRuntimeHelpersCreateClass['default'](EndpointList, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return EndpointList;
    }(_ListAction2['default']);
    module.exports = EndpointList;
});
define('iot/endpoint/list2.tpl', [], function () {
    return '<!-- target: TPL_iot_endpoint_list_v2 -->\n<div class="iot-main-wrap endpoint-list-new main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <span class="active">\u7269\u63A5\u5165-\u5B9E\u4F8B\u5217\u8868</span>\n        </p>\n        <div class="list-content">\n            <h2>\u8BA1\u8D39\u65B9\u5F0F\n                <div class="resource-list">\n                    <div class="resource">\n                        <i class="iconfont icon-iot"></i>\n                        <div class="text">\n                            <div class="title">\u7269\u63A5\u5165\n                                <!-- if: ${iotServiceStatus.valid}-->\n                                <span class="status status-${basicInfo.css}" style="<!-- if: !${mainUser}-->left:100px<!-- /if -->">${basicInfo.text}</span>\n                                <!-- /if -->\n                            </div>\n                            <!-- if: ${mainUser} && ${iotServiceStatus.valid}-->\n                            <div class="button-sets">\n                                <esui-button class="button"\n                                    data-ui-id="viewPackage">\u8BA1\u8D39\u5957\u9910\u8BE6\u60C5</esui-button>\n                                <esui-button class="button"\n                                    data-ui-id="viewStats">\u67E5\u770B\u7528\u91CF\u8BE6\u60C5</esui-button>\n                                <!-- if: ${basicInfo.status} !== \'EXPIRED\' && ${overdueStatus.pass} && ${basicInfo.messagesNum} < 1000 -->\n                                <esui-button data-ui-id="upgradeConfig" class="upgrade-left">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                                <!-- else -->\n                                <span class="disabled upgrade-left">\n                                    <span data-ui-type="Tip" data-ui-id="ui-tip-0" data-ui-layer-width="auto" class="ui-ctrl ui-tip">\n                                        <!-- if: ${basicInfo.status} === \'EXPIRED\' -->\n                                            \u8D44\u6E90\u5DF2\u8FC7\u671F\n                                        <!-- elif: ${basicInfo.messagesNum} >= 1000 -->\n                                            \u60A8\u5DF2\u662F\u6700\u9AD8\u989D\u5EA6\uFF0C\u82E5\u60F3\u7EE7\u7EED\u5347\u914D\uFF0C\u8BF7\u63D0\u5DE5\u5355\n                                        <!-- else -->\n                                            \u60A8\u5DF2\u6B20\u8D39!\u8BF7<a href="/finance/#/finance/account/recharge">\u5145\u503C</a>\u540E\u8D2D\u4E70\n                                        <!-- /if -->\n                                    </span>\n                                    <esui-button data-ui-id="upgradeConfig" class="ui-button-disabled state-disabled skin-danger-disabled skin-danger-button-disabled" data-ui-disabled="disabled">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                                </span>\n                                <!-- /if -->\n                                <!-- if: ${overdueStatus.pass} && ${basicInfo.recharge} -->\n                                <esui-button data-ui-id="renewButton" data-ui-type="Button">\u7EED\u8D39</esui-button>\n                                <!-- else -->\n                                <span class="disabled">\n                                    <span data-ui-type="Tip" data-ui-id="ui-tip-0" data-ui-layer-width="auto" class="ui-ctrl ui-tip">\n                                        <!-- if: !${overdueStatus.pass} -->\n                                            \u60A8\u5DF2\u6B20\u8D39!\u8BF7<a href="/finance/#/finance/account/recharge">\u5145\u503C</a>\u540E\u8D2D\u4E70\n                                        <!-- else -->\n                                            \u8D26\u671F\u5DF2\u7ECF\u5927\u4E8E\u4E00\u5E74\uFF0C\u4E0D\u7B26\u5408\u7EED\u8D39\u6761\u4EF6\n                                        <!-- /if -->\n                                    </span>\n                                    <esui-button class="ui-button-disabled state-disabled skin-danger-disabled skin-danger-button-disabled" data-ui-type="Button" data-ui-disabled="disabled">\u7EED\u8D39</esui-button>\n                                </span>\n                                <!-- /if -->\n                            </div>\n                            <!-- /if -->\n                            <!-- if: ${mainUser} && !${iotServiceStatus.valid} && ${realName.status} === \'PASS\'-->\n                            <div class="notcreate">\u672A\u5F00\u901A</div>\n                            <!-- /if -->\n                        </div>\n                        <!-- if: ${mainUser} && !${iotServiceStatus.valid} && ${realName.status} === \'PASS\'-->\n                        <button data-ui-id="createHub"\n                                data-ui-type="Button"\n                                data-ui-skin="create"\n                                title="\u65B0\u5EFA\u7269\u63A5\u5165"\n                                class="create-resource">\u65B0\u5EFA\u7269\u63A5\u5165</button>\n                        <!-- /if -->\n                    </div>\n                    <div class="resource">\n                        <i class="iconfont icon-iotunicom"></i>\n                        <div class="text">\n                            <div class="title">\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09\n                                <!-- if: ${iotServiceStatus.unicom}-->\n                                <span class="status status-${unicomInfo.css}" style="<!-- if: !${mainUser}-->left:100px<!-- /if -->">${unicomInfo.text}</span>\n                                <!-- /if -->\n                            </div>\n                            <!-- if: ${mainUser} && ${iotServiceStatus.unicom}-->\n                            <div class="button-sets">\n                                <esui-button class="button"\n                                    data-ui-id="viewUnicomPackage">\u8BA1\u8D39\u5957\u9910\u8BE6\u60C5</esui-button>\n                                <esui-button class="button"\n                                    data-ui-id="viewUnicomStats">\u67E5\u770B\u7528\u91CF\u8BE6\u60C5</esui-button>\n                                <!-- if: ${unicomInfo.status} !== \'EXPIRED\' && ${unicomInfo.status} !==\'CREATING\' && ${overdueStatus.pass} -->\n                                <esui-button data-ui-id="upgradeUnicomConfig" class="upgrade-left">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                                <!-- else -->\n                                <span class="disabled upgrade-left">\n                                    <span data-ui-type="Tip" data-ui-layer-width="auto" class="ui-ctrl ui-tip">\n                                        <!-- if: ${unicomInfo.status} === \'CREATING\' -->\n                                            \u8D44\u6E90\u521B\u5EFA\u4E2D\n                                        <!-- elif: ${unicomInfo.status} === \'EXPIRED\' -->\n                                            \u8D44\u6E90\u5DF2\u8FC7\u671F\n                                        <!-- else -->\n                                            \u60A8\u5DF2\u6B20\u8D39!\u8BF7<a href="/finance/#/finance/account/recharge">\u5145\u503C</a>\u540E\u8D2D\u4E70\n                                        <!-- /if -->\n                                    </span>\n                                    <esui-button data-ui-id="upgradeUnicomConfig" class="ui-button-disabled state-disabled skin-danger-disabled skin-danger-button-disabled" data-ui-disabled="disabled">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                                </span>\n                                <!-- /if -->\n                                <!-- if: ${overdueStatus.pass} && ${unicomInfo.recharge} && !${unicomInfo.tester} && ${unicomInfo.status} !== \'CREATING\' -->\n                                <esui-button data-ui-id="renewUnicomButton" data-ui-type="Button">\u7EED\u8D39</esui-button>\n                                <!-- else -->\n                                <span class="disabled">\n                                    <span data-ui-type="Tip" data-ui-layer-width="auto" class="ui-ctrl ui-tip">\n                                        <!-- if: ${unicomInfo.status} === \'CREATING\' -->\n                                            \u8D44\u6E90\u521B\u5EFA\u4E2D\n                                        <!-- elif: ${unicomInfo.tester} -->\n                                            \u6D4B\u8BD5\u7248\u4E0D\u80FD\u7EED\u8D39\uFF0C\u8BF7\u9009\u62E9\u914D\u7F6E\u5347\u7EA7\n                                        <!-- elif: !${overdueStatus.pass} -->\n                                            \u60A8\u5DF2\u6B20\u8D39!\u8BF7<a href="/finance/#/finance/account/recharge">\u5145\u503C</a>\u540E\u8D2D\u4E70\n                                        <!-- else -->\n                                            \u8D26\u671F\u5DF2\u7ECF\u5927\u4E8E\u4E00\u5E74\uFF0C\u4E0D\u7B26\u5408\u7EED\u8D39\u6761\u4EF6\n                                        <!-- /if -->\n                                    </span>\n                                    <esui-button class="ui-button-disabled state-disabled skin-danger-disabled skin-danger-button-disabled" data-ui-type="Button" data-ui-disabled="disabled">\u7EED\u8D39</esui-button>\n                                </span>\n                                <!-- /if -->\n                            </div>\n                            <!-- /if -->\n                            <!-- if: ${mainUser} && !${iotServiceStatus.unicom} && ${realName.status} === \'PASS\'-->\n                            <div class="notcreate">\u672A\u5F00\u901A</div>\n                            <!-- /if -->\n                        </div>\n                        <!-- if: ${mainUser} && !${iotServiceStatus.unicom} && ${realName.status} === \'PASS\'-->\n                        <button data-ui-id="createUnicom"\n                                data-ui-type="Button"\n                                data-ui-skin="create"\n                                title="\u65B0\u5EFA\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09"\n                                class="create-resource">\u65B0\u5EFA\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09</button>\n                        <!-- /if -->\n                    </div>\n                </div>\n            </h2>\n            <h2 class="empty-div"></h2>\n            <h2>\u5B9E\u4F8B\u5217\u8868\n                <!-- if: ${mainUser} && ${realName.status} === \'PASS\'-->\n                <!-- import: TPL_iot_turnkey_enter -->\n                <!-- /if -->\n            </h2>\n            <div class="table-full-wrap">\n                <!-- if: ${mainUser}-->\n                <div class="operation-wrap">\n                    <button data-ui-id="create"\n                        data-ui-type="Button"\n                        data-ui-skin="create"\n                        title="\u521B\u5EFA\u5B9E\u4F8B">\u521B\u5EFA\u5B9E\u4F8B</button>\n                    <span data-ui-arrow="false" data-ui-type="Tip" data-ui-layer-width="160" class="ssl-tip">\u6700\u591A\u53EF\u521B\u5EFA100\u4E2A\u5B9E\u4F8B\uFF0C\u53EF<a href="http://ticket.bce.baidu.com/#/ticket/create ">\u63D0\u4EA4\u5DE5\u5355</a>\u7533\u8BF7\u66F4\u591A\u989D\u5EA6</span>\n                </div>\n                <!-- /if -->\n                <div data-ui-type="Table" data-ui-id="table"\n                     data-ui-datasource="@tableData"\n                     data-ui-order-by="@orderBy" data-ui-order="@order"\n                     data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                     data-ui-extension-command-type="Command"\n                     data-ui-extension-tableedit-type="TableEdit"\n                     data-ui-extension-tableex-type="TableEx">\n                </div>\n                <div class="ui-row">\n                    <!-- import: listPager -->\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/endpoint/List2Model', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    'common/storage',
    'common/config',
    '../config',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _commonStorage, _commonConfig, _config, _config2) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var _storage = _babelRuntimeHelpersInteropRequireDefault['default'](_commonStorage);
    var _commonConfig2 = _babelRuntimeHelpersInteropRequireDefault['default'](_commonConfig);
    var _config3 = _babelRuntimeHelpersInteropRequireDefault['default'](_config2);
    var cookieUserKey = 'BCE_IOT_MODBUS_SUBUSER';
    var EndpointListModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](EndpointListModel, _ListModel);
        function EndpointListModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EndpointListModel);
            _ListModel.apply(this, arguments);
        }
        EndpointListModel.prototype.serviceStatus = function serviceStatus() {
            return _commonConfig2['default'].api.iotServiceStatus();
        };
        EndpointListModel.prototype.updateDescription = function updateDescription(data) {
            return _config.api.updateEndpointDesp(data);
        };
        _babelRuntimeHelpersCreateClass['default'](EndpointListModel, [
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.iotEndpointList;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        basicInfo: function basicInfo(model) {
                            return _config.api.getPackageDetail().then(function (item) {
                                if (item.status) {
                                    item.css = _config3['default'].status[item.status].css;
                                    item.text = _config3['default'].status[item.status].text;
                                }
                                return item;
                            });
                        },
                        unicomInfo: function unicomInfo(model) {
                            return _config.api.getUnicomDetail().then(function (item) {
                                if (item.status) {
                                    item.css = _config3['default'].status[item.status].css;
                                    item.text = _config3['default'].status[item.status].text;
                                }
                                return item;
                            });
                        },
                        mainUser: function mainUser() {
                            return !_storage['default'].get(cookieUserKey);
                        },
                        realName: function realName() {
                            return _config.api.getRealNameStatus();
                        },
                        iotServiceStatus: function iotServiceStatus() {
                            return _commonConfig2['default'].api.iotServiceStatus();
                        },
                        overdueStatus: function overdueStatus(model) {
                            return _config.api.getOverdueStatus();
                        }
                    };
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize
                    };
                }
            }
        ]);
        return EndpointListModel;
    }(_ListModel2['default']);
    module.exports = EndpointListModel;
});
define('iot/endpoint/List2View', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./list2.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/ListView',
    'common/util/timeUtil',
    'common/storage',
    '../events',
    './config',
    '../config',
    '../enum'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplList2TplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcListView, _commonUtilTimeUtil, _commonStorage, _events, _config, _config2, _enum) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _storage = _babelRuntimeHelpersInteropRequireDefault['default'](_commonStorage);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _localConfig = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    var cookieUserKey = 'BCE_IOT_MODBUS_SUBUSER';
    function getTableFields(view) {
        return [
            {
                title: '\u5B9E\u4F8B\u540D\u79F0',
                minWidth: 250,
                field: 'endpointName',
                content: function content(item, row) {
                    var name = _u['default'].escape(item.endpointName);
                    return '<a href="#/iot/thing/list~endpointName=' + name + '">' + name + '</a>';
                }
            },
            {
                title: '\u63CF\u8FF0',
                field: 'description',
                width: 100,
                content: function content(item, row) {
                    var des = _u['default'].escape(item.description);
                    return '<span class="description" title="' + des + '">' + des + '</span>';
                },
                editable: 1
            },
            {
                title: '\u5730\u5740',
                width: 220,
                field: 'hostname',
                content: function content(item, row) {
                    return _u['default'].map(item.hostname, function (host) {
                        return '<p class="nowrap">' + host + '</p>';
                    }).join('');
                }
            },
            {
                title: '\u533A\u57DF',
                minWidth: 100,
                field: 'location',
                content: function content(item, row) {
                    var locationItem = _u['default'].find(_config2.region, { value: item.location });
                    return locationItem ? locationItem.name : '';
                }
            },
            {
                title: '\u521B\u5EFA\u65F6\u95F4',
                width: 120,
                field: 'createTime',
                content: function content(item, row) {
                    return _timeUtil['default'].toTime(item.createTime);
                }
            },
            {
                title: '\u64CD\u4F5C',
                stable: true,
                width: 125,
                field: 'operation',
                content: function content(item, row) {
                    return view.getAllOpertionsHtml(item, row);
                }
            }
        ];
    }
    var EndpointListView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](EndpointListView, _ListView);
        function EndpointListView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EndpointListView);
            _ListView.apply(this, arguments);
        }
        EndpointListView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'create:click': function createClick(e) {
                    return _this.fire(_EVENTS['default'].CREATE, e);
                },
                'viewStats:click': function viewStatsClick(e) {
                    return _this.fire(_EVENTS['default'].VIEW_STATS, e);
                },
                'viewPackage:click': function viewPackageClick(e) {
                    return _this.fire(_EVENTS['default'].VIEW_PACKAGE, e);
                },
                'viewUnicomStats:click': function viewUnicomStatsClick(e) {
                    return _this.fire(_EVENTS['default'].VIEW_UNICOM_STATS, e);
                },
                'viewUnicomPackage:click': function viewUnicomPackageClick(e) {
                    return _this.fire(_EVENTS['default'].VIEW_UNICOM_PACKAGE, e);
                },
                'table:command': function tableCommand(e) {
                    return _this.fire(e.name, e);
                },
                'table:saveedit': function tableSaveedit(e) {
                    return _this.fire(_EVENTS['default'].EDIT_TABLE_CELL, e);
                },
                'turnkey:click': function turnkeyClick(e) {
                    return _this.fire(_EVENTS['default'].START_TURNKEY, e);
                },
                'upgradeConfig:click': function upgradeConfigClick(e) {
                    return _this.fire(_EVENTS['default'].UPGRADE_CONFIG, e);
                },
                'renewButton:click': function renewButtonClick(e) {
                    return _this.fire(_EVENTS['default'].RENEW, e);
                },
                'upgradeUnicomConfig:click': function upgradeUnicomConfigClick(e) {
                    return _this.fire(_EVENTS['default'].UPGRADE_UNICOM_CONFIG, e);
                },
                'renewUnicomButton:click': function renewUnicomButtonClick(e) {
                    return _this.fire(_EVENTS['default'].RENEW_UNICOM, e);
                },
                'createHub:click': function createHubClick(e) {
                    return _this.fire(_EVENTS['default'].CREATE_HUB, e);
                },
                'createUnicom:click': function createUnicomClick(e) {
                    return _this.fire(_EVENTS['default'].CREATE_UNICOM, e);
                }
            };
        };
        EndpointListView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
        };
        EndpointListView.prototype.getAllOpertionsHtml = function getAllOpertionsHtml(item, row) {
            var canDo = item.creatorType === _enum.CREATOR.USER;
            var why = '';
            if (item.creatorType === _enum.CREATOR.DM) {
                why = '\u672C\u5B9E\u4F8B\u7531\u7269\u7BA1\u7406\u521B\u5EFA\u4E0D\u80FD\u5220\u9664\u3002\u4E0D\u4F7F\u7528\u5219\u4E0D\u4F1A\u4EA7\u751F\u8D39\u7528';
            }
            if (item.creatorType === _enum.CREATOR.PARSER) {
                why = '\u672C\u5B9E\u4F8B\u7531\u7269\u89E3\u6790\u521B\u5EFA\u4E0D\u80FD\u5220\u9664\u3002\u4E0D\u4F7F\u7528\u5219\u4E0D\u4F1A\u4EA7\u751F\u8D39\u7528';
            }
            var args = item.endpointName;
            var statsStr = 'uuid=' + item.uuid + '&name=' + item.endpointName + '&from=' + item.creatorType;
            var html = [];
            if (this.model.get('mainUser')) {
                html.push(_u['default'].template(_localConfig['default'].tpl.cmdWithTip)({
                    label: '\u5220\u9664',
                    command: _EVENTS['default'].RELEASE,
                    tipId: 'ui-tip-' + row,
                    tipText: why,
                    args: args,
                    className: canDo ? '' : 'state-disabled',
                    tipClassName: !why ? 'state-hidden' : '',
                    disabled: canDo ? '' : 'disabled'
                }));
            }
            html.push('<button class="cmd-button"\n                    data-command="VIEW_ENDPOINT_STATS"\n                    data-command-args=\'' + statsStr + '\'>\u7528\u91CF\u7EDF\u8BA1</button>');
            return '<span class="operations">' + html.join('') + '</span>';
        };
        _babelRuntimeHelpersCreateClass['default'](EndpointListView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_endpoint_list_v2';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        table: {
                            select: false,
                            editable: true,
                            columnResizable: true,
                            fields: '@tableFields',
                            columnRenderIndexes: [5],
                            noDataHtml: !_storage['default'].get(cookieUserKey) ? _localConfig['default'].noDataHtml : _localConfig['default'].noDataHtmlsubuser
                        }
                    };
                }
            }
        ]);
        return EndpointListView;
    }(_ListView2['default']);
    module.exports = EndpointListView;
});
define('iot/endpoint/ListModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    'common/storage',
    '../config',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _commonStorage, _config, _config2) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var _storage = _babelRuntimeHelpersInteropRequireDefault['default'](_commonStorage);
    var _config3 = _babelRuntimeHelpersInteropRequireDefault['default'](_config2);
    var cookieUserKey = 'BCE_IOT_MODBUS_SUBUSER';
    var EndpointListModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](EndpointListModel, _ListModel);
        function EndpointListModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EndpointListModel);
            _ListModel.apply(this, arguments);
        }
        EndpointListModel.prototype.updateDescription = function updateDescription(data) {
            return _config.api.updateEndpointDesp(data);
        };
        _babelRuntimeHelpersCreateClass['default'](EndpointListModel, [
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.iotEndpointList;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        basicInfo: function basicInfo(model) {
                            return _config.api.getPackageDetail().then(function (item) {
                                if (item.status) {
                                    return {
                                        css: _config3['default'].status[item.status].css,
                                        text: _config3['default'].status[item.status].text
                                    };
                                }
                            });
                        },
                        mainUser: function mainUser() {
                            return !_storage['default'].get(cookieUserKey);
                        },
                        realName: function realName() {
                            return _config.api.getRealNameStatus();
                        }
                    };
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize
                    };
                }
            }
        ]);
        return EndpointListModel;
    }(_ListModel2['default']);
    module.exports = EndpointListModel;
});
define('iot/endpoint/ListView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./list.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/ListView',
    'common/util/timeUtil',
    'common/storage',
    '../events',
    './config',
    '../config',
    '../enum'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplListTplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcListView, _commonUtilTimeUtil, _commonStorage, _events, _config, _config2, _enum) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _storage = _babelRuntimeHelpersInteropRequireDefault['default'](_commonStorage);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _localConfig = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    var cookieUserKey = 'BCE_IOT_MODBUS_SUBUSER';
    function getTableFields(view) {
        return [
            {
                title: '\u5B9E\u4F8B\u540D\u79F0',
                minWidth: 250,
                field: 'endpointName',
                content: function content(item, row) {
                    var name = _u['default'].escape(item.endpointName);
                    return '<a href="#/iot/thing/list~endpointName=' + name + '">' + name + '</a>';
                }
            },
            {
                title: '\u63CF\u8FF0',
                field: 'description',
                width: 100,
                content: function content(item, row) {
                    var des = _u['default'].escape(item.description);
                    return '<span class="description" title="' + des + '">' + des + '</span>';
                },
                editable: 1
            },
            {
                title: '\u5730\u5740',
                width: 220,
                field: 'hostname',
                content: function content(item, row) {
                    return _u['default'].map(item.hostname, function (host) {
                        return '<p class="nowrap">' + host + '</p>';
                    }).join('');
                }
            },
            {
                title: '\u533A\u57DF',
                minWidth: 100,
                field: 'location',
                content: function content(item, row) {
                    var locationItem = _u['default'].find(_config2.region, { value: item.location });
                    return locationItem ? locationItem.name : '';
                }
            },
            {
                title: '\u521B\u5EFA\u65F6\u95F4',
                width: 120,
                field: 'createTime',
                content: function content(item, row) {
                    return _timeUtil['default'].toTime(item.createTime);
                }
            },
            {
                title: '\u64CD\u4F5C',
                stable: true,
                width: 125,
                field: 'operation',
                content: function content(item, row) {
                    return view.getAllOpertionsHtml(item, row);
                }
            }
        ];
    }
    var EndpointListView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](EndpointListView, _ListView);
        function EndpointListView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EndpointListView);
            _ListView.apply(this, arguments);
        }
        EndpointListView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'create:click': function createClick(e) {
                    return _this.fire(_EVENTS['default'].CREATE, e);
                },
                'viewStats:click': function viewStatsClick(e) {
                    return _this.fire(_EVENTS['default'].VIEW_STATS, e);
                },
                'viewPackage:click': function viewPackageClick(e) {
                    return _this.fire(_EVENTS['default'].VIEW_PACKAGE, e);
                },
                'table:command': function tableCommand(e) {
                    return _this.fire(e.name, e);
                },
                'table:saveedit': function tableSaveedit(e) {
                    return _this.fire(_EVENTS['default'].EDIT_TABLE_CELL, e);
                },
                'turnkey:click': function turnkeyClick(e) {
                    return _this.fire(_EVENTS['default'].START_TURNKEY, e);
                }
            };
        };
        EndpointListView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
        };
        EndpointListView.prototype.getAllOpertionsHtml = function getAllOpertionsHtml(item, row) {
            var canDo = item.creatorType === _enum.CREATOR.USER;
            var why = '';
            if (item.creatorType === _enum.CREATOR.DM) {
                why = '\u672C\u5B9E\u4F8B\u7531\u7269\u7BA1\u7406\u521B\u5EFA\u4E0D\u80FD\u5220\u9664\u3002\u4E0D\u4F7F\u7528\u5219\u4E0D\u4F1A\u4EA7\u751F\u8D39\u7528';
            }
            if (item.creatorType === _enum.CREATOR.PARSER) {
                why = '\u672C\u5B9E\u4F8B\u7531\u7269\u89E3\u6790\u521B\u5EFA\u4E0D\u80FD\u5220\u9664\u3002\u4E0D\u4F7F\u7528\u5219\u4E0D\u4F1A\u4EA7\u751F\u8D39\u7528';
            }
            var args = item.endpointName;
            var statsStr = 'uuid=' + item.uuid + '&name=' + item.endpointName + '&from=' + item.creatorType;
            var html = [];
            if (this.model.get('mainUser')) {
                html.push(_u['default'].template(_localConfig['default'].tpl.cmdWithTip)({
                    label: '\u5220\u9664',
                    command: _EVENTS['default'].RELEASE,
                    tipId: 'ui-tip-' + row,
                    tipText: why,
                    args: args,
                    className: canDo ? '' : 'state-disabled',
                    tipClassName: !why ? 'state-hidden' : '',
                    disabled: canDo ? '' : 'disabled'
                }));
            }
            html.push('<button class="cmd-button"\n                    data-command="VIEW_ENDPOINT_STATS"\n                    data-command-args=\'' + statsStr + '\'>\u7528\u91CF\u7EDF\u8BA1</button>');
            return '<span class="operations">' + html.join('') + '</span>';
        };
        _babelRuntimeHelpersCreateClass['default'](EndpointListView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_endpoint_list';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        table: {
                            select: false,
                            editable: true,
                            columnResizable: true,
                            fields: '@tableFields',
                            columnRenderIndexes: [5],
                            noDataHtml: !_storage['default'].get(cookieUserKey) ? _localConfig['default'].noDataHtml : _localConfig['default'].noDataHtmlsubuser
                        }
                    };
                }
            }
        ]);
        return EndpointListView;
    }(_ListView2['default']);
    module.exports = EndpointListView;
});
define('iot/endpoint/UnicomDetail', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/helper',
    './UnicomDetailModel',
    './UnicomDetailView',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _infRiaHelper, _UnicomDetailModel, _UnicomDetailView, _config) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _helper = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaHelper);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_UnicomDetailModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_UnicomDetailView);
    var UnicomDetail = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](UnicomDetail, _BaseAction);
        function UnicomDetail() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UnicomDetail);
            _BaseAction.apply(this, arguments);
        }
        UnicomDetail.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('UPGRADE', this.upgrade, this);
            this.view.on('REBUY', this.rebuy, this);
            this.view.on('RENEW', this.renew, this);
        };
        UnicomDetail.prototype.upgrade = function upgrade() {
            this.redirect('/iot/order/upgradeUnicom');
        };
        UnicomDetail.prototype.rebuy = function rebuy() {
            this.redirect('/iot/order/create');
        };
        UnicomDetail.prototype.renew = function renew() {
            var _model$get = this.model.get('basicInfo');
            var resourceId = _model$get.resourceId;
            var region = _model$get.region;
            _helper['default'].redirectToModule('billing', '/billing/recharge/list', {
                serviceType: _config.serviceType,
                instanceIds: resourceId,
                region: region
            });
        };
        _babelRuntimeHelpersCreateClass['default'](UnicomDetail, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return UnicomDetail;
    }(_BaseAction2['default']);
    module.exports = UnicomDetail;
});
define('iot/endpoint/unicomDetail.tpl', [], function () {
    return '<!-- target: TPL_iot_endpoint_unicom_detail -->\n<div class="iot-package-detail iot-main-wrap main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u7269\u63A5\u5165-\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u8BA1\u8D39\u5957\u9910\u8BE6\u60C5-\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09</span>\n        </p>\n        <div class="detail-content list-content">\n            <h2>\u8BA1\u8D39\u5957\u9910\u8BE6\u60C5</h2>\n            <div class="main-content">\n                <div class="detail-parts-table">\n                    <div class="row-12">\n                        <div class="col-6">\n                            <dl class="detail-part-1-col with-desc-editor">\n                                <dt>\n                                    <h4>\u57FA\u672C\u4FE1\u606F</h4>\n                                </dt>\n                                <dd class="col-2">\n                                    <div class="detail-row">\n                                        <label>\u533A\u57DF\uFF1A</label>\n                                        <span>${basicInfo.locationTxt}</span>\n                                    </div>\n                                    <div class="detail-row">\n                                        <label>\u72B6\u6001\uFF1A</label>\n                                        <span class="status status-${basicInfo.state.css}"> ${basicInfo.state.text}</span>\n                                    </div>\n                                    <!-- if: ${basicInfo.expressId}-->\n                                    <div class="detail-row">\n                                        <label>\u7269\u8054\u7F51\u5361\u5FEB\u9012\u516C\u53F8\uFF1A</label>\n                                        <span>${basicInfo.expressCompany}</span>\n                                    </div>\n                                    <div class="detail-row">\n                                        <label>\u7269\u8054\u7F51\u5361\u5FEB\u9012\u5355\u53F7\uFF1A</label>\n                                        <span> ${basicInfo.expressId}</span>\n                                    </div>\n                                    <!-- /if -->\n                                </dd>\n                            </dl>\n                        </div>\n                        <div class="col-6">\n                            <dl class="detail-part-1-col">\n                                <dt>\n                                    <h4>\u652F\u4ED8\u4FE1\u606F</h4>\n                                </dt>\n                                <dd>\n                                    <div class="detail-row">\n                                        <label>\u652F\u4ED8\u65B9\u5F0F\uFF1A</label>\n                                        <span>${basicInfo.payType}\n                                        </span>\n                                    </div>\n                                    <div class="detail-row">\n                                        <label>\u521B\u5EFA\u65F6\u95F4\uFF1A</label>\n                                        <span>${basicInfo.createTime}</span>\n                                    </div>\n                                    <div class="detail-row">\n                                        <label>\u5230\u671F\u65F6\u95F4\uFF1A</label>\n                                        <span>${basicInfo.expireTime}</span>\n                                    </div>\n                                    <div class="detail-row">\n                                        <!-- if: ${basicInfo.status} !== \'CREATING\' && !${basicInfo.tester} && ${overdueStatus.pass} && ${basicInfo.recharge} -->\n                                        <esui-button data-ui-id="renewButton" data-ui-type="Button">\u7EED\u8D39</esui-button>\n                                        <!-- else -->\n                                        <span class="disabled">\n                                            <span data-ui-type="Tip" data-ui-id="ui-tip-0" data-ui-layer-width="auto" class="ui-ctrl ui-tip">\n                                                <!-- if: ${basicInfo.status} === \'CREATING\' -->\n                                                    \u8D44\u6E90\u521B\u5EFA\u4E2D\n                                                <!-- elif: ${basicInfo.tester} -->\n                                                    \u6D4B\u8BD5\u7248\u4E0D\u80FD\u7EED\u8D39\uFF0C\u8BF7\u9009\u62E9\u914D\u7F6E\u5347\u7EA7\n                                                <!-- elif: !${overdueStatus.pass} -->\n                                                    \u60A8\u5DF2\u6B20\u8D39!\u8BF7<a href="/finance/#/finance/account/recharge">\u5145\u503C</a>\u540E\u8D2D\u4E70\n                                                <!-- else -->\n                                                    \u8D26\u671F\u5DF2\u7ECF\u5927\u4E8E\u4E00\u5E74\uFF0C\u4E0D\u7B26\u5408\u7EED\u8D39\u6761\u4EF6\n                                                <!-- /if -->\n                                            </span>\n                                            <esui-button class="ui-button-disabled state-disabled skin-danger-disabled skin-danger-button-disabled" data-ui-type="Button" data-ui-disabled="disabled">\u7EED\u8D39</esui-button>\n                                        </span>\n                                        <!-- /if -->\n                                    </div>\n                                </dd>\n                            </dl>\n                        </div>\n                    </div>\n\n                    <dl class="detail-part-1-col" id="config-wrap">\n                        <dt>\n                            <h4>\u914D\u7F6E\u4FE1\u606F</h4>\n                        </dt>\n                        <dd class="col-2">\n                            <div class="detail-row">\n                                <label>\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09\u5957\u9910\u7C7B\u578B\uFF1A</label>\n                                <span>${basicInfo.resourceType}</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u7269\u8054\u7F51\u5361\u6570\uFF1A</label>\n                                <span>${basicInfo.cardNum} \u5F20</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u8D2D\u4E70\u89C4\u683C\uFF1A</label>\n                                <span>${basicInfo.messagesNum} \u767E\u4E07\u6761/\u6708</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u8D2D\u4E70\u65F6\u957F\uFF1A</label>\n                                <span>${basicInfo.purchaseMonths} \u4E2A\u6708</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u672C\u6708\u8D26\u671F\uFF1A</label>\n                                <span>${basicInfo.beginningAccount} \u81F3 ${basicInfo.endAccount}</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u672C\u6708\u8D26\u671F\u5185\u5269\u4F59\uFF1A</label>\n                                <span>${basicInfo.remainderNum} \u6761</span>\n                            </div>\n                            <!-- if: ${basicInfo.status} !== \'EXPIRED\'  && ${basicInfo.status} !==\'CREATING\' && ${overdueStatus.pass} -->\n                            <esui-button data-ui-id="upgradeConfig">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                            <!-- else -->\n                            <span class="disabled">\n                                <span data-ui-type="Tip" data-ui-id="ui-tip-0" data-ui-layer-width="auto" class="ui-ctrl ui-tip">\n                                    <!-- if: ${basicInfo.status} === \'CREATING\' -->\n                                        \u8D44\u6E90\u521B\u5EFA\u4E2D\n                                    <!-- elif: ${basicInfo.status} === \'EXPIRED\' -->\n                                        \u8D44\u6E90\u5DF2\u8FC7\u671F\n                                    <!-- else -->\n                                        \u60A8\u5DF2\u6B20\u8D39!\u8BF7<a href="/finance/#/finance/account/recharge">\u5145\u503C</a>\u540E\u8D2D\u4E70\n                                    <!-- /if -->\n                                </span>\n                                <esui-button data-ui-id="upgradeConfig" class="ui-button-disabled state-disabled skin-danger-disabled skin-danger-button-disabled" data-ui-disabled="disabled">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                            </span>\n                            <!-- /if -->\n                        </dd>\n                    </dl>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/endpoint/UnicomDetailModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'common/util/timeUtil',
    './config',
    '../config',
    '../enum'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _commonUtilTimeUtil, _config, _config3, _enum) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    var UnicomDetailModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](UnicomDetailModel, _BaseModel);
        function UnicomDetailModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UnicomDetailModel);
            _BaseModel.apply(this, arguments);
        }
        UnicomDetailModel.prototype.outputdollars = function outputdollars(number) {
            number = number.toString();
            if (number.length <= 3) {
                return number === '' ? '0' : number;
            }
            var mod = number.length % 3;
            var output = mod === 0 ? '' : number.substring(0, mod);
            var i = 0;
            for (i = 0; i < Math.floor(number.length / 3); i++) {
                if (mod === 0 && i === 0) {
                    output += number.substring(mod + 3 * i, mod + 3 * i + 3);
                } else {
                    output += ',' + number.substring(mod + 3 * i, mod + 3 * i + 3);
                }
            }
            return output;
        };
        UnicomDetailModel.prototype.prepare = function prepare() {
            var basicInfo = this.get('basicInfo');
            var locationItem = _u['default'].find(_config3.region, { value: basicInfo.region });
            _u['default'].extend(basicInfo, {
                localTime: _timeUtil['default'].toTime(basicInfo.createTime),
                locationTxt: locationItem ? locationItem.name : '',
                hostNameList: _u['default'].map(basicInfo.hostname, function (host) {
                    return '<p>' + host + '</p>';
                }).join(''),
                configureTxt: _enum.ENDPOINT_CONFIG.getTextFromValue(basicInfo.configure)
            });
            this.set('basicInfo', basicInfo);
        };
        _babelRuntimeHelpersCreateClass['default'](UnicomDetailModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        basicInfo: function basicInfo(model) {
                            return _config3.api.getUnicomDetail().then(function (item) {
                                item.state = {
                                    css: _config2['default'].status[item.status].css,
                                    text: _config2['default'].status[item.status].text
                                };
                                item.payType = item.productType === 'prepay' ? '\u9884\u4ED8\u8D39' : '\u540E\u4ED8\u8D39';
                                item.expressCompany = item.expressCompany ? item.expressCompany : '\u987A\u4E30';
                                item.beginningAccount = _timeUtil['default'].toTime(item.beginningAccount);
                                item.endAccount = _timeUtil['default'].toTime(item.endAccount);
                                item.createTime = _timeUtil['default'].toTime(item.createTime);
                                item.expireTime = _timeUtil['default'].toTime(item.expireTime);
                                item.remainderNum = model.outputdollars(item.remainderNum);
                                if (item.tester) {
                                    item.resourceType = '1\u5143\u8BD5\u7528\u7248';
                                } else if (item.messageByte === 128) {
                                    item.resourceType = '\u5C0F\u578B\u8BBE\u5907\u7248';
                                } else {
                                    item.resourceType = '\u5927\u578B\u8BBE\u5907\u7248';
                                }
                                return item;
                            });
                        },
                        overdueStatus: function overdueStatus(model) {
                            return _config3.api.getOverdueStatus();
                        }
                    };
                }
            }]);
        return UnicomDetailModel;
    }(_BaseModel2['default']);
    module.exports = UnicomDetailModel;
});
define('iot/endpoint/UnicomDetailView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./unicomDetail.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplUnicomDetailTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var UnicomDetailView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](UnicomDetailView, _BaseView);
        function UnicomDetailView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UnicomDetailView);
            _BaseView.apply(this, arguments);
        }
        UnicomDetailView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'upgradeConfig:click': function upgradeConfigClick(e) {
                    return _this.fire('UPGRADE', e);
                },
                'reBuy:click': function reBuyClick(e) {
                    return _this.fire('REBUY', e);
                },
                'renewButton:click': function renewButtonClick(e) {
                    return _this.fire('RENEW', e);
                }
            };
        };
        UnicomDetailView.prototype.enterDocument = function enterDocument() {
            _BaseView.prototype.enterDocument.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](UnicomDetailView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_endpoint_unicom_detail';
                }
            }]);
        return UnicomDetailView;
    }(_BaseView2['default']);
    module.exports = UnicomDetailView;
});
define('iot/endpoint/UnicomEndpointStats', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    'common/util/timeUtil',
    'moment',
    './UnicomEndpointStatsModel',
    './UnicomEndpointStatsView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTimeUtil, _moment, _UnicomEndpointStatsModel, _UnicomEndpointStatsView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _moment2 = _babelRuntimeHelpersInteropRequireDefault['default'](_moment);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_UnicomEndpointStatsModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_UnicomEndpointStatsView);
    var UnicomEndpointStats = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](UnicomEndpointStats, _BaseAction);
        function UnicomEndpointStats() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UnicomEndpointStats);
            _BaseAction.apply(this, arguments);
        }
        UnicomEndpointStats.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('REFRESH_CHART', this.refreshChart, this);
            this.view.on('UPGRADE', this.upgrade, this);
            this.refreshChart();
        };
        UnicomEndpointStats.prototype.upgrade = function upgrade() {
            this.redirect('/iot/order/upgradeUnicom');
        };
        UnicomEndpointStats.prototype.refreshChart = function refreshChart() {
            var _this = this;
            var timeRange = this.view.get('rangeCalendar').getValue().split(/,/);
            var timeLenght = _moment2['default'](timeRange[1]).valueOf() - _moment2['default'](timeRange[0]).valueOf();
            if (timeLenght / 1000 > 31536000) {
                this.view.waitAlert({
                    title: '\u63D0\u793A',
                    content: '\u65F6\u95F4\u8303\u56F4\u6700\u5927\u4E3A\u4E00\u5E74\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9',
                    width: 420
                });
                return;
            }
            var nowTime = new Date().valueOf();
            if (_moment2['default'](timeRange[1]).valueOf() > nowTime) {
                this.view.waitAlert({
                    title: '\u63D0\u793A',
                    content: '\u6240\u9009\u65F6\u95F4\u8D85\u8FC7\u5F53\u524D\u65F6\u95F4\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9',
                    width: 420
                });
                return;
            }
            var request = {
                endpointUuid: this.model.get('uuid'),
                endpointName: this.model.get('name'),
                start: _timeUtil['default'].timeToUtc(timeRange[0]),
                end: _timeUtil['default'].timeToUtc(timeRange[1]),
                pace: this.view.get('cycleUnit').getValue(),
                type: 'CHINA_UNICOM'
            };
            this.model.getEndpointHistory(request).then(function (data) {
                return _this.view.renderNewLineChart(data);
            }).fail(function () {
                return _this.view.showToast('\u83B7\u53D6\u65B0\u589E\u56FE\u8868\u5931\u8D25\uFF01', { messageType: 'error' });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](UnicomEndpointStats, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return UnicomEndpointStats;
    }(_BaseAction2['default']);
    module.exports = UnicomEndpointStats;
});
define('iot/endpoint/unicomEndpointStats.tpl', [], function () {
    return '<!-- target: TPL_iot_unicom_endpoint_stats -->\n<div class="iot-endpoint-stats iot-main-wrap main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u7269\u63A5\u5165-\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u7528\u91CF\u7EDF\u8BA1</span>\n        </p>\n        <div class="detail-content list-content">\n            <h2>\u5B9E\u4F8B ${name}<span>\u672C\u5B9E\u4F8B\u7531${summary.from}\u521B\u5EFA</span></h2>\n            <div class="main-content">\n                <div class="detail-parts-table">\n                    <dl class="detail-part-1-col basic-info" id="config-wrap">\n                        <dt>\n                            <h4>\u57FA\u672C\u4FE1\u606F</h4>\n                        </dt>\n                        <dd class="stats">\n                            <div class="detail-row">\n                                <label>\u672C\u6708\u8D26\u671F\uFF1A</label>\n                                <span>${summary.billMonthStart} \u81F3 ${summary.billMonthEnd}</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u5DF2\u7528\uFF1A</label>\n                                <span>${summary.usedNum} \u6761</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u5F53\u524D\u8FDE\u63A5\u6570\uFF1A</label>\n                                <span>${summary.connectedNum}\u4E2A \uFF08\u5F53\u524D/\u6700\u5927\u8FDE\u63A5\u6570\uFF1A${summary.connectedNum}/${summary.connectedLimitNum}\uFF09</span>\n                            </div>\n                        </dd>\n                    </dl>\n                    <dl class="detail-part-1-col" id="config-wrap">\n                        <dt>\n                            <h4>\u7D2F\u8BA1\u4FE1\u606F</h4>\n                        </dt>\n                        <div class="stats-chart">\n                            <div class="wrapper" >\n                                <div class="chart" id="accStats"></div>\n                            </div>\n                        </div>\n                    </dl>\n                    <dl class="detail-part-1-col" id="new-wrap">\n                        <dt>\n                            <h4>\u65B0\u589E\u4FE1\u606F</h4>\n                        </dt>\n                        <div class="option">\n                            <span>\u65F6\u95F4\u9009\u62E9\uFF1A</span>\n                            <input data-ui-type="RangeCalendar" name="rangeCalendar"\n                               data-ui-id="rangeCalendar" class="range-calendar"\n                               data-ui-time="true"/>\n                        </div>\n                        <div class="option">\n                            <span>\u91C7\u6837\u5468\u671F\uFF1A</span>\n                            <esui-select class="cycle-unit"\n                                data-ui-id="cycleUnit" data-ui-name="cycleUnit"\n                                data-ui-width="80"\n                                data-ui-datasource="@cycleList"></esui-select>\n                        </div>\n                        <esui-button class="refresh-chart" data-ui-skin="refresh"\n                                data-ui-id="refreshChart"></esui-button>\n                        <div class="stats-chart">\n                            <div class="wrapper" >\n                                <div class="chart" id="newStats"></div>\n                            </div>\n                        </div>\n                    </dl>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/endpoint/UnicomEndpointStatsModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    'common/util/timeUtil',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTimeUtil, _config) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var UnicomEndpointStatsModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](UnicomEndpointStatsModel, _BaseModel);
        function UnicomEndpointStatsModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UnicomEndpointStatsModel);
            _BaseModel.apply(this, arguments);
        }
        UnicomEndpointStatsModel.prototype.getEndpointHistory = function getEndpointHistory(request) {
            return _config.api.getEndpointHistory(request);
        };
        UnicomEndpointStatsModel.prototype.outputdollars = function outputdollars(number) {
            number = number.toString();
            if (number.length <= 3) {
                return number === '' ? '0' : number;
            }
            var mod = number.length % 3;
            var output = mod === 0 ? '' : number.substring(0, mod);
            var i = 0;
            for (i = 0; i < Math.floor(number.length / 3); i++) {
                if (mod === 0 && i === 0) {
                    output += number.substring(mod + 3 * i, mod + 3 * i + 3);
                } else {
                    output += ',' + number.substring(mod + 3 * i, mod + 3 * i + 3);
                }
            }
            return output;
        };
        _babelRuntimeHelpersCreateClass['default'](UnicomEndpointStatsModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        summary: function summary(model) {
                            return _config.api.getEndpointSummary({
                                endpointUuid: model.get('uuid'),
                                endpointName: model.get('name'),
                                type: 'CHINA_UNICOM'
                            }).then(function (item) {
                                item.billMonthEnd = _timeUtil['default'].toTime(item.billMonthEnd);
                                item.billMonthStart = _timeUtil['default'].toTime(item.billMonthStart);
                                item.usedNum = model.outputdollars(item.usage);
                                item.connectedNum = model.outputdollars(item.connectedClients);
                                item.connectedLimitNum = model.outputdollars(item.connectedClientLimit);
                                if (model.get('from') === 'DM') {
                                    item.from = '\u7269\u7BA1\u7406';
                                } else if (model.get('from') === 'USER') {
                                    item.from = '\u7269\u63A5\u5165';
                                } else if (model.get('from') === 'PARSER') {
                                    item.from = '\u7269\u89E3\u6790';
                                }
                                return item;
                            });
                        },
                        cycleList: function cycleList(model) {
                            return [
                                {
                                    text: '1\u5C0F\u65F6',
                                    value: 'hourly'
                                },
                                {
                                    text: '1\u5929',
                                    value: 'daily'
                                }
                            ];
                        }
                    };
                }
            }]);
        return UnicomEndpointStatsModel;
    }(_BaseModel2['default']);
    module.exports = UnicomEndpointStatsModel;
});
define('iot/endpoint/UnicomEndpointStatsView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./unicomEndpointStats.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'moment',
    'echarts',
    'echarts/chart/line',
    'inf-ria/utils/mtools'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplUnicomEndpointStatsTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _moment, _echarts, _echartsChartLine, _infRiaUtilsMtools) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _moment2 = _babelRuntimeHelpersInteropRequireDefault['default'](_moment);
    var _echarts2 = _babelRuntimeHelpersInteropRequireDefault['default'](_echarts);
    var _mtools = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaUtilsMtools);
    var UnicomEndpointStatsView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](UnicomEndpointStatsView, _BaseView);
        function UnicomEndpointStatsView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UnicomEndpointStatsView);
            _BaseView.apply(this, arguments);
        }
        UnicomEndpointStatsView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'cycleUnit:change': function cycleUnitChange(e) {
                    return _this.fire('REFRESH_CHART', e);
                },
                'rangeCalendar:change': function rangeCalendarChange(e) {
                    return _this.fire('REFRESH_CHART', e);
                },
                'refreshChart:click': function refreshChartClick(e) {
                    return _this.fire('REFRESH_CHART', e);
                },
                'upgradeConfig:click': function upgradeConfigClick(e) {
                    return _this.fire('UPGRADE', e);
                }
            };
        };
        UnicomEndpointStatsView.prototype.renderAccLineChart = function renderAccLineChart(data) {
            var metric = {
                name: 'ACC-CHART',
                unit: '',
                metrics: []
            };
            var type = 'sum';
            var fixedData = _mtools['default'].adjustSeriesData(data, 'sum');
            metric.statistics = type;
            _u['default'].each(data.series, function (item) {
                metric.metrics.push({
                    name: item.name,
                    value: item.name
                });
            });
            var chartOption = _mtools['default'].getChartOptions(fixedData, metric, null, {});
            var panelChart = _echarts2['default'].init(document.getElementById('accStats'));
            panelChart.setOption(chartOption, true);
        };
        UnicomEndpointStatsView.prototype.renderNewLineChart = function renderNewLineChart(data) {
            var metric = {
                name: 'NEW-CHART',
                unit: '',
                metrics: []
            };
            var type = 'sum';
            var fixedData = _mtools['default'].adjustSeriesData(data, 'sum');
            metric.statistics = type;
            _u['default'].each(data.series, function (item) {
                metric.metrics.push({
                    name: item.name,
                    value: item.name
                });
            });
            var chartOption = _mtools['default'].getChartOptions(fixedData, metric, null, {});
            var panelChart = _echarts2['default'].init(document.getElementById('newStats'));
            panelChart.setOption(chartOption, true);
        };
        UnicomEndpointStatsView.prototype.enterDocument = function enterDocument() {
            _BaseView.prototype.enterDocument.call(this);
            this.renderAccLineChart(this.model.get('summary'));
        };
        _babelRuntimeHelpersCreateClass['default'](UnicomEndpointStatsView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_unicom_endpoint_stats';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        rangeCalendar: {
                            rawValue: {
                                begin: _moment2['default']().subtract(12, 'h').toDate(),
                                end: new Date()
                            },
                            range: {
                                begin: _moment2['default']().subtract(1, 'y').toDate(),
                                end: new Date()
                            }
                        }
                    };
                }
            }
        ]);
        return UnicomEndpointStatsView;
    }(_BaseView2['default']);
    module.exports = UnicomEndpointStatsView;
});
define('iot/endpoint/UnicomStats', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    'common/util/timeUtil',
    'moment',
    './UnicomStatsModel',
    './UnicomStatsView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTimeUtil, _moment, _UnicomStatsModel, _UnicomStatsView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _moment2 = _babelRuntimeHelpersInteropRequireDefault['default'](_moment);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_UnicomStatsModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_UnicomStatsView);
    var UnicomStats = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](UnicomStats, _BaseAction);
        function UnicomStats() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UnicomStats);
            _BaseAction.apply(this, arguments);
        }
        UnicomStats.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('REFRESH_CHART', this.refreshChart, this);
            this.view.on('UPGRADE', this.upgrade, this);
            this.view.on('REBUY', this.rebuy, this);
            this.refreshChart();
        };
        UnicomStats.prototype.upgrade = function upgrade() {
            this.redirect('/iot/order/upgradeUnicom');
        };
        UnicomStats.prototype.rebuy = function rebuy() {
            this.redirect('/iot/order/create');
        };
        UnicomStats.prototype.refreshChart = function refreshChart() {
            var _this = this;
            var timeRange = this.view.get('rangeCalendar').getValue().split(/,/);
            var timeLenght = _moment2['default'](timeRange[1]).valueOf() - _moment2['default'](timeRange[0]).valueOf();
            if (timeLenght / 1000 > 31536000) {
                this.view.waitAlert({
                    title: '\u63D0\u793A',
                    content: '\u65F6\u95F4\u8303\u56F4\u6700\u5927\u4E3A\u4E00\u5E74\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9',
                    width: 420
                });
                return;
            }
            var nowTime = new Date().valueOf();
            if (_moment2['default'](timeRange[1]).valueOf() > nowTime) {
                this.view.waitAlert({
                    title: '\u63D0\u793A',
                    content: '\u6240\u9009\u65F6\u95F4\u8D85\u8FC7\u5F53\u524D\u65F6\u95F4\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9',
                    width: 420
                });
                return;
            }
            var request = {
                start: _timeUtil['default'].timeToUtc(timeRange[0]),
                end: _timeUtil['default'].timeToUtc(timeRange[1]),
                pace: this.view.get('cycleUnit').getValue(),
                type: 'CHINA_UNICOM'
            };
            this.model.getDashboardHistory(request).then(function (data) {
                return _this.view.renderNewLineChart(data);
            }).fail(function () {
                return _this.view.showToast('\u83B7\u53D6\u65B0\u589E\u56FE\u8868\u5931\u8D25\uFF01', { messageType: 'error' });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](UnicomStats, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return UnicomStats;
    }(_BaseAction2['default']);
    module.exports = UnicomStats;
});
define('iot/endpoint/unicomStats.tpl', [], function () {
    return '<!-- target: TPL_iot_endpoint_unicomStats -->\n<div class="iot-all-stats iot-main-wrap main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u7269\u63A5\u5165-\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u7528\u91CF\u7EDF\u8BA1-\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09</span>\n        </p>\n        <div class="detail-content list-content">\n            <h2>\u672C\u6708\u6982\u89C8</h2>\n            <div class="main-content">\n                <div class="detail-parts-table">\n                    <dl class="detail-part-1-col basic-info" id="config-wrap">\n                        <dt>\n                            <h4>\u57FA\u672C\u4FE1\u606F</h4>\n                        </dt>\n                        <div data-ui-type="EChart" data-ui-chart-type="pie" data-ui-id="summaryPie"\n                             id="summaryPie" class="summary-pie"></div>\n                        <dd class="stats">\n                            <div class="detail-row">\n                                <label>\u5B9E\u4F8B\u6570\uFF1A</label>\n                                <span>${summary.endpointCount} \u4E2A</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u672C\u6708\u8D26\u671F\uFF1A</label>\n                                <span>${summary.billMonthStart} \u81F3 ${summary.billMonthEnd}</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u672C\u6708\u989D\u5EA6\uFF1A</label>\n                                <span>${summary.quotaNum} \u6761</span>\n                            </div>\n                            <div class="detail-row">\n                                <!-- if: ${summary.quota} >= 1000 -->\n                                 <span class="disabled">\n                                    <span data-ui-type="Tip" data-ui-id="ui-tip-0" data-ui-layer-width="auto" class="ui-ctrl ui-tip">\u60A8\u5DF2\u662F\u6700\u9AD8\u989D\u5EA6\uFF0C\u82E5\u60F3\u7EE7\u7EED\u5347\u914D\uFF0C\u8BF7\u63D0\u5DE5\u5355 </span>\n                                    <esui-button class="upgrade-button ui-button-disabled state-disabled skin-danger-disabled skin-danger-button-disabled gray" data-ui-id="upgradeConfig" data-ui-disabled="disabled">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                                </span>\n                                <!-- elif: ${summary.status} !== \'EXPIRED\' && ${overdueStatus.pass} -->\n                                <esui-button class="upgrade-button"\n                                    data-ui-id="upgradeConfig">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                                <!-- elif: ${summary.status} !== \'EXPIRED\' && !${overdueStatus.pass} -->\n                                <span class="disabled">\n                                    <span data-ui-type="Tip" data-ui-id="ui-tip-0" data-ui-layer-width="auto" class="ui-ctrl ui-tip">\u60A8\u5DF2\u6B20\u8D39!\u8BF7<a href="/finance/#/finance/account/recharge">\u5145\u503C</a>\u540E\u8D2D\u4E70</span>\n                                    <esui-button class="upgrade-button ui-button-disabled state-disabled skin-danger-disabled skin-danger-button-disabled gray" data-ui-id="upgradeConfig" data-ui-disabled="disabled">\u914D\u7F6E\u5347\u7EA7</esui-button>\n                                </span>\n                                <!-- /if -->\n                            </div>\n                        </dd>\n                        <dd class="stats">\n                            <div class="detail-row">\n                                <label>\u5DF2\u7528\uFF1A</label>\n                                <span>${summary.usedNum} \u6761</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u5269\u4F59\uFF1A</label>\n                                <span>${summary.remainNum} \u6761</span>\n                            </div>\n                            <div class="detail-row">\n                                <label>\u5269\u4F59\u65E5\u5747\uFF1A</label>\n                                <span>${summary.remainPerDayNum} \u6761</span>\n                            </div>\n                        </dd>\n                    </dl>\n                    <dl class="detail-part-1-col" id="config-wrap">\n                        <dt>\n                            <h4>\u7D2F\u8BA1\u4FE1\u606F</h4>\n                        </dt>\n                        <div class="stats-chart">\n                            <div class="wrapper" >\n                                <div class="chart" id="accStats"></div>\n                            </div>\n                        </div>\n                    </dl>\n                    <dl class="detail-part-1-col" id="new-wrap">\n                        <dt>\n                            <h4>\u65B0\u589E\u4FE1\u606F</h4>\n                        </dt>\n                        <div class="option">\n                            <span>\u65F6\u95F4\u9009\u62E9\uFF1A</span>\n                            <input data-ui-type="RangeCalendar" name="rangeCalendar"\n                               data-ui-id="rangeCalendar" class="range-calendar"\n                               data-ui-time="true"/>\n                        </div>\n                        <div class="option">\n                            <span>\u91C7\u6837\u5468\u671F\uFF1A</span>\n                            <esui-select class="cycle-unit"\n                                data-ui-id="cycleUnit" data-ui-name="cycleUnit"\n                                data-ui-width="80"\n                                data-ui-datasource="@cycleList"></esui-select>\n                        </div>\n                        <esui-button class="refresh-chart" data-ui-skin="refresh"\n                                data-ui-id="refreshChart"></esui-button>\n                        <div class="stats-chart">\n                            <div class="wrapper" >\n                                <div class="chart" id="newStats"></div>\n                            </div>\n                        </div>\n                    </dl>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/endpoint/UnicomStatsModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    'common/util/timeUtil',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTimeUtil, _config) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var UnicomStatsModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](UnicomStatsModel, _BaseModel);
        function UnicomStatsModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UnicomStatsModel);
            _BaseModel.apply(this, arguments);
        }
        UnicomStatsModel.prototype.getDashboardHistory = function getDashboardHistory(request) {
            return _config.api.getDashboardHistory(request);
        };
        UnicomStatsModel.prototype.outputdollars = function outputdollars(number) {
            number = number.toString();
            if (number.length <= 3) {
                return number === '' ? '0' : number;
            }
            var mod = number.length % 3;
            var output = mod === 0 ? '' : number.substring(0, mod);
            var i = 0;
            for (i = 0; i < Math.floor(number.length / 3); i++) {
                if (mod === 0 && i === 0) {
                    output += number.substring(mod + 3 * i, mod + 3 * i + 3);
                } else {
                    output += ',' + number.substring(mod + 3 * i, mod + 3 * i + 3);
                }
            }
            return output;
        };
        _babelRuntimeHelpersCreateClass['default'](UnicomStatsModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        summary: function summary(model) {
                            return _config.api.getDashboardSummary({ type: 'CHINA_UNICOM' }).then(function (item) {
                                item.billMonthEnd = _timeUtil['default'].toTime(item.billMonthEnd);
                                item.billMonthStart = _timeUtil['default'].toTime(item.billMonthStart);
                                item.quotaNum = model.outputdollars(item.quota);
                                item.usedNum = model.outputdollars(item.usage);
                                item.remainNum = model.outputdollars(item.remain);
                                item.remainPerDayNum = model.outputdollars(item.remainPerDay);
                                item.quota = item.quota / 1000000;
                                return item;
                            });
                        },
                        cycleList: function cycleList(model) {
                            return [
                                {
                                    text: '1\u5C0F\u65F6',
                                    value: 'hourly'
                                },
                                {
                                    text: '1\u5929',
                                    value: 'daily'
                                }
                            ];
                        },
                        overdueStatus: function overdueStatus(model) {
                            return _config.api.getOverdueStatus();
                        }
                    };
                }
            }]);
        return UnicomStatsModel;
    }(_BaseModel2['default']);
    module.exports = UnicomStatsModel;
});
define('iot/endpoint/UnicomStatsView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./unicomStats.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'jquery',
    'moment',
    'echarts',
    'echarts/chart/line',
    'inf-ria/utils/mtools'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplUnicomStatsTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _jquery, _moment, _echarts, _echartsChartLine, _infRiaUtilsMtools) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _moment2 = _babelRuntimeHelpersInteropRequireDefault['default'](_moment);
    var _echarts2 = _babelRuntimeHelpersInteropRequireDefault['default'](_echarts);
    var _mtools = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaUtilsMtools);
    var UnicomStatsView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](UnicomStatsView, _BaseView);
        function UnicomStatsView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UnicomStatsView);
            _BaseView.apply(this, arguments);
        }
        UnicomStatsView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'cycleUnit:change': function cycleUnitChange(e) {
                    return _this.fire('REFRESH_CHART', e);
                },
                'rangeCalendar:change': function rangeCalendarChange(e) {
                    return _this.fire('REFRESH_CHART', e);
                },
                'refreshChart:click': function refreshChartClick(e) {
                    return _this.fire('REFRESH_CHART', e);
                },
                'upgradeConfig:click': function upgradeConfigClick(e) {
                    return _this.fire('UPGRADE', e);
                },
                'reBuy:click': function reBuyClick(e) {
                    return _this.fire('REBUY', e);
                }
            };
        };
        UnicomStatsView.prototype.renderPieChart = function renderPieChart(data) {
            var chartsOption = {
                animation: false,
                color: [
                    '#CFE8FC',
                    '#108cee'
                ],
                series: [{
                        type: 'pie',
                        center: [
                            '50%',
                            '50%'
                        ],
                        radius: [
                            '71%',
                            '100%'
                        ],
                        itemStyle: { emphasis: { label: { formatter: '{b}\n{d}%' } } },
                        label: {
                            normal: {
                                show: false,
                                position: 'center'
                            },
                            emphasis: {
                                show: true,
                                textStyle: {
                                    fontSize: '13',
                                    fontWeight: 'bold'
                                },
                                formatter: '{b}\n{d}%',
                                label: { formatter: '{b}\n{d}%' }
                            }
                        },
                        data: [
                            {
                                name: 'REMAIN',
                                value: data.remain
                            },
                            {
                                name: 'USED',
                                value: data.usage
                            }
                        ]
                    }]
            };
            var pieChart = this.get('summaryPie');
            pieChart.setOption(chartsOption);
            _$['default'](window).on('resize.echarts', pieChart.echartsInstance.resize);
        };
        UnicomStatsView.prototype.renderAccLineChart = function renderAccLineChart(data) {
            var metric = {
                name: 'ACC-CHART',
                unit: '',
                metrics: []
            };
            var type = 'sum';
            var fixedData = _mtools['default'].adjustSeriesData(data, 'sum');
            metric.statistics = type;
            _u['default'].each(data.series, function (item) {
                metric.metrics.push({
                    name: item.name,
                    value: item.name
                });
            });
            var chartOption = _mtools['default'].getChartOptions(fixedData, metric, null, {});
            var panelChart = _echarts2['default'].init(document.getElementById('accStats'));
            panelChart.setOption(chartOption, true);
        };
        UnicomStatsView.prototype.renderNewLineChart = function renderNewLineChart(data) {
            var metric = {
                name: 'NEW-CHART',
                unit: '',
                metrics: []
            };
            var type = 'sum';
            var fixedData = _mtools['default'].adjustSeriesData(data, 'sum');
            metric.statistics = type;
            _u['default'].each(data.series, function (item) {
                metric.metrics.push({
                    name: item.name,
                    value: item.name
                });
            });
            var chartOption = _mtools['default'].getChartOptions(fixedData, metric, null, {});
            var panelChart = _echarts2['default'].init(document.getElementById('newStats'));
            panelChart.setOption(chartOption, true);
        };
        UnicomStatsView.prototype.enterDocument = function enterDocument() {
            _BaseView.prototype.enterDocument.call(this);
            this.renderPieChart(this.model.get('summary'));
            this.renderAccLineChart(this.model.get('summary'));
        };
        _babelRuntimeHelpersCreateClass['default'](UnicomStatsView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_endpoint_unicomStats';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        rangeCalendar: {
                            rawValue: {
                                begin: _moment2['default']().subtract(12, 'h').toDate(),
                                end: new Date()
                            },
                            range: {
                                begin: _moment2['default']().subtract(1, 'y').toDate(),
                                end: new Date()
                            }
                        }
                    };
                }
            }
        ]);
        return UnicomStatsView;
    }(_BaseView2['default']);
    module.exports = UnicomStatsView;
});
define('iot/enum', [
    'exports',
    'inf-ria/EnumX',
    'babel-runtime/helpers/interop-require-default',
    'inf-i18n'
], function (exports, _infRiaEnumX, _babelRuntimeHelpersInteropRequireDefault, _infI18n) {
    exports.__esModule = true;
    var _Enum = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaEnumX);
    var _2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infI18n);
    var ENDPOINT_CONFIG = new _Enum['default']({
        alias: 'FREE',
        text: '\u514D\u8D39',
        value: 'free'
    });
    exports.ENDPOINT_CONFIG = ENDPOINT_CONFIG;
    var OPERATIONS = new _Enum['default']({
        alias: 'PUBLISH',
        text: '\u53D1\u5E03(PUB)',
        value: 'PUBLISH'
    }, {
        alias: 'SUBSCRIBE',
        text: '\u8BA2\u9605(SUB)',
        value: 'SUBSCRIBE'
    });
    exports.OPERATIONS = OPERATIONS;
    var CREATOR = new _Enum['default']({
        alias: 'USER',
        text: '\u7528\u6237',
        value: 'USER'
    }, {
        alias: 'DM',
        text: '\u7269\u7BA1\u7406',
        value: 'DM'
    }, {
        alias: 'PARSER',
        text: '\u7269\u89E3\u6790',
        value: 'PARSER'
    });
    exports.CREATOR = CREATOR;
    var INS_STATUS = new _Enum['default']({
        alias: 'RUNNING',
        text: '\u8FD0\u884C\u4E2D',
        value: 'RUNNING',
        kclass: 'status-running'
    }, {
        alias: 'CREATING',
        text: '\u521B\u5EFA\u4E2D',
        value: 'CREATING',
        kclass: 'status-creating'
    });
    exports.INS_STATUS = INS_STATUS;
});
define('iot/events', [
    'exports',
    'module'
], function (exports, module) {
    module.exports = {
        REFRESH: 'REFRESH',
        CREATE: 'CREATE',
        RELEASE: 'RELEASE',
        DELETE: 'DELETE',
        EDIT: 'EDIT',
        INPUT: 'INPUT',
        CONFIRM: 'CONFIRM',
        BEFORE_CHANGE: 'BEFORE_CHANGE',
        THING_CREATED: 'THING_CREATED',
        PRINCIPAL_CREATED: 'PRINCIPAL_CREATED',
        CREATE_PRINCIPAL: 'CREATE_PRINCIPAL',
        CANCEL_CREATE_PRINCIPAL: 'CANCEL_CREATE_PRINCIPAL',
        PRINCIPAL_LOADED: 'PRINCIPAL_LOADED',
        RENDER_AFTER_CONFIRM: 'RENDER_AFTER_CONFIRM',
        GEN_PASSWORD: 'GEN_PASSWORD',
        CREATE_POLICY: 'CREATE_POLICY',
        CANCEL_CREATE_POLICY: 'CANCEL_CREATE_POLICY',
        POLICY_LOADED: 'POLICY_LOADED',
        VIEW_PACKAGE: 'VIEW_PACKAGE',
        VIEW_DEVICE: 'VIEW_DEVICE',
        VIEW_STATS: 'VIEW_STATS',
        REFRESH_CHART: 'REFRESH_CHART',
        VIEW_ENDPOINT_STATS: 'VIEW_ENDPOINT_STATS',
        EDIT_TRANTABLE: 'EDIT_TRANTABLE',
        BATCH_UPLOAD: 'BATCH_UPLOAD',
        EDIT_TABLE_CELL: 'EDIT_TABLE_CELL',
        START_TURNKEY: 'START_TURNKEY',
        RENEW: 'RENEW',
        RENEW_UNICOM: 'RENEW_UNICOM',
        UPGRADE_CONFIG: 'UPGRADE_CONFIG',
        UPGRADE_UNICOM_CONFIG: 'UPGRADE_UNICOM_CONFIG',
        CREATE_HUB: 'CREATE_HUB',
        CREATE_UNICOM: 'CREATE_UNICOM',
        VIEW_UNICOM_STATS: 'VIEW_UNICOM_STATS',
        VIEW_UNICOM_PACKAGE: 'VIEW_UNICOM_PACKAGE'
    };
});
define('iot/helper', [
    'exports',
    'module',
    './config'
], function (exports, module, _config) {
    module.exports = {
        isValidTopic: function isValidTopic(data) {
            if (data.indexOf('$') === 0 && data.indexOf('$baidu/') !== 0 && data.indexOf('$SYS/') !== 0) {
                return false;
            }
            if (!_config.topicRegExp.test(data)) {
                return false;
            }
            return true;
        },
        isShowCoupon: function isShowCoupon(messagesNum, purchaseLength) {
            return !(messagesNum === 1 && purchaseLength <= 3);
        }
    };
});
define('iot/modbus/advanced/Advanced', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './AdvancedModel',
    './AdvancedView',
    '../operations'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _AdvancedModel, _AdvancedView, _operations) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _ModelType = _babelRuntimeHelpersInteropRequireDefault['default'](_AdvancedModel);
    var _ViewType = _babelRuntimeHelpersInteropRequireDefault['default'](_AdvancedView);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var Advanced = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Advanced, _BaseAction);
        function Advanced() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Advanced);
            _BaseAction.apply(this, arguments);
        }
        Advanced.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('CREATE_CUSTOM_PROPERTY', this.create, this);
            this.view.on('DELETE', this['delete'], this);
        };
        Advanced.prototype.create = function create() {
            var _this = this;
            this.model.iotResourceValid().then(function (data) {
                if (data.valid) {
                    _operations2['default'].createCustomProperty.call(_this, { parentAction: _this });
                } else {
                    _operations2['default'].confirmCreateIotOrder(_this.view).then(function () {
                        return _this.redirect('#/iot/order/notify');
                    });
                }
            });
        };
        Advanced.prototype['delete'] = function _delete(e) {
            var model = this.model;
            var view = this.view;
            var action = this;
            model.deleteCustomProperty({ name: e.name }).then(function () {
                return view.showToast('\u5220\u9664\u81EA\u5B9A\u4E49\u6807\u7B7E\u6210\u529F\uFF01');
            }).then(function () {
                return action.reload();
            }).fail(function () {
                return view.showToast('\u5220\u9664\u81EA\u5B9A\u4E49\u6807\u7B7E\u5931\u8D25\uFF01');
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Advanced, [
            {
                key: 'modelType',
                get: function get() {
                    return _ModelType['default'];
                }
            },
            {
                key: 'viewType',
                get: function get() {
                    return _ViewType['default'];
                }
            }
        ]);
        return Advanced;
    }(_BaseAction2['default']);
    module.exports = Advanced;
});
define('iot/modbus/advanced/advanced.tpl', [], function () {
    return '<!-- target: TPL_modbus_advanced -->\n<div class="modbus-main-wrap modbus-advanced main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <span class="active">\u7269\u89E3\u6790 - \u9AD8\u7EA7\u8BBE\u7F6E</span>\n        </p>\n        <div class="list-content">\n            <h2>\u89E3\u6790\u9879\u76EE\u8BBE\u7F6E</h2>\n        \t<div class="tip-grey">\n        \t\t\u6E29\u99A8\u63D0\u793A\uFF1A\u6DFB\u52A0\u7684\u81EA\u5B9A\u4E49\u5C5E\u6027\u5C06\u5E94\u7528\u4E0E\u6240\u6709\u89E3\u6790\u8BB0\u5F55\u3002\n        \t</div>\n            <div class="main-content table-full-wrap">\n\t        \t<div class="operation-wrap" data-follow-thead="table">\n\t        \t\t<div class="buttons-wrap">\n\t                    <button data-ui-id="propertyCreateBtn"\n\t                            data-ui-type="Button"\n\t                            data-ui-skin="create">\u65B0\u5EFA\u81EA\u5B9A\u4E49\u5C5E\u6027</button>\n\n\t                </div>\n\t        \t</div>\n\t        \t<div data-ui-type="Table" data-ui-id="table"\n                     data-ui-datasource="@tableData"\n                     data-ui-order-by="@orderBy" data-ui-order="@order"\n                     data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                     data-ui-extension-command-type="Command"\n                     data-ui-extension-tableedit-type="TableEdit"\n                     data-ui-extension-tableex-type="TableEx"\n                     data-ui-extension-customfields-type="TableCustomFields">\n                </div>\n\t        </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/modbus/advanced/AdvancedModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    '../../config',
    'common/config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _config, _commonConfig) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var _commonConfig2 = _babelRuntimeHelpersInteropRequireDefault['default'](_commonConfig);
    var AdvancedModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](AdvancedModel, _ListModel);
        function AdvancedModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, AdvancedModel);
            _ListModel.apply(this, arguments);
        }
        AdvancedModel.prototype.prepare = function prepare() {
        };
        AdvancedModel.prototype.iotResourceValid = function iotResourceValid() {
            return _commonConfig2['default'].api.iotServiceStatus();
        };
        AdvancedModel.prototype.deleteCustomProperty = function deleteCustomProperty(data) {
            return _config.api.deleteCustomProperty(data);
        };
        _babelRuntimeHelpersCreateClass['default'](AdvancedModel, [
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.getCustomPropertyList;
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: 200
                    };
                }
            }
        ]);
        return AdvancedModel;
    }(_ListModel2['default']);
    module.exports = AdvancedModel;
});
define('iot/modbus/advanced/AdvancedView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./advanced.tpl',
    'inf-ria/mvc/ListView',
    'babel-runtime/helpers/interop-require-default',
    'common/util/tableUtil',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplAdvancedTplHtml, _infRiaMvcListView, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTableUtil, _config) {
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u81EA\u5B9A\u4E49\u5C5E\u6027',
                field: 'name',
                width: 50,
                content: function content(item, row) {
                    return item.name;
                }
            },
            {
                title: '\u64CD\u4F5C',
                width: 50,
                field: 'operation',
                content: function content(item, row) {
                    return '<span class="operations">\n                            <button class="cmd-button"\n                                    data-command="DELETE"\n                                    data-command-args=\'' + row + '\'>\u5220\u9664</button>\n                        </span>';
                }
            }
        ];
    }
    var AdvancedView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](AdvancedView, _ListView);
        function AdvancedView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, AdvancedView);
            _ListView.apply(this, arguments);
        }
        AdvancedView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'propertyCreateBtn:click': function propertyCreateBtnClick(e) {
                    return _this.fire('CREATE_CUSTOM_PROPERTY', e);
                },
                'table:command': this.handleTableCommand
            });
        };
        AdvancedView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
        };
        AdvancedView.prototype.handleTableCommand = function handleTableCommand(e) {
            var me = this;
            var item = this.get('table').datasource[e.args];
            if (e.name === 'DELETE') {
                me.waitConfirm('\u662F\u5426\u5220\u9664\u81EA\u5B9A\u4E49\u6807\u7B7E', '\u81EA\u5B9A\u4E49\u6807\u7B7E').then(function () {
                    me.fire(e.name, item);
                });
            }
        };
        _babelRuntimeHelpersCreateClass['default'](AdvancedView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_advanced';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        table: {
                            editable: 1,
                            sortable: true,
                            columnResizable: true,
                            fields: '@tableFields',
                            noDataHtml: _config2['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return AdvancedView;
    }(_ListView2['default']);
    module.exports = AdvancedView;
});
define('iot/modbus/advanced/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default',
    'common/component/action_category'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault, _commonComponentAction_category) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var _ActionCategory = _babelRuntimeHelpersInteropRequireDefault['default'](_commonComponentAction_category);
    var actionsConfig = [
        {
            type: 'iot/modbus/advanced/Advanced',
            path: '/iot/modbus/advanced',
            category: _ActionCategory['default'].LIST
        },
        {
            type: 'iot/modbus/advanced/dialog/CreateProperty',
            path: '/iot/modbus/advanced/createproperty'
        }
    ];
    _controller['default'].registerAction(actionsConfig);
    module.exports = {
        noDataHtml: [
            '<div><p>\u4F60\u8FD8\u6CA1\u521B\u5EFA\u4EFB\u4F55\u81EA\u5B9A\u4E49\u5C5E\u6027</br>',
            '\u70B9\u51FB\u5DE6\u4E0A\u89D2\u6309\u94AE\u7ACB\u5373\u521B\u5EFA',
            '</p></div>'
        ].join('')
    };
});
define('iot/modbus/advanced/dialog/CreateProperty', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    './CreatePropertyModel',
    './CreatePropertyView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _CreatePropertyModel, _CreatePropertyView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreatePropertyModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreatePropertyView);
    var CreateProperty = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](CreateProperty, _FormAction);
        function CreateProperty() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateProperty);
            _FormAction.apply(this, arguments);
        }
        CreateProperty.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
        };
        CreateProperty.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u81EA\u5B9A\u4E49\u5C5E\u6027\u521B\u5EFA\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        CreateProperty.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        CreateProperty.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](CreateProperty, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u81EA\u5B9A\u4E49\u5C5E\u6027\u521B\u5EFA\u6210\u529F\uFF01';
                }
            }
        ]);
        return CreateProperty;
    }(_FormAction2['default']);
    module.exports = CreateProperty;
});
define('iot/modbus/advanced/dialog/createproperty.tpl', [], function () {
    return '<!-- target: TPL_modbus_create_customproperty -->\n<div class="modbus-dialog-form modbus-customproperty-create">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-data-body">\n            <div class="form-row">\n                <label>\u6807\u7B7E\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                        data-ui-name="name"\n                        data-ui-id="label"></div>\n                </div>\n            </div>\n        </div>\n        \n    </form>\n</div>\n<!-- target: TPL_modbus_create_customproperty_child -->\n<!-- import: TPL_modbus_create_customproperty -->\n\n';
});
define('iot/modbus/advanced/dialog/CreatePropertyModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    '../../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var CreatePropertyModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreatePropertyModel, _FormModel);
        function CreatePropertyModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreatePropertyModel);
            _FormModel.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](CreatePropertyModel, [{
                key: 'submitRequester',
                get: function get() {
                    return _config.api.createCustomProperty;
                }
            }]);
        return CreatePropertyModel;
    }(_FormModel2['default']);
    module.exports = CreatePropertyModel;
});
define('iot/modbus/advanced/dialog/CreatePropertyView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./createproperty.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreatepropertyTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var CreatePropertyView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreatePropertyView, _FormView);
        function CreatePropertyView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreatePropertyView);
            _FormView.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](CreatePropertyView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_create_customproperty';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        label: {
                            width: 150,
                            placeholder: '',
                            required: 'required'
                        }
                    };
                }
            }
        ]);
        return CreatePropertyView;
    }(_FormView2['default']);
    module.exports = CreatePropertyView;
});
define('iot/modbus/analysis/Analysis', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/ListAction',
    './AnalysisModel',
    './AnalysisView',
    '../operations'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcListAction, _AnalysisModel, _AnalysisView, _operations) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _ModelType = _babelRuntimeHelpersInteropRequireDefault['default'](_AnalysisModel);
    var _ViewType = _babelRuntimeHelpersInteropRequireDefault['default'](_AnalysisView);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var Analysis = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](Analysis, _ListAction);
        function Analysis() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Analysis);
            _ListAction.apply(this, arguments);
        }
        Analysis.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on('CREATE_PROJECT', this.create, this);
            this.view.on('DELETE_PROJECT', this['delete'], this);
            this.view.on('EDIT_PROJECT', this.edit, this);
            this.view.on('UPDATE_STATE', this.updateState, this);
            this.view.on('LINK_SETTINGS', this.linkToSettings, this);
            this.view.on('LINK_DATA', this.linkToData, this);
            this.model.on('change', this.syncModelToView, this);
        };
        Analysis.prototype.syncModelToView = function syncModelToView(e) {
            _ListAction.prototype.syncModelToView.call(this, e);
        };
        Analysis.prototype.linkToSettings = function linkToSettings(e) {
            this.redirect('/iot/modbus/analysis/settings~' + e.args);
        };
        Analysis.prototype.linkToData = function linkToData(e) {
            this.redirect('/iot/modbus/analysis/verify~' + e.args);
        };
        Analysis.prototype.updateState = function updateState(e) {
            var _this = this;
            this.model.updateState({
                uuid: e.uuid,
                state: e.state
            }).then(function () {
                return _this.view.showToast(e.text + '\u89E3\u6790\u9879\u76EE\u6210\u529F\uFF01');
            }).then(function () {
                return _this.reload();
            }).fail(function () {
                return _this.showToast(e.text + '\u89E3\u6790\u9879\u76EE\u5931\u8D25\uFF01');
            });
        };
        Analysis.prototype.create = function create() {
            var _this2 = this;
            this.model.iotResourceValid().then(function (data) {
                if (data.valid) {
                    _operations2['default'].createParseProject.call(_this2, { parentAction: _this2 });
                } else {
                    _operations2['default'].confirmCreateIotOrder(_this2.view).then(function () {
                        return _this2.redirect('#/iot/order/notify');
                    });
                }
            });
        };
        Analysis.prototype.edit = function edit(e) {
            _operations2['default'].editParseProject.call(this, {
                parentAction: this,
                item: e
            });
        };
        Analysis.prototype['delete'] = function _delete() {
            var items = this.view.get('table').getSelectedItems();
            var model = this.model;
            var view = this.view;
            var action = this;
            var request = [];
            _u['default'].each(items, function (item) {
                request.push({
                    uuid: item.uuid,
                    gatewayUuid: item.gatewayUuid,
                    storageTaskId: item.storageTaskId
                });
            });
            view.waitConfirm({
                title: '\u5220\u9664\u89E3\u6790\u9879\u76EE',
                content: '\u662F\u5426\u786E\u8BA4\u5220\u9664\u89E3\u6790\u9879\u76EE\uFF1F',
                width: 500,
                needFoot: true
            }).done(function (e) {
                model.deleteParseProject(request).then(function () {
                    return view.showToast('\u5220\u9664\u89E3\u6790\u9879\u76EE\u6210\u529F\uFF01');
                }).then(function () {
                    return action.reload();
                }).fail(function () {
                    return view.showToast('\u5220\u9664\u89E3\u6790\u9879\u76EE\u5931\u8D25\uFF01');
                });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Analysis, [
            {
                key: 'modelType',
                get: function get() {
                    return _ModelType['default'];
                }
            },
            {
                key: 'viewType',
                get: function get() {
                    return _ViewType['default'];
                }
            }
        ]);
        return Analysis;
    }(_ListAction2['default']);
    module.exports = Analysis;
});
define('iot/modbus/analysis/analysis.tpl', [], function () {
    return '<!-- target: TPL_modbus_analysis_list -->\n<div class="modbus-main-wrap modbus-manage main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <span class="active">\u7269\u89E3\u6790 - \u89E3\u6790\u9879\u76EE</span>\n        </p>\n        <div class="list-content">\n            <h2>\u89E3\u6790\u9879\u76EE</h2>\n        \t<div class="notice">\n        \t\t\u89E3\u6790\u9879\u76EE\u914D\u7F6E\u5B8C\u6210\u540E\uFF0C\u9700\u8981\u914D\u7F6E\u4E0B\u53D1\u624D\u80FD\u751F\u6548\uFF0C\u8BF7\u5230\u7F51\u5173\u5217\u8868\u4E2D\u70B9\u51FB\u76F8\u5E94\u7F51\u5173\u7684\u300E\u914D\u7F6E\u4E0B\u53D1\u300F\uFF0C\u5B8C\u6210\u914D\u7F6E\u7684\u751F\u6548\u3002\n        \t</div>\n            <div class="main-content table-full-wrap">\n\t        \t<div class="operation-wrap" data-follow-thead="table">\n\t        \t\t<div class="buttons-wrap">\n\t                    <button data-ui-id="createBtn"\n\t                            data-ui-type="Button"\n\t                            data-ui-skin="create">\u65B0\u5EFA\u89E3\u6790\u9879\u76EE</button>\n\t                    <button data-ui-type="Button"\n\t                            data-ui-skin="danger"\n\t                            data-ui-id="deleteBtn">\u5220\u9664</button>\n\t                </div>\n\t        \t</div>\n\t        \t<div data-ui-type="Table" data-ui-id="table"\n                     data-ui-datasource="@tableData"\n                     data-ui-order-by="@orderBy" data-ui-order="@order"\n                     data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                     data-ui-extension-command-type="Command"\n                     data-ui-extension-tableedit-type="TableEdit"\n                     data-ui-extension-tableex-type="TableEx"\n                     data-ui-extension-customfields-type="TableCustomFields">\n                </div>\n                <div class="ui-row">\n                <!-- import: listPager -->\n                </div>\n\t        </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/modbus/analysis/AnalysisModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    'common/config',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _commonConfig, _config) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var _commonConfig2 = _babelRuntimeHelpersInteropRequireDefault['default'](_commonConfig);
    var AnalysisModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](AnalysisModel, _ListModel);
        function AnalysisModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, AnalysisModel);
            _ListModel.apply(this, arguments);
        }
        AnalysisModel.prototype.iotResourceValid = function iotResourceValid() {
            return _commonConfig2['default'].api.iotServiceStatus();
        };
        AnalysisModel.prototype.deleteParseProject = function deleteParseProject(data) {
            return _config.api.deleteParseProject(data);
        };
        AnalysisModel.prototype.updateState = function updateState(data) {
            return _config.api.updateParseproject(data);
        };
        _babelRuntimeHelpersCreateClass['default'](AnalysisModel, [
            {
                key: 'datasource',
                get: function get() {
                    return {};
                }
            },
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.getParseProjectList;
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize
                    };
                }
            }
        ]);
        return AnalysisModel;
    }(_ListModel2['default']);
    module.exports = AnalysisModel;
});
define('iot/modbus/analysis/AnalysisView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./analysis.tpl',
    'inf-ria/mvc/ListView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'common/util/timeUtil',
    'common/util/tableUtil',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplAnalysisTplHtml, _infRiaMvcListView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _commonUtilTimeUtil, _commonUtilTableUtil, _config) {
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u9879\u76EE\u540D\u79F0',
                field: 'name',
                width: 50,
                content: function content(item) {
                    return _u['default'].escape(item.name);
                }
            },
            {
                title: '\u72B6\u6001',
                width: 50,
                field: 'state',
                content: function content(item) {
                    return '<span class="status status-' + _config2['default'].status[item.state].css + '">\n                            ' + _config2['default'].status[item.state].text + '\n                        </span>';
                }
            },
            {
                title: '\u534F\u8BAE',
                width: 50,
                field: 'protocol',
                content: 'protocol'
            },
            {
                title: '\u6570\u636E\u6765\u6E90',
                width: 50,
                field: 'gatewayCode',
                content: 'gatewayCode'
            },
            {
                title: '\u5B58\u50A8\u4F4D\u7F6E',
                width: 50,
                field: 'storage',
                content: 'storage'
            },
            {
                title: '\u76EE\u7684\u5730\u4E3B\u9898',
                width: 50,
                field: 'destTopic',
                content: 'destTopic'
            },
            {
                title: '\u521B\u5EFA\u65F6\u95F4',
                width: 90,
                field: 'createTime',
                content: function content(item) {
                    return _timeUtil['default'].toTime(item.createTime);
                }
            },
            {
                title: '\u64CD\u4F5C',
                width: 170,
                field: 'operation',
                content: function content(item, row) {
                    var text = item.state === 'RUNNING' ? '\u6682\u505C' : '\u542F\u52A8';
                    var verifyQuery = 'uuid=' + item.uuid + '&name=' + item.name + '&rawState=' + item.state + '&gatewayUuid=' + item.gatewayUuid;
                    var settingsQuery = 'parserObjectUuid=' + item.uuid + '&name=' + item.name + '&rawState=' + item.state + '&gatewayUuid=' + item.gatewayUuid;
                    return '<span class="operations">\n                            <button class="cmd-button"\n                                    data-command="UPDATE_STATE"\n                                    data-command-args=\'' + row + '\'>' + text + '</button>\n                            <button class="cmd-button"\n                                    data-command="EDIT_PROJECT"\n                                    data-command-args=\'' + row + '\'>\u7F16\u8F91</button>\n                            <button class="cmd-button"\n                                    data-command="LINK_SETTINGS"\n                                    data-command-args=\'' + settingsQuery + '\'>\u89E3\u6790\u8BBE\u7F6E</button>\n                            <button class="cmd-button"\n                                    data-command="LINK_DATA"\n                                    data-command-args=\'' + verifyQuery + '\'>\u6570\u636E\u9A8C\u8BC1</button>\n                        </span>';
                }
            }
        ];
    }
    var AnalysisView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](AnalysisView, _ListView);
        function AnalysisView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, AnalysisView);
            _ListView.apply(this, arguments);
        }
        AnalysisView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'createBtn:click': function createBtnClick(e) {
                    return _this.fire('CREATE_PROJECT', e);
                },
                'deleteBtn:click': function deleteBtnClick(e) {
                    return _this.fire('DELETE_PROJECT', e);
                },
                'table:select': this.updateButtonStates,
                'table:command': this.handleTableCommand
            });
        };
        AnalysisView.prototype.handleTableCommand = function handleTableCommand(e) {
            var _this2 = this;
            var me = this;
            var item = this.get('table').datasource[e.args];
            if (e.name === 'UPDATE_STATE') {
                (function () {
                    var item = _this2.get('table').datasource[e.args];
                    var state = item.state === 'RUNNING' ? 'PAUSED' : 'RUNNING';
                    var text = item.state === 'RUNNING' ? '\u6682\u505C' : '\u542F\u52A8';
                    me.waitConfirm('\u662F\u5426' + text + '\u89E3\u6790\u9879\u76EE', text + '\u89E3\u6790\u9879\u76EE').then(function () {
                        me.fire(e.name, {
                            uuid: item.uuid,
                            state: state,
                            text: text
                        });
                    });
                }());
            } else if (e.name === 'EDIT_PROJECT') {
                me.fire(e.name, item);
            } else {
                me.fire(e.name, e);
            }
        };
        AnalysisView.prototype.updateButtonStates = function updateButtonStates() {
            var items = this.get('table').getSelectedItems();
            if (items && items.length > 0) {
                this.get('deleteBtn').set('disabled', false);
            } else {
                this.get('deleteBtn').set('disabled', true);
            }
        };
        AnalysisView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
            this.get('deleteBtn').set('disabled', true);
        };
        _babelRuntimeHelpersCreateClass['default'](AnalysisView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_analysis_list';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        table: {
                            select: 'multi',
                            sortable: true,
                            columnResizable: true,
                            fields: '@tableFields',
                            noDataHtml: _config2['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return AnalysisView;
    }(_ListView2['default']);
    module.exports = AnalysisView;
});
define('iot/modbus/analysis/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default',
    'common/component/action_category'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault, _commonComponentAction_category) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var _ActionCategory = _babelRuntimeHelpersInteropRequireDefault['default'](_commonComponentAction_category);
    var actionsConfig = [
        {
            type: 'iot/modbus/analysis/Analysis',
            path: '/iot/modbus/analysis',
            category: _ActionCategory['default'].LIST
        },
        {
            type: 'iot/modbus/analysis/Verify',
            path: '/iot/modbus/analysis/verify'
        },
        {
            type: 'iot/modbus/analysis/dialog/Create',
            path: '/iot/modbus/analysis/createProject'
        },
        {
            type: 'iot/modbus/analysis/dialog/Create',
            path: '/iot/modbus/analysis/editProject'
        },
        {
            type: 'iot/modbus/analysis/Settings',
            path: '/iot/modbus/analysis/settings'
        },
        {
            type: 'iot/modbus/analysis/Polling',
            path: '/iot/modbus/analysis/setting/polling'
        },
        {
            type: 'iot/modbus/analysis/dialog/Detail',
            path: '/iot/modbus/slave/detail'
        },
        {
            type: 'iot/modbus/analysis/dialog/CreateTrantable',
            path: '/iot/modbus/analysis/createTrantable'
        },
        {
            type: 'iot/modbus/analysis/dialog/Upload',
            path: '/iot/modbus/analysis/upload'
        },
        {
            type: 'iot/modbus/analysis/NewPolling',
            path: '/iot/modbus/analysis/setting/create'
        },
        {
            type: 'iot/modbus/analysis/dialog/HowUpload',
            path: '/iot/modbus/slave/howUpload'
        }
    ];
    _controller['default'].registerAction(actionsConfig);
    module.exports = {
        noDataHtml: [
            '<div><p>\u4F60\u8FD8\u6CA1\u521B\u5EFA\u4EFB\u4F55\u9879\u76EE</br>',
            '\u70B9\u51FB\u5DE6\u4E0A\u89D2\u6309\u94AE\u7ACB\u5373\u521B\u5EFA',
            '</p></div>'
        ].join(''),
        status: {
            RUNNING: {
                text: '\u8FD0\u884C\u4E2D',
                css: 'green'
            },
            PAUSED: {
                text: '\u6682\u505C',
                css: 'grey'
            }
        },
        kind: [
            {
                name: 'INT',
                value: 'INT'
            },
            {
                name: 'BOOL',
                value: 'BOOL'
            },
            {
                name: 'REAL',
                value: 'REAL'
            },
            {
                name: 'INT32',
                value: 'INT32'
            },
            {
                name: 'REAL32',
                value: 'REAL32'
            }
        ],
        length: [
            {
                name: '1',
                value: 1
            },
            {
                name: '8',
                value: 8
            },
            {
                name: '16',
                value: 16
            },
            {
                name: '32',
                value: 32
            }
        ],
        unit: [
            {
                name: 'N/A',
                value: 'N/A'
            },
            {
                name: 'MPa(A)',
                value: 'MPa(A)'
            },
            {
                name: 'MPa(G)',
                value: 'MPa(G)'
            },
            {
                name: 'KPa',
                value: 'KPa'
            },
            {
                name: '%',
                value: '%'
            },
            {
                name: 'Nm^3/h',
                value: 'Nm^3/h'
            },
            {
                name: 't/h',
                value: 't/h'
            },
            {
                name: 'mm/s',
                value: 'mm/s'
            },
            {
                name: 'KW',
                value: 'KW'
            },
            {
                name: 'Hz',
                value: 'Hz'
            },
            {
                name: '\u2103',
                value: '\u2103'
            },
            {
                name: 'V',
                value: 'V'
            },
            {
                name: 'A',
                value: 'A'
            }
        ]
    };
});
define('iot/modbus/analysis/dialog/Create', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    './CreateModel',
    './CreateView',
    'underscore'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _CreateModel, _CreateView, _underscore) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var Create = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Create, _FormAction);
        function Create() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Create);
            _FormAction.apply(this, arguments);
        }
        Create.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            this.view.on('gotoRuleCreation', this.gotoRuleCreation, this);
            this.view.on('REFRESH_RULE_BUTTON', this.refreshCreateRuleButton, this);
            var toastMsg = '\u89E3\u6790\u9879\u76EE\u521B\u5EFA\u6210\u529F\uFF01';
            if (this.model.get('item')) {
                toastMsg = '\u89E3\u6790\u9879\u76EE\u4FEE\u6539\u6210\u529F\uFF01';
            }
            this.toastMessage = toastMsg;
        };
        Create.prototype.refreshCreateRuleButton = function refreshCreateRuleButton() {
            var formData = this.view.getFormData();
            var submitData = this.model.getSubmitData(formData);
            var from = submitData.destTopic;
            if (!from || from.length <= 0) {
                this.view.get('addRuleToTsdb').set('disabled', true);
            } else {
                this.view.get('addRuleToTsdb').set('disabled', false);
            }
        };
        Create.prototype.gotoRuleCreation = function gotoRuleCreation() {
            var formData = this.view.getFormData();
            var submitData = this.model.getSubmitData(formData);
            var from = submitData.destTopic;
            if (!from || from.length <= 0) {
                this.view.waitConfirm({
                    title: '\u7F3A\u5C11\u76EE\u7684\u5730\u4E3B\u9898',
                    content: '\u60A8\u9700\u8981\u4E3A\u8BE5\u89E3\u6790\u9879\u76EE\u8BBE\u7F6E\u76EE\u7684\u5730\u4E3B\u9898\uFF0C\u89C4\u5219\u5F15\u64CE\u624D\u80FD\u4ECE\u8BE5\u4E3B\u9898\u5C06\u6570\u636E\u63D0\u53D6\u6B3B\u6765\uFF0C\u5E76\u4E14\u5199\u5165\u65F6\u5E8F\u6570\u636E\u5E93\uFF08TSDB\uFF09',
                    width: 500,
                    needFoot: true
                }).done(function (e) {
                });
                return;
            }
            var name = submitData.name + '->\u65F6\u5E8F\u6570\u636E\u5E93(TSDB)';
            var desc = '\u5982\u679C\u89E3\u6790\u9879\u76EE' + submitData.name + '\u7684\u76EE\u7684\u5730\u4E3B\u9898\u53D8\u66F4\u4E86\uFF0C\u672C\u89C4\u5219\u7684\u4E3B\u9898\u9700\u8981\u76F8\u5E94\u7684\u66F4\u65B0';
            var gatewayid = submitData.gatewayUuid;
            var select = '_MODBUS_TO_TSDB_SELECT';
            var destTsdb = '1';
            var endpointname = '';
            _u['default'].each(this.model.get('gatewayList'), function (item) {
                if (item.value === gatewayid) {
                    endpointname = item.username.split('/')[0];
                }
            });
            var url = '/iotre/?_=' + location.search + '#/iotre/rule/create~' + 'name=' + name + '&desc=' + desc + '&from=' + from + '&endpointname=' + endpointname + '&select=' + select + '&dest_tsdb=' + destTsdb;
            window.open(url);
        };
        Create.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u89E3\u6790\u9879\u76EE\u521B\u5EFA\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Create.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        Create.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Create, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Create;
    }(_FormAction2['default']);
    module.exports = Create;
});
define('iot/modbus/analysis/dialog/create.tpl', [], function () {
    return '<!-- target: TPL_modbus_create_parseproject -->\n<div class="modbus-dialog-form modbus-parseproject-create">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-data-body">\n            <div class="form-row">\n                <div class="tip-yellow">\n                    \u6E29\u99A8\u63D0\u793A\uFF1A\u65B0\u5EFA\u5B8C\u6210\u540E\u8BF7\u5C3D\u5FEB\u5728\u89E3\u6790\u8BBE\u7F6E\u914D\u7F6EModbus\u548C\u8F6E\u8BE2\u8BF7\u6C42\u3002\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u9879\u76EE\u540D\u79F0\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox" data-ui-name="name"\n                        data-ui-id="name" data-ui-required="required"\n                        data-ui-required-error-message="\u8BF7\u586B\u5199\u9879\u76EE\u540D\u79F0"\n                        data-ui-width="220" data-ui-value="${item.name}"\n                        data-ui-placeholder="\u8BF7\u5199\u9879\u76EE\u540D\u79F0"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label>\u5DE5\u4E1A\u534F\u8BAE\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="BoxGroup" data-ui-box-type="radio"\n                    data-ui-id="protocol" data-ui-name="protocol"\n                    data-ui-value="MODBUS" data-ui-datasource="@protocolList"\n                    class="protocol"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label>\u6570\u636E\u6765\u6E90\uFF1A</label>\n                <esui-select data-ui-id="gatewayUuid" data-ui-width="220"\n                    data-ui-name="gatewayUuid"\n                    data-ui-value="${item.gatewayUuid}"\n                    data-ui-datasource="@gatewayUuidList"></esui-select>\n            </div>\n            <div class="form-row">\n                <label>\u6570\u636E\u5B58\u50A8\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="BucketSelect"\n                        data-ui-id="storage"\n                        data-ui-name="storage"\n                        data-ui-value="${item.storage}"\n                        data-ui-extension-bucketselect-type="BucketSelectEx"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label>\u76EE\u7684\u5730\u4E3B\u9898\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox" data-ui-name="destTopic"\n                        data-ui-id="destTopic" data-ui-width="220" data-ui-value="${item.destTopic}"\n                        ></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <div class="form-value">\n                    <esui-button data-ui-id="addRuleToTsdb">\u5FEB\u901F\u521B\u5EFA\u5B58\u50A8\u81F3TSDB\u7684\u89C4\u5219\u5F15\u64CE</esui-button>\n                    <div class="notice">    \u6CE8\u610F\uFF1A\u5982\u9700\u8F6C\u53D1\u81F3TSDB\uFF0C\u9700\u8981\u586B\u5199\u76EE\u7684\u5730\u4E3B\u9898\n                    </div>\n                </div>\n            </div>\n            <!-- <div class="form-row">\n                <label>\u89E3\u6790\u670D\u52A1\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox" data-ui-name="parserurl"\n                        data-ui-id="parserurl"\n                        data-ui-width="220" data-ui-value=""\n                        data-ui-placeholder="\u8BF7\u586B\u5199 http:// \u5730\u5740"></div>\n                </div>\n            </div> -->\n        </div>\n    </form>\n</div>\n<!-- target: TPL_modbus_create_parseproject_child -->\n<!-- import: TPL_modbus_create_parseproject -->\n';
});
define('iot/modbus/analysis/dialog/CreateModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'common/region',
    '../../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _commonRegion, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _R = _babelRuntimeHelpersInteropRequireDefault['default'](_commonRegion);
    var CreateModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreateModel, _FormModel);
        function CreateModel(context) {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateModel);
            _FormModel.call(this, context);
            var item = this.get('item');
            this.submitRequester = item ? _config.api.editParseproject : _config.api.createParseproject;
        }
        CreateModel.prototype.filterData = function filterData(data) {
            if (data.protocol) {
                data.protocol = data.protocol[0];
            }
            if (this.get('item')) {
                data.uuid = this.get('item').uuid;
            }
            return data;
        };
        _babelRuntimeHelpersCreateClass['default'](CreateModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        protocolList: function protocolList() {
                            return [
                                {
                                    text: 'MODBUS',
                                    value: 'MODBUS'
                                },
                                {
                                    text: 'OPC',
                                    value: 'OPC'
                                }
                            ];
                        },
                        gatewayUuidList: function gatewayUuidList(model) {
                            var defaultArgs = {
                                order: 'desc',
                                orderBy: 'createTime',
                                pageNo: 1,
                                pageSize: 250
                            };
                            return _config.api.getGatewayList(defaultArgs).then(function (data) {
                                var codeList = [];
                                _u['default'].each(data.result, function (item) {
                                    var codeItem = {
                                        name: item.code,
                                        value: item.uuid,
                                        username: item.username
                                    };
                                    codeList.push(codeItem);
                                });
                                model.set('gatewayList', codeList);
                                return codeList;
                            });
                        },
                        getBucketLocations: function getBucketLocations() {
                            return function () {
                                return { locations: [_R['default'].getCurrentRegion().id] };
                            };
                        }
                    };
                }
            }]);
        return CreateModel;
    }(_FormModel2['default']);
    module.exports = CreateModel;
});
define('iot/modbus/analysis/dialog/CreateTrantable', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    './CreateTrantableModel',
    './CreateTrantableView',
    'jquery'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _CreateTrantableModel, _CreateTrantableView, _jquery) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateTrantableModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateTrantableView);
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var CreateTrantable = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](CreateTrantable, _FormAction);
        function CreateTrantable() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateTrantable);
            _FormAction.apply(this, arguments);
        }
        CreateTrantable.prototype.beforeLeave = function beforeLeave() {
            _$['default'](document).unbind();
        };
        CreateTrantable.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            var view = this.view;
            view.on('UPDATE_BIT_LENGTH', this.updateBitRule, this);
            this.on('entercomplete', this.updateBitRule);
            this.on('beforeleave', this.beforeLeave, this);
            _$['default'](document).click(function (e) {
                var popup = view.get('dropdownPanel');
                if (popup && !popup.isHidden()) {
                    if (_$['default'](e.target).closest('.ui-textbox').length !== 0) {
                        return false;
                    }
                    popup.hide();
                }
            });
            _$['default']('.unit-input input').on('click', function (e) {
                view.get('dropdownPanel').show();
            });
            _$['default']('.dropdown-panel .item').on('click', function (e) {
                view.get('unit').setValue(_$['default'](e.target).text().trim());
            });
        };
        CreateTrantable.prototype.updateBitRule = function updateBitRule(e) {
            var length = this.view.get('length').getValue();
            var bitControl = this.view.get('bit');
            var patterns = {
                1: /^((-1)|0)$/,
                8: /^((-1)|([0-7]))$/,
                16: /^((-1)|[0-9]|(1[0-5]))$/,
                32: /^((-1)|[0-9]|([12][0-9])|(3[01]))$/
            };
            bitControl.pattern = patterns[length];
            bitControl.patternErrorMessage = '\u5E94\u5C0F\u4E8E\u6570\u636E\u957F\u5EA6' + length;
        };
        CreateTrantable.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u8BB0\u5F55\u521B\u5EFA\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        CreateTrantable.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        CreateTrantable.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](CreateTrantable, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u8BB0\u5F55\u521B\u5EFA\u6210\u529F\uFF01';
                }
            }
        ]);
        return CreateTrantable;
    }(_FormAction2['default']);
    module.exports = CreateTrantable;
});
define('iot/modbus/analysis/dialog/createTrantable.tpl', [], function () {
    return '<!-- target: TPL_modbus_create_trantable -->\n<div class="modbus-dialog-form modbus-trantable-create">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-data-body">\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u5730\u5740(\u5341\u8FDB\u5236)\uFF1A</label>\n                <div class="form-value">\n                    <span>${addressType}</span>\n                    <div data-ui-type="TextBox" data-ui-name="address"\n                        data-ui-id="address"\n                        data-ui-required="true"\n                        data-ui-width="207" data-ui-value="${item.address}"\n                        data-ui-placeholder="\u8F93\u5165\u5730\u5740"></div>\n                </div>\n            </div>\n            <div class="form-row bit-form-row">\n                <label>BIT\u4F4D\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox" data-ui-name="bit"\n                        data-ui-id="bit"\n                        data-ui-width="220" data-ui-value="${item.bit}"\n                        data-ui-placeholder="\u8F93\u5165BIT\u4F4D"></div>\n                    <!-- import: TPL_modbus_bit_tip -->\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u663E\u793A\u540D\u79F0\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox" data-ui-name="name"\n                        data-ui-id="name"\n                        data-ui-required="true"\n                        data-ui-width="220" data-ui-value="${item.name}"\n                        data-ui-placeholder="\u8F93\u5165\u663E\u793A\u540D\u79F0"></div>\n                    <!-- import: TPL_modbus_name_tip -->\n                </div>\n            </div>\n            <div class="form-row">\n                <label>\u91CF\u7A0B\u4E0A\u9650(RH)\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox" data-ui-name="rh"\n                        data-ui-id="rh"\n                        data-ui-width="220" data-ui-value="${item.rh}"\n                        data-ui-placeholder="\u8F93\u5165\u91CF\u7A0B\u4E0A\u9650(RH)"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label>\u91CF\u7A0B\u4E0B\u9650(RL)\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox" data-ui-name="rl"\n                        data-ui-id="rl"\n                        data-ui-width="220" data-ui-value="${item.rl}"\n                        data-ui-placeholder="\u8F93\u5165\u91CF\u7A0B\u4E0B\u9650(RL)"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u6570\u636E\u7C7B\u578B\uFF1A</label>\n                <esui-select data-ui-id="kind" data-ui-width="220"\n                    data-ui-name="kind"\n                    data-ui-required="true"\n                    data-ui-value="${item.kind}"\n                    data-ui-datasource="@kindList"></esui-select>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u6570\u636E\u957F\u5EA6(BIT)\uFF1A</label>\n                <esui-select data-ui-id="length" data-ui-width="220"\n                    data-ui-name="length"\n                    data-ui-required="true"\n                    data-ui-value="${item.length}"\n                    data-ui-datasource="@lengthList"></esui-select>\n            </div>\n            <div class="form-row">\n                <label>\u5355\u4F4D\uFF1A</label>\n                <div class="unit-input"\n                     data-ui-type="TextBox"\n                     data-ui-width="220"\n                     data-ui-name="unit"\n                     data-ui-id="unit"\n                     data-ui-value="${item.unit}"></div>\n                <div data-ui-type="Panel"\n                     data-ui-id="dropdownPanel"\n                     data-ui-hidden="hidden"\n                     class="dropdown-panel">\n                     <!-- for: ${unitList} as ${item} -->\n                        <div class="item" data-value=${item.value}>\n                            ${item.name}\n                        </div>\n                     <!-- /for -->\n                </div>\n            </div>\n            <div class="form-row formula">\n                <label>\u8BA1\u7B97\u516C\u5F0F\uFF1A</label>\n                <div class="form-value">\n                    <textarea data-ui-type="TextBox"\n                              data-ui-id="formula" data-ui-name="formula"\n                              data-ui-max-length="1000"\n                              data-ui-value=""\n                              data-ui-width="220" data-ui-height="45">\n                    </textarea>\n                    <!-- import: TPL_modbus_formula_tip -->\n                </div>\n            </div>\n\n            <!-- for: ${customProperties} as ${prop} -->\n            <div class="form-row">\n                <label>${prop.name}:</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox" data-ui-name="user_properties.${prop.name}"\n                        data-ui-id="user_properties.${prop.name}"\n                   \n                        data-ui-width="220" data-ui-value="${prop.value}"\n                        data-ui-placeholder="\u8F93\u5165\u6807\u7B7E\u503C"></div>\n                </div>\n            </div>\n            <!-- /for -->\n        </div>\n    </form>\n</div>\n<!-- target: TPL_modbus_create_trantable_child -->\n<!-- import: TPL_modbus_create_trantable -->\n';
});
define('iot/modbus/analysis/dialog/CreateTrantableModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    '../../../config',
    '../config',
    'underscore'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _config, _config2, _underscore) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var _config3 = _babelRuntimeHelpersInteropRequireDefault['default'](_config2);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var CreateTrantableModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreateTrantableModel, _FormModel);
        CreateTrantableModel.prototype.prepare = function prepare() {
            var item = this.get('item');
            if (item) {
                var address = item.address.toString();
                item.address = address.substring(1);
            }
        };
        function CreateTrantableModel(context) {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateTrantableModel);
            _FormModel.call(this, context);
            var item = this.get('item');
            this.submitRequester = item ? _config.api.editTrantable : _config.api.createTrantable;
        }
        CreateTrantableModel.prototype.filterData = function filterData(data) {
            data.parserObjectUuid = this.get('parserObjectUuid');
            if (data.address.length === 1) {
                data.address = this.get('addressType') + '000' + data.address;
            } else if (data.address.length === 2) {
                data.address = this.get('addressType') + '00' + data.address;
            } else if (data.address.length === 3) {
                data.address = this.get('addressType') + '0' + data.address;
            } else {
                data.address = this.get('addressType') + data.address;
            }
            if (this.get('item')) {
                data.uuid = this.get('item').uuid;
            }
            var omitArr = [];
            var USER_PROPERTY = 'user_properties.';
            var newUserProperties = {};
            for (var p in data) {
                if (!data.hasOwnProperty(p)) {
                    continue;
                }
                if (p.substring(0, USER_PROPERTY.length) === USER_PROPERTY) {
                    omitArr.push(p);
                    var propName = p.substring(USER_PROPERTY.length);
                    newUserProperties[propName] = data[p];
                }
                data[USER_PROPERTY.substring(0, USER_PROPERTY.length - 1)] = newUserProperties;
            }
            return _u['default'].omit(data, omitArr);
        };
        _babelRuntimeHelpersCreateClass['default'](CreateTrantableModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        kindList: function kindList() {
                            return _config3['default'].kind;
                        },
                        lengthList: function lengthList() {
                            return _config3['default'].length;
                        },
                        unitList: function unitList() {
                            return _config3['default'].unit;
                        },
                        addressType: function addressType(model) {
                            var type = model.get('addressType');
                            if (type === '3') {
                                return 4;
                            } else if (type === '1') {
                                return 0;
                            } else if (type === '2') {
                                return 1;
                            } else if (type === '4') {
                                return 3;
                            }
                            return '';
                        },
                        customProperties: function customProperties(model) {
                            if (model.get('item')) {
                                var oriProps = model.get('item').user_properties;
                                var propsArr = [];
                                for (var up in oriProps) {
                                    if (!oriProps.hasOwnProperty(up)) {
                                        continue;
                                    }
                                    var newObj = {
                                        name: up,
                                        value: oriProps[up]
                                    };
                                    propsArr.push(newObj);
                                }
                                return propsArr;
                            } else {
                                return _config.api.getCustomPropertyList({
                                    order: 'desc',
                                    orderBy: 'createTime',
                                    pageSize: 200
                                }).then(function (data) {
                                    return _u['default'].map(data.result, function (v, k) {
                                        v.value = '';
                                        return v;
                                    });
                                });
                            }
                        }
                    };
                }
            }]);
        return CreateTrantableModel;
    }(_FormModel2['default']);
    module.exports = CreateTrantableModel;
});
define('iot/modbus/analysis/dialog/CreateTrantableView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./createTrantable.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreateTrantableTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var CreateTrantableView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreateTrantableView, _FormView);
        function CreateTrantableView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateTrantableView);
            _FormView.apply(this, arguments);
        }
        CreateTrantableView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'length:change': function lengthChange(e) {
                    return _this.fire('UPDATE_BIT_LENGTH', e);
                }
            };
        };
        CreateTrantableView.prototype.enterDocument = function enterDocument() {
            _FormView.prototype.enterDocument.call(this);
            var item = this.model.get('item');
            if (!item) {
                this.get('length').setValue(16);
            } else {
                this.get('formula').setValue(item.formula);
            }
        };
        _babelRuntimeHelpersCreateClass['default'](CreateTrantableView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_create_trantable';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        address: { pattern: /^([1-9]|[0-9][1-9]|[1-9][0-9]|[0-9]{2}[1-9]|[0-9][1-9][0-9]|[1-9][0-9]{2}|[0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3})$/ },
                        name: {
                            pattern: /^[a-zA-Z][a-zA-Z0-9_]{2,39}$/,
                            patternErrorMessage: '\u82F1\u6587\u5B57\u7B26\u3001\u6570\u5B57\u548C\u4E0B\u5212\u7EBF\'_\'\u7EC4\u6210\uFF0C3-40\u4F4D\uFF0C\u4EE5\u82F1\u6587\u5B57\u7B26\u5F00\u5934'
                        }
                    };
                }
            }
        ]);
        return CreateTrantableView;
    }(_FormView2['default']);
    module.exports = CreateTrantableView;
});
define('iot/modbus/analysis/dialog/CreateView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./create.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    '../../../config',
    'jquery'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreateTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _config, _jquery) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var CreateView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreateView, _FormView);
        function CreateView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateView);
            _FormView.apply(this, arguments);
        }
        CreateView.prototype.enterDocument = function enterDocument() {
            _FormView.prototype.enterDocument.call(this);
            _$['default']('.protocol .ui-boxgroup-radio').eq(1).addClass('state-disabled');
            _$['default']('.protocol .ui-boxgroup-radio').eq(1).find('input').attr('disabled', true).css('cursor', 'not-allowed');
            var item = this.model.get('item');
            if (!item || !item.destTopic || item.destTopic.length < 1) {
                this.get('addRuleToTsdb').set('disabled', true);
            }
        };
        CreateView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'addRuleToTsdb:click': function addRuleToTsdbClick(e) {
                    return _this.fire('gotoRuleCreation', e);
                },
                'destTopic:input': function destTopicInput(e) {
                    return _this.fire('REFRESH_RULE_BUTTON', e);
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](CreateView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_create_parseproject';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        gatewayUuid: { width: 242 },
                        storage: {
                            width: 262,
                            pattern: /^bos:\/\/.+\/$/,
                            patternErrorMessage: '\u8BF7\u9009\u62E9\u6B63\u786E\u7684\u8DEF\u5F84',
                            getBucketList: _config.api.iotBosBucketList,
                            getFolderList: _config.api.iotBosFolderList,
                            getObjectList: _config.api.iotBosObjectList,
                            createBucket: _config.api.iotBosCreateBucket,
                            getBucketLocations: '@getBucketLocations',
                            viewtype: 'folder',
                            urlPrefix: 'bos://',
                            placeholder: 'bos://'
                        }
                    };
                }
            }
        ]);
        return CreateView;
    }(_FormView2['default']);
    module.exports = CreateView;
});
define('iot/modbus/analysis/dialog/Detail', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './DetailModel',
    './DetailView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _DetailModel, _DetailView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailView);
    var Detail = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Detail, _BaseAction);
        function Detail() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Detail);
            _BaseAction.apply(this, arguments);
        }
        Detail.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](Detail, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Detail;
    }(_BaseAction2['default']);
    module.exports = Detail;
});
define('iot/modbus/analysis/dialog/detail.tpl', [], function () {
    return '<!-- target: TPL_modbus_view_slavedetail -->\n<div class="modbus-dialog-form modbus-view-slavedetail">\n    <div class="column">\n        <div class="row">\u4ECE\u7AD9\uFF08Slave\uFF09\uFF1A${item.device.slaveId}</div>\n        <div class="row">\u5B50\u8BBE\u5907ID\uFF1A${item.device.code}</div>\n        <div class="row">\u5B50\u8BBE\u5907\u63CF\u8FF0\uFF1A${item.device.description}</div>\n        <div class="row">\u64CD\u4F5C\u7801\uFF1A${item.functionCode}</div>\n        <div class="row">\u5F00\u59CB\u5730\u5740\uFF1A${item.startAddress}</div>\n    </div>\n    <div class="column">\n        <div class="row">\u8BFB\u53D6\u6570\u636E\u957F\u5EA6\uFF1A${item.length}</div>\n        <div class="row">\u8BF7\u6C42\u95F4\u9694\uFF1A${item.pullInterval}\u79D2</div>\n        <div class="row">\u5730\u5740\uFF1A${item.device.address}</div>\n    </div>\n</div>\n<!-- target: TPL_modbus_view_slavedetail_child -->\n<!-- import: TPL_modbus_view_slavedetail -->\n\n';
});
define('iot/modbus/analysis/dialog/DetailModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var DetailModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](DetailModel, _BaseModel);
        function DetailModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailModel);
            _BaseModel.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](DetailModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        address: function address(model) {
                            return model.get('item').device.address.split(':')[0];
                        },
                        host: function host(model) {
                            return model.get('item').device.address.split(':')[1];
                        }
                    };
                }
            }]);
        return DetailModel;
    }(_BaseModel2['default']);
    module.exports = DetailModel;
});
define('iot/modbus/analysis/dialog/DetailView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./detail.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplDetailTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var DetailView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](DetailView, _BaseView);
        function DetailView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailView);
            _BaseView.apply(this, arguments);
        }
        DetailView.prototype.enterDocument = function enterDocument() {
            _BaseView.prototype.enterDocument.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](DetailView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_view_slavedetail';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {};
                }
            }
        ]);
        return DetailView;
    }(_BaseView2['default']);
    module.exports = DetailView;
});
define('iot/modbus/analysis/dialog/HowUpload', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './HowUploadModel',
    './HowUploadView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _HowUploadModel, _HowUploadView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_HowUploadModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_HowUploadView);
    var HowUpload = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](HowUpload, _BaseAction);
        function HowUpload() {
            _babelRuntimeHelpersClassCallCheck['default'](this, HowUpload);
            _BaseAction.apply(this, arguments);
        }
        HowUpload.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](HowUpload, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return HowUpload;
    }(_BaseAction2['default']);
    module.exports = HowUpload;
});
define('iot/modbus/analysis/dialog/howUpload.tpl', [], function () {
    return '<!-- target: TPL_modbus_gateway_how_upload -->\n<div class="modbus-dialog-form modbus-gateway-how-upload">\n    <div class="tip-grey">\n        \u5982\u679C\u60A8\u9009\u62E9<b>\u81EA\u5DF1\u53BB\u5B9E\u73B0\u6570\u636E\u4E0A\u4F20\u7684\u903B\u8F91</b>\uFF08\u5B98\u65B9SDK\u7528\u6237\u4E0D\u9700\u5173\u6CE8\uFF09\uFF0C\u8BF7\u4F7F\u7528\u6211\u4EEC\u4E3A<b>\u5F53\u524D\u8BE5\u6761\u8F6E\u8BE2\u89C4\u5219</b>\u751F\u6210\u7684<b>\u6570\u636E\u4E0A\u4F20\u4FE1\u606F</b>\uFF1A\n    </div>\n    <div class="section">\n        <div class="title">\n            <span>\u6570\u636E\u4E0A\u4F20\u7684MQTT\u4FE1\u606F\uFF1A</span>\n            <a data-ui-type="Clipboard"\n               data-ui-id="copyMqtt"\n               data-ui-clipboard-text="${mqttJson}"\n               class="ui-button skin-primary-button copy-mqtt">\u70B9\u51FB\u590D\u5236</a>\n        </div>\n        <div class="json">\n            <div class="level1">{</div>\n            <div class="level2">"endpoint": "${mqttData.endpoint}",</div>\n            <div class="level2">"topic": "${mqttData.topic}",</div>\n            <div class="level2">"user": "${mqttData.user}",</div>\n            <div class="level2">"password": "${mqttData.password}"</div>\n            <div class="level1">}</div>\n        </div>\n    </div>\n    <div class="section">\n        <div class="title">\n            <span>\u6570\u636E\u4E0A\u4F20\u683C\u5F0F\uFF08\u5927\u5C0F\u5199\u654F\u611F\uFF09\uFF1A</span>\n            <a data-ui-type="Clipboard"\n               data-ui-id="copyFormat"\n               data-ui-clipboard-text="${formatJson}"\n               class="ui-button skin-primary-button copy-format">\u70B9\u51FB\u590D\u5236</a>\n        </div>\n        <div class="json">\n            <div class="level1">{</div>\n            <div class="level2">"bdModbusVer": ${formatData.bdModbusVer},</div>\n            <div class="level2">"gatewayid": "${formatData.gatewayid}",</div>\n            <div class="level2">"trantable": "${formatData.trantable}",</div>\n            <div class="level2">"modbus": {</div>\n            <div class="level3">"request": {</div>\n            <div class="level4">"functioncode": ${formatData.modbus.request.functioncode},</div>\n            <div class="level4">"slaveid": ${formatData.modbus.request.slaveid},</div>\n            <div class="level4">"startAddr": ${formatData.modbus.request.startAddr},</div>\n            <div class="level4">"length": ${formatData.modbus.request.length}</div>\n            <div class="level3">},</div>\n            <div class="level3">"response": "${formatData.modbus.response}"</div>\n            <div class="level2">},</div>\n            <div class="level2">"timestamp": "${formatData.timestamp}"</div>\n            <div class="level1">}</div>\n        </div>\n    </div>\n</div>\n<!-- target: TPL_modbus_gateway_how_upload_child -->\n<!-- import: TPL_modbus_gateway_how_upload -->\n';
});
define('iot/modbus/analysis/dialog/HowUploadModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    '../../../config',
    '../../operations'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _config, _operations) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var HowUploadModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](HowUploadModel, _BaseModel);
        function HowUploadModel(context) {
            _babelRuntimeHelpersClassCallCheck['default'](this, HowUploadModel);
            _BaseModel.call(this, context);
        }
        _babelRuntimeHelpersCreateClass['default'](HowUploadModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        formatJson: function formatJson(model) {
                            var item = model.get('item');
                            var formatData = {
                                'bdModbusVer': 1,
                                'gatewayid': model.get('gatewayUuid'),
                                'trantable': item.parserObjectUuid,
                                'modbus': {
                                    'request': {
                                        'functioncode': item.functionCode,
                                        'slaveid': item.device.slaveId,
                                        'startAddr': item.startAddress,
                                        'length': item.length
                                    },
                                    'response': 'Modbus\u91C7\u96C6\u5230\u7684\u7EAF\u6570\u636E\u90E8\u5206,\u6BCF\u4E2A\u79BB\u6563\u91CF\u752800\u6216\u800501\u8868\u793A,\u4E3E\u4F8B: 0b3f0100'
                                },
                                'timestamp': '\u7CFB\u7EDF\u5F53\u524D\u65F6\u95F4\u6233\uFF0C\u9009\u586B'
                            };
                            model.set('formatData', formatData);
                            return _operations2['default'].JsonToString(formatData);
                        },
                        mqttJson: function mqttJson(model) {
                            return _config.api.getIotInfor({
                                gatewayUuid: model.get('gatewayUuid'),
                                parserObjectUuid: model.get('item').parserObjectUuid
                            }).then(function (data) {
                                var mqttData = {
                                    'endpoint': data.endpoint,
                                    'topic': data.topic,
                                    'user': data.user,
                                    'password': data.password
                                };
                                model.set('mqttData', mqttData);
                                return _operations2['default'].JsonToString(mqttData);
                            });
                        }
                    };
                }
            }]);
        return HowUploadModel;
    }(_BaseModel2['default']);
    module.exports = HowUploadModel;
});
define('iot/modbus/analysis/dialog/HowUploadView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./howUpload.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplHowUploadTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var HowUploadView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](HowUploadView, _BaseView);
        function HowUploadView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, HowUploadView);
            _BaseView.apply(this, arguments);
        }
        HowUploadView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'copyMqtt:aftercopy': function copyMqttAftercopy(e) {
                    return _this.showToast('\u590D\u5236MQTT\u4FE1\u606F\u6210\u529F');
                },
                'copyFormat:aftercopy': function copyFormatAftercopy(e) {
                    return _this.showToast('\u590D\u5236\u4E0A\u4F20\u683C\u5F0F\u6210\u529F');
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](HowUploadView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_gateway_how_upload';
                }
            }]);
        return HowUploadView;
    }(_BaseView2['default']);
    module.exports = HowUploadView;
});
define('iot/modbus/analysis/dialog/Upload', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './UploadModel',
    './UploadView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _UploadModel, _UploadView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_UploadModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_UploadView);
    var Upload = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Upload, _BaseAction);
        function Upload() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Upload);
            _BaseAction.apply(this, arguments);
        }
        Upload.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('closeDialog', this.toCloseDialog, this);
        };
        Upload.prototype.toCloseDialog = function toCloseDialog() {
            this.fire('closeDialog');
        };
        _babelRuntimeHelpersCreateClass['default'](Upload, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Upload;
    }(_BaseAction2['default']);
    module.exports = Upload;
});
define('iot/modbus/analysis/dialog/upload.tpl', [], function () {
    return '<!-- target: TPL_modbus_analysis_upload -->\n<div class="modbus-dialog-form modbus-analysis-upload">\n    <div class="hint">\n        <div class="title">\u5BFC\u5165\u89C4\u8303\uFF1A</div>\n        <div class="content">\n            <div class="row">1. \u5BFC\u5165\u6587\u4EF6\u652F\u6301.csv</div>\n            <div class="row">2. \u5BFC\u5165\u8868\u5934\u8BF7\u53C2\u8003\u6837\u4F8B\u56FE\uFF08\u5730\u5740\u548C\u8BB0\u5F55\u540D\u79F0\u5FC5\u586B\uFF09<!-- import: TPL_modbus_upload_tip --></div>\n            <div class="row">3. \u6570\u636E\u7C7B\u578B\u9ED8\u8BA4INT\uFF0C\u6570\u636E\u957F\u5EA6\u9ED8\u8BA416\u4F4D</div>\n            <div class="row">4. \u5982\u679C\u9700\u8981\u5BFC\u5165\u81EA\u5B9A\u4E49\u5C5E\u6027\uFF0C\u8BF7\u786E\u4FDDCSV\u5217\u540D\u4E0E\u81EA\u5B9A\u4E49\u5C5E\u6027\u540D\u76F8\u540C</div>\n        </div>\n        <a href="http://iot-modbus.gz.bcebos.com/%E7%82%B9%E8%A1%A8%E5%AF%BC%E5%85%A5%E6%A0%B7%E4%BE%8B.csv" target="_blank"><i class="iconfont icon-download"></i>\u4E0B\u8F7D\u6807\u51C6\u6837\u4F8B</a>\n    </div>\n    <div class="condition">\n        <input type="checkbox" data-ui-type="CheckBox" data-ui-id="agree" class="agreeCheck">\u5982\u5730\u5740\u76F8\u540C\u662F\u5426\u8986\u76D6</input>\n    </div>\n    <div data-ui-type="WebUploader"\n        data-ui-id="uploader"\n        data-ui-min-file-size="1"\n        data-ui-hint="(\u9644\u4EF6\u5927\u5C0F\u4E0D\u5F97\u8D85\u8FC7100M)">\u4E0A\u4F20\u9644\u4EF6</div>\n</div>\n<!-- target: TPL_modbus_analysis_upload_child -->\n<!-- import: TPL_modbus_analysis_upload -->\n';
});
define('iot/modbus/analysis/dialog/UploadModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var UploadModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](UploadModel, _BaseModel);
        function UploadModel(context) {
            _babelRuntimeHelpersClassCallCheck['default'](this, UploadModel);
            _BaseModel.call(this, context);
        }
        _babelRuntimeHelpersCreateClass['default'](UploadModel, [{
                key: 'datasource',
                get: function get() {
                    return {};
                }
            }]);
        return UploadModel;
    }(_BaseModel2['default']);
    module.exports = UploadModel;
});
define('iot/modbus/analysis/dialog/UploadView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./upload.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplUploadTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var UploadView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](UploadView, _BaseView);
        function UploadView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UploadView);
            _BaseView.apply(this, arguments);
        }
        UploadView.prototype.enterDocument = function enterDocument() {
            _BaseView.prototype.enterDocument.call(this);
            var uploader = this.get('uploader').getNative();
            uploader.option('formData', {
                uuid: this.model.get('uuid'),
                overwrite: false
            });
        };
        UploadView.prototype.getUIEvents = function getUIEvents() {
            return {
                'agree:change': function agreeChange(e) {
                    var uploader = this.get('uploader').getNative();
                    uploader.option('formData', {
                        uuid: this.model.get('uuid'),
                        overwrite: e.target.isChecked()
                    });
                },
                'uploader:error': function uploaderError(e) {
                    var originalEvent = e.originalEvent;
                    if (originalEvent.type === 'Q_EXCEED_NUM_LIMIT') {
                        e.target.disable();
                    }
                },
                'uploader:uploadAccept': function uploaderUploadAccept(e) {
                    var _e$originalEvent = e.originalEvent;
                    var object = _e$originalEvent.object;
                    var ret = _e$originalEvent.ret;
                    if (ret && ret.success && ret.result) {
                        var msg = '\u6210\u529F\u5BFC\u5165' + ret.result.count + '\u6761\u8BB0\u5F55\uFF01';
                        if (ret.result.errors && ret.result.errors.length > 0) {
                            msg += '\u53D1\u751F\u9519\u8BEF\uFF1A' + ret.result.errors[0];
                        }
                        if (ret.result.count > 0) {
                            this.showToast(msg);
                        } else {
                            this.showToast(msg, { messageType: 'error' });
                        }
                    } else {
                        var errorMessage = (object.file.name ? '\u201C ' + object.file.name + ' \u201D' : '') + (ret && ret.message && ret.message.global ? ret.message.global : '\u4E0A\u4F20\u5931\u8D25') + '\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20\uFF01';
                        e.target.showValidationMessage('invalid', errorMessage);
                        this.showToast(errorMessage, { messageType: 'error' });
                    }
                    this.fire('closeDialog');
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](UploadView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_analysis_upload';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        uploaderTip: { layerWidth: 600 },
                        uploader: {
                            uploaderOptions: {
                                formData: {},
                                server: '/api/iot/modbus/trantable/import',
                                chunked: false,
                                threads: 1,
                                auto: true,
                                disableGlobalDnd: true,
                                fileNumLimit: 1,
                                sendAsBinary: true,
                                fileSingleSizeLimit: 100 * 1024 * 1024,
                                accept: {
                                    title: 'Files',
                                    extensions: 'csv',
                                    mimeTypes: '.csv'
                                }
                            }
                        }
                    };
                }
            }
        ]);
        return UploadView;
    }(_BaseView2['default']);
    module.exports = UploadView;
});
define('iot/modbus/analysis/NewPolling', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    './NewPollingModel',
    './NewPollingView',
    '../operations'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _NewPollingModel, _NewPollingView, _operations) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _ModelType = _babelRuntimeHelpersInteropRequireDefault['default'](_NewPollingModel);
    var _ViewType = _babelRuntimeHelpersInteropRequireDefault['default'](_NewPollingView);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var NewPolling = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](NewPolling, _FormAction);
        function NewPolling() {
            _babelRuntimeHelpersClassCallCheck['default'](this, NewPolling);
            _FormAction.apply(this, arguments);
        }
        NewPolling.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            this.view.on('VIEW_SLAVE', this.viewDetail, this);
            this.view.on('DELETE_SLAVE', this.deleteSlave, this);
        };
        NewPolling.prototype.viewDetail = function viewDetail(e) {
            var item = this.view.get('table').datasource[e.args];
            _operations2['default'].viewSlaveDetail.call(this, {
                parentAction: this,
                item: item
            });
        };
        NewPolling.prototype.deleteSlave = function deleteSlave(e) {
            var item = this.view.get('table').datasource[e.args];
            var model = this.model;
            var view = this.view;
            var action = this;
            view.waitConfirm({
                title: '\u5220\u9664\u6B64\u8F6E\u8BE2\u8BBE\u7F6E',
                content: '\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F',
                width: 500,
                needFoot: true
            }).done(function (e) {
                model.deleteSlave({ uuid: item.uuid }, 'ENABLED').then(function () {
                    return view.showToast('\u5220\u9664\u8F6E\u8BE2\u8BBE\u7F6E\u6210\u529F\uFF01');
                }).then(function () {
                    return action.reload();
                }).fail(function () {
                    return view.showToast('\u5220\u9664\u8F6E\u8BE2\u8BBE\u7F6E\u5931\u8D25\uFF01');
                });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](NewPolling, [
            {
                key: 'modelType',
                get: function get() {
                    return _ModelType['default'];
                }
            },
            {
                key: 'viewType',
                get: function get() {
                    return _ViewType['default'];
                }
            }
        ]);
        return NewPolling;
    }(_FormAction2['default']);
    module.exports = NewPolling;
});
define('iot/modbus/analysis/newPolling.tpl', [], function () {
    return '<!-- target: TPL_modbus_analysis_new_polling -->\n<div class="modbus-main-wrap modbus-analysis-new-polling main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/modbus/analysis">\u7269\u89E3\u6790 - \u89E3\u6790\u9879\u76EE</a>\n            <span class="divider">/</span>\n            <span class="active">\u89E3\u6790\u8BBE\u7F6E-Modbus\u901A\u8BAF\u5730\u5740\u8868</span>\n        </p>\n\n        <div class="instance-info">\n            <h1>${name}</h1>\n            <span class="status status-${stateStatus.css}">${stateStatus.text}</span>\n        </div>\n        <div class="create-content">\n            <ul class="ui-tab-navigator skin-sandwich-tab-navigator">\n                <li class="ui-tab-item skin-sandwich-tab-item">\n                    <a href="#/iot/modbus/analysis/settings~parserObjectUuid=${parserObjectUuid}&name=${name}&rawState=${rawState}&gatewayUuid=${gatewayUuid}">Modbus\u901A\u8BAF\u5730\u5740\u8868</a>\n                </li>\n                <li class="ui-tab-item skin-sandwich-tab-item ui-tab-item-active skin-sandwich-tab-item-active">\n                    <a href="#/iot/modbus/analysis/setting/polling~parserObjectUuid=${parserObjectUuid}&name=${name}&rawState=${rawState}&gatewayUuid=${gatewayUuid}">\u8F6E\u8BE2\u8BF7\u6C42\u8BBE\u7F6E</a>\n                </li>\n            </ul>\n\n            <form data-ui-type="Form" data-ui-id="form"\n                      data-ui-auto-validate="true">\n                <div class="detail-parts-table">\n                    <dl class="detail-create">\n                        <dt></dt>\n                        <dd>\n                            <div class="detail-cell">\n                                <label><span class="input-required">*</span>\u5B50\u8BBE\u5907ID\uFF1A</label>\n                                <div data-ui-type="Tab"\n                                    data-ui-id="Tab"\n                                    data-ui-orientation="horizontal"\n                                    data-ui-width="600"\n                                    class="inner-tab">\n                                    <ul data-role="navigator" class="state-hide">\n                                        <li data-for="all">ALL(\u5168\u90E8)</li>\n                                        <li data-for="customized">\u81EA\u5B9A\u4E49</li>\n                                    </ul>\n                                    <div id="all"></div>\n                                    <div id="customized">\n                                        <div class="stats">\n                                            <div class="text">\u5DF2\u9009\u62E9<span>0</span>\u4E2A\u8BBE\u5907</div>\n                                            <div class="text error">\u8BF7\u9009\u62E9\u5B50\u8BBE\u5907ID</div>\n                                        </div>\n                                        <div data-ui-type="Table"\n                                             data-ui-id="pollingDevice"\n                                             data-ui-datasource="@tableData"\n                                             data-ui-order-by="@orderBy" data-ui-order="@order"\n                                             data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                                             data-ui-required="true"\n                                             data-ui-extension-command-type="Command"\n                                             data-ui-extension-tableedit-type="TableEdit"\n                                             data-ui-extension-tableex-type="TableEx">\n                                        </div>\n                                        <span class="input-required"></span>\n                                    </div>\n                                </div>\n                            </div>\n                        </dd>\n                        <dd>\n                            <div class="detail-cell">\n                                <label><span class="input-required">*</span>\u64CD\u4F5C\u7801\uFF1A</label>\n                                <span data-ui-type="Select"\n                                      data-ui-width="250"\n                                      data-ui-name="functionCode"\n                                      data-ui-required="true"\n                                      data-ui-required-error-message="\u8BF7\u9009\u62E9\u8BED\u8A00"\n                                      data-ui-selected-index="-1"\n                                      data-ui-datasource="@functionCode"\n                                      data-ui-id="functionCode">\n                                </span>\n                            </div>\n                        </dd>\n                        <dd>\n                            <div class="detail-cell">\n                                <label><span class="input-required">*</span>\u5F00\u59CB\u5730\u5740\uFF1A</label>\n                                <span>\n                                    <input data-ui-type="TextBox"\n                                           data-ui-name="startAddress"\n                                           data-ui-id="startAddress"\n                                           data-ui-width="100"\n                                           data-ui-required="true"\n                                           data-ui-placeholder="\u5341\u8FDB\u5236\u7684\u6570\u503C"\n                                           data-ui-value="" />\n                                </span>\n                            </div>\n                        </dd>\n                        <dd>\n                            <div class="detail-cell">\n                                <label><span class="input-required">*</span>\u8BFB\u53D6\u6570\u636E\u957F\u5EA6\uFF1A</label>\n                                <span>\n                                    <input data-ui-type="TextBox"\n                                           data-ui-name="length"\n                                           data-ui-id="length"\n                                           data-ui-width="100"\n                                           data-ui-required="true"\n                                           data-ui-placeholder="1-256"\n                                           data-ui-value="" />\n                                </span>\n                            </div>\n                        </dd>\n                        <dd>\n                            <div class="detail-cell">\n                                <label><span class="input-required">*</span>\u8BF7\u6C42\u95F4\u9694\uFF1A</label>\n                                <span>\n                                    <input data-ui-type="TextBox"\n                                           data-ui-name="pullInterval"\n                                           data-ui-id="pullInterval"\n                                           data-ui-width="100"\n                                           data-ui-required="true"\n                                           data-ui-placeholder="300"\n                                           data-ui-value="" />\n                                    <span>\u79D2(s)</span>\n                                </span>\n                            </div>\n                        </dd>\n                        <dd>\n                            <div class="detail-cell submit-buttons">\n                                <button data-ui="type:Button;id:submit;skin:primary"\n                                        class="slavepolicy-create">\u63D0\u4EA4</button>\n                                <a data-ui="type:Button;"\n                                   href="#/iot/modbus/analysis/setting/polling~parserObjectUuid=${parserObjectUuid}&name=${name}&rawState=${rawState}&gatewayUuid=${gatewayUuid}"\n                                   class="slavepolicy-create">\u53D6\u6D88</a>\n                            </div>\n                        </dd>\n                    </dl>\n                </div>\n            </form>\n        </div>\n    </div>\n</div>\n';
});
define('iot/modbus/analysis/NewPollingModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../config',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _config, _config2) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _config3 = _babelRuntimeHelpersInteropRequireDefault['default'](_config2);
    var NewPollingModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](NewPollingModel, _FormModel);
        function NewPollingModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, NewPollingModel);
            _FormModel.apply(this, arguments);
        }
        NewPollingModel.prototype.deleteSlave = function deleteSlave(data) {
            return _config.api.deleteSlave(data);
        };
        _babelRuntimeHelpersCreateClass['default'](NewPollingModel, [
            {
                key: 'submitRequester',
                get: function get() {
                    return _config.api.createSlavePolicy;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        stateStatus: function stateStatus(model) {
                            return {
                                css: _config3['default'].status[model.get('rawState')].css,
                                text: _config3['default'].status[model.get('rawState')].text
                            };
                        },
                        tableData: function tableData(model) {
                            var defaultArgs = {
                                gatewayUuid: model.get('gatewayUuid'),
                                order: 'desc',
                                orderBy: 'createTime',
                                pageNo: 1,
                                pageSize: 250
                            };
                            return _config.api.getGatewaySublist(defaultArgs).then(function (data) {
                                _u['default'].each(data.result, function (item) {
                                    item.ipAddr = item.address.split(':')[0];
                                    item.ipHost = item.address.split(':')[1];
                                });
                                return data.result;
                            });
                        },
                        functionCode: function functionCode() {
                            return [
                                {
                                    text: '03-\u4FDD\u6301\u5BC4\u5B58\u5668 (Holding Register)',
                                    value: '3'
                                },
                                {
                                    text: '01-\u7EBF\u5708\u72B6\u6001 (Coil Status)',
                                    value: '1'
                                },
                                {
                                    text: '02 \u8F93\u5165\u72B6\u6001 (Input Status) (1x)',
                                    value: '2'
                                },
                                {
                                    text: '04 \u8F93\u5165\u5BC4\u5B58\u5668  (Input Register) (3x)',
                                    value: '4'
                                }
                            ];
                        }
                    };
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize,
                        addressStart: 4
                    };
                }
            }
        ]);
        return NewPollingModel;
    }(_FormModel2['default']);
    module.exports = NewPollingModel;
});
define('iot/modbus/analysis/NewPollingView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./newPolling.tpl',
    'jquery',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'bat-ria/mvc/FormView',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplNewPollingTplHtml, _jquery, _babelRuntimeHelpersInteropRequireDefault, _underscore, _batRiaMvcFormView, _config) {
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    var tableFields = [
        {
            title: '\u5B50\u8BBE\u5907ID',
            field: 'code',
            width: 50,
            content: 'code'
        },
        {
            title: '\u4ECE\u7AD9(slave)',
            field: 'slaveId',
            width: 10,
            content: 'slaveId'
        },
        {
            title: '\u5B50\u8BBE\u5907\u63CF\u8FF0',
            field: 'description',
            width: 50,
            content: 'description'
        },
        {
            title: '      \u5730\u5740',
            field: 'address',
            width: 20,
            content: 'address'
        }
    ];
    var PollingView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](PollingView, _FormView);
        function PollingView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PollingView);
            _FormView.apply(this, arguments);
        }
        PollingView.prototype.getUIEvents = function getUIEvents() {
            return {
                'pollingDevice:select': this.updateSelection,
                'functionCode:change': this.selectChangeHandler
            };
        };
        PollingView.prototype.enterDocument = function enterDocument() {
            _FormView.prototype.enterDocument.call(this);
            _$['default']('.inner-tab').on('click', function (e) {
                _$['default']('#customized .text.error').hide();
            });
        };
        PollingView.prototype.getFormData = function getFormData() {
            var data = _FormView.prototype.getFormData.call(this);
            data.deviceUuids = [];
            var finalData = [];
            if (this.get('Tab').activeIndex === 0) {
                finalData = this.model.get('tableData');
            } else {
                finalData = this.get('pollingDevice').getSelectedItems();
            }
            _u['default'].each(finalData, function (item) {
                data.deviceUuids.push(item.uuid);
            });
            data.parserObjectUuid = this.model.get('parserObjectUuid');
            if (finalData.length > 0) {
                return data;
            }
        };
        PollingView.prototype.bindEvents = function bindEvents() {
            _FormView.prototype.bindEvents.call(this);
            var form = this.get('form');
            if (form) {
                form.on('beforevalidate', this.validateHandler, this);
            }
        };
        PollingView.prototype.validateHandler = function validateHandler(e) {
            var tabIndex = this.get('Tab').activeIndex;
            var selectedItems = this.get('pollingDevice').getSelectedItems();
            if (tabIndex === 1 && selectedItems.length < 1) {
                e.preventDefault();
                _$['default']('#customized .text.error').show();
            }
        };
        PollingView.prototype.updateSelection = function updateSelection() {
            var items = this.get('pollingDevice').getSelectedItems();
            _$['default']('#customized .stats span').text(items.length);
            if (items.length > 0) {
                _$['default']('#customized .text.error').hide();
            }
        };
        _babelRuntimeHelpersCreateClass['default'](PollingView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_analysis_new_polling';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        pollingDevice: {
                            sortable: true,
                            columnResizable: true,
                            fields: tableFields,
                            select: 'multi',
                            noDataHtml: _config2['default'].noDataHtml
                        },
                        startAddress: { pattern: /^([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/ },
                        length: { pattern: /^([1-9])|([1-9][0-9])|(1[0-9][0-9])|(2[0-4][0-9])|(25[0-6])$/ },
                        pullInterval: { pattern: /^[1-9]\d*|0$/ }
                    };
                }
            }
        ]);
        return PollingView;
    }(_FormView2['default']);
    module.exports = PollingView;
});
define('iot/modbus/analysis/Polling', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    './PollingModel',
    './PollingView',
    '../operations'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _PollingModel, _PollingView, _operations) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _ModelType = _babelRuntimeHelpersInteropRequireDefault['default'](_PollingModel);
    var _ViewType = _babelRuntimeHelpersInteropRequireDefault['default'](_PollingView);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var Polling = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](Polling, _ListAction);
        function Polling() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Polling);
            _ListAction.apply(this, arguments);
        }
        Polling.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on('VIEW_SLAVE', this.viewDetail, this);
            this.view.on('DELETE_SLAVE', this.deleteSlave, this);
            this.view.on('CREATE_POLLING', this.create, this);
            this.view.on('HOW_UPLOAD', this.howUpload, this);
        };
        Polling.prototype.create = function create(e) {
            this.redirect('/iot/modbus/analysis/setting/create~parserObjectUuid=' + this.model.get('parserObjectUuid') + '&name=' + this.model.get('name') + '&rawState=' + this.model.get('rawState') + '&gatewayUuid=' + this.model.get('gatewayUuid'));
        };
        Polling.prototype.howUpload = function howUpload(e) {
            var item = this.view.get('table').datasource[e.args];
            _operations2['default'].viewHowUpload.call(this, {
                parentAction: this,
                item: item,
                gatewayUuid: this.model.get('gatewayUuid')
            });
        };
        Polling.prototype.viewDetail = function viewDetail(e) {
            var item = this.view.get('table').datasource[e.args];
            _operations2['default'].viewSlaveDetail.call(this, {
                parentAction: this,
                item: item
            });
        };
        Polling.prototype.deleteSlave = function deleteSlave(e) {
            var item = this.view.get('table').datasource[e.args];
            var model = this.model;
            var view = this.view;
            var action = this;
            view.waitConfirm({
                title: '\u5220\u9664\u6B64\u8F6E\u8BE2\u8BBE\u7F6E',
                content: '\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F',
                width: 500,
                needFoot: true
            }).done(function (e) {
                model.deleteSlave({ uuid: item.uuid }, 'ENABLED').then(function () {
                    return view.showToast('\u5220\u9664\u8F6E\u8BE2\u8BBE\u7F6E\u6210\u529F\uFF01');
                }).then(function () {
                    return action.reload();
                }).fail(function () {
                    return view.showToast('\u5220\u9664\u8F6E\u8BE2\u8BBE\u7F6E\u5931\u8D25\uFF01');
                });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Polling, [
            {
                key: 'modelType',
                get: function get() {
                    return _ModelType['default'];
                }
            },
            {
                key: 'viewType',
                get: function get() {
                    return _ViewType['default'];
                }
            }
        ]);
        return Polling;
    }(_ListAction2['default']);
    module.exports = Polling;
});
define('iot/modbus/analysis/polling.tpl', [], function () {
    return '<!-- target: TPL_modbus_analysis_polling -->\n<div class="modbus-main-wrap modbus-analysis-settings main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/modbus/analysis">\u7269\u89E3\u6790 - \u89E3\u6790\u9879\u76EE</a>\n            <span class="divider">/</span>\n            <span class="active">\u89E3\u6790\u8BBE\u7F6E-Modbus\u901A\u8BAF\u5730\u5740\u8868</span>\n        </p>\n\n        <div class="instance-info">\n            <h1>${name}</h1>\n            <span class="status status-${stateStatus.css}">${stateStatus.text}</span>\n        </div>\n        <div class="list-content">\n            <ul class="ui-tab-navigator skin-sandwich-tab-navigator">\n                <li class="ui-tab-item skin-sandwich-tab-item">\n                    <a href="#/iot/modbus/analysis/settings~parserObjectUuid=${parserObjectUuid}&name=${name}&rawState=${rawState}&gatewayUuid=${gatewayUuid}">Modbus\u901A\u8BAF\u5730\u5740\u8868</a>\n                </li>\n                <li class="ui-tab-item skin-sandwich-tab-item ui-tab-item-active skin-sandwich-tab-item-active">\n                    <a href="#/iot/modbus/analysis/setting/polling~parserObjectUuid=${parserObjectUuid}&name=${name}&rawState=${rawState}&gatewayUuid=${gatewayUuid}">\u8F6E\u8BE2\u8BF7\u6C42\u8BBE\u7F6E</a>\n                </li>\n            </ul>\n            <div class="table-full-wrap">\n\t        \t<div class="operation-wrap" data-follow-thead="table">\n\t        \t\t<div class="buttons-wrap">\n\t                    <button data-ui-id="createBtn"\n\t                            data-ui-type="Button"\n\t                            data-ui-skin="create">\u65B0\u5EFA\u8F6E\u8BE2\u8BBE\u7F6E</button>\n\t                </div>\n\t        \t</div>\n\t        \t<div data-ui-type="Table" data-ui-id="table"\n                     data-ui-datasource="@tableData"\n                     data-ui-order-by="@orderBy" data-ui-order="@order"\n                     data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                     data-ui-extension-command-type="Command"\n                     data-ui-extension-tableedit-type="TableEdit"\n                     data-ui-extension-tableex-type="TableEx"\n                     data-ui-extension-customfields-type="TableCustomFields">\n                </div>\n                <div class="ui-row">\n                <!-- import: listPager -->\n                </div>\n\t        </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/modbus/analysis/PollingModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    '../../config',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _config, _config2) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var _config3 = _babelRuntimeHelpersInteropRequireDefault['default'](_config2);
    var PollingModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](PollingModel, _ListModel);
        function PollingModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PollingModel);
            _ListModel.apply(this, arguments);
        }
        PollingModel.prototype.deleteSlave = function deleteSlave(data) {
            return _config.api.deleteSlave(data);
        };
        _babelRuntimeHelpersCreateClass['default'](PollingModel, [
            {
                key: 'datasource',
                get: function get() {
                    return {
                        stateStatus: function stateStatus(model) {
                            return {
                                css: _config3['default'].status[model.get('rawState')].css,
                                text: _config3['default'].status[model.get('rawState')].text
                            };
                        },
                        deviceData: function deviceData(model) {
                            var defaultArgs = {
                                gatewayUuid: model.get('gatewayUuid'),
                                order: 'desc',
                                orderBy: 'createTime',
                                pageNo: 1,
                                pageSize: 250
                            };
                            return _config.api.getGatewaySublist(defaultArgs);
                        }
                    };
                }
            },
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.getSlaveList;
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize,
                        addressStart: 4
                    };
                }
            }
        ]);
        return PollingModel;
    }(_ListModel2['default']);
    module.exports = PollingModel;
});
define('iot/modbus/analysis/PollingView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./polling.tpl',
    'inf-ria/mvc/ListView',
    'babel-runtime/helpers/interop-require-default',
    'common/util/tableUtil',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplPollingTplHtml, _infRiaMvcListView, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTableUtil, _config) {
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u4ECE\u7AD9(slave)',
                field: 'slaveId',
                width: 10,
                content: function content(item, row) {
                    return item.device.slaveId;
                }
            },
            {
                title: '\u5B50\u8BBE\u5907ID',
                field: 'code',
                width: 50,
                content: function content(item, row) {
                    return item.device.code;
                }
            },
            {
                title: '\u5B50\u8BBE\u5907\u63CF\u8FF0',
                field: 'description',
                width: 50,
                content: function content(item, row) {
                    return item.device.description;
                }
            },
            {
                title: '\u64CD\u4F5C\u7801',
                field: 'functionCode',
                width: 20,
                content: 'functionCode'
            },
            {
                title: '\u8BF7\u6C42\u95F4\u9694(\u79D2)',
                field: 'pullInterval',
                width: 35,
                content: 'pullInterval'
            },
            {
                title: '\u64CD\u4F5C',
                width: 130,
                field: 'operation',
                content: function content(item, row) {
                    return '<span class="operations">\n                            <button class="cmd-button"\n                                    data-command="VIEW_SLAVE"\n                                    data-command-args=\'' + row + '\'>\u8BE6\u60C5</button>\n                            <button class="cmd-button"\n                                    data-command="HOW_UPLOAD"\n                                    data-command-args=\'' + row + '\'>\u4E0A\u4F20\u683C\u5F0F</button>\n                            <button class="cmd-button"\n                                    data-command="DELETE_SLAVE"\n                                    data-command-args=\'' + row + '\'>\u5220\u9664</button>\n                        </span>';
                }
            }
        ];
    }
    var PollingView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](PollingView, _ListView);
        function PollingView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PollingView);
            _ListView.apply(this, arguments);
        }
        PollingView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'table:command': function tableCommand(e) {
                    return _this.fire(e.name, e);
                },
                'createBtn:click': function createBtnClick(e) {
                    return _this.fire('CREATE_POLLING', e);
                }
            });
        };
        PollingView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
            var gatewayDevice = this.model.get('deviceData').result;
            if (gatewayDevice.length < 1) {
                this.get('createBtn').set('disabled', true);
            }
        };
        _babelRuntimeHelpersCreateClass['default'](PollingView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_analysis_polling';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        table: {
                            sortable: true,
                            columnResizable: true,
                            fields: '@tableFields',
                            noDataHtml: _config2['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return PollingView;
    }(_ListView2['default']);
    module.exports = PollingView;
});
define('iot/modbus/analysis/Settings', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    './SettingsModel',
    './SettingsView',
    '../operations'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _SettingsModel, _SettingsView, _operations) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _ModelType = _babelRuntimeHelpersInteropRequireDefault['default'](_SettingsModel);
    var _ViewType = _babelRuntimeHelpersInteropRequireDefault['default'](_SettingsView);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var Settings = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](Settings, _ListAction);
        function Settings() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Settings);
            _ListAction.apply(this, arguments);
        }
        Settings.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on('CREATE_TRANTABLE', this.create, this);
            this.view.on('DELETE', this['delete'], this);
            this.view.on('UPDATE_STATE', this.updateState, this);
            this.view.on('EDIT_TRANTABLE', this.editTranstable, this);
            this.view.on('BATCH_UPLOAD', this.batchUpload, this);
            this.view.on('EXPORT_AS_CSV', this.exportAsCsv, this);
        };
        Settings.prototype.batchUpload = function batchUpload() {
            var _this = this;
            this.view.waitActionDialog({
                title: '\u5BFC\u5165\u6587\u4EF6',
                width: 750,
                needFoot: false,
                url: '/iot/modbus/analysis/upload',
                actionOptions: {
                    parentAction: this,
                    uuid: this.model.get('parserObjectUuid')
                }
            }).then(function (event) {
                var dialog = event.target;
                var childAction = dialog.getAction();
                childAction.on('closeDialog', function () {
                    _this.reload();
                });
            });
        };
        Settings.prototype.exportAsCsv = function exportAsCsv() {
            var url = '/api/iot/modbus/trantable/export/' + this.model.get('parserObjectUuid');
            window.open(url, '_self');
        };
        Settings.prototype.updateState = function updateState(e) {
            var _this2 = this;
            this.model.updateTrantable({
                uuid: e.uuid,
                state: e.state
            }).then(function () {
                return _this2.view.showToast(e.text + '\u901A\u8BAF\u8BB0\u5F55\u6210\u529F\uFF01');
            }).then(function () {
                return _this2.reload();
            }).fail(function () {
                return _this2.showToast(e.text + '\u901A\u8BAF\u8BB0\u5F55\u5931\u8D25\uFF01');
            });
        };
        Settings.prototype.editTranstable = function editTranstable(e) {
            _operations2['default'].createTrantable.call(this, {
                parentAction: this,
                parserObjectUuid: this.model.get('parserObjectUuid'),
                addressType: this.view.get('addressType').getValue(),
                item: e
            });
        };
        Settings.prototype.create = function create() {
            _operations2['default'].createTrantable.call(this, {
                parentAction: this,
                parserObjectUuid: this.model.get('parserObjectUuid'),
                addressType: this.view.get('addressType').getValue()
            });
        };
        Settings.prototype['delete'] = function _delete(e) {
            var model = this.model;
            var view = this.view;
            var action = this;
            model.deleteTrantable({ uuid: e.uuid }).then(function () {
                return view.showToast('\u5220\u9664\u901A\u8BAF\u8BB0\u5F55\u6210\u529F\uFF01');
            }).then(function () {
                return action.reload();
            }).fail(function () {
                return view.showToast('\u5220\u9664\u901A\u8BAF\u8BB0\u5F55\u5931\u8D25\uFF01');
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Settings, [
            {
                key: 'modelType',
                get: function get() {
                    return _ModelType['default'];
                }
            },
            {
                key: 'viewType',
                get: function get() {
                    return _ViewType['default'];
                }
            }
        ]);
        return Settings;
    }(_ListAction2['default']);
    module.exports = Settings;
});
define('iot/modbus/analysis/settings.tpl', [], function () {
    return '<!-- target: TPL_modbus_analysis_settings -->\n<div class="modbus-main-wrap modbus-analysis-settings main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/modbus/analysis">\u7269\u89E3\u6790 - \u89E3\u6790\u9879\u76EE</a>\n            <span class="divider">/</span>\n            <span class="active">\u89E3\u6790\u8BBE\u7F6E-Modbus\u901A\u8BAF\u5730\u5740\u8868</span>\n        </p>\n\n        <div class="instance-info">\n            <h1>${name}</h1>\n            <span class="status status-${stateStatus.css}">${stateStatus.text}</span>\n        </div>\n        <div class="list-content">\n            <ul class="ui-tab-navigator skin-sandwich-tab-navigator">\n                <li class="ui-tab-item skin-sandwich-tab-item ui-tab-item-active skin-sandwich-tab-item-active">\n                    <a href="#/iot/modbus/analysis/settings~parserObjectUuid=${parserObjectUuid}&name=${name}&rawState=${rawState}&gatewayUuid=${gatewayUuid}">Modbus\u901A\u8BAF\u5730\u5740\u8868</a>\n                </li>\n                <li class="ui-tab-item skin-sandwich-tab-item">\n                    <a href="#/iot/modbus/analysis/setting/polling~parserObjectUuid=${parserObjectUuid}&name=${name}&rawState=${rawState}&gatewayUuid=${gatewayUuid}">\u8F6E\u8BE2\u8BF7\u6C42\u8BBE\u7F6E</a>\n                </li>\n            </ul>\n\n            <div class="table-full-wrap">\n                <span data-ui-id="addressType" data-ui-datasource="@addressStartType"\n                    data-ui-type="RadioSelect" class="address-select"\n                    date-ui-value="0"></span>\n\t        \t<div class="operation-wrap" data-follow-thead="table">\n\t        \t\t<div class="buttons-wrap">\n\t                    <button data-ui-id="createBtn"\n\t                            data-ui-type="Button"\n\t                            data-ui-skin="create">\u65B0\u5EFA\u8BB0\u5F55</button>\n                        <button data-ui-id="uploadBtn"\n                                data-ui-type="Button"\n                                data-ui-skin="upload">\u6279\u91CF\u5BFC\u5165</button>\n                        <button data-ui-id="exportBtn"\n                                data-ui-type="Button"\n                                data-ui-skin="upload">\u6279\u91CF\u5BFC\u51FA</button>\n                        <span>\n                        \u89E3\u6790\u670D\u52A1\u6839\u636E\u901A\u8BAF\u5730\u5740\u8868\u7684\u5185\u5BB9\uFF0C\u5C06Modbus\u6D88\u606F\u89E3\u6790\u6210\u53EF\u76F4\u63A5\u4F7F\u7528\u7684\u6570\u636E\u548C\u5185\u5BB9\u3002</span>\n\t                </div>\n\t        \t</div>\n\t        \t<div data-ui-type="Table" data-ui-id="table"\n                     data-ui-datasource="@tableData"\n                     data-ui-order-by="@orderBy" data-ui-order="@order"\n                     data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                     data-ui-extension-command-type="Command"\n                     data-ui-extension-tableedit-type="TableEdit"\n                     data-ui-extension-tableex-type="TableEx"\n                     data-ui-extension-customfields-type="TableCustomFields">\n                </div>\n                <div class="ui-row">\n                <!-- import: listPager -->\n                </div>\n\t        </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/modbus/analysis/SettingsModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    '../../config',
    './config',
    'underscore'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _config, _config2, _underscore) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var _config3 = _babelRuntimeHelpersInteropRequireDefault['default'](_config2);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var SettingsModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](SettingsModel, _ListModel);
        function SettingsModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SettingsModel);
            _ListModel.apply(this, arguments);
        }
        SettingsModel.prototype.retrieveListPage = function retrieveListPage() {
            var _this = this;
            return _ListModel.prototype.retrieveListPage.call(this).then(function (page) {
                page.tableData = _this.handleListData(page.tableData);
                return page;
            });
        };
        SettingsModel.prototype.handleListData = function handleListData(listData) {
            _u['default'].map(listData, function (d) {
                d.userPropertiesDisplay = d.user_properties ? JSON.stringify(d.user_properties).replace(/\"/g, '') : '';
                return d;
            });
            return listData;
        };
        SettingsModel.prototype.deleteTrantable = function deleteTrantable(data) {
            return _config.api.deleteTrantable(data);
        };
        SettingsModel.prototype.updateTrantable = function updateTrantable(data) {
            return _config.api.updateTrantable(data);
        };
        _babelRuntimeHelpersCreateClass['default'](SettingsModel, [
            {
                key: 'datasource',
                get: function get() {
                    return {
                        stateStatus: function stateStatus(model) {
                            return {
                                css: _config3['default'].status[model.get('rawState')].css,
                                text: _config3['default'].status[model.get('rawState')].text
                            };
                        },
                        addressStartType: function addressStartType() {
                            return [
                                {
                                    text: '03 \u4FDD\u6301\u5BC4\u5B58\u5668(Holding Register) (4x)',
                                    value: '3'
                                },
                                {
                                    text: '01 \u7EBF\u5708\u72B6\u6001(Coil Status) (0x)',
                                    value: '1'
                                },
                                {
                                    text: '02 \u8F93\u5165\u72B6\u6001 (Input Status) (1x)',
                                    value: '2'
                                },
                                {
                                    text: '04 \u8F93\u5165\u5BC4\u5B58\u5668  (Input Register) (3x)',
                                    value: '4'
                                }
                            ];
                        }
                    };
                }
            },
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.getTrantableList;
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize,
                        addressStart: 4
                    };
                }
            }
        ]);
        return SettingsModel;
    }(_ListModel2['default']);
    module.exports = SettingsModel;
});
define('iot/modbus/analysis/SettingsView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./settings.tpl',
    'inf-ria/mvc/ListView',
    'babel-runtime/helpers/interop-require-default',
    'common/util/tableUtil',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplSettingsTplHtml, _infRiaMvcListView, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTableUtil, _config) {
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u5730\u5740(\u5341\u8FDB\u5236)',
                field: 'address',
                sortable: true,
                width: 70,
                content: 'address'
            },
            {
                title: '\u663E\u793A\u540D\u79F0',
                field: 'name',
                width: 60,
                content: 'name'
            },
            {
                title: 'BIT\u4F4D',
                field: 'bit',
                width: 15,
                content: 'bit'
            },
            {
                title: '\u6570\u636E\u7C7B\u578B',
                field: 'kind',
                width: 33,
                content: 'kind'
            },
            {
                title: '\u6570\u636E\u957F\u5EA6',
                field: 'length',
                width: 33,
                content: 'length'
            },
            {
                title: '\u5355\u4F4D',
                field: 'unit',
                width: 20,
                content: 'unit'
            },
            {
                title: '\u91CF\u7A0B\u4E0A\u9650(RH)',
                field: 'rh',
                width: 25,
                content: 'rh'
            },
            {
                title: '\u91CF\u7A0B\u4E0B\u9650(RL)',
                field: 'rl',
                width: 25,
                content: 'rl'
            },
            {
                title: '\u8BA1\u7B97\u516C\u5F0F',
                field: 'formula',
                width: 65,
                content: function content(item) {
                    return '<div data-ui-type="Tip"\n                            data-ui-content="' + item.formula + '"\n                            class="formula-tip"></div>';
                }
            },
            {
                title: '\u5176\u4ED6',
                field: 'user_properties',
                width: 65,
                content: function content(item) {
                    return '<div data-ui-type="Tip"\n                            data-ui-content="' + item.userPropertiesDisplay + '"\n                            class="inline-tip"></div>';
                }
            },
            {
                title: '\u64CD\u4F5C',
                width: 100,
                field: 'operation',
                content: function content(item, row) {
                    var text = item.state === 'ENABLED' ? '\u4E0D\u89E3\u6790' : '\u89E3\u6790';
                    return '<span class="operations">\n                            <button class="cmd-button"\n                                    data-command="UPDATE_STATE"\n                                    data-command-args=\'' + row + '\'>' + text + '</button>\n                            <button class="cmd-button"\n                                    data-command="EDIT_TRANTABLE"\n                                    data-command-args=\'' + row + '\'>\u7F16\u8F91</button>\n                            <button class="cmd-button"\n                                    data-command="DELETE"\n                                    data-command-args=\'' + row + '\'>\u5220\u9664</button>\n                        </span>';
                }
            }
        ];
    }
    var SettingsView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](SettingsView, _ListView);
        function SettingsView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SettingsView);
            _ListView.apply(this, arguments);
        }
        SettingsView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'createBtn:click': function createBtnClick(e) {
                    return _this.fire('CREATE_TRANTABLE', e);
                },
                'uploadBtn:click': function uploadBtnClick(e) {
                    return _this.fire('BATCH_UPLOAD', e);
                },
                'exportBtn:click': function exportBtnClick(e) {
                    return _this.fire('EXPORT_AS_CSV', e);
                },
                'table:command': this.handleTableCommand,
                'addressType:change': this.submitSearch
            });
        };
        SettingsView.prototype.getSearchArgs = function getSearchArgs() {
            var args = _ListView.prototype.getSearchArgs.call(this);
            var functionCode = this.get('addressType').getValue();
            if (+functionCode === 1) {
                args.addressStart = 0;
            } else if (+functionCode === 3) {
                args.addressStart = 4;
            } else if (+functionCode === 2) {
                args.addressStart = 1;
            } else if (+functionCode === 4) {
                args.addressStart = 3;
            }
            args.name = this.model.get('name');
            args.parserObjectUuid = this.model.get('parserObjectUuid');
            args.rawState = this.model.get('rawState');
            args.gatewayUuid = this.model.get('gatewayUuid');
            return args;
        };
        SettingsView.prototype.handleTableCommand = function handleTableCommand(e) {
            var me = this;
            var item = this.get('table').datasource[e.args];
            if (e.name === 'DELETE') {
                me.waitConfirm('\u662F\u5426\u5220\u9664\u901A\u8BAF\u8BB0\u5F55', '\u5220\u9664\u901A\u8BAF\u8BB0\u5F55').then(function () {
                    me.fire(e.name, { uuid: item.uuid });
                });
            } else if (e.name === 'UPDATE_STATE') {
                (function () {
                    var text = item.state === 'ENABLED' ? '\u4E0D\u89E3\u6790' : '\u89E3\u6790';
                    var state = item.state === 'ENABLED' ? 'DISABLED' : 'ENABLED';
                    me.waitConfirm('\u662F\u5426' + text + '\u901A\u8BAF\u8BB0\u5F55', text + '\u901A\u8BAF\u8BB0\u5F55').then(function () {
                        me.fire(e.name, {
                            uuid: item.uuid,
                            state: state,
                            text: text
                        });
                    });
                }());
            } else {
                me.fire(e.name, item);
            }
        };
        SettingsView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
            if (+this.model.get('addressStart') === 0) {
                this.get('addressType').setSelectedIndex(1);
            } else if (+this.model.get('addressStart') === 4) {
                this.get('addressType').setSelectedIndex(0);
            } else if (+this.model.get('addressStart') === 1) {
                this.get('addressType').setSelectedIndex(2);
            } else if (+this.model.get('addressStart') === 3) {
                this.get('addressType').setSelectedIndex(3);
            }
        };
        _babelRuntimeHelpersCreateClass['default'](SettingsView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_analysis_settings';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        table: {
                            sortable: true,
                            columnResizable: true,
                            fields: '@tableFields',
                            extTableEx: [
                                'formula',
                                'user_properties'
                            ],
                            noDataHtml: _config2['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return SettingsView;
    }(_ListView2['default']);
    module.exports = SettingsView;
});
define('iot/modbus/analysis/Verify', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'jquery',
    'babel-runtime/helpers/interop-require-default',
    'bat-ria/mvc/BaseAction',
    './VerifyModel',
    './VerifyView',
    '../operations'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _jquery, _babelRuntimeHelpersInteropRequireDefault, _batRiaMvcBaseAction, _VerifyModel, _VerifyView, _operations) {
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _ModelType = _babelRuntimeHelpersInteropRequireDefault['default'](_VerifyModel);
    var _ViewType = _babelRuntimeHelpersInteropRequireDefault['default'](_VerifyView);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var Verify = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Verify, _BaseAction);
        function Verify() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Verify);
            _BaseAction.apply(this, arguments);
        }
        Verify.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('VERIFY_DATA', this.verify, this);
        };
        Verify.prototype.verify = function verify() {
            var view = this.view;
            var model = this.model;
            var data = {
                request: view.get('request').getValue(),
                response: view.get('response').getValue(),
                trantable: model.get('uuid')
            };
            if (view.get('request').validate() || view.get('response').validate()) {
                model.verifyData(data).then(function (e) {
                    _$['default']('.panel .text').html(_operations2['default'].JsonToString(e));
                    view.showToast('\u6570\u636E\u9A8C\u8BC1\u6210\u529F\uFF01');
                }).fail(function () {
                    return view.showToast('\u6570\u636E\u9A8C\u8BC1\u5931\u8D25\uFF01');
                });
            }
        };
        _babelRuntimeHelpersCreateClass['default'](Verify, [
            {
                key: 'modelType',
                get: function get() {
                    return _ModelType['default'];
                }
            },
            {
                key: 'viewType',
                get: function get() {
                    return _ViewType['default'];
                }
            }
        ]);
        return Verify;
    }(_BaseAction2['default']);
    module.exports = Verify;
});
define('iot/modbus/analysis/verify.tpl', [], function () {
    return '<!-- target: TPL_modbus_analysis_verify -->\n<div class="modbus-main-wrap modbus-analysis-verify main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/modbus/analysis">\u7269\u89E3\u6790 - \u89E3\u6790\u9879\u76EE</a>\n            <span class="divider">/</span>\n            <span class="active">\u6570\u636E\u9A8C\u8BC1</span>\n        </p>\n\n        <div class="instance-info">\n            <h1>${name}</h1>\n            <span class="status status-${stateStatus.css}">${stateStatus.text}</span>\n        </div>\n        <div class="list-content">\n            <div class="main-content">\n                <div class="section">\n                    <h3>Modbus\u9A8C\u8BC1</h3>\n                    <div class="fillup">\n                        <label><span class="input-required">*</span>Modbus\u8BF7\u6C42\u6D88\u606F\uFF1A</label>\n                        <textarea data-ui-type="TextBox"\n                             data-ui-name="request"\n                             data-ui-value=""\n                             data-ui-width="550"\n                             data-ui-required="true"\n                             data-ui-id="request">\n                        </textarea>\n                        <label><span class="input-required">*</span>Modbus\u54CD\u5E94\u6D88\u606F\uFF1A</label>\n                        <textarea data-ui-type="TextBox"\n                             data-ui-name="response"\n                             data-ui-value=""\n                             data-ui-width="550"\n                             data-ui-required="true"\n                             data-ui-id="response">\n                        </textarea>\n                        <span data-ui-id="verify"\n                              data-ui-type="Button"\n                              class="btn btn-action">\u9A8C\u8BC1</span>\n                    </div>\n                </div>\n                <div class="log">\n                    <label>\u6700\u65B0\u6536\u5230\u7684\u6570\u636E (\u6700\u8FD11\u6761\uFF09\uFF1A</label>\n                    <div class="panel">\n                        <div class="text"></div>\n                    </div>\n                    <span data-ui-id="output"\n                          data-ui-type="Button"\n                          class="btn btn-action">\u5BFC\u51FA</span>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/modbus/analysis/VerifyModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    '../../config',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _config, _config2) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var _config3 = _babelRuntimeHelpersInteropRequireDefault['default'](_config2);
    var VerifyModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](VerifyModel, _BaseModel);
        function VerifyModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, VerifyModel);
            _BaseModel.apply(this, arguments);
        }
        VerifyModel.prototype.verifyData = function verifyData(item) {
            return _config.api.verifyData(item);
        };
        _babelRuntimeHelpersCreateClass['default'](VerifyModel, [
            {
                key: 'datasource',
                get: function get() {
                    return {
                        stateStatus: function stateStatus(model) {
                            return {
                                css: _config3['default'].status[model.get('rawState')].css,
                                text: _config3['default'].status[model.get('rawState')].text
                            };
                        }
                    };
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {};
                }
            }
        ]);
        return VerifyModel;
    }(_BaseModel2['default']);
    module.exports = VerifyModel;
});
define('iot/modbus/analysis/VerifyView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./verify.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplVerifyTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var VerifyView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](VerifyView, _BaseView);
        function VerifyView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, VerifyView);
            _BaseView.apply(this, arguments);
        }
        VerifyView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'verify:click': function verifyClick(e) {
                    return _this.fire('VERIFY_DATA', e);
                }
            };
        };
        VerifyView.prototype.enterDocument = function enterDocument() {
            _BaseView.prototype.enterDocument.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](VerifyView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_analysis_verify';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        request: {
                            width: 550,
                            height: 85
                        },
                        response: {
                            width: 550,
                            height: 85
                        }
                    };
                }
            }
        ]);
        return VerifyView;
    }(_BaseView2['default']);
    module.exports = VerifyView;
});
define('iot/modbus/common.tpl', [], function () {
    return '<!-- target: TPL_modbus_search -->\n<span class="ui-group ui-search-group">\n    <input class="search-box"\n           data-ui-type="TextBox"\n           data-ui-name=""\n           data-ui-id="keyword"\n           data-ui-placeholder="${hint}"\n           data-ui-value="@keyword"\n           data-ui-width="250" />\n    <button data-ui-type="Button" data-ui-id="searchBtn"></button>\n</span>\n\n';
});
define('iot/modbus/common/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var actionsConfig = [{
            type: 'iot/modbus/common/dialog/Deploy',
            path: '/iot/modbus/deploy_status'
        }];
    _controller['default'].registerAction(actionsConfig);
    var config = {};
    module.exports = config;
});
define('iot/modbus/common/dialog/Deploy', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './DeployModel',
    './DeployView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _DeployModel, _DeployView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_DeployModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_DeployView);
    var Deploy = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Deploy, _BaseAction);
        function Deploy() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Deploy);
            _BaseAction.apply(this, arguments);
        }
        Deploy.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](Deploy, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Deploy;
    }(_BaseAction2['default']);
    module.exports = Deploy;
});
define('iot/modbus/common/dialog/deploy.tpl', [], function () {
    return '<!-- target: TPL_modbus_deploy -->\n<div class="modbus-dialog-form modbus-deploy">\n    <!-- for: ${item} as ${d} -->\n\t    <div class="code">\n\t    \t"\u7F51\u5173ID":"${d.gatewayCode}",\n\t    \t<!-- if: ${d.result} -->\u6210\u529F\n\t    \t<!-- else -->\u5931\u8D25\n            <!-- /if -->\n\t    </div>\n    <!-- /for -->\n</div>\n<!-- target: TPL_modbus_deploy_child -->\n<!-- import: TPL_modbus_deploy -->\n';
});
define('iot/modbus/common/dialog/DeployModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var DeployModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](DeployModel, _BaseModel);
        function DeployModel(context) {
            _babelRuntimeHelpersClassCallCheck['default'](this, DeployModel);
            _BaseModel.call(this, context);
        }
        return DeployModel;
    }(_BaseModel2['default']);
    module.exports = DeployModel;
});
define('iot/modbus/common/dialog/DeployView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./deploy.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplDeployTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var DeployView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](DeployView, _BaseView);
        function DeployView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DeployView);
            _BaseView.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](DeployView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_deploy';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {};
                }
            }
        ]);
        return DeployView;
    }(_BaseView2['default']);
    module.exports = DeployView;
});
define('iot/modbus/config', [
    'exports',
    'module'
], function (exports, module) {
    module.exports = {
        idRegExp: /^[a-zA-Z\d]+$/,
        ipRegExp: /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,
        portRegExp: /^([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/,
        noChineseRegExp: /^[^\u4e00-\u9fa5]$/,
        intRegExp: /^(0|[1-9]\d*)$/
    };
});
define('iot/modbus/landing/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var actionsConfig = [{
            type: 'iot/modbus/landing/Landing',
            path: '/iot/modbus/landing'
        }];
    _controller['default'].registerAction(actionsConfig);
    module.exports = {};
});
define('iot/modbus/landing/Landing', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './LandingModel',
    './LandingView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _LandingModel, _LandingView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_LandingModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_LandingView);
    var Landing = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Landing, _BaseAction);
        function Landing() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Landing);
            _BaseAction.apply(this, arguments);
        }
        Landing.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('START_USING', this.startUsing, this);
        };
        Landing.prototype.startUsing = function startUsing() {
            this.redirect('/iot/modbus/manage');
        };
        _babelRuntimeHelpersCreateClass['default'](Landing, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Landing;
    }(_BaseAction2['default']);
    module.exports = Landing;
});
define('iot/modbus/landing/landing.tpl', [], function () {
    return '<!-- target: TPL_modbus_landing -->\n<div class="modbus-notify main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <span class="active">\u7269\u89E3\u6790</span>\n        </p>\n        <div class="list-content main-view">\n            <h2 class="no-bottom-border">\u7269\u89E3\u6790\u7B80\u4ECB</h2>\n            <div class="main-content">\n                <div class="description">\n                    \u5728\u4E91\u7AEF\u89E3\u6790\u548C\u8BA1\u7B97\u5404\u79CD\u8BBE\u5907\u4E2D\u7684\u6570\u636E\uFF0C\u964D\u4F4E\u7F51\u5173\u6210\u672C\u5E76\u8282\u7EA6\u6570\u636E\u6D41\u91CF\u3002\u53EF\u4EE5\u968F\u65F6\u8C03\u6574\u89E3\u6790\u89C4\u5219\u4EE5\u9002\u5E94\u4E1A\u52A1\u53D8\u5316\u3002\n                </div>\n                <div class="operation-wrap" data-follow-thead="table">\n                    <div class="buttons-wrap">\n                        <button data-ui-id="startUsing"\n                                data-ui-type="Button"\n                                data-ui-skin="create">\u5F00\u59CB\u4F7F\u7528</button>\n                    </div>\n                </div>\n                <div class="line-seperator"></div>\n                <div class="section">\n                    <div class="section-header">\n                        <h2>\u7269\u89E3\u6790\u4F7F\u7528\u6D41\u7A0B</h2>\n                    </div>\n                    <div class="illustration">\n                        <div class="article">\n                            <div class="pic1"></div>\n                            <div class="title">\u914D\u7F6E\u7F51\u5173\u8FDE\u63A5</div>\n                            <div class="define">\u4F7F\u7528\u7269\u89E3\u6790 SDK\u5728\u5382\u533A\u7F51\u5173\u7AEF\u914D\u7F6E\u6570\u636E\u63A5\u5165</div>\n                            <a href="https://cloud.baidu.com/doc/Parser/GUIGettingStarted.html#.E5.AE.89.E8.A3.85IoT.20Edge.20SDK" target="_blank">\u67E5\u770B\u8BE6\u60C5></a>\n                        </div>\n                        <div class="arrow-next">\n                            <img src="/iotre/src/img/landing/arrow-next.png"/>\n                        </div>\n                        <div class="article">\n                            <div class="pic2"></div>\n                            <div class="title">\u4E91\u7AEF\u521B\u5EFA\u7F51\u5173</div>\n                            <div class="define">\u521B\u5EFA\u7F51\u5173\u548C\u7F51\u5173\u5B50\u8BBE\u5907\uFF08\u652F\u6301TCP\u548CRTU\u6A21\u5F0F\uFF09</div>\n                            <a href="https://cloud.baidu.com/doc/Parser/GUIGettingStarted.html#.E7.AE.A1.E7.90.86.E7.BD.91.E5.85.B3.E8.AE.BE.E5.A4.87" target="_blank">\u67E5\u770B\u8BE6\u60C5></a>\n                        </div>\n                        <div class="arrow-next">\n                            <img src="${images.arrowUrl}"/>\n                        </div>\n                        <div class="article">\n                            <div class="pic3"></div>\n                            <div class="title">\u586B\u5199\u89E3\u6790\u9879\u76EE</div>\n                            <div class="define">\u8BBE\u7F6E\u5E26\u89E3\u6790\u7684\u6570\u636E\u6765\u6E90\u3001\u901A\u8BAF\u5730\u5740\u3001\u8F6E\u8BE2\u65B9\u6CD5\u548C\u6570\u636E\u5B58\u50A8\u4F4D\u7F6E</div>\n                            <a href="https://cloud.baidu.com/doc/Parser/GUIGettingStarted.html#.E8.A7.A3.E6.9E.90.E9.A1.B9.E7.9B.AE" target="_blank">\u67E5\u770B\u8BE6\u60C5></a>\n                        </div>\n                        <div class="arrow-next">\n                            <img src="${images.arrowUrl}"/>\n                        </div>\n                        <div class="article">\n                            <div class="pic4"></div>\n                            <div class="title">\u9A8C\u8BC1\u89E3\u6790\u7ED3\u679C</div>\n                            <div class="define">\u67E5\u770B\u89E3\u6790\u7ED3\u679C\u662F\u5426\u7B26\u5408\u671F\u671B</div>\n                            <a href="https://cloud.baidu.com/doc/Parser/GUIGettingStarted.html#.E8.A7.A3.E6.9E.90.E9.A1.B9.E7.9B.AE" target="_blank">\u67E5\u770B\u8BE6\u60C5></a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="right-siderbar list-content">\n            <div class="wrapper">\n                <div class="right-siderbar-header">\u76F8\u5173\u4EA7\u54C1</div>\n                <div class="product-list">\n                    <div class="product">\n                        <span class="icon"><i class="iconfont icon-iot"></i></span>\n                        <a href="https://cloud.baidu.com/product/iot.html" target="_blank">\n                            <div class="title">\u7269\u63A5\u5165 IoT Hub</div>\n                            <div class="desp">\u5FEB\u901F\u5EFA\u7ACB\u8BBE\u5907\u4E0E\u4E91\u7AEF\u53CC\u5411\u8FDE\u63A5\u7684\u3001\u5168\u6258\u7BA1\u670D\u52A1</div>\n                        </a>\n                    </div>\n                    <div class="product">\n                        <span class="icon"><i class="iconfont icon-iotdm"></i></span>\n                        <a href="https://cloud.baidu.com/product/iotdm.html" target="_blank">\n                            <div class="title">\u7269\u7BA1\u7406</div>\n                            <div class="desp">\u667A\u80FD\u3001\u5F3A\u5927\u7684\u8BBE\u5907\u7BA1\u7406\u5E73\u53F0</div>\n                        </a>\n                    </div>\n                    <div class="product">\n                        <span class="icon"><i class="iconfont icon-iotre"></i></span>\n                        <a href="https://cloud.baidu.com/product/re.html" target="_blank">\n                            <div class="title">\u89C4\u5219\u5F15\u64CE</div>\n                            <div class="desp">\u7075\u6D3B\u5B9A\u4E49\u5404\u79CD\u8054\u52A8\u89C4\u5219\uFF0C\u4E0E\u4E91\u7AEF\u670D\u52A1\u65E0\u7F1D\u8FDE\u63A5</div>\n                        </a>\n                    </div>\n                    <div class="product">\n                        <span class="icon"><i class="iconfont icon-tsdb"></i></span>\n                        <a href="https://cloud.baidu.com/product/tsdb.html" target="_blank">\n                            <div class="title">\u65F6\u5E8F\u6570\u636E\u5E93</div>\n                            <div class="desp">\u5B58\u50A8\u65F6\u95F4\u5E8F\u5217\u6570\u636E\u7684\u9AD8\u6027\u80FD\u6570\u636E\u5E93</div>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div class="line-seperator"></div>\n            <div class="help">\n                <div class="title">\u7528\u6237\u6307\u5357</div>\n                <a href="https://cloud.baidu.com/doc/Parser/index.html" target="_blank">\u5E2E\u52A9\u6587\u6863></a>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/modbus/landing/LandingModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var LandingModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](LandingModel, _BaseModel);
        function LandingModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, LandingModel);
            _BaseModel.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](LandingModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        images: function images(model) {
                            return { arrowUrl: require.toUrl('./img/arrow.png') };
                        }
                    };
                }
            }]);
        return LandingModel;
    }(_BaseModel2['default']);
    module.exports = LandingModel;
});
define('iot/modbus/landing/LandingView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./landing.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplLandingTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var LandingView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](LandingView, _BaseView);
        function LandingView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, LandingView);
            _BaseView.apply(this, arguments);
        }
        LandingView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'startUsing:click': function startUsingClick(e) {
                    return _this.fire('START_USING', e);
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](LandingView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_landing';
                }
            }]);
        return LandingView;
    }(_BaseView2['default']);
    module.exports = LandingView;
});
define('iot/modbus/manage-v2/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var actionsConfig = [
        {
            type: 'iot/modbus/manage-v2/Manage',
            path: '/iot/modbus/manage-v2'
        },
        {
            type: 'iot/modbus/manage-v2/dialog/Create',
            path: '/iot/modbus/gateway/create'
        },
        {
            type: 'iot/modbus/manage-v2/Sub',
            path: '/iot/modbus/manage-v2/sublist'
        },
        {
            type: 'iot/modbus/manage-v2/dialog/Createsub',
            path: '/iot/modbus/device/createv2'
        },
        {
            type: 'iot/modbus/manage-v2/dialog/Password',
            path: '/iot/modbus/gateway/passwordv2'
        }
    ];
    _controller['default'].registerAction(actionsConfig);
    module.exports = {
        noDataHtml: [
            '<div><p>\u4F60\u8FD8\u6CA1\u521B\u5EFA\u4EFB\u4F55\u7F51\u5173</br>',
            '\u70B9\u51FB\u5DE6\u4E0A\u89D2\u6309\u94AE\u7ACB\u5373\u521B\u5EFA',
            '</p></div>'
        ].join(''),
        status: {
            ENABLED: {
                text: '\u5728\u7EBF',
                css: 'green',
                action: 'DISABLE',
                actionTxt: '\u7981\u7528'
            },
            OFFLINE: {
                text: '\u79BB\u7EBF',
                css: 'grey'
            },
            DISABLED: {
                text: '\u7981\u7528',
                css: 'red',
                action: 'ENABLE',
                actionTxt: '\u6062\u590D'
            }
        },
        notes: {
            NONE: '\u65E0',
            ODD: '\u5947',
            EVEN: '\u5076'
        }
    };
});
define('iot/modbus/manage-v2/dialog/Create', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    './CreateModel',
    './CreateView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _CreateModel, _CreateView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateView);
    var Create = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Create, _FormAction);
        function Create() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Create);
            _FormAction.apply(this, arguments);
        }
        Create.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
        };
        Create.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u7F51\u5173\u521B\u5EFA\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Create.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        Create.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Create, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u7F51\u5173\u521B\u5EFA\u6210\u529F\uFF01';
                }
            }
        ]);
        return Create;
    }(_FormAction2['default']);
    module.exports = Create;
});
define('iot/modbus/manage-v2/dialog/create.tpl', [], function () {
    return '<!-- target: TPL_modbus_create_gateway_v2 -->\n<div class="modbus-dialog-form modbus-gateway-create">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-data-body">\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u7F51\u5173ID\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                        data-ui-name="code"\n                        data-ui-id="code"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u7F51\u5173\u63CF\u8FF0\uFF1A</label>\n                <div class="form-value">\n                    <textarea data-ui-type="TextBox"\n                              data-ui-id="description"\n                              data-ui-name="description"\n                              data-ui-max-length="1000">\n                    </textarea>\n                    <div class="verify">\n                        <input type="checkbox"\n                               data-ui-id="useSsl"\n                               data-ui-name="useSsl"\n                               data-ui-type="CheckBox" />\n                        <label class="test-name">\u4F7F\u7528\u52A0\u5BC6\u94FE\u63A5\uFF08SSL\uFF09</label>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<!-- target: TPL_modbus_create_gateway_v2_child -->\n<!-- import: TPL_modbus_create_gateway_v2 -->\n';
});
define('iot/modbus/manage-v2/dialog/CreateModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    '../../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var CreateModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreateModel, _FormModel);
        function CreateModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateModel);
            _FormModel.apply(this, arguments);
        }
        CreateModel.prototype.filterData = function filterData(data) {
            if (data.useSsl) {
                data.useSsl = true;
            } else {
                data.useSsl = false;
            }
            return data;
        };
        _babelRuntimeHelpersCreateClass['default'](CreateModel, [
            {
                key: 'submitRequester',
                get: function get() {
                    return _config.api.createGateway;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {};
                }
            }
        ]);
        return CreateModel;
    }(_FormModel2['default']);
    module.exports = CreateModel;
});
define('iot/modbus/manage-v2/dialog/Createsub', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    './CreatesubModel',
    './CreatesubView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _CreatesubModel, _CreatesubView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreatesubModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreatesubView);
    var Createsub = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Createsub, _FormAction);
        function Createsub() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Createsub);
            _FormAction.apply(this, arguments);
        }
        Createsub.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            var actionTxt = '\u521B\u5EFA';
            if (this.model.get('item')) {
                actionTxt = '\u7F16\u8F91';
            }
            this.toastMessage = '\u7F51\u5173\u5B50\u8BBE\u5907' + actionTxt + '\u6210\u529F\uFF01';
        };
        Createsub.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            var actionTxt = '\u521B\u5EFA';
            if (this.model.get('item')) {
                actionTxt = '\u7F16\u8F91';
            }
            this.view.showToast('\u7F51\u5173\u5B50\u8BBE\u5907' + actionTxt + '\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Createsub.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        Createsub.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Createsub, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Createsub;
    }(_FormAction2['default']);
    module.exports = Createsub;
});
define('iot/modbus/manage-v2/dialog/createsub.tpl', [], function () {
    return '<!-- target: TPL_modbus_create_device_v2 -->\n<div class="modbus-dialog-form modbus-device-create">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-data-body">\n            <div class="form-row">\n                <label>\u9009\u62E9\u6A21\u5F0F\uFF1A</label>\n                <div class="form-value">\n                    <esui-select class="inline-select"\n                        data-ui-id="mode"\n                        data-ui-name="mode"\n                        data-ui-width="200"\n                        data-ui-datasource="@mode"></esui-select>\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u5B50\u8BBE\u5907ID\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                         data-ui-name="code"\n                         <!-- if: ${editing} -->\n                         data-ui-read-only="true"\n                         <!-- /if -->\n                         data-ui-value="${item.code}"\n                         data-ui-id="code"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u4ECE\u7AD9(slave)\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                         data-ui-name="slaveId"\n                         data-ui-value="${item.slaveId}"\n                         data-ui-id="slaveId"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label>\u63CF\u8FF0\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                         data-ui-name="description"\n                         data-ui-value="${item.description}"\n                         data-ui-id="description"></div>\n                </div>\n            </div>\n            <div data-ui-type="Panel"\n                 data-ui-id="tcpPanel"\n                 class="tcp-panel">\n                <div class="form-row">\n                    <label><i>\uFF0A</i>IP\u5730\u5740\uFF1A</label>\n                    <div class="form-value">\n                        <div data-ui-type="TextBox"\n                             data-ui-name="address"\n                             data-ui-value="${item.address}"\n                             data-ui-id="address"></div>\n                    </div>\n                </div>\n                <div class="form-row">\n                    <label><i>\uFF0A</i>\u7AEF\u53E3\u53F7\uFF1A</label>\n                    <div class="form-value">\n                        <div data-ui-type="TextBox"\n                             data-ui-name="portNum"\n                             <!-- if: ${item.portNum} -->\n                             data-ui-value="${item.portNum}"\n                             <!-- else -->\n                             data-ui-value="502"\n                             <!-- /if -->\n                             data-ui-id="portNum"></div>\n                    </div>\n                </div>\n            </div>\n            <div data-ui-type="Panel"\n                 data-ui-id="rtuPanel"\n                 class="rtu-panel">\n                <div class="form-row">\n                    <label><i>\uFF0A</i>\u4E32\u53E3\u53F7\uFF1A</label>\n                    <div class="form-value">\n                        <div data-ui-type="TextBox"\n                             data-ui-name="rtuAddress"\n                             data-ui-required="true"\n                             data-ui-value="${item.rtuAddress}"\n                             data-ui-id="rtuAddress"></div>\n                    </div>\n                </div>\n                <div class="form-row">\n                    <label><i>\uFF0A</i>\u6CE2\u7279\u7387\uFF1A</label>\n                    <div class="form-value">\n                        <esui-select class="inline-select"\n                            data-ui-id="baud"\n                            data-ui-name="baud"\n                            data-ui-width="200"\n                            data-ui-required="true"\n                            data-ui-value="${item.baud}"\n                            data-ui-datasource="@baud"></esui-select>\n                    </div>\n                </div>\n                <div class="form-row">\n                    <label><i>\uFF0A</i>\u6570\u636E\u4F4D\uFF1A</label>\n                    <div class="form-value">\n                        <esui-select class="inline-select"\n                            data-ui-id="databits"\n                            data-ui-name="databits"\n                            data-ui-width="200"\n                            data-ui-required="true"\n                            data-ui-value="${item.databits}"\n                            data-ui-datasource="@databits"></esui-select>\n                    </div>\n                </div>\n                <div class="form-row">\n                    <label><i>\uFF0A</i>\u6821\u9A8C\uFF1A</label>\n                    <div class="form-value">\n                        <esui-select class="inline-select"\n                            data-ui-id="parity"\n                            data-ui-name="parity"\n                            data-ui-width="200"\n                            data-ui-required="true"\n                            data-ui-value="${item.parity}"\n                            data-ui-datasource="@parity"></esui-select>\n                    </div>\n                </div>\n                <div class="form-row">\n                    <label><i>\uFF0A</i>\u505C\u6B62\u4F4D\uFF1A</label>\n                    <div class="form-value">\n                        <esui-select class="inline-select"\n                            data-ui-id="stopbits"\n                            data-ui-name="stopbits"\n                            data-ui-width="200"\n                            data-ui-required="true"\n                            data-ui-value="${item.stopbits}"\n                            data-ui-datasource="@stopbits"></esui-select>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<!-- target: TPL_modbus_create_device_v2_child -->\n<!-- import: TPL_modbus_create_device_v2 -->\n';
});
define('iot/modbus/manage-v2/dialog/CreatesubModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var CreatesubModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreatesubModel, _FormModel);
        function CreatesubModel(context) {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreatesubModel);
            _FormModel.call(this, context);
            var item = this.get('item');
            var temp = {};
            _u['default'].extend(temp, item);
            this.submitRequester = item ? _config.api.editDevice : _config.api.createDevice;
            if (item) {
                if (item.mode === 'rtu') {
                    temp.rtuAddress = item.address;
                    temp.address = '';
                    temp.portNum = 502;
                } else {
                    temp.rtuAddress = '';
                    temp.address = item.address.split(':')[0];
                    temp.portNum = item.address.split(':')[1];
                }
                this.set('item', temp);
            }
        }
        CreatesubModel.prototype.filterData = function filterData(data) {
            var model = this;
            var omitArr = [];
            if (!model.get('item')) {
                data.gatewayUuid = model.get('uuid');
            } else {
                data.uuid = model.get('item').uuid;
            }
            if (data.mode === 'tcp') {
                data.address = data.address + ':' + data.portNum;
                omitArr.push(['portNum']);
            } else {
                data.address = data.rtuAddress;
            }
            return _u['default'].omit(data, omitArr);
        };
        _babelRuntimeHelpersCreateClass['default'](CreatesubModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        mode: function mode(model) {
                            return [
                                {
                                    value: 'tcp',
                                    name: 'TCP'
                                },
                                {
                                    value: 'rtu',
                                    name: 'RTU'
                                }
                            ];
                        },
                        baud: function baud(model) {
                            return [
                                {
                                    value: 300,
                                    name: '300'
                                },
                                {
                                    value: 600,
                                    name: '600'
                                },
                                {
                                    value: 1200,
                                    name: '1200'
                                },
                                {
                                    value: 1440,
                                    name: '1440'
                                },
                                {
                                    value: 2440,
                                    name: '2440'
                                },
                                {
                                    value: 4800,
                                    name: '4800'
                                },
                                {
                                    value: 9600,
                                    name: '9600'
                                },
                                {
                                    value: 19200,
                                    name: '19200'
                                },
                                {
                                    value: 38400,
                                    name: '38400'
                                },
                                {
                                    value: 43000,
                                    name: '43000'
                                },
                                {
                                    value: 56000,
                                    name: '56000'
                                },
                                {
                                    value: 57600,
                                    name: '57600'
                                },
                                {
                                    value: 115200,
                                    name: '115200'
                                },
                                {
                                    value: 128000,
                                    name: '128000'
                                },
                                {
                                    value: 256000,
                                    name: '256000'
                                }
                            ];
                        },
                        databits: function databits(model) {
                            return [
                                {
                                    value: 7,
                                    name: '7'
                                },
                                {
                                    value: 8,
                                    name: '8'
                                }
                            ];
                        },
                        parity: function parity(model) {
                            return [
                                {
                                    value: 'NONE',
                                    name: '\u65E0\u6821\u9A8C'
                                },
                                {
                                    value: 'ODD',
                                    name: '\u5947\u6821\u9A8C'
                                },
                                {
                                    value: 'EVEN',
                                    name: '\u5076\u6821\u9A8C'
                                }
                            ];
                        },
                        stopbits: function stopbits(model) {
                            return [
                                {
                                    value: 1,
                                    name: '1'
                                },
                                {
                                    value: 2,
                                    name: '2'
                                }
                            ];
                        },
                        editing: function editing(model) {
                            return model.has('item');
                        }
                    };
                }
            }]);
        return CreatesubModel;
    }(_FormModel2['default']);
    module.exports = CreatesubModel;
});
define('iot/modbus/manage-v2/dialog/CreatesubView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./createsub.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreatesubTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _config) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var CreatesubView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreatesubView, _FormView);
        function CreatesubView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreatesubView);
            _FormView.apply(this, arguments);
        }
        CreatesubView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'mode:change': function modeChange(e) {
                    _u['default'].each([
                        'rtu',
                        'tcp'
                    ], function (id) {
                        if (id === e.target.getValue()) {
                            _this.get(id + 'Panel').show();
                        } else {
                            _this.get(id + 'Panel').hide();
                        }
                    });
                    if (e.target.getValue() === 'tcp') {
                        _this.disableRTUControls();
                    } else {
                        _this.disableTCPControls();
                    }
                }
            };
        };
        CreatesubView.prototype.disableRTUControls = function disableRTUControls() {
            this.get('rtuAddress').set('disabled', true);
            this.get('baud').set('disabled', true);
            this.get('databits').set('disabled', true);
            this.get('parity').set('disabled', true);
            this.get('stopbits').set('disabled', true);
            this.get('portNum').set('disabled', false);
            this.get('address').set('disabled', false);
        };
        CreatesubView.prototype.disableTCPControls = function disableTCPControls() {
            this.get('portNum').set('disabled', true);
            this.get('address').set('disabled', true);
            this.get('rtuAddress').set('disabled', false);
            this.get('baud').set('disabled', false);
            this.get('databits').set('disabled', false);
            this.get('parity').set('disabled', false);
            this.get('stopbits').set('disabled', false);
        };
        CreatesubView.prototype.enterDocument = function enterDocument() {
            var _this2 = this;
            _FormView.prototype.enterDocument.call(this);
            var item = this.model.get('item');
            if (item) {
                _u['default'].each([
                    'rtu',
                    'tcp'
                ], function (id) {
                    if (id === item.mode) {
                        _this2.get(id + 'Panel').show();
                    } else {
                        _this2.get(id + 'Panel').hide();
                    }
                });
                this.get('mode').setValue(item.mode);
                if (item.mode === 'tcp') {
                    this.get('baud').setValue(9600);
                    this.disableRTUControls();
                } else {
                    this.disableTCPControls();
                }
            } else {
                this.get('baud').setValue(9600);
                this.get('rtuPanel').hide();
                this.disableRTUControls();
            }
        };
        _babelRuntimeHelpersCreateClass['default'](CreatesubView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_create_device_v2';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        code: {
                            width: 220,
                            placeholder: '\u7F51\u5173ID\u5FC5\u987B\u552F\u4E00\uFF0C\u4E14\u4EC5\u652F\u6301\u82F1\u6587\u3001\u6570\u5B57',
                            required: 'required',
                            pattern: _config.idRegExp
                        },
                        slaveId: {
                            width: 220,
                            required: 'required',
                            placeholder: '\u53EF\u8F93\u51651-247\u4E4B\u95F4\u7684\u6574\u6570\u503C',
                            pattern: /^([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-3][0-9]|24[0-7])$/
                        },
                        description: { width: 220 },
                        address: {
                            width: 220,
                            required: 'required',
                            placeholder: '\u8BF7\u8F93\u5165\u6B63\u786E\u7684IP\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A19.220.56.127',
                            pattern: _config.ipRegExp
                        },
                        portNum: {
                            width: 80,
                            required: 'required',
                            pattern: _config.portRegExp
                        }
                    };
                }
            }
        ]);
        return CreatesubView;
    }(_FormView2['default']);
    module.exports = CreatesubView;
});
define('iot/modbus/manage-v2/dialog/CreateView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./create.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreateTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var CreateView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreateView, _FormView);
        function CreateView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateView);
            _FormView.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](CreateView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_create_gateway_v2';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        code: {
                            width: 220,
                            placeholder: 'ID\u5FC5\u987B\u552F\u4E00\uFF0C\u4E14\u4EC5\u652F\u6301\u82F1\u6587\u3001\u6570\u5B57',
                            required: 'required',
                            pattern: _config.idRegExp
                        },
                        description: {
                            value: '',
                            placeholder: '\u8BF7\u5199\u63CF\u8FF0\u4FE1\u606F',
                            required: 'required',
                            width: 220,
                            height: 120
                        }
                    };
                }
            }
        ]);
        return CreateView;
    }(_FormView2['default']);
    module.exports = CreateView;
});
define('iot/modbus/manage-v2/dialog/Detail', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './DetailModel',
    './DetailView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _DetailModel, _DetailView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailView);
    var Detail = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Detail, _BaseAction);
        function Detail() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Detail);
            _BaseAction.apply(this, arguments);
        }
        Detail.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](Detail, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Detail;
    }(_BaseAction2['default']);
    module.exports = Detail;
});
define('iot/modbus/manage-v2/dialog/detail.tpl', [], function () {
    return '<!-- target: TPL_modbus_device_detail_v2 -->\n<div class="modbus-dialog-form modbus-device-detail">\n    <!-- if: ${item.mode} === \'tcp\' -->\n    <div class="row"><span>IP\u5730\u5740\uFF1A</span>${address}</div>\n    <div class="row"><span>\u7AEF\u53E3\uFF1A</span>${host}</div>\n    <!-- else: -->\n    <div class="row"><span>\u4E32\u53E3\u53F7\uFF1A</span>${address}</div>\n    <div class="row"><span>\u6CE2\u7279\u7387\uFF1A</span>${item.baud}\u79D2</div>\n    <div class="row"><span>\u6570\u636E\u4F4D\uFF1A</span>${item.databits}</div>\n    <div class="row"><span>\u6821\u9A8C\uFF1A</span>${item.parity}\u6821\u9A8C</div>\n    <div class="row"><span>\u505C\u6B62\u4F4D\uFF1A</span>${item.stopbits}</div>\n    <!-- /if -->\n</div>\n<!-- target: TPL_modbus_device_detail_v2_child -->\n<!-- import: TPL_modbus_device_detail_v2 -->\n\n';
});
define('iot/modbus/manage-v2/dialog/DetailModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var DetailModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](DetailModel, _BaseModel);
        function DetailModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailModel);
            _BaseModel.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](DetailModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        address: function address(model) {
                            if (model.get('item').mode === 'tcp') {
                                return model.get('item').address.split(':')[0];
                            }
                            return model.get('item').address;
                        },
                        host: function host(model) {
                            if (model.get('item').mode === 'tcp') {
                                return model.get('item').address.split(':')[1];
                            }
                            return '';
                        }
                    };
                }
            }]);
        return DetailModel;
    }(_BaseModel2['default']);
    module.exports = DetailModel;
});
define('iot/modbus/manage-v2/dialog/DetailView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./detail.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplDetailTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var DetailView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](DetailView, _BaseView);
        function DetailView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailView);
            _BaseView.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](DetailView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_device_detail_v2';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {};
                }
            }
        ]);
        return DetailView;
    }(_BaseView2['default']);
    module.exports = DetailView;
});
define('iot/modbus/manage-v2/dialog/Password', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './PasswordModel',
    './PasswordView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _PasswordModel, _PasswordView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_PasswordModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_PasswordView);
    var Password = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Password, _BaseAction);
        function Password() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Password);
            _BaseAction.apply(this, arguments);
        }
        Password.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](Password, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Password;
    }(_BaseAction2['default']);
    module.exports = Password;
});
define('iot/modbus/manage-v2/dialog/password.tpl', [], function () {
    return '<!-- target: TPL_modbus_gateway_password_v2 -->\n<div class="modbus-dialog-form modbus-gateway-password">\n    <div class="level1">{</div>\n    <div class="level2">"endpoint":"${item.host}",</div>\n    <div class="level2">"topic":"${item.commandTopic}",</div>\n    <div class="level2">"user":"${item.username}",</div>\n    <div class="level2">"password":"${item.password}"</div>\n    <div class="level1">}</div>\n</div>\n<!-- target: TPL_modbus_gateway_password_v2_child -->\n<!-- import: TPL_modbus_gateway_password_v2 -->\n';
});
define('iot/modbus/manage-v2/dialog/PasswordModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var PasswordModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](PasswordModel, _BaseModel);
        function PasswordModel(context) {
            _babelRuntimeHelpersClassCallCheck['default'](this, PasswordModel);
            _BaseModel.call(this, context);
        }
        return PasswordModel;
    }(_BaseModel2['default']);
    module.exports = PasswordModel;
});
define('iot/modbus/manage-v2/dialog/PasswordView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./password.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplPasswordTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var PasswordView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](PasswordView, _BaseView);
        function PasswordView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PasswordView);
            _BaseView.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](PasswordView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_gateway_password_v2';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {};
                }
            }
        ]);
        return PasswordView;
    }(_BaseView2['default']);
    module.exports = PasswordView;
});
define('iot/modbus/manage-v2/Manage', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    './ManageModel',
    './ManageView',
    '../operations',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _underscore, _ManageModel, _ManageView, _operations, _config) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ModelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ManageModel);
    var _ViewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ManageView);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    var Manage = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](Manage, _ListAction);
        function Manage() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Manage);
            _ListAction.apply(this, arguments);
        }
        Manage.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on('CREATE_GATEWAY', this.create, this);
            this.view.on('DELETE_GATEWAY', this['delete'], this);
            this.view.on('TO_SUBPAGE', this.toSubpage, this);
            this.view.on('VIEW_PASSWORD', this.viewPassword, this);
            this.view.on('RESET_PASSWORD', this.resetPassword, this);
            this.view.on('UPDATE_GATEWAY', this.update, this);
            this.view.on('ACTIVATE_DEPLOY', this.activate, this);
            this.model.on('change', this.syncModelToView, this);
        };
        Manage.prototype.syncModelToView = function syncModelToView(e) {
            _ListAction.prototype.syncModelToView.call(this, e);
            this.view.get('activateBtn').set('disabled', this.model.get('tableData').length === 0);
        };
        Manage.prototype.activate = function activate(e) {
            var action = this;
            var model = this.model;
            var view = this.view;
            model.activateDeploy().then(function (data) {
                var succeedNum = _u['default'].filter(data, function (item) {
                    return item.result;
                }).length;
                if (succeedNum === data.length) {
                    view.showToast('\u6570\u636E\u751F\u6548\u6210\u529F\uFF01');
                } else if (succeedNum > 0) {
                    view.showToast('\u6570\u636E\u751F\u6548\u90E8\u5206\u6210\u529F\uFF01', { messageType: 'alert' });
                } else {
                    view.showToast('\u6570\u636E\u751F\u6548\u5931\u8D25\uFF01', { messageType: 'error' });
                }
                _operations2['default'].activateDeploy.call(action, {
                    parentAction: action,
                    item: data
                });
            }).fail(function () {
                return view.showToast('\u6570\u636E\u751F\u6548\u5931\u8D25\uFF01', { messageType: 'error' });
            });
        };
        Manage.prototype.toSubpage = function toSubpage(e) {
            this.redirect('/iot/modbus/manage/sublist~' + e.args);
        };
        Manage.prototype.update = function update(e) {
            var model = this.model;
            var view = this.view;
            var action = this;
            var uuid = e.item.uuid;
            var text = _config2['default'].status[e.item.state].actionTxt;
            var actionType = _config2['default'].status[e.item.state].action + 'D';
            view.waitConfirm({
                title: text + '\u7F51\u5173',
                content: '\u662F\u5426\u786E\u8BA4' + text + '\u7F51\u5173\uFF1F',
                width: 500,
                needFoot: true
            }).done(function (e) {
                model.updateGatewayState(uuid, actionType).then(function () {
                    return view.showToast(text + '\u7F51\u5173\u6210\u529F\uFF01');
                }).then(function () {
                    return action.reload();
                }).fail(function () {
                    return view.showToast(text + '\u7F51\u5173\u5931\u8D25\uFF01', { messageType: 'error' });
                });
            });
        };
        Manage.prototype.viewPassword = function viewPassword(e) {
            var item = this.view.get('table').datasource[e.args];
            _operations2['default'].viewPassword.call(this, {
                parentAction: this,
                item: item,
                type: '\u67E5\u770B'
            });
        };
        Manage.prototype.resetPassword = function resetPassword(e) {
            var action = this;
            var model = this.model;
            var view = this.view;
            model.resetPassword(e.item).then(function (data) {
                e.item.password = data.password;
                view.showToast('\u5BC6\u94A5\u91CD\u7F6E\u6210\u529F\uFF01');
                _operations2['default'].viewPassword.call(action, {
                    parentAction: action,
                    item: e.item,
                    type: '\u91CD\u7F6E'
                });
            }).fail(function () {
                return view.showToast('\u5BC6\u94A5\u91CD\u7F6E\u5931\u8D25\uFF01', { messageType: 'error' });
            });
        };
        Manage.prototype.create = function create() {
            var _this = this;
            this.model.iotResourceValid().then(function (data) {
                if (data.valid) {
                    _operations2['default'].createGateway.call(_this, { parentAction: _this });
                } else {
                    _operations2['default'].confirmCreateIotOrder(_this.view).then(function () {
                        return _this.redirect('#/iot/order/notify');
                    });
                }
            });
        };
        Manage.prototype['delete'] = function _delete() {
            var items = this.view.get('table').getSelectedItems();
            var model = this.model;
            var view = this.view;
            var action = this;
            view.waitConfirm({
                title: '\u5220\u9664\u7F51\u5173',
                content: '\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F',
                width: 500,
                needFoot: true
            }).done(function (e) {
                model.deleteGateway(items).then(function () {
                    return view.showToast('\u5220\u9664\u7F51\u5173\u6210\u529F\uFF01');
                }).then(function () {
                    return action.reload();
                }).fail(function () {
                    return view.showToast('\u5220\u9664\u7F51\u5173\u5931\u8D25\uFF01', { messageType: 'error' });
                });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Manage, [
            {
                key: 'modelType',
                get: function get() {
                    return _ModelType['default'];
                }
            },
            {
                key: 'viewType',
                get: function get() {
                    return _ViewType['default'];
                }
            }
        ]);
        return Manage;
    }(_ListAction2['default']);
    module.exports = Manage;
});
define('iot/modbus/manage-v2/manage.tpl', [], function () {
    return '<!-- target: TPL_modbus_manage_v2 -->\n<div class="modbus-main-wrap modbus-manage main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <span class="active">\u7269\u89E3\u6790 - \u7F51\u5173\u8BBE\u5907\u7BA1\u7406</span>\n        </p>\n        <div class="list-content">\n            <h2>\u7F51\u5173\u8BBE\u5907\u7BA1\u7406</h2>\n        \t<div class="notice">\n        \t\t\u5728\u4E91\u7AEF\u521B\u5EFA\u4E91\u7F51\u5173\uFF0C\u4F5C\u4E3A\u5382\u533A\u7F51\u5173\u5728\u4E91\u7AEF\u7684\u4E00\u5BF9\u4E00\u7684\u6620\u5C04\u3002\u4E3A\u4E86\u4F7F\u5382\u533A\u7F51\u5173\u80FD\u6B63\u786E\u4E0A\u4F20\u6570\u636E\u5230\u4E91\u7F51\u5173\uFF0C \u9700\u8981\u5C06\u7CFB\u7EDF\u751F\u6210\u7684\u5BC6\u94A5\u914D\u7F6E\u5230\u5BF9\u5E94\u7684\u5382\u533A\u7F51\u5173\u4E2D\u3002\n        \t</div>\n            <div class="main-content table-full-wrap">\n\t        \t<div class="operation-wrap" data-follow-thead="table">\n\t        \t\t<div class="buttons-wrap">\n\t                    <button data-ui-id="gatewayCreateBtn"\n\t                            data-ui-type="Button"\n\t                            data-ui-skin="create">\u65B0\u5EFA\u7F51\u5173</button>\n                        <button data-ui-id="activateBtn"\n                                data-ui-type="Button"\n                                data-ui-skin="activate">\u5168\u90E8\u751F\u6548</button>\n\t                    <button data-ui-type="Button"\n\t                            data-ui-skin="danger"\n\t                            data-ui-id="deleteGateway">\u5220\u9664</button>\n\t                </div>\n\t        \t</div>\n\t        \t<div data-ui-type="Table" data-ui-id="table"\n                     data-ui-datasource="@tableData"\n                     data-ui-order-by="@orderBy" data-ui-order="@order"\n                     data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                     data-ui-extension-command-type="Command"\n                     data-ui-extension-tableedit-type="TableEdit"\n                     data-ui-extension-tableex-type="TableEx"\n                     data-ui-extension-customfields-type="TableCustomFields">\n                </div>\n                <div class="ui-row">\n                <!-- import: listPager -->\n                </div>\n\t        </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/modbus/manage-v2/ManageModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'common/config',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _commonConfig, _config) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _commonConfig2 = _babelRuntimeHelpersInteropRequireDefault['default'](_commonConfig);
    var ManageModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](ManageModel, _ListModel);
        function ManageModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ManageModel);
            _ListModel.apply(this, arguments);
        }
        ManageModel.prototype.iotResourceValid = function iotResourceValid() {
            return _commonConfig2['default'].api.iotServiceStatus();
        };
        ManageModel.prototype.deleteGateway = function deleteGateway(items) {
            var uuidArr = [];
            _u['default'].each(items, function (item) {
                uuidArr.push(item.uuid);
            });
            return _config.api.deleteGateway({ uuid: uuidArr });
        };
        ManageModel.prototype.resetPassword = function resetPassword(item) {
            return _config.api.resetPassword({
                uuid: item.uuid,
                username: item.username,
                principalUuid: item.principalUuid
            });
        };
        ManageModel.prototype.updateGatewayState = function updateGatewayState(uuid, state) {
            return _config.api.updateGatewayState({
                uuid: uuid,
                state: state
            });
        };
        ManageModel.prototype.activateDeploy = function activateDeploy() {
            return _config.api.activateDeploy();
        };
        _babelRuntimeHelpersCreateClass['default'](ManageModel, [
            {
                key: 'datasource',
                get: function get() {
                    return {};
                }
            },
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.getGatewayList;
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize
                    };
                }
            }
        ]);
        return ManageModel;
    }(_ListModel2['default']);
    module.exports = ManageModel;
});
define('iot/modbus/manage-v2/ManageView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./manage.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/ListView',
    'common/util/timeUtil',
    'common/util/tableUtil',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplManageTplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcListView, _commonUtilTimeUtil, _commonUtilTableUtil, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u7F51\u5173ID',
                field: 'code',
                width: 50,
                content: function content(item, row) {
                    return item.code;
                }
            },
            {
                title: '\u72B6\u6001',
                width: 50,
                field: 'status',
                content: function content(item, row) {
                    return '<span class="status status-' + _config2['default'].status[item.state].css + '">\n                            ' + _config2['default'].status[item.state].text + '\n                        </span>';
                }
            },
            {
                title: '\u7F51\u5173\u63CF\u8FF0',
                width: 140,
                field: 'gatewayDesp',
                content: function content(item, row) {
                    return _u['default'].escape(item.description);
                }
            },
            {
                title: '\u5B50\u8BBE\u5907',
                width: 50,
                field: 'subItem',
                content: function content(item, row) {
                    return item.deviceNum;
                }
            },
            {
                title: '\u521B\u5EFA\u65F6\u95F4',
                width: 90,
                field: 'createTime',
                content: function content(item, row) {
                    return _timeUtil['default'].toTime(item.createTime);
                }
            },
            {
                title: '\u64CD\u4F5C',
                width: 170,
                field: 'operation',
                content: function content(item, row) {
                    var optionTemplate = _u['default'].template('<option value="<%=value%>" <%if(disabled){%>disabled<%}%>><%=name%></option>');
                    var otherOpsDatasource = [
                        {
                            name: _config2['default'].status[item.state].actionTxt,
                            value: 'update',
                            disabled: false
                        },
                        {
                            name: '\u91CD\u7F6E\u5BC6\u94A5',
                            value: 'reset',
                            disabled: false
                        }
                    ];
                    var optionHtml = '';
                    _u['default'].each(otherOpsDatasource, function (e) {
                        optionHtml += optionTemplate(e);
                    });
                    var args = 'gatewayUuid=' + item.uuid + '&code=' + item.code + '&rawState=' + item.state;
                    return '<span class="operations">\n                            <button class="cmd-button"\n                                    data-command="TO_SUBPAGE"\n                                    data-command-args=\'' + args + '\'>\u7BA1\u7406\u5B50\u8BBE\u5907</button>\n                            <button class="cmd-button"\n                                    data-command="VIEW_PASSWORD"\n                                    data-command-args=\'' + row + '\'>\u67E5\u770B\u5BC6\u94A5</button>\n                            <select data-ui-type="Select"\n                                    data-ui-x-event-type="change"\n                                    data-ui-x-event-bubble="true"\n                                    data-ui-x-row-index=\'' + row + '\'\n                                    data-ui-width="80"\n                                    data-ui-selected-index="-1"\n                                    data-ui-empty-text="\u66F4\u591A\u64CD\u4F5C">' + optionHtml + '</select>\n                        </span>';
                }
            }
        ];
    }
    var ManageView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](ManageView, _ListView);
        function ManageView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ManageView);
            _ListView.apply(this, arguments);
        }
        ManageView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'gatewayCreateBtn:click': function gatewayCreateBtnClick(e) {
                    return _this.fire('CREATE_GATEWAY', e);
                },
                'table:command': function tableCommand(e) {
                    return _this.fire(e.name, e);
                },
                'deleteGateway:click': function deleteGatewayClick(e) {
                    return _this.fire('DELETE_GATEWAY', e);
                },
                'table:select': this.updateButtonStates,
                'table:change': this.handleSelectorChangeEvent,
                'activateBtn:click': function activateBtnClick(e) {
                    return _this.fire('ACTIVATE_DEPLOY', e);
                }
            });
        };
        ManageView.prototype.updateButtonStates = function updateButtonStates() {
            var items = this.get('table').getSelectedItems();
            if (items && items.length > 0) {
                this.get('deleteGateway').set('disabled', false);
            } else {
                this.get('deleteGateway').set('disabled', true);
            }
        };
        ManageView.prototype.handleSelectorChangeEvent = function handleSelectorChangeEvent(e) {
            var me = this;
            if (e.bubble !== true) {
                return;
            }
            var originalTarget = e.originalTarget;
            var value = originalTarget.getValue();
            if (value) {
                var xRowIndex = originalTarget.get('xRowIndex');
                var item = e.target.datasource[xRowIndex];
                if (value === 'reset') {
                    me.fire('RESET_PASSWORD', { item: item });
                } else if (value === 'update') {
                    me.fire('UPDATE_GATEWAY', { item: item });
                }
                originalTarget.set('selectedIndex', -1);
            }
        };
        ManageView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
            this.get('deleteGateway').set('disabled', true);
            this.get('activateBtn').set('disabled', true);
        };
        _babelRuntimeHelpersCreateClass['default'](ManageView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_manage_v2';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        table: {
                            select: 'multi',
                            editable: 1,
                            sortable: true,
                            columnResizable: true,
                            fields: '@tableFields',
                            extTableEx: ['operation'],
                            noDataHtml: _config2['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return ManageView;
    }(_ListView2['default']);
    module.exports = ManageView;
});
define('iot/modbus/manage-v2/Sub', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    './SubModel',
    './SubView',
    './config',
    '../operations'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _SubModel, _SubView, _config, _operations) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _ModelType = _babelRuntimeHelpersInteropRequireDefault['default'](_SubModel);
    var _ViewType = _babelRuntimeHelpersInteropRequireDefault['default'](_SubView);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var Sub = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](Sub, _ListAction);
        function Sub() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Sub);
            _ListAction.apply(this, arguments);
        }
        Sub.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on('CREATE_DEVICE', this.create, this);
            this.view.on('DELETE_DEVICE', this['delete'], this);
            this.view.on('MODIFY_DEVICE', this.modify, this);
            this.view.on('ENABLE_DEVICE', this.enable, this);
            this.view.on('DISABLE_DEVICE', this.disable, this);
            this.view.on('VIEW_DEVICE', this.viewDevice, this);
        };
        Sub.prototype.enable = function enable(e) {
            var item = this.view.get('table').datasource[e.args];
            var model = this.model;
            var view = this.view;
            var action = this;
            view.waitConfirm({
                title: '\u6062\u590D\u5B50\u8BBE\u5907',
                content: '\u662F\u5426\u786E\u8BA4\u6062\u590D\uFF1F',
                width: 500,
                needFoot: true
            }).done(function (e) {
                model.updateDeviceState(item.uuid, 'ENABLED').then(function () {
                    return view.showToast('\u6062\u590D\u5B50\u8BBE\u5907\u6210\u529F\uFF01');
                }).then(function () {
                    return action.reload();
                }).fail(function () {
                    return view.showToast('\u6062\u590D\u5B50\u8BBE\u5907\u5931\u8D25\uFF01');
                });
            });
        };
        Sub.prototype.disable = function disable(e) {
            var item = this.view.get('table').datasource[e.args];
            var model = this.model;
            var view = this.view;
            var action = this;
            view.waitConfirm({
                title: '\u7981\u7528\u5B50\u8BBE\u5907',
                content: '\u662F\u5426\u786E\u8BA4\u7981\u7528\uFF1F',
                width: 500,
                needFoot: true
            }).done(function (e) {
                model.updateDeviceState(item.uuid, 'DISABLED').then(function () {
                    return view.showToast('\u7981\u7528\u5B50\u8BBE\u5907\u6210\u529F\uFF01');
                }).then(function () {
                    return action.reload();
                }).fail(function () {
                    return view.showToast('\u7981\u7528\u5B50\u8BBE\u5907\u5931\u8D25\uFF01');
                });
            });
        };
        Sub.prototype.modify = function modify(e) {
            var item = this.view.get('table').datasource[e.args];
            _operations2['default'].createDeivceV2.call(this, {
                parentAction: this,
                type: '\u7F16\u8F91',
                item: item,
                name: this.model.get('code'),
                uuid: this.model.get('gatewayUuid')
            });
        };
        Sub.prototype.create = function create() {
            _operations2['default'].createDeivceV2.call(this, {
                parentAction: this,
                type: '\u65B0\u5EFA',
                name: this.model.get('code'),
                uuid: this.model.get('gatewayUuid')
            });
        };
        Sub.prototype.viewDevice = function viewDevice(e) {
            var item = this.view.get('table').datasource[e.args];
            item.parity = _config2['default'].notes[item.parity];
            _operations2['default'].viewDeivce.call(this, {
                parentAction: this,
                type: '\u67E5\u770B\u8BE6\u60C5',
                item: item,
                name: this.model.get('code'),
                uuid: this.model.get('gatewayUuid')
            });
        };
        Sub.prototype['delete'] = function _delete() {
            var items = this.view.get('table').getSelectedItems();
            var model = this.model;
            var view = this.view;
            var action = this;
            view.waitConfirm({
                title: '\u5220\u9664\u5B50\u8BBE\u5907',
                content: '\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F',
                width: 500,
                needFoot: true
            }).done(function (e) {
                model.deleteDevice(items).then(function () {
                    return view.showToast('\u5220\u9664\u5B50\u8BBE\u5907\uFF01');
                }).then(function () {
                    return action.reload();
                }).fail(function () {
                    return view.showToast('\u5220\u9664\u5B50\u8BBE\u5907\uFF01');
                });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Sub, [
            {
                key: 'modelType',
                get: function get() {
                    return _ModelType['default'];
                }
            },
            {
                key: 'viewType',
                get: function get() {
                    return _ViewType['default'];
                }
            }
        ]);
        return Sub;
    }(_ListAction2['default']);
    module.exports = Sub;
});
define('iot/modbus/manage-v2/sub.tpl', [], function () {
    return '<!-- target: TPL_modbus_manage_sublist_v2 -->\n<div class="modbus-main-wrap modbus-manage-sublist main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/modbus/manage">\u7269\u89E3\u6790 - \u7F51\u5173\u8BBE\u5907\u7BA1\u7406</a>\n            <span class="divider">/</span>\n            <span class="active">\u7BA1\u7406\u5B50\u8BBE\u5907</span>\n        </p>\n        <div class="list-content">\n            <div class="content-head">\n                <h2>${code}</h2>\n                <span class="status status-${deviceStatus.css}">${deviceStatus.text}</span>\n            </div>\n            <div class="main-content table-full-wrap">\n\t        \t<div class="operation-wrap" data-follow-thead="table">\n\t        \t\t<div class="buttons-wrap">\n\t                    <button data-ui-id="deviceCreateBtn"\n\t                            data-ui-type="Button"\n\t                            data-ui-skin="create">\u65B0\u5EFA\u7F51\u5173\u5B50\u8BBE\u5907</button>\n\t                    <button data-ui-type="Button"\n\t                            data-ui-skin="danger"\n\t                            data-ui-id="deleteDevice">\u5220\u9664</button>\n\t                </div>\n\t        \t</div>\n\t        \t<div data-ui-type="Table" data-ui-id="table"\n                     data-ui-datasource="@tableData"\n                     data-ui-order-by="@orderBy" data-ui-order="@order"\n                     data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                     data-ui-extension-command-type="Command"\n                     data-ui-extension-tableedit-type="TableEdit"\n                     data-ui-extension-tableex-type="TableEx"\n                     data-ui-extension-customfields-type="TableCustomFields">\n                </div>\n                <!-- import: listPager -->\n\t        </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/modbus/manage-v2/SubModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../config',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _config, _config2) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _config3 = _babelRuntimeHelpersInteropRequireDefault['default'](_config2);
    var SubModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](SubModel, _ListModel);
        function SubModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SubModel);
            _ListModel.apply(this, arguments);
        }
        SubModel.prototype.deleteDevice = function deleteDevice(items) {
            var uuidArr = [];
            _u['default'].each(items, function (item) {
                uuidArr.push(item.uuid);
            });
            return _config.api.deleteDevice({ uuid: uuidArr });
        };
        SubModel.prototype.updateDeviceState = function updateDeviceState(uuid, state) {
            return _config.api.updateDeviceState({
                uuid: uuid,
                state: state
            });
        };
        _babelRuntimeHelpersCreateClass['default'](SubModel, [
            {
                key: 'datasource',
                get: function get() {
                    return {
                        deviceStatus: function deviceStatus(model) {
                            return {
                                css: _config3['default'].status[model.get('rawState')].css,
                                text: _config3['default'].status[model.get('rawState')].text
                            };
                        }
                    };
                }
            },
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.getGatewaySublist;
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize
                    };
                }
            }
        ]);
        return SubModel;
    }(_ListModel2['default']);
    module.exports = SubModel;
});
define('iot/modbus/manage-v2/SubView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./sub.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/ListView',
    'common/util/tableUtil',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplSubTplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcListView, _commonUtilTableUtil, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u5B50\u8BBE\u5907ID',
                field: 'code',
                width: 80,
                content: function content(item, row) {
                    return item.code;
                }
            },
            {
                title: '\u72B6\u6001',
                field: 'code',
                width: 80,
                content: function content(item, row) {
                    return '<span class="status status-' + _config2['default'].status[item.state].css + '">\n                            ' + _config2['default'].status[item.state].text + '\n                        </span>';
                }
            },
            {
                title: '\u4ECE\u7AD9(slave)',
                width: 50,
                field: 'status',
                content: function content(item, row) {
                    return item.slaveId;
                }
            },
            {
                title: '\u5B50\u8BBE\u5907\u63CF\u8FF0',
                width: 200,
                field: 'gatewayDesp',
                content: function content(item, row) {
                    return _u['default'].escape(item.description);
                }
            },
            {
                title: '\u63A5\u5165\u65B9\u5F0F',
                width: 50,
                field: 'subItem',
                content: function content(item, row) {
                    return item.mode.toUpperCase();
                }
            },
            {
                title: '\u64CD\u4F5C',
                width: 170,
                field: 'operation',
                content: function content(item, row) {
                    var actionTxt = _config2['default'].status[item.state].actionTxt;
                    var action = _config2['default'].status[item.state].action + '_DEVICE';
                    return '<span class="operations">\n                            <button class="cmd-button"\n                                    data-command="MODIFY_DEVICE"\n                                    data-command-args=\'' + row + '\'>\u4FEE\u6539</button>\n                            <button class="cmd-button"\n                                    data-command="' + action + '"\n                                    data-command-args=\'' + row + '\'>' + actionTxt + '</button>\n                            <button class="cmd-button"\n                                    data-command="VIEW_DEVICE"\n                                    data-command-args=\'' + row + '\'>\u67E5\u770B\u8BE6\u60C5</button>\n                        </span>';
                }
            }
        ];
    }
    var SubView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](SubView, _ListView);
        function SubView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SubView);
            _ListView.apply(this, arguments);
        }
        SubView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'deviceCreateBtn:click': function deviceCreateBtnClick(e) {
                    return _this.fire('CREATE_DEVICE', e);
                },
                'table:command': function tableCommand(e) {
                    return _this.fire(e.name, e);
                },
                'deleteDevice:click': function deleteDeviceClick(e) {
                    return _this.fire('DELETE_DEVICE', e);
                },
                'table:select': this.updateButtonStates
            });
        };
        SubView.prototype.updateButtonStates = function updateButtonStates() {
            var items = this.get('table').getSelectedItems();
            if (items && items.length > 0) {
                this.get('deleteDevice').set('disabled', false);
            } else {
                this.get('deleteDevice').set('disabled', true);
            }
        };
        SubView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
            this.get('deleteDevice').set('disabled', true);
        };
        _babelRuntimeHelpersCreateClass['default'](SubView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_manage_sublist_v2';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        table: {
                            select: 'multi',
                            editable: 1,
                            sortable: true,
                            columnResizable: true,
                            fields: '@tableFields',
                            extTableEx: ['operation'],
                            noDataHtml: _config2['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return SubView;
    }(_ListView2['default']);
    module.exports = SubView;
});
define('iot/modbus/manage/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default',
    'common/component/action_category'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault, _commonComponentAction_category) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var _ActionCategory = _babelRuntimeHelpersInteropRequireDefault['default'](_commonComponentAction_category);
    var actionsConfig = [
        {
            type: 'iot/modbus/manage/Manage',
            path: '/iot/modbus/manage',
            category: _ActionCategory['default'].LIST
        },
        {
            type: 'iot/modbus/manage/dialog/Create',
            path: '/iot/modbus/gateway/create'
        },
        {
            type: 'iot/modbus/manage/Sub',
            path: '/iot/modbus/manage/sublist'
        },
        {
            type: 'iot/modbus/manage/dialog/Createsub',
            path: '/iot/modbus/device/create'
        },
        {
            type: 'iot/modbus/manage/dialog/Password',
            path: '/iot/modbus/gateway/password'
        },
        {
            type: 'iot/modbus/manage/dialog/Detail',
            path: '/iot/modbus/device/detail'
        }
    ];
    _controller['default'].registerAction(actionsConfig);
    module.exports = {
        noDataHtml: [
            '<div><p>\u4F60\u8FD8\u6CA1\u521B\u5EFA\u4EFB\u4F55\u7F51\u5173</br>',
            '\u70B9\u51FB\u5DE6\u4E0A\u89D2\u6309\u94AE\u7ACB\u5373\u521B\u5EFA',
            '</p></div>'
        ].join(''),
        status: {
            ENABLED: {
                text: '\u5728\u7EBF',
                css: 'green',
                action: 'DISABLE',
                actionTxt: '\u7981\u7528'
            },
            OFFLINE: {
                text: '\u79BB\u7EBF',
                css: 'grey'
            },
            DISABLED: {
                text: '\u7981\u7528',
                css: 'red',
                action: 'ENABLE',
                actionTxt: '\u6062\u590D'
            }
        },
        notes: {
            NONE: '\u65E0',
            ODD: '\u5947',
            EVEN: '\u5076'
        }
    };
});
define('iot/modbus/manage/dialog/Create', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    './CreateModel',
    './CreateView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _CreateModel, _CreateView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateView);
    var Create = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Create, _FormAction);
        function Create() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Create);
            _FormAction.apply(this, arguments);
        }
        Create.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
        };
        Create.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u7F51\u5173\u521B\u5EFA\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Create.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        Create.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Create, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u7F51\u5173\u521B\u5EFA\u6210\u529F\uFF01';
                }
            }
        ]);
        return Create;
    }(_FormAction2['default']);
    module.exports = Create;
});
define('iot/modbus/manage/dialog/create.tpl', [], function () {
    return '<!-- target: TPL_modbus_create_gateway -->\n<div class="modbus-dialog-form modbus-gateway-create">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-data-body">\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u7F51\u5173ID\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                        data-ui-name="code"\n                        data-ui-id="code"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u7F51\u5173\u63CF\u8FF0\uFF1A</label>\n                <div class="form-value">\n                    <textarea data-ui-type="TextBox"\n                              data-ui-id="description"\n                              data-ui-name="description"\n                              data-ui-max-length="1000">\n                    </textarea>\n                    <div class="verify">\n                        <input type="checkbox"\n                               data-ui-id="useSsl"\n                               data-ui-name="useSsl"\n                               data-ui-type="CheckBox" />\n                        <label class="test-name">\u4F7F\u7528\u52A0\u5BC6\u94FE\u63A5\uFF08SSL\uFF09</label>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<!-- target: TPL_modbus_create_gateway_child -->\n<!-- import: TPL_modbus_create_gateway -->\n';
});
define('iot/modbus/manage/dialog/CreateModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    '../../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var CreateModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreateModel, _FormModel);
        function CreateModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateModel);
            _FormModel.apply(this, arguments);
        }
        CreateModel.prototype.filterData = function filterData(data) {
            if (data.useSsl) {
                data.useSsl = true;
            } else {
                data.useSsl = false;
            }
            return data;
        };
        _babelRuntimeHelpersCreateClass['default'](CreateModel, [
            {
                key: 'submitRequester',
                get: function get() {
                    return _config.api.createGateway;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {};
                }
            }
        ]);
        return CreateModel;
    }(_FormModel2['default']);
    module.exports = CreateModel;
});
define('iot/modbus/manage/dialog/Createsub', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    './CreatesubModel',
    './CreatesubView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _CreatesubModel, _CreatesubView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreatesubModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreatesubView);
    var Createsub = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Createsub, _FormAction);
        function Createsub() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Createsub);
            _FormAction.apply(this, arguments);
        }
        Createsub.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            var actionTxt = '\u521B\u5EFA';
            if (this.model.get('item')) {
                actionTxt = '\u7F16\u8F91';
            }
            this.toastMessage = '\u7F51\u5173\u5B50\u8BBE\u5907' + actionTxt + '\u6210\u529F\uFF01';
        };
        Createsub.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            var actionTxt = '\u521B\u5EFA';
            if (this.model.get('item')) {
                actionTxt = '\u7F16\u8F91';
            }
            this.view.showToast('\u7F51\u5173\u5B50\u8BBE\u5907' + actionTxt + '\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Createsub.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        Createsub.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Createsub, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Createsub;
    }(_FormAction2['default']);
    module.exports = Createsub;
});
define('iot/modbus/manage/dialog/createsub.tpl', [], function () {
    return '<!-- target: TPL_modbus_create_device -->\n<div class="modbus-dialog-form modbus-device-create">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-data-body">\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u5B50\u8BBE\u5907ID\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                         data-ui-name="code"\n                         <!-- if: ${editing} -->\n                         data-ui-read-only="true"\n                         <!-- /if -->\n                         data-ui-value="${item.code}"\n                         data-ui-id="code"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u4ECE\u7AD9(slave)\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                         data-ui-name="slaveId"\n                         data-ui-value="${item.slaveId}"\n                         data-ui-id="slaveId"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u63CF\u8FF0\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                         data-ui-name="description"\n                         data-ui-value="${item.description}"\n                         data-ui-id="description"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>IP\u5730\u5740\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                         data-ui-name="address"\n                         data-ui-value="${item.address}"\n                         data-ui-id="address"></div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u7AEF\u53E3\u53F7\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                         data-ui-name="portNum"\n                         <!-- if: ${item.portNum} -->\n                         data-ui-value="${item.portNum}"\n                         <!-- else -->\n                         data-ui-value="502"\n                         <!-- /if -->\n                         data-ui-id="portNum"></div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<!-- target: TPL_modbus_create_device_child -->\n<!-- import: TPL_modbus_create_device -->\n';
});
define('iot/modbus/manage/dialog/CreatesubModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var CreatesubModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreatesubModel, _FormModel);
        function CreatesubModel(context) {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreatesubModel);
            _FormModel.call(this, context);
            this.submitRequester = this.get('item') ? _config.api.editDevice : _config.api.createDevice;
        }
        CreatesubModel.prototype.filterData = function filterData(data) {
            data.address = data.address + ':' + data.portNum;
            if (!this.get('item')) {
                data.mode = 'tcp';
                data.gatewayUuid = this.get('uuid');
            } else {
                data.uuid = this.get('item').uuid;
            }
            return _u['default'].omit(data, 'portNum');
        };
        _babelRuntimeHelpersCreateClass['default'](CreatesubModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        editing: function editing(model) {
                            return model.has('item');
                        }
                    };
                }
            }]);
        return CreatesubModel;
    }(_FormModel2['default']);
    module.exports = CreatesubModel;
});
define('iot/modbus/manage/dialog/CreatesubView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./createsub.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreatesubTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var CreatesubView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreatesubView, _FormView);
        function CreatesubView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreatesubView);
            _FormView.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](CreatesubView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_create_device';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        code: {
                            width: 220,
                            placeholder: '\u7F51\u5173ID\u5FC5\u987B\u552F\u4E00\uFF0C\u4E14\u4EC5\u652F\u6301\u82F1\u6587\u3001\u6570\u5B57',
                            required: 'required',
                            pattern: _config.idRegExp
                        },
                        slaveId: {
                            width: 220,
                            required: 'required',
                            placeholder: '\u53EF\u8F93\u51651-247\u4E4B\u95F4\u7684\u6574\u6570\u503C',
                            pattern: /^([1-9]|[1-9][0-9]|1[0-9][0-9]|2[0-3][0-9]|24[0-7])$/
                        },
                        description: {
                            width: 220,
                            required: 'required'
                        },
                        address: {
                            width: 220,
                            required: 'required',
                            placeholder: '\u8BF7\u8F93\u5165\u6B63\u786E\u7684IP\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A19.220.56.127',
                            pattern: _config.ipRegExp
                        },
                        portNum: {
                            width: 80,
                            required: 'required',
                            pattern: _config.portRegExp
                        }
                    };
                }
            }
        ]);
        return CreatesubView;
    }(_FormView2['default']);
    module.exports = CreatesubView;
});
define('iot/modbus/manage/dialog/CreateView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./create.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreateTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var CreateView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreateView, _FormView);
        function CreateView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateView);
            _FormView.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](CreateView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_create_gateway';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        code: {
                            width: 220,
                            placeholder: 'ID\u5FC5\u987B\u552F\u4E00\uFF0C\u4E14\u4EC5\u652F\u6301\u82F1\u6587\u3001\u6570\u5B57',
                            required: 'required',
                            pattern: _config.idRegExp
                        },
                        description: {
                            value: '',
                            placeholder: '\u8BF7\u5199\u63CF\u8FF0\u4FE1\u606F',
                            required: 'required',
                            width: 220,
                            height: 120
                        }
                    };
                }
            }
        ]);
        return CreateView;
    }(_FormView2['default']);
    module.exports = CreateView;
});
define('iot/modbus/manage/dialog/Detail', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './DetailModel',
    './DetailView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _DetailModel, _DetailView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailView);
    var Detail = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Detail, _BaseAction);
        function Detail() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Detail);
            _BaseAction.apply(this, arguments);
        }
        Detail.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](Detail, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Detail;
    }(_BaseAction2['default']);
    module.exports = Detail;
});
define('iot/modbus/manage/dialog/detail.tpl', [], function () {
    return '<!-- target: TPL_modbus_device_detail -->\n<div class="modbus-dialog-form modbus-device-detail">\n    <!-- if: ${item.mode} === \'tcp\' -->\n    <div class="row"><span>IP\u5730\u5740\uFF1A</span>${address}</div>\n    <div class="row"><span>\u7AEF\u53E3\uFF1A</span>${host}</div>\n    <!-- else: -->\n    <div class="row"><span>\u4E32\u53E3\u53F7\uFF1A</span>${address}</div>\n    <div class="row"><span>\u6CE2\u7279\u7387\uFF1A</span>${item.baud}\u79D2</div>\n    <div class="row"><span>\u6570\u636E\u4F4D\uFF1A</span>${item.databits}</div>\n    <div class="row"><span>\u6821\u9A8C\uFF1A</span>${item.parity}\u6821\u9A8C</div>\n    <div class="row"><span>\u505C\u6B62\u4F4D\uFF1A</span>${item.stopbits}</div>\n    <!-- /if -->\n</div>\n<!-- target: TPL_modbus_device_detail_child -->\n<!-- import: TPL_modbus_device_detail -->\n\n';
});
define('iot/modbus/manage/dialog/DetailModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _config) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    var DetailModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](DetailModel, _BaseModel);
        function DetailModel(context) {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailModel);
            _BaseModel.call(this, context);
            var item = this.get('item');
            var temp = {};
            _u['default'].extend(temp, item);
            temp.parity = _config2['default'].notes[temp.parity];
            this.set('item', temp);
        }
        _babelRuntimeHelpersCreateClass['default'](DetailModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        address: function address(model) {
                            if (model.get('item').mode === 'tcp') {
                                return model.get('item').address.split(':')[0];
                            }
                            return model.get('item').address;
                        },
                        host: function host(model) {
                            if (model.get('item').mode === 'tcp') {
                                return model.get('item').address.split(':')[1];
                            }
                            return '';
                        }
                    };
                }
            }]);
        return DetailModel;
    }(_BaseModel2['default']);
    module.exports = DetailModel;
});
define('iot/modbus/manage/dialog/DetailView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./detail.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplDetailTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var DetailView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](DetailView, _BaseView);
        function DetailView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailView);
            _BaseView.apply(this, arguments);
        }
        DetailView.prototype.enterDocument = function enterDocument() {
            _BaseView.prototype.enterDocument.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](DetailView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_device_detail';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {};
                }
            }
        ]);
        return DetailView;
    }(_BaseView2['default']);
    module.exports = DetailView;
});
define('iot/modbus/manage/dialog/Password', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './PasswordModel',
    './PasswordView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _PasswordModel, _PasswordView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_PasswordModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_PasswordView);
    var Password = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Password, _BaseAction);
        function Password() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Password);
            _BaseAction.apply(this, arguments);
        }
        Password.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](Password, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Password;
    }(_BaseAction2['default']);
    module.exports = Password;
});
define('iot/modbus/manage/dialog/password.tpl', [], function () {
    return '<!-- target: TPL_modbus_gateway_password -->\n<div class="modbus-dialog-form modbus-gateway-password">\n    <div class="level1">{</div>\n    <div class="level2">"endpoint":"${item.host}",</div>\n    <div class="level2">"topic":"${item.commandTopic}",</div>\n    <div class="level2">"backControlTopic":"${item.backControlTopic}",</div>\n    <div class="level2">"user":"${item.username}",</div>\n    <div class="level2">"password":"${item.password}"</div>\n    <div class="level1">}</div>\n</div>\n<!-- target: TPL_modbus_gateway_password_child -->\n<!-- import: TPL_modbus_gateway_password -->\n';
});
define('iot/modbus/manage/dialog/PasswordModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var PasswordModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](PasswordModel, _BaseModel);
        function PasswordModel(context) {
            _babelRuntimeHelpersClassCallCheck['default'](this, PasswordModel);
            _BaseModel.call(this, context);
        }
        return PasswordModel;
    }(_BaseModel2['default']);
    module.exports = PasswordModel;
});
define('iot/modbus/manage/dialog/PasswordView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./password.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplPasswordTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var PasswordView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](PasswordView, _BaseView);
        function PasswordView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PasswordView);
            _BaseView.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](PasswordView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_gateway_password';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {};
                }
            }
        ]);
        return PasswordView;
    }(_BaseView2['default']);
    module.exports = PasswordView;
});
define('iot/modbus/manage/Manage', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../operations',
    './config',
    '../../events',
    '../../operations',
    './ManageModel',
    './ManageView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _underscore, _operations, _config, _events, _operations3, _ManageModel, _ManageView) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operationsGlobal = _babelRuntimeHelpersInteropRequireDefault['default'](_operations3);
    var _ModelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ManageModel);
    var _ViewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ManageView);
    var Manage = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](Manage, _ListAction);
        function Manage() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Manage);
            _ListAction.apply(this, arguments);
        }
        Manage.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on('CREATE_GATEWAY', this.create, this);
            this.view.on('DELETE_GATEWAY', this['delete'], this);
            this.view.on('TO_SUBPAGE', this.toSubpage, this);
            this.view.on('VIEW_PASSWORD', this.viewPassword, this);
            this.view.on('RESET_PASSWORD', this.resetPasswordV2, this);
            this.view.on('UPDATE_GATEWAY', this.update, this);
            this.view.on('DEPLOY_MODBUS_SINGLE', this.activateSingle, this);
            this.view.on(_EVENTS['default'].START_TURNKEY, _operationsGlobal['default'].startTurnkey, this);
            this.model.on('change', this.syncModelToView, this);
        };
        Manage.prototype.syncModelToView = function syncModelToView(e) {
            _ListAction.prototype.syncModelToView.call(this, e);
        };
        Manage.prototype.activateSingle = function activateSingle(e) {
            var action = this;
            var model = this.model;
            var view = this.view;
            var gatewayUuid = e.args;
            model.activateDeploySingle(gatewayUuid).then(function (data) {
                var succeedNum = _u['default'].filter(data, function (item) {
                    return item.result;
                }).length;
                if (succeedNum === data.length) {
                    view.showToast('\u6570\u636E\u751F\u6548\u6210\u529F\uFF01');
                } else if (succeedNum > 0) {
                    view.showToast('\u6570\u636E\u751F\u6548\u90E8\u5206\u6210\u529F\uFF01', { messageType: 'alert' });
                } else {
                    view.showToast('\u6570\u636E\u751F\u6548\u5931\u8D25\uFF01', { messageType: 'error' });
                }
                _operations2['default'].activateDeploy.call(action, {
                    parentAction: action,
                    item: data
                });
            }).fail(function () {
                return view.showToast('\u6570\u636E\u751F\u6548\u5931\u8D25\uFF01', { messageType: 'error' });
            });
        };
        Manage.prototype.toSubpage = function toSubpage(e) {
            this.redirect('/iot/modbus/manage/sublist~' + e.args);
        };
        Manage.prototype.update = function update(e) {
            var model = this.model;
            var view = this.view;
            var action = this;
            var uuid = e.item.uuid;
            var text = _config2['default'].status[e.item.state].actionTxt;
            var actionType = _config2['default'].status[e.item.state].action + 'D';
            view.waitConfirm({
                title: text + '\u7F51\u5173',
                content: text + '\u7F51\u5173\u540E\uFF0C\u9700\u8981\u70B9\u51FB\u300E\u914D\u7F6E\u4E0B\u53D1\u300F\uFF0C\u5C06' + text + '\u6307\u4EE4\u4E0B\u53D1\u7ED9\u7F51\u5173\u624D\u80FD\u751F\u6548\u3002\u662F\u5426\u786E\u8BA4' + text + '\u8BE5\u7F51\u5173\uFF1F',
                width: 500,
                needFoot: true
            }).done(function (e) {
                model.updateGatewayState(uuid, actionType).then(function () {
                    return view.showToast(text + '\u7F51\u5173\u6210\u529F\uFF01');
                }).then(function () {
                    return action.reload();
                }).fail(function () {
                    return view.showToast(text + '\u7F51\u5173\u5931\u8D25\uFF01', { messageType: 'error' });
                });
            });
        };
        Manage.prototype.viewPassword = function viewPassword(e) {
            var item = e.item;
            _operations2['default'].viewPassword.call(this, {
                parentAction: this,
                item: item,
                type: '\u67E5\u770B'
            });
        };
        Manage.prototype.resetPassword = function resetPassword(e) {
            var action = this;
            var model = this.model;
            var view = this.view;
            model.resetPassword(e.item).then(function (data) {
                e.item.password = data.password;
                view.showToast('\u5BC6\u94A5\u91CD\u7F6E\u6210\u529F\uFF01');
                _operations2['default'].viewPassword.call(action, {
                    parentAction: action,
                    item: e.item,
                    type: '\u91CD\u7F6E'
                });
            }).fail(function () {
                return view.showToast('\u5BC6\u94A5\u91CD\u7F6E\u5931\u8D25\uFF01', { messageType: 'error' });
            });
        };
        Manage.prototype.resetPasswordV2 = function resetPasswordV2(e) {
            var action = this;
            var model = this.model;
            var view = this.view;
            view.waitConfirm({
                title: '\u63D0\u793A',
                content: '\u91CD\u7F6E\u5BC6\u94A5\u540E\uFF0C\u7F51\u5173\u8FDE\u63A5MQTT\u7684\u5BC6\u94A5\u5C06\u66F4\u6539\uFF0C\u53EF\u80FD\u9700\u8981\u91CD\u65B0\u70E7\u5F55\u7A0B\u5E8F\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\u3002\u662F\u5426\u91CD\u7F6E\u5BC6\u94A5\uFF1F',
                width: 600,
                needFoot: true
            }).done(function () {
                model.resetPassword(e.item).then(function (data) {
                    e.item.password = data.password;
                    view.showToast('\u5BC6\u94A5\u91CD\u7F6E\u6210\u529F\uFF01');
                    _operations2['default'].viewPassword.call(action, {
                        parentAction: action,
                        item: e.item,
                        type: '\u91CD\u7F6E'
                    });
                }).fail(function () {
                    return view.showToast('\u5BC6\u94A5\u91CD\u7F6E\u5931\u8D25\uFF01', { messageType: 'error' });
                });
            });
        };
        Manage.prototype.create = function create() {
            var _this = this;
            this.model.iotResourceValid().then(function (data) {
                if (data.valid) {
                    _operations2['default'].createGateway.call(_this, { parentAction: _this });
                } else {
                    _operations2['default'].confirmCreateIotOrder(_this.view).then(function () {
                        return _this.redirect('#/iot/order/notify');
                    });
                }
            });
        };
        Manage.prototype['delete'] = function _delete() {
            var items = this.view.get('table').getSelectedItems();
            var model = this.model;
            var view = this.view;
            var action = this;
            view.waitConfirm({
                title: '\u5220\u9664\u7F51\u5173',
                content: '\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F',
                width: 500,
                needFoot: true
            }).done(function (e) {
                model.deleteGateway(items).then(function () {
                    return view.showToast('\u5220\u9664\u7F51\u5173\u6210\u529F\uFF01');
                }).then(function () {
                    return action.reload();
                }).fail(function () {
                    return view.showToast('\u5220\u9664\u7F51\u5173\u5931\u8D25\uFF01', { messageType: 'error' });
                });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Manage, [
            {
                key: 'modelType',
                get: function get() {
                    return _ModelType['default'];
                }
            },
            {
                key: 'viewType',
                get: function get() {
                    return _ViewType['default'];
                }
            }
        ]);
        return Manage;
    }(_ListAction2['default']);
    module.exports = Manage;
});
define('iot/modbus/manage/manage.tpl', [], function () {
    return '<!-- target: TPL_modbus_manage -->\n<div class="modbus-main-wrap modbus-manage main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <span class="active">\u7269\u89E3\u6790 - \u7F51\u5173\u8BBE\u5907\u7BA1\u7406</span>\n        </p>\n        <div class="list-content">\n            <h2>\n                <span>\u7F51\u5173\u8BBE\u5907\u7BA1\u7406</span>\n                <a href="#/iot/modbus/landing">\u67E5\u770B\u4EA7\u54C1\u7B80\u4ECB&gt;</a>\n                <!-- import: TPL_iot_turnkey_enter -->\n            </h2>\n\n\t\t\t<div class="tip-grey">\n        \t\t\u4E3A\u4E86\u4F7F\u5382\u533A\u7F51\u5173\u80FD\u6B63\u786E\u4E0A\u4F20\u6570\u636E\u5230\u4E91\u7AEF\uFF0C \u9700\u8981\u5C06\u7CFB\u7EDF\u751F\u6210\u7684\u5BC6\u94A5\u914D\u7F6E\u5230\u5BF9\u5E94\u7684\u5382\u533A\u7F51\u5173\u4E2D\u3002\n        \t</div>\n            <div class="main-content table-full-wrap">\n\t        \t<div class="operation-wrap" data-follow-thead="table">\n\t        \t\t<div class="buttons-wrap">\n\t                    <button data-ui-id="gatewayCreateBtn"\n\t                            data-ui-type="Button"\n\t                            data-ui-skin="create">\u65B0\u5EFA\u7F51\u5173</button>\n\t                    <button data-ui-type="Button"\n\t                            data-ui-skin="danger"\n\t                            data-ui-id="deleteGateway">\u5220\u9664</button>\n\t                </div>\n\t        \t</div>\n\t        \t<div data-ui-type="Table" data-ui-id="table"\n                     data-ui-datasource="@tableData"\n                     data-ui-order-by="@orderBy" data-ui-order="@order"\n                     data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                     data-ui-extension-command-type="Command"\n                     data-ui-extension-tableedit-type="TableEdit"\n                     data-ui-extension-tableex-type="TableEx"\n                     data-ui-extension-customfields-type="TableCustomFields">\n                </div>\n                <div class="ui-row">\n                <!-- import: listPager -->\n                </div>\n\t        </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/modbus/manage/ManageModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'common/config',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _commonConfig, _config) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _commonConfig2 = _babelRuntimeHelpersInteropRequireDefault['default'](_commonConfig);
    var ManageModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](ManageModel, _ListModel);
        function ManageModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ManageModel);
            _ListModel.apply(this, arguments);
        }
        ManageModel.prototype.iotResourceValid = function iotResourceValid() {
            return _commonConfig2['default'].api.iotServiceStatus();
        };
        ManageModel.prototype.deleteGateway = function deleteGateway(items) {
            var uuidArr = [];
            _u['default'].each(items, function (item) {
                uuidArr.push(item.uuid);
            });
            return _config.api.deleteGateway({ uuid: uuidArr });
        };
        ManageModel.prototype.resetPassword = function resetPassword(item) {
            return _config.api.resetPassword({
                uuid: item.uuid,
                username: item.username,
                principalUuid: item.principalUuid
            });
        };
        ManageModel.prototype.updateGatewayState = function updateGatewayState(uuid, state) {
            return _config.api.updateGatewayState({
                uuid: uuid,
                state: state
            });
        };
        ManageModel.prototype.activateDeploySingle = function activateDeploySingle(gatewayUuid) {
            return _config.api.activateDeploySingle({ uuid: gatewayUuid });
        };
        _babelRuntimeHelpersCreateClass['default'](ManageModel, [
            {
                key: 'datasource',
                get: function get() {
                    return {};
                }
            },
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.getGatewayList;
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize
                    };
                }
            }
        ]);
        return ManageModel;
    }(_ListModel2['default']);
    module.exports = ManageModel;
});
define('iot/modbus/manage/ManageView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./manage.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/ListView',
    'common/util/timeUtil',
    'common/util/tableUtil',
    './config',
    '../../events'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplManageTplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcListView, _commonUtilTimeUtil, _commonUtilTableUtil, _config, _events) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    function getTableFields(view) {
        return [
            {
                title: '\u7F51\u5173ID',
                field: 'code',
                width: 50,
                content: function content(item, row) {
                    return item.code;
                }
            },
            {
                title: '\u72B6\u6001',
                width: 50,
                field: 'status',
                content: function content(item, row) {
                    return '<span class="status status-' + _config2['default'].status[item.state].css + '">\n                            ' + _config2['default'].status[item.state].text + '\n                        </span>';
                }
            },
            {
                title: '\u7F51\u5173\u63CF\u8FF0',
                width: 140,
                field: 'gatewayDesp',
                content: function content(item, row) {
                    return _u['default'].escape(item.description);
                }
            },
            {
                title: '\u5B50\u8BBE\u5907',
                width: 30,
                field: 'subItem',
                content: function content(item, row) {
                    return item.deviceNum;
                }
            },
            {
                title: '\u521B\u5EFA\u65F6\u95F4',
                width: 90,
                field: 'createTime',
                content: function content(item, row) {
                    return _timeUtil['default'].toTime(item.createTime);
                }
            },
            {
                title: '\u64CD\u4F5C',
                width: 180,
                field: 'operation',
                content: function content(item, row) {
                    var optionTemplate = _u['default'].template('<option value="<%=value%>" <%if(disabled){%>disabled<%}%>><%=name%></option>');
                    var otherOpsDatasource = [
                        {
                            name: _config2['default'].status[item.state].actionTxt,
                            value: 'update',
                            disabled: false
                        },
                        {
                            name: '\u91CD\u7F6E\u5BC6\u94A5',
                            value: 'reset',
                            disabled: false
                        },
                        {
                            name: '\u67E5\u770B\u5BC6\u94A5',
                            value: 'viewpass',
                            disabled: false
                        }
                    ];
                    var optionHtml = '';
                    _u['default'].each(otherOpsDatasource, function (e) {
                        optionHtml += optionTemplate(e);
                    });
                    var args = 'gatewayUuid=' + item.uuid + '&code=' + item.code + '&rawState=' + item.state;
                    var gatewayUuid = '' + item.uuid;
                    return '<span class="operations">\n                            <button class="cmd-button"\n                                    data-command="TO_SUBPAGE"\n                                    data-command-args=\'' + args + '\'>\u7BA1\u7406\u5B50\u8BBE\u5907</button>\n                            <button class="cmd-button"\n                                    data-command="DEPLOY_MODBUS_SINGLE"\n                                    data-command-args=\'' + gatewayUuid + '\'>\u914D\u7F6E\u4E0B\u53D1</button>\n                            <select data-ui-type="Select"\n                                    data-ui-x-event-type="change"\n                                    data-ui-x-event-bubble="true"\n                                    data-ui-x-row-index=\'' + row + '\'\n                                    data-ui-width="85"\n                                    data-ui-selected-index="-1"\n                                    data-ui-empty-text="\u66F4\u591A\u64CD\u4F5C">' + optionHtml + '</select>\n                        </span>';
                }
            }
        ];
    }
    var ManageView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](ManageView, _ListView);
        function ManageView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ManageView);
            _ListView.apply(this, arguments);
        }
        ManageView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'gatewayCreateBtn:click': function gatewayCreateBtnClick(e) {
                    return _this.fire('CREATE_GATEWAY', e);
                },
                'table:command': function tableCommand(e) {
                    return _this.fire(e.name, e);
                },
                'deleteGateway:click': function deleteGatewayClick(e) {
                    return _this.fire('DELETE_GATEWAY', e);
                },
                'table:select': this.updateButtonStates,
                'table:change': this.handleSelectorChangeEvent,
                'turnkey:click': function turnkeyClick(e) {
                    return _this.fire(_EVENTS['default'].START_TURNKEY, e);
                }
            });
        };
        ManageView.prototype.updateButtonStates = function updateButtonStates() {
            var items = this.get('table').getSelectedItems();
            if (items && items.length > 0) {
                this.get('deleteGateway').set('disabled', false);
            } else {
                this.get('deleteGateway').set('disabled', true);
            }
        };
        ManageView.prototype.handleSelectorChangeEvent = function handleSelectorChangeEvent(e) {
            var me = this;
            if (e.bubble !== true) {
                return;
            }
            var originalTarget = e.originalTarget;
            var value = originalTarget.getValue();
            if (value) {
                var xRowIndex = originalTarget.get('xRowIndex');
                var item = e.target.datasource[xRowIndex];
                if (value === 'reset') {
                    me.fire('RESET_PASSWORD', { item: item });
                } else if (value === 'update') {
                    me.fire('UPDATE_GATEWAY', { item: item });
                } else if (value === 'viewpass') {
                    me.fire('VIEW_PASSWORD', { item: item });
                }
                originalTarget.set('selectedIndex', -1);
            }
        };
        ManageView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
            this.get('deleteGateway').set('disabled', true);
        };
        _babelRuntimeHelpersCreateClass['default'](ManageView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_manage';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        table: {
                            select: 'multi',
                            editable: 1,
                            sortable: true,
                            columnResizable: true,
                            fields: '@tableFields',
                            extTableEx: ['operation'],
                            noDataHtml: _config2['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return ManageView;
    }(_ListView2['default']);
    module.exports = ManageView;
});
define('iot/modbus/manage/Sub', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    './SubModel',
    './SubView',
    '../operations'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _SubModel, _SubView, _operations) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _ModelType = _babelRuntimeHelpersInteropRequireDefault['default'](_SubModel);
    var _ViewType = _babelRuntimeHelpersInteropRequireDefault['default'](_SubView);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var Sub = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](Sub, _ListAction);
        function Sub() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Sub);
            _ListAction.apply(this, arguments);
        }
        Sub.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on('CREATE_DEVICE', this.create, this);
            this.view.on('DELETE_DEVICE', this['delete'], this);
            this.view.on('MODIFY_DEVICE', this.modify, this);
            this.view.on('ENABLE_DEVICE', this.enable, this);
            this.view.on('DISABLE_DEVICE', this.disable, this);
            this.view.on('VIEW_DEVICE', this.viewDevice, this);
        };
        Sub.prototype.enable = function enable(e) {
            var item = this.view.get('table').datasource[e.args];
            var model = this.model;
            var view = this.view;
            var action = this;
            view.waitConfirm({
                title: '\u6062\u590D\u5B50\u8BBE\u5907',
                content: '\u662F\u5426\u786E\u8BA4\u6062\u590D\uFF1F',
                width: 500,
                needFoot: true
            }).done(function (e) {
                model.updateDeviceState(item.uuid, 'ENABLED').then(function () {
                    return view.showToast('\u6062\u590D\u5B50\u8BBE\u5907\u6210\u529F\uFF01');
                }).then(function () {
                    return action.reload();
                }).fail(function () {
                    return view.showToast('\u6062\u590D\u5B50\u8BBE\u5907\u5931\u8D25\uFF01');
                });
            });
        };
        Sub.prototype.disable = function disable(e) {
            var item = this.view.get('table').datasource[e.args];
            var model = this.model;
            var view = this.view;
            var action = this;
            view.waitConfirm({
                title: '\u7981\u7528\u5B50\u8BBE\u5907',
                content: '\u662F\u5426\u786E\u8BA4\u7981\u7528\uFF1F',
                width: 500,
                needFoot: true
            }).done(function (e) {
                model.updateDeviceState(item.uuid, 'DISABLED').then(function () {
                    return view.showToast('\u7981\u7528\u5B50\u8BBE\u5907\u6210\u529F\uFF01');
                }).then(function () {
                    return action.reload();
                }).fail(function () {
                    return view.showToast('\u7981\u7528\u5B50\u8BBE\u5907\u5931\u8D25\uFF01');
                });
            });
        };
        Sub.prototype.modify = function modify(e) {
            var item = this.view.get('table').datasource[e.args];
            _operations2['default'].createDeivceV2.call(this, {
                parentAction: this,
                type: '\u7F16\u8F91',
                item: item,
                name: this.model.get('code'),
                uuid: this.model.get('gatewayUuid')
            });
        };
        Sub.prototype.create = function create() {
            _operations2['default'].createDeivceV2.call(this, {
                parentAction: this,
                type: '\u65B0\u5EFA',
                name: this.model.get('code'),
                uuid: this.model.get('gatewayUuid')
            });
        };
        Sub.prototype.viewDevice = function viewDevice(e) {
            var item = this.view.get('table').datasource[e.args];
            _operations2['default'].viewDeivce.call(this, {
                parentAction: this,
                type: '\u67E5\u770B\u8BE6\u60C5',
                item: item,
                name: this.model.get('code'),
                uuid: this.model.get('gatewayUuid')
            });
        };
        Sub.prototype['delete'] = function _delete() {
            var items = this.view.get('table').getSelectedItems();
            var model = this.model;
            var view = this.view;
            var action = this;
            view.waitConfirm({
                title: '\u5220\u9664\u5B50\u8BBE\u5907',
                content: '\u662F\u5426\u786E\u8BA4\u5220\u9664\uFF1F',
                width: 500,
                needFoot: true
            }).done(function (e) {
                model.deleteDevice(items).then(function () {
                    return view.showToast('\u5220\u9664\u5B50\u8BBE\u5907\uFF01');
                }).then(function () {
                    return action.reload();
                }).fail(function () {
                    return view.showToast('\u5220\u9664\u5B50\u8BBE\u5907\uFF01');
                });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Sub, [
            {
                key: 'modelType',
                get: function get() {
                    return _ModelType['default'];
                }
            },
            {
                key: 'viewType',
                get: function get() {
                    return _ViewType['default'];
                }
            }
        ]);
        return Sub;
    }(_ListAction2['default']);
    module.exports = Sub;
});
define('iot/modbus/manage/sub.tpl', [], function () {
    return '<!-- target: TPL_modbus_manage_sublist -->\n<div class="modbus-main-wrap modbus-manage-sublist main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/modbus/manage">\u7269\u89E3\u6790 - \u7F51\u5173\u8BBE\u5907\u7BA1\u7406</a>\n            <span class="divider">/</span>\n            <span class="active">\u7BA1\u7406\u5B50\u8BBE\u5907</span>\n        </p>\n\n        <div class="instance-info">\n            <h1>${code}</h1>\n            <span class="status status-${deviceStatus.css}">${deviceStatus.text}</span>\n        </div>\n        <div class="list-content">\n            <div class="table-full-wrap">\n\t        \t<div class="operation-wrap" data-follow-thead="table">\n\t        \t\t<div class="buttons-wrap">\n\t                    <button data-ui-id="deviceCreateBtn"\n\t                            data-ui-type="Button"\n\t                            data-ui-skin="create">\u65B0\u5EFA\u7F51\u5173\u5B50\u8BBE\u5907</button>\n\t                    <button data-ui-type="Button"\n\t                            data-ui-skin="danger"\n\t                            data-ui-id="deleteDevice">\u5220\u9664</button>\n\t                </div>\n\t        \t</div>\n\t        \t<div data-ui-type="Table" data-ui-id="table"\n                     data-ui-datasource="@tableData"\n                     data-ui-order-by="@orderBy" data-ui-order="@order"\n                     data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                     data-ui-extension-command-type="Command"\n                     data-ui-extension-tableedit-type="TableEdit"\n                     data-ui-extension-tableex-type="TableEx"\n                     data-ui-extension-customfields-type="TableCustomFields">\n                </div>\n                <div class="ui-row">\n                <!-- import: listPager -->\n                </div>\n\t        </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/modbus/manage/SubModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../config',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _config, _config2) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _config3 = _babelRuntimeHelpersInteropRequireDefault['default'](_config2);
    var SubModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](SubModel, _ListModel);
        function SubModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SubModel);
            _ListModel.apply(this, arguments);
        }
        SubModel.prototype.deleteDevice = function deleteDevice(items) {
            var uuidArr = [];
            _u['default'].each(items, function (item) {
                uuidArr.push(item.uuid);
            });
            return _config.api.deleteDevice({ uuid: uuidArr });
        };
        SubModel.prototype.updateDeviceState = function updateDeviceState(uuid, state) {
            return _config.api.updateDeviceState({
                uuid: uuid,
                state: state
            });
        };
        _babelRuntimeHelpersCreateClass['default'](SubModel, [
            {
                key: 'datasource',
                get: function get() {
                    return {
                        deviceStatus: function deviceStatus(model) {
                            return {
                                css: _config3['default'].status[model.get('rawState')].css,
                                text: _config3['default'].status[model.get('rawState')].text
                            };
                        }
                    };
                }
            },
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.getGatewaySublist;
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize
                    };
                }
            }
        ]);
        return SubModel;
    }(_ListModel2['default']);
    module.exports = SubModel;
});
define('iot/modbus/manage/SubView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./sub.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/ListView',
    'common/util/tableUtil',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplSubTplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcListView, _commonUtilTableUtil, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u5B50\u8BBE\u5907ID',
                field: 'code',
                width: 80,
                content: function content(item, row) {
                    return item.code;
                }
            },
            {
                title: '\u72B6\u6001',
                field: 'code',
                width: 80,
                content: function content(item, row) {
                    return '<span class="status status-' + _config2['default'].status[item.state].css + '">\n                            ' + _config2['default'].status[item.state].text + '\n                        </span>';
                }
            },
            {
                title: '\u4ECE\u7AD9(slave)',
                width: 50,
                field: 'status',
                content: function content(item, row) {
                    return item.slaveId;
                }
            },
            {
                title: '\u5B50\u8BBE\u5907\u63CF\u8FF0',
                width: 200,
                field: 'gatewayDesp',
                content: function content(item, row) {
                    return _u['default'].escape(item.description);
                }
            },
            {
                title: '\u63A5\u5165\u65B9\u5F0F',
                width: 50,
                field: 'subItem',
                content: function content(item, row) {
                    return item.mode.toUpperCase();
                }
            },
            {
                title: '\u64CD\u4F5C',
                width: 170,
                field: 'operation',
                content: function content(item, row) {
                    var actionTxt = _config2['default'].status[item.state].actionTxt;
                    var action = _config2['default'].status[item.state].action + '_DEVICE';
                    return '<span class="operations">\n                            <button class="cmd-button"\n                                    data-command="MODIFY_DEVICE"\n                                    data-command-args=\'' + row + '\'>\u4FEE\u6539</button>\n                            <button class="cmd-button"\n                                    data-command="' + action + '"\n                                    data-command-args=\'' + row + '\'>' + actionTxt + '</button>\n                            <button class="cmd-button"\n                                    data-command="VIEW_DEVICE"\n                                    data-command-args=\'' + row + '\'>\u67E5\u770B\u8BE6\u60C5</button>\n                        </span>';
                }
            }
        ];
    }
    var SubView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](SubView, _ListView);
        function SubView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SubView);
            _ListView.apply(this, arguments);
        }
        SubView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'deviceCreateBtn:click': function deviceCreateBtnClick(e) {
                    return _this.fire('CREATE_DEVICE', e);
                },
                'table:command': function tableCommand(e) {
                    return _this.fire(e.name, e);
                },
                'deleteDevice:click': function deleteDeviceClick(e) {
                    return _this.fire('DELETE_DEVICE', e);
                },
                'table:select': this.updateButtonStates
            });
        };
        SubView.prototype.updateButtonStates = function updateButtonStates() {
            var items = this.get('table').getSelectedItems();
            if (items && items.length > 0) {
                this.get('deleteDevice').set('disabled', false);
            } else {
                this.get('deleteDevice').set('disabled', true);
            }
        };
        SubView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
            this.get('deleteDevice').set('disabled', true);
        };
        _babelRuntimeHelpersCreateClass['default'](SubView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_manage_sublist';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        table: {
                            select: 'multi',
                            editable: 1,
                            sortable: true,
                            columnResizable: true,
                            fields: '@tableFields',
                            extTableEx: ['operation'],
                            noDataHtml: _config2['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return SubView;
    }(_ListView2['default']);
    module.exports = SubView;
});
define('iot/modbus/operations', [
    'exports',
    'module',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    '../config'
], function (exports, module, _underscore, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var config = {
        'gateway.delete': {
            msg: '\u5220\u9664\u7F51\u5173',
            api: _config.api.deleteGateway
        }
    };
    function subDialogAfterRender(e) {
        var dialog = e.target;
        var action = dialog.getAction();
        var btnOk = dialog.getChild('foot').getChild('btnOk');
        var btnCancel = dialog.getChild('foot').getChild('btnCancel');
        var form = action.view.get('form');
        form.on('submitSuccess', function () {
            dialog && dialog.dispose();
        });
        form.on('submitError', function () {
            return btnOk.enable();
        });
        action.on('beforesubmit', function () {
            return btnOk.disable();
        });
        action.on('dialog.resize', function () {
            return dialog && dialog.resize();
        });
        btnOk.on('click', function () {
            return form.validateAndSubmit();
        });
        btnCancel.on('click', function () {
            dialog.fire('cancel');
            dialog.dispose();
        });
        dialog.resize();
    }
    module.exports = {
        handler: function handler(key, view, data, fetchKeys, failHandler) {
            var obj = config[key];
            if (!obj || !view) {
                return;
            }
            data = data || {};
            var items = null;
            if (fetchKeys) {
                items = view.get('table').getSelectedItems();
                for (var attr in fetchKeys) {
                    if (fetchKeys.hasOwnProperty(attr)) {
                        var fetchArr = [];
                        for (var i = 0; i < items.length; ++i) {
                            fetchArr.push(items[i][fetchKeys[attr]]);
                        }
                        data[attr] = fetchArr.join();
                    }
                }
            }
            obj.api(data).then(function () {
                view.showToast(obj.msg + '\u6210\u529F');
                view.fire('REFRESH');
            }, function (error) {
                var partialMsg = items && items.length > 1 ? '\u90E8\u5206' : '';
                view.showToast(obj.msg + partialMsg + '\u5931\u8D25');
                failHandler && failHandler.call(null, error);
            });
        },
        confirmHandler: function confirmHandler(option, key, view, data, fetchKeys, failHandler) {
            var _this = this;
            view.waitConfirm({
                title: option.title,
                content: option.content,
                width: option.width || 540,
                needFoot: true
            }).then(function () {
                return _this.handler(key, view, data, fetchKeys, failHandler);
            });
        },
        confirmCreateIotOrder: function confirmCreateIotOrder(view) {
            return view.waitConfirm({
                title: '\u63D0\u793A',
                content: '\u4F7F\u7528\u7269\u89E3\u6790\u524D\uFF0C\u8BF7\u5148\u8D2D\u4E70\u7269\u63A5\u5165\u8D44\u6E90\uFF1A\uFF09',
                width: 540,
                okText: '\u53BB\u5F00\u901A',
                needFoot: true
            });
        },
        createGateway: function createGateway(e) {
            this.view.waitActionDialog({
                title: '\u65B0\u5EFA\u7F51\u5173',
                width: 540,
                needFoot: true,
                url: '/iot/modbus/gateway/create',
                actionOptions: e
            }).then(_u['default'].bind(subDialogAfterRender, this));
        },
        createDeivce: function createDeivce(e) {
            this.view.waitActionDialog({
                title: e.type + '\u5B50\u8BBE\u5907 (\u7F51\u5173' + e.name + ')',
                width: 540,
                needFoot: true,
                url: '/iot/modbus/device/create~uuid=' + e.uuid,
                actionOptions: e
            }).then(_u['default'].bind(subDialogAfterRender, this));
        },
        createDeivceV2: function createDeivceV2(e) {
            this.view.waitActionDialog({
                title: e.type + '\u5B50\u8BBE\u5907 (\u7F51\u5173' + e.name + ')',
                width: 540,
                needFoot: true,
                url: '/iot/modbus/device/createv2~uuid=' + e.uuid,
                actionOptions: e
            }).then(_u['default'].bind(subDialogAfterRender, this));
        },
        viewDeivce: function viewDeivce(e) {
            this.view.waitActionDialog({
                title: e.type,
                width: 540,
                needFoot: true,
                url: '/iot/modbus/device/detail',
                actionOptions: e
            }).then(function (evt) {
                var dialog = evt.target;
                var btnOk = dialog.getChild('foot').getChild('btnOk');
                var btnCancel = dialog.getChild('foot').getChild('btnCancel');
                btnOk.on('click', function () {
                    e.parentAction.fire('RENDER_AFTER_CONFIRM', e);
                    dialog && dialog.dispose();
                });
                dialog.on('close', function () {
                    e.parentAction.fire('RENDER_AFTER_CONFIRM', e);
                });
                btnCancel.on('click', function () {
                    dialog.fire('cancel');
                    dialog.dispose();
                });
                dialog.resize();
            });
        },
        viewPassword: function viewPassword(e) {
            this.view.waitActionDialog({
                title: '\u67E5\u770B\u5F53\u524D\u5BC6\u94A5',
                width: 700,
                needFoot: true,
                url: '/iot/modbus/gateway/password',
                actionOptions: e
            }).then(function (evt) {
                var dialog = evt.target;
                var btnOk = dialog.getChild('foot').getChild('btnOk');
                var btnCancel = dialog.getChild('foot').getChild('btnCancel');
                btnCancel.hide();
                btnOk.on('click', function () {
                    e.parentAction.fire('RENDER_AFTER_CONFIRM', e);
                    if (e.type === '\u91CD\u7F6E') {
                        e.parentAction.reload();
                    }
                    dialog && dialog.dispose();
                });
                dialog.on('close', function () {
                    if (e.type === '\u91CD\u7F6E') {
                        e.parentAction.reload();
                    }
                    e.parentAction.fire('RENDER_AFTER_CONFIRM', e);
                });
                btnCancel.on('click', function () {
                    dialog.fire('cancel');
                    dialog.dispose();
                });
                dialog.resize();
            });
        },
        viewHowUpload: function viewHowUpload(e) {
            this.view.waitActionDialog({
                title: '\u5F53\u524D\u8F6E\u8BE2\u89C4\u5219\uFF1A\u6570\u636E\u4E0A\u4F20\u683C\u5F0F',
                width: 700,
                needFoot: true,
                url: '/iot/modbus/slave/howUpload',
                actionOptions: e
            }).then(function (evt) {
                var dialog = evt.target;
                var btnOk = dialog.getChild('foot').getChild('btnOk');
                var btnCancel = dialog.getChild('foot').getChild('btnCancel');
                btnCancel.hide();
                btnOk.on('click', function () {
                    e.parentAction.fire('RENDER_AFTER_CONFIRM', e);
                    dialog && dialog.dispose();
                });
                dialog.on('close', function () {
                    e.parentAction.fire('RENDER_AFTER_CONFIRM', e);
                });
                btnCancel.on('click', function () {
                    dialog.fire('cancel');
                    dialog.dispose();
                });
                dialog.resize();
            });
        },
        viewSlaveDetail: function viewSlaveDetail(e) {
            this.view.waitActionDialog({
                title: '\u8F6E\u8BE2\u8BE6\u60C5',
                width: 600,
                needFoot: true,
                url: '/iot/modbus/slave/detail',
                actionOptions: e
            }).then(function (evt) {
                var dialog = evt.target;
                var btnOk = dialog.getChild('foot').getChild('btnOk');
                var btnCancel = dialog.getChild('foot').getChild('btnCancel');
                btnCancel.hide();
                btnOk.on('click', function () {
                    e.parentAction.fire('RENDER_AFTER_CONFIRM', e);
                    dialog && dialog.dispose();
                });
                dialog.on('close', function () {
                    e.parentAction.fire('RENDER_AFTER_CONFIRM', e);
                });
                btnCancel.on('click', function () {
                    dialog.fire('cancel');
                    dialog.dispose();
                });
                dialog.resize();
            });
        },
        createParseProject: function createParseProject(e) {
            this.view.waitActionDialog({
                title: '\u65B0\u5EFA\u89E3\u6790\u9879\u76EE',
                width: 540,
                needFoot: true,
                url: '/iot/modbus/analysis/createProject',
                actionOptions: e
            }).then(_u['default'].bind(subDialogAfterRender, this));
        },
        editParseProject: function editParseProject(e) {
            this.view.waitActionDialog({
                title: '\u7F16\u8F91\u89E3\u6790\u9879\u76EE',
                width: 540,
                needFoot: true,
                url: '/iot/modbus/analysis/editProject',
                actionOptions: e
            }).then(_u['default'].bind(subDialogAfterRender, this));
        },
        createTrantable: function createTrantable(e) {
            this.view.waitActionDialog({
                title: e.item ? '\u7F16\u8F91\u8BB0\u5F55' : '\u65B0\u5EFA\u8BB0\u5F55',
                width: 540,
                needFoot: true,
                url: '/iot/modbus/analysis/createTrantable',
                actionOptions: e
            }).then(_u['default'].bind(subDialogAfterRender, this));
        },
        activateDeploy: function activateDeploy(e) {
            this.view.waitActionDialog({
                title: '\u6570\u636E\u751F\u6548\u60C5\u51B5',
                width: 600,
                needFoot: true,
                url: '/iot/modbus/deploy_status',
                actionOptions: e
            }).then(function (evt) {
                var dialog = evt.target;
                var btnOk = dialog.getChild('foot').getChild('btnOk');
                var btnCancel = dialog.getChild('foot').getChild('btnCancel');
                btnCancel.hide();
                btnOk.on('click', function () {
                    e.parentAction.fire('RENDER_AFTER_CONFIRM', e);
                    dialog && dialog.dispose();
                });
                dialog.on('close', function () {
                    e.parentAction.fire('RENDER_AFTER_CONFIRM', e);
                });
                btnCancel.on('click', function () {
                    dialog.fire('cancel');
                    dialog.dispose();
                });
                dialog.resize();
            });
        },
        createCustomProperty: function createCustomProperty(e) {
            this.view.waitActionDialog({
                title: '\u65B0\u5EFA\u81EA\u5B9A\u4E49\u5C5E\u6027',
                width: 540,
                needFoot: true,
                url: '/iot/modbus/advanced/createproperty',
                actionOptions: e
            }).then(_u['default'].bind(subDialogAfterRender, this));
        },
        JsonToString: function JsonToString(o) {
            var arr = [];
            var me = this;
            var fmt = function fmt(s) {
                if (typeof s === 'object' && s !== null) {
                    return me.JsonToString(s);
                }
                return /^(string|number)$/.test(typeof s) ? '\'' + s + '\'' : s;
            };
            for (var i in o) {
                arr.push('\'' + i + '\':' + fmt(o[i]));
            }
            return '{' + arr.join(',') + '}';
        }
    };
});
define('iot/modbus/overview/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var actionsConfig = [{
            type: 'iot/modbus/overview/Overview',
            path: '/iot/modbus/overview'
        }];
    _controller['default'].registerAction(actionsConfig);
    var config = {};
    module.exports = config;
});
define('iot/modbus/overview/Overview', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './OverviewModel',
    './OverviewView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _OverviewModel, _OverviewView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _ModelType = _babelRuntimeHelpersInteropRequireDefault['default'](_OverviewModel);
    var _ViewType = _babelRuntimeHelpersInteropRequireDefault['default'](_OverviewView);
    var Overview = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Overview, _BaseAction);
        function Overview() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Overview);
            _BaseAction.apply(this, arguments);
        }
        Overview.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](Overview, [
            {
                key: 'modelType',
                get: function get() {
                    return _ModelType['default'];
                }
            },
            {
                key: 'viewType',
                get: function get() {
                    return _ViewType['default'];
                }
            }
        ]);
        return Overview;
    }(_BaseAction2['default']);
    module.exports = Overview;
});
define('iot/modbus/overview/overview.tpl', [], function () {
    return '<!-- target: TPL_modbus_overview -->\n<div class="modbus-main-wrap modbus-overview main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <span class="active">\u7269\u89E3\u6790 - \u6982\u89C8</span>\n        </p>\n        <div class="list-content">\n            <h2>\u6982\u89C8</h2>\n            <div class="main-content">\n            \t<div class="notice">\n            \t\t\u4F7F\u7528\u7269\u89E3\u6790\u670D\u52A1\u5C06\u901A\u8FC7\u7F51\u5173\u4E0A\u4F20\u7684\u5382\u533A\u6570\u636E\uFF0C\u5728\u4E91\u7AEF\u8FDB\u884C\u7075\u6D3B\u914D\u7F6E\u7684\u89E3\u6790\u548C\u8BA1\u7B97\u3002\u53EF\u4EE5\u628A\u5DE5\u4E1A\u534F\u8BAE\u4E2D\u7684\u4E8C\u8FDB\u5236\u6570\u636E\u8F7B\u677E\u8F6C\u5316\u6210\u66F4\u4E3A\u53EF\u7406\u89E3\u7684\u6570\u636E\u683C\u5F0F\uFF0C\u5B58\u50A8\u5728\u4E91\u7AEF\u3002\n            \t</div>\n            \t<div class="section">\n            \t\t<h3>\u6D41\u7A0B\u8BF4\u660E</h3>\n            \t\t<div class="illustration">\n            \t\t\t<div class="wrapper">\n\t            \t\t\t<div class="point">\n\t            \t\t\t\t<div class="left">\n\t\t            \t\t\t\t<div class="top">\n\t\t            \t\t\t\t\t<div class="num">1</div>\n\t\t            \t\t\t\t\t<div class="text">\u914D\u7F6E\u7F51\u5173\u8FDE\u63A5</div>\n\t\t            \t\t\t\t</div>\n\t\t            \t\t\t\t<div class="bottom">\n\t\t            \t\t\t\t\t\u5728\u4E91\u7AEF\u63A7\u5236\u53F0\u521B\u5EFA\u548C\u5382\u533A\u7F51\u5173\u5339\u914D\u7684\u4E91\u7F51\u5173\uFF0C\u5E76\u5728\u5382\u533A\u7F51\u5173\u7AEF\u4F7F\u7528\n\t\t            \t\t\t\t\t<a href="https://github.com/baidu/iot-edge-sdk-for-iot-parser" target="_blank">IoT SDK</a>\u914D\u7F6E\u6570\u636E\u63A5\u5165\u3002\n\t\t            \t\t\t\t</div>\n\t            \t\t\t\t</div>\n\t            \t\t\t\t<div class="right"></div>\n\t            \t\t\t</div>\n\t            \t\t\t<div class="point">\n\t            \t\t\t\t<div class="left">\n\t\t            \t\t\t\t<div class="top">\n\t\t            \t\t\t\t\t<div class="num">2</div>\n\t\t            \t\t\t\t\t<div class="text">\u68C0\u67E5\u6570\u636E\u683C\u5F0F</div>\n\t\t            \t\t\t\t</div>\n\t\t            \t\t\t\t<div class="bottom">\n\t\t            \t\t\t\t\t\u786E\u4FDD\u5382\u533A\u7F51\u5173\u4E0A\u4F20\u7684\u6570\u636E\u7B26\u5408\u89E3\u6790\u7EA6\u5B9A\u683C\u5F0F\u3002\n\t\t            \t\t\t\t\t\u8BE6\u89C1\uFF1A<a href="https://bce.baidu.com/doc/Parser/index.html" target="_blank">\u4E91\u534F\u8BAE\u89E3\u6790\u6587\u6863</a>\n\t\t            \t\t\t\t</div>\n\t\t            \t\t\t</div>\n\t            \t\t\t\t<div class="right"></div>\n\t            \t\t\t</div>\n\t            \t\t\t<div class="point">\n\t            \t\t\t\t<div class="left">\n\t\t            \t\t\t\t<div class="top">\n\t\t            \t\t\t\t\t<div class="num">3</div>\n\t\t            \t\t\t\t\t<div class="text">\u586B\u5199\u89E3\u6790\u89C4\u5219</div>\n\t\t            \t\t\t\t</div>\n\t\t            \t\t\t\t<div class="bottom">\n\t\t            \t\t\t\t\t\u5728\u4E91\u7AEF\u63A7\u5236\u53F0\u914D\u7F6E\u89E3\u6790\u89C4\u5219\uFF0C\u8BBE\u7F6E\u5F85\u89E3\u6790\u7684\u6570\u636E\u6765\u6E90\uFF0C\u901A\u8BAF\u5730\u5740\u8868\u548C\u89E3\u6790\u540E\u6570\u636E\u5B58\u50A8\u4F4D\u7F6E\u3002\n\t\t            \t\t\t\t</div>\n\t\t            \t\t\t</div>\n\t            \t\t\t\t<div class="right"></div>\n\t            \t\t\t</div>\n\t            \t\t\t<div class="point">\n\t            \t\t\t\t<div class="left">\n\t\t            \t\t\t\t<div class="top">\n\t\t            \t\t\t\t\t<div class="num">4</div>\n\t\t            \t\t\t\t\t<div class="text">\u9A8C\u8BC1\u89E3\u6790\u7ED3\u679C</div>\n\t\t            \t\t\t\t</div>\n\t\t            \t\t\t\t<div class="bottom">\n\t\t            \t\t\t\t\t\u67E5\u770B\u6700\u8FD1\u7684\u534F\u8BAE\u89E3\u6790\u7ED3\u679C\u6216\u8005\u9519\u8BEF\u6D88\u606F\u63D0\u793A\uFF0C\u4E3A\u9A8C\u8BC1\u548C\u4F18\u5316\u6570\u636E\u89E3\u6790\u8FC7\u7A0B\u63D0\u4F9B\u53C2\u8003\u3002\n\t\t            \t\t\t\t</div>\n\t\t            \t\t\t</div>\n\t            \t\t\t\t<div class="right"></div>\n\t            \t\t\t</div>\n\t            \t\t</div>\n            \t\t</div>\n            \t</div>\n            </div>\n        </div>\n    </div>\n</div>';
});
define('iot/modbus/overview/OverviewModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var OverviewModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](OverviewModel, _BaseModel);
        function OverviewModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, OverviewModel);
            _BaseModel.apply(this, arguments);
        }
        OverviewModel.prototype.prepare = function prepare() {
        };
        _babelRuntimeHelpersCreateClass['default'](OverviewModel, [{
                key: 'datasource',
                get: function get() {
                    return {};
                }
            }]);
        return OverviewModel;
    }(_BaseModel2['default']);
    module.exports = OverviewModel;
});
define('iot/modbus/overview/OverviewView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./overview.tpl',
    'jquery',
    'babel-runtime/helpers/interop-require-default',
    'bat-ria/mvc/BaseView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplOverviewTplHtml, _jquery, _babelRuntimeHelpersInteropRequireDefault, _batRiaMvcBaseView) {
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var OverviewView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](OverviewView, _BaseView);
        function OverviewView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, OverviewView);
            _BaseView.apply(this, arguments);
        }
        OverviewView.prototype.getUIEvents = function getUIEvents() {
            return {};
        };
        OverviewView.prototype.hideInlineLoading = function hideInlineLoading(key) {
            _$['default']('span[data-key=' + key + ']').hide();
        };
        OverviewView.prototype.enterDocument = function enterDocument() {
            _BaseView.prototype.enterDocument.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](OverviewView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_modbus_overview';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {};
                }
            }
        ]);
        return OverviewView;
    }(_BaseView2['default']);
    module.exports = OverviewView;
});
define('iot/operations', [
    'exports',
    'module',
    './events',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'er/Deferred',
    'esui/lib',
    './_public/InputCollection',
    './_public/util',
    './config'
], function (exports, module, _events, _babelRuntimeHelpersInteropRequireDefault, _underscore, _erDeferred, _esuiLib, _publicInputCollection, _publicUtil, _config) {
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _Deferred = _babelRuntimeHelpersInteropRequireDefault['default'](_erDeferred);
    var _lib = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiLib);
    var _InputCollection = _babelRuntimeHelpersInteropRequireDefault['default'](_publicInputCollection);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var config = {
        'endpoint.release': {
            msg: '\u5B9E\u4F8B\u91CA\u653E',
            api: _config.api.iotEndpointDelete
        },
        'thing.delete': {
            msg: '\u5220\u9664\u8BBE\u5907',
            api: _config.api.iotThingDelete
        },
        'principal.delete': {
            msg: '\u5220\u9664\u8EAB\u4EFD',
            api: _config.api.iotPrincipalDelete
        },
        'policy.delete': {
            msg: '\u5220\u9664\u7B56\u7565',
            api: _config.api.iotPolicyDelete
        },
        'storage.deleteCopy': {
            msg: '\u5220\u9664\u5F52\u6863',
            api: _config.api.iotStorageCopyDelete
        },
        'storage.delete': {
            msg: '\u5220\u9664\u5B58\u50A8\u9879',
            api: _config.api.iotKafkaDelete
        },
        'storage.check': {
            msg: '\u63D0\u793A',
            api: _config.api.iotBosCheckStatus,
            error: {
                AVAILABLE: '',
                UNAVAILABLE: '\u5F52\u6863\u4EE5BOS\u4E3A\u5B58\u50A8\u8F7D\u4F53\uFF0C\u7CFB\u7EDF\u68C0\u6D4B\u5230\u60A8\u5C1A\u672A\u5F00\u901ABOS\uFF0C' + '\u70B9\u51FB \u201C<b>\u786E\u5B9A</b>\u201D \u8FDB\u5165BOS\u5F00\u901A\u9875\uFF1F',
                INDEBTED: '\u60A8\u5DF2\u6B20\u8D39\uFF0C\u5F52\u6863\u670D\u52A1\u6682\u65F6\u65E0\u6CD5\u4F7F\u7528\uFF0C\u70B9\u51FB \u201C<b>\u786E\u5B9A</b>\u201D \u7ACB\u5373\u5145\u503C\uFF1F'
            },
            action: {
                AVAILABLE: '',
                UNAVAILABLE: 'bos.active',
                INDEBTED: 'bos.recharge'
            }
        }
    };
    var DIALOG_FOOT = [
        '<div class="btn-last" data-ui="type:Button;id:btnFootLast;childName:btnLast;">\u4E0A\u4E00\u6B65</div>',
        '<div class="btn-next" data-ui="type:Button;id:btnFootOk;childName:btnOk;skin:primary;">\u4E0B\u4E00\u6B65</div>',
        '<div class="btn-cancel" data-ui="type:Button;id:btnFootCancel;childName:btnCancel;">\u53D6\u6D88</div>'
    ].join('');
    function stepDialogAfterRender(e) {
        var dialog = e.target;
        var action = dialog.getAction();
        var stepPanel = action.view.get('stepControl');
        var btnLast = dialog.getChild('foot').getChild('btnLast');
        var btnOk = dialog.getChild('foot').getChild('btnOk');
        var btnCancel = dialog.getChild('foot').getChild('btnCancel');
        _lib['default'].addClass(dialog.getBody().main, 'iot-dialog-panel');
        var form = action.view.get('form');
        form.getInputControls = function (name, type) {
            var inputs = _T['default'].getInputControls(form.main, name, type);
            return new _InputCollection['default'](inputs);
        };
        form.on('submitSuccess', function () {
            dialog && dialog.dispose();
        });
        form.on('submitError', function () {
            btnOk.enable();
            dialog && dialog.dispose();
        });
        action.on('dialog.resize', function () {
            return dialog && dialog.resize();
        });
        btnLast.on('click', function (e) {
            return stepPanel.fire('prev');
        });
        btnOk.on('click', function () {
            return form.validateAndSubmit();
        });
        btnCancel.on('click', function () {
            dialog.fire('cancel');
            dialog.dispose();
        });
        dialog.resize();
    }
    function subDialogAfterRender(e) {
        var dialog = e.target;
        var action = dialog.getAction();
        var btnOk = dialog.getChild('foot').getChild('btnOk');
        var btnCancel = dialog.getChild('foot').getChild('btnCancel');
        var form = action.view.get('form');
        form.on('submitSuccess', function () {
            dialog && dialog.dispose();
        });
        form.on('submitError', function () {
            return btnOk.enable();
        });
        action.on('beforesubmit', function () {
            return btnOk.disable();
        });
        action.on('dialog.resize', function () {
            return dialog && dialog.resize();
        });
        btnOk.on('click', function () {
            return form.validateAndSubmit();
        });
        btnCancel.on('click', function () {
            dialog.fire('cancel');
            dialog.dispose();
        });
        dialog.resize();
    }
    function checkBosStatus() {
        var _this = this;
        var deferred = new _Deferred['default']();
        var control = config['storage.check'];
        control.api().done(function (result) {
            var content = control.error[result.status];
            if (content) {
                _this.view.waitConfirm({
                    title: control.msg,
                    content: content,
                    width: 470,
                    encode: false,
                    needFoot: true
                }).done(function () {
                    return _this.fire(control.action[result.status]);
                });
                deferred.reject(result);
            } else {
                deferred.resolve();
            }
        });
        return deferred.promise;
    }
    module.exports = {
        handler: function handler(key, view, data, fetchKeys, failHandler) {
            var obj = config[key];
            if (!obj || !view) {
                return;
            }
            data = data || {};
            var items = null;
            if (fetchKeys) {
                items = view.get('table').getSelectedItems();
                for (var attr in fetchKeys) {
                    if (fetchKeys.hasOwnProperty(attr)) {
                        var fetchArr = [];
                        for (var i = 0; i < items.length; ++i) {
                            fetchArr.push(items[i][fetchKeys[attr]]);
                        }
                        data[attr] = fetchArr.join();
                    }
                }
            }
            obj.api(data).then(function () {
                view.showToast(obj.msg + '\u6210\u529F');
                view.fire(_EVENTS['default'].REFRESH);
            }, function (error) {
                var partialMsg = items && items.length > 1 ? '\u90E8\u5206' : '';
                view.showToast(obj.msg + partialMsg + '\u5931\u8D25');
                failHandler && failHandler.call(null, error);
            });
        },
        confirmHandler: function confirmHandler(option, key, view, data, fetchKeys, failHandler) {
            var _this2 = this;
            view.waitConfirm({
                title: option.title,
                content: option.content,
                width: option.width || 540,
                needFoot: true
            }).then(function () {
                return _this2.handler(key, view, data, fetchKeys, failHandler);
            });
        },
        createEndpoint: function createEndpoint(e) {
            this.view.waitActionDialog({
                title: '\u521B\u5EFA\u5B9E\u4F8B',
                width: 540,
                needFoot: true,
                url: '/iot/endpoint/create',
                actionOptions: e
            }).then(_u['default'].bind(subDialogAfterRender, this));
        },
        createThing: function createThing(e) {
            this.view.waitActionDialog({
                title: '\u521B\u5EFA\u8BBE\u5907',
                width: 640,
                needFoot: true,
                foot: DIALOG_FOOT,
                url: '/iot/thing/create',
                actionOptions: e
            }).then(_u['default'].bind(stepDialogAfterRender, this));
        },
        editThing: function editThing(e) {
            this.view.waitActionDialog({
                title: '\u7F16\u8F91\u8BBE\u5907',
                width: 640,
                needFoot: true,
                foot: DIALOG_FOOT,
                url: '/iot/thing/edit',
                actionOptions: e
            }).then(_u['default'].bind(stepDialogAfterRender, this));
        },
        createPrincipal: function createPrincipal(e) {
            this.view.waitActionDialog({
                title: '\u521B\u5EFA\u8EAB\u4EFD',
                width: 580,
                needFoot: true,
                foot: DIALOG_FOOT,
                url: '/iot/principal/create',
                actionOptions: e
            }).then(_u['default'].bind(stepDialogAfterRender, this));
        },
        editPrincipal: function editPrincipal(e) {
            this.view.waitActionDialog({
                title: '\u7F16\u8F91\u8EAB\u4EFD',
                width: 580,
                needFoot: true,
                foot: DIALOG_FOOT,
                url: '/iot/principal/edit',
                actionOptions: e
            }).then(_u['default'].bind(stepDialogAfterRender, this));
        },
        viewPrincipalResult: function viewPrincipalResult(e) {
            this.view.waitActionDialog({
                title: '\u67E5\u770B\u5BC6\u94A5',
                width: 600,
                needFoot: true,
                url: '/iot/principal/confirm',
                actionOptions: e
            }).then(function (evt) {
                var dialog = evt.target;
                var btnOk = dialog.getChild('foot').getChild('btnOk');
                var btnCancel = dialog.getChild('foot').getChild('btnCancel');
                btnCancel.hide();
                btnOk.on('click', function () {
                    e.parentAction.fire(_EVENTS['default'].RENDER_AFTER_CONFIRM, e);
                    dialog && dialog.dispose();
                });
                dialog.on('close', function () {
                    return e.parentAction.fire(_EVENTS['default'].RENDER_AFTER_CONFIRM, e);
                });
                btnCancel.on('click', function () {
                    dialog.fire('cancel');
                    dialog.dispose();
                });
                dialog.resize();
            });
        },
        createPolicy: function createPolicy(e) {
            this.view.waitActionDialog({
                title: '\u521B\u5EFA\u7B56\u7565',
                width: 560,
                needFoot: true,
                url: '/iot/policy/create',
                actionOptions: e
            }).then(_u['default'].bind(subDialogAfterRender, this));
        },
        editPolicy: function editPolicy(e) {
            this.view.waitActionDialog({
                title: '\u7F16\u8F91\u7B56\u7565',
                width: 560,
                needFoot: true,
                url: '/iot/policy/edit',
                actionOptions: e
            }).then(_u['default'].bind(subDialogAfterRender, this));
        },
        createStorageCopy: function createStorageCopy(e) {
            var _this3 = this;
            checkBosStatus.call(this).done(function () {
                return _this3.view.waitActionDialog({
                    title: '\u521B\u5EFA\u5F52\u6863',
                    width: 540,
                    needFoot: true,
                    url: '/iot/storage/copy/create',
                    actionOptions: e
                }).then(_u['default'].bind(subDialogAfterRender, _this3));
            });
        },
        createStorage: function createStorage(e) {
            this.view.waitActionDialog({
                title: '\u521B\u5EFA\u5B58\u50A8\u9879',
                width: 540,
                needFoot: true,
                url: '/iot/storage/create',
                actionOptions: e
            }).then(_u['default'].bind(subDialogAfterRender, this));
        },
        editStorageCopy: function editStorageCopy(e) {
            var _this4 = this;
            checkBosStatus.call(this).done(function () {
                return _this4.view.waitActionDialog({
                    title: '\u7F16\u8F91\u5F52\u6863',
                    width: 540,
                    needFoot: true,
                    url: '/iot/storage/edit',
                    actionOptions: e
                }).then(_u['default'].bind(subDialogAfterRender, _this4));
            });
        },
        editStorage: function editStorage(e) {
            this.view.waitActionDialog({
                title: '\u7F16\u8F91\u5B58\u50A8\u9879',
                width: 540,
                needFoot: true,
                url: '/iot/storage/create',
                actionOptions: e
            }).then(_u['default'].bind(subDialogAfterRender, this));
        },
        startTurnkey: function startTurnkey() {
            var _this5 = this;
            _config.api.permissionTurnkey().then(function (data) {
                if (!data.iothub) {
                    _this5.view.waitAlert({
                        title: '\u63D0\u793A',
                        content: '\u8BF7\u5148\u5F00\u901AIoT Hub\u670D\u52A1',
                        width: 320
                    });
                } else if (!data.tsdb) {
                    _this5.view.waitAlert({
                        title: '\u63D0\u793A',
                        content: '\u8BF7\u5148\u5F00\u901ATSDB\u670D\u52A1',
                        width: 320
                    });
                } else {
                    _this5.redirect('/iot/turnkey/choose');
                }
            });
        }
    };
});
define('iot/order/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var actionsConfig = [
        {
            type: 'iot/order/Notify',
            path: '/iot/order/initnotify'
        },
        {
            type: 'iot/order/NewNotify',
            path: '/iot/order/notify'
        },
        {
            type: 'iot/order/Create',
            path: '/iot/order/initcreate'
        },
        {
            type: 'iot/order/NewCreate',
            path: '/iot/order/create'
        },
        {
            type: 'iot/order/Upgrade',
            path: '/iot/order/upgrade'
        },
        {
            type: 'iot/order/UpgradeUnicom',
            path: '/iot/order/upgradeUnicom'
        }
    ];
    _controller['default'].registerAction(actionsConfig);
    module.exports = {
        saleTip: {
            1: '\u6CE8\uFF1A\u8D2D\u4E70\u65F6\u957F\u81F3\u5C11\u4E3A3\u4E2A\u6708',
            2: '\u6BCF\u4F4D\u7528\u6237\u4EC5\u9996\u6B21\u4E0B\u5355\u65F6\u53EF\u8D2D\u4E70\u8BD5\u7528\u7248\uFF1B\u6BCF\u6708\u4EC5\u9650\u524D100\u4F4D\u7528\u6237\u8D2D\u4E70',
            3: '\u672C\u6708100\u4E2A1\u5143\u8BD5\u7528\u7248\u5DF2\u552E\u7F44\uFF0C\u60A8\u53EF\u9009\u8D2D\u5C0F\u578B\u8BBE\u5907\u7248\u6216\u5927\u578B\u8BBE\u5907\u7248\uFF1B\u6BCF\u4F4D\u7528\u6237\u4EC5\u9996\u6B21\u4E0B\u5355\u65F6\u53EF\u8D2D\u4E70\u8BD5\u7528\u7248\uFF1B\u6BCF\u6708\u4EC5\u9650\u524D100\u4F4D\u7528\u6237\u8D2D\u4E70\u8BD5\u7528\u7248\u3002',
            4: '\u60A8\u5DF2\u8D2D\u4E70\u8FC71\u5143\u8BD5\u7528\u7248\uFF1B\u6BCF\u4F4D\u7528\u6237\u4EC5\u9996\u6B21\u4E0B\u5355\u65F6\u53EF\u8D2D\u4E70\u8BD5\u7528\u7248\uFF1B\u6BCF\u6708\u4EC5\u9650\u524D100\u4F4D\u7528\u6237\u8D2D\u4E70\u8BD5\u7528\u7248\u3002',
            12: '\u6CE8\uFF1A\u8D2D\u4E7010\u4E2A\u6708\u8D60\u90012\u4E2A\u6708'
        }
    };
});
define('iot/order/Create', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    '../_public/util',
    './CreateModel',
    './CreateView',
    '../helper'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _publicUtil, _CreateModel, _CreateView, _helper) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormAction);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateView);
    var _helper2 = _babelRuntimeHelpersInteropRequireDefault['default'](_helper);
    var Create = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Create, _FormAction);
        function Create() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Create);
            _FormAction.apply(this, arguments);
        }
        Create.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            this.view.on('PURCHASE_LENGTH_CHANGE', this.updatePrice, this);
            this.view.on('MESSAGE_NUM_CHANGE', this.updatePurchaseLength, this);
            this.view.on('REFRESH', this.refresh, this);
            this.view.on('SUBMIT', this.submitOrder, this);
        };
        Create.prototype.refresh = function refresh() {
            this.reload();
        };
        Create.prototype.updatePrice = function updatePrice() {
            var data = {
                messagesNum: this.view.get('messagesNum').getValue(),
                purchaseLength: this.view.get('purchaseLength').getValue()
            };
            this.view.updateBuyBucket(data);
        };
        Create.prototype.updatePurchaseLength = function updatePurchaseLength() {
            this.view.messagesNumSelected(this.view.get('messagesNum').getValue());
        };
        Create.prototype.submitOrder = function submitOrder() {
            var _this = this;
            var formData = this.model.getSubmitData(this.view.getFormData());
            this.model.getPrice(formData).then(function (priceInfo) {
                var order = _this.convertFormData2Order(formData, priceInfo);
                _this.view.renderOrderConfig(order, formData);
            });
        };
        Create.prototype.convertFormData2Order = function convertFormData2Order(formData, priceInfo) {
            var unitPrice = _T['default'].formatMoney(priceInfo.unitPrice);
            var price = _T['default'].formatMoney(priceInfo.price);
            var isShowCoupon = _helper2['default'].isShowCoupon(formData.messagesNum, formData.purchaseLength);
            var config = {
                serviceType: 'IOT',
                productType: 'prepay',
                type: 'NEW',
                price: price,
                display: { coupon: isShowCoupon },
                items: [{
                        serviceType: 'IOT',
                        productType: 'prepay',
                        count: 1,
                        time: formData.purchaseLength,
                        timeUnit: 'MONTH',
                        price: price,
                        unitPrice: unitPrice,
                        unitPriceShow: '\u9636\u68AF\u5B9A\u4EF7',
                        chargeType: ['cpt2'],
                        configuration: [formData.messagesNum + '\u767E\u4E07\u6761/\u6708']
                    }]
            };
            return config;
        };
        _babelRuntimeHelpersCreateClass['default'](Create, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Create;
    }(_FormAction2['default']);
    module.exports = Create;
});
define('iot/order/create.tpl', [], function () {
    return '<!-- target: TPL_iot_hubbus_preorder -->\n<div class="iot-preorder-wrap main-wrap-new">\n\n    <!-- import: TPL_inf_ria_page_breadcrumb -->\n        <!-- block: back_link -->#/iot/endpoint/list<!-- /block -->\n        <!-- block: text_content_wrapper -->\n            ${i18n.\u521B\u5EFA\u5957\u9910}\n        <!-- /block -->\n        <!-- block: create_step -->\n            <div data-ui-type="ViewStep"\n                data-ui-id="buyStep"\n                data-ui-current-step="1">\n                <ul>\n                    <li bind-for="buyIot">${i18n.\u9009\u62E9\u8BA1\u8D39\u5957\u9910}</li>\n                    <li bind-for="orderConfirm">${i18n.\u786E\u8BA4\u8BA2\u5355}</li>\n                    <li>${i18n.\u5728\u7EBF\u652F\u4ED8}</li>\n                    <li>${i18n.\u652F\u4ED8\u6210\u529F}</li>\n                </ul>\n            </div>\n        <!-- /block -->\n    <!-- /import -->\n    <div class="content-wrap">\n        <div class="create-content create-content-wrapper">\n            <div id="buyIot">\n                <div class="create-main ui-tab-content">\n                    <div class="detail-parts-table">\n                        <form class="create-database-form" data-ui-type="Form" data-ui-id="form">\n                            <div data-ui-id="buyBucket" data-ui-type="BuyBucket"></div>\n                            <dl class="detail-part-1-col detail-create">\n                                <dt>\n                                    <h4><span>\u7269\u63A5\u5165\u914D\u7F6E\u4FE1\u606F</span></h4>\n                                </dt>\n                                <dd><!-- import: TPL_common_partial_create_current_region --></dd>\n                                <dd>\n                                    <label>\u8D2D\u4E70\u89C4\u683C\uFF1A</label>\n                                    <div data-ui-type="Panel"\n                                         data-ui-id="messagesNumPanel"\n                                         class="package-list">\n                                        <div class="detail-cell package">\n                                            <div data-ui-id="messagesNum"\n                                                 data-ui-name="messagesNum"\n                                                 data-ui-datasource="@messagesNum"\n                                                 data-ui-type="Dragger"\n                                                 class="messagesNum">\n                                            </div>\n                                        </div>\n                                        <span class="unit">\u767E\u4E07\u6761/\u6708</span>\n                                    </div>\n                                </dd>\n                            </dl>\n                            <dl class="detail-part-1-col detail-create">\n                                <dt>\n                                    <h4><span>\u8D2D\u4E70\u4FE1\u606F</span></h4>\n                                </dt>\n                                <dd data-ui-type="Panel" data-ui-id="panelPurchaseLength" class="form-row">\n                                    <label>\u8D2D\u4E70\u65F6\u957F\uFF1A</label>\n                                    <div class="form-value">\n                                        <div data-ui-id="purchaseLength" data-ui-name="purchaseLength"\n                                             data-ui-type="RadioSelect" class="ui-radioselect-pl"></div>\n                                    </div>\n                                </dd>\n                            </dl>\n                        </form>\n                        <div class="free-notice"\n                            data-ui-type="ToastLabel"\n                            data-ui-message-type="alert"\n                            tip-message="\u514D\u8D39">\u6BCF\u6708\u524D\u4E00\u767E\u4E07\u6761\u514D\u8D39\u3002\u5982\u679C\u8D85\u8FC7\u514D\u8D39\u989D\u5EA6\uFF0C\u6211\u4EEC\u5C06\u4F1A\u6536\u53D6\u76F8\u5E94\u8D39\u7528\u3002</div>\n                        <!-- if: !${overdueStatus.pass} -->\n                        <span class="tip-red overdue-notice">\n                            \u6E29\u99A8\u63D0\u793A\uFF1A\u60A8\u5DF2\u6B20\u8D39!\u8BF7<a href="/finance/#/finance/account/recharge">\u5145\u503C</a>\u540E\u8D2D\u4E70\n                        </span>\n                        <!-- /if -->\n                    </div>\n                </div>\n            </div>\n            <div id="orderConfirm" class="order-confirm-panel">\n                <div data-ui="id:orderAction;type:ActionPanel"></div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/order/CreateModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'er/events',
    'common/region',
    '../config',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _erEvents, _commonRegion, _config, _config2) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormModel);
    var _events = _babelRuntimeHelpersInteropRequireDefault['default'](_erEvents);
    var _R = _babelRuntimeHelpersInteropRequireDefault['default'](_commonRegion);
    var _config3 = _babelRuntimeHelpersInteropRequireDefault['default'](_config2);
    var CreateModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreateModel, _FormModel);
        function CreateModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateModel);
            _FormModel.apply(this, arguments);
        }
        CreateModel.prototype.getPrice = function getPrice(data) {
            return _config.api.getPrice(data, { 'X-silence': true });
        };
        CreateModel.prototype.load = function load() {
            if (this.get('region') && this.get('region') !== _R['default'].getCurrentRegion().id) {
                _config.api.setRegion({ regionId: this.get('region') }).then(function () {
                    _events['default'].fire('region_changed');
                    location.reload();
                });
            }
            return _FormModel.prototype.load.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](CreateModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        purchaseLenDatasource: function purchaseLenDatasource(model) {
                            return [
                                {
                                    name: '1\u4E2A\u6708',
                                    value: 1
                                },
                                {
                                    name: '2',
                                    value: 2
                                },
                                {
                                    name: '3',
                                    value: 3
                                },
                                {
                                    name: '4',
                                    value: 4
                                },
                                {
                                    name: '5',
                                    value: 5
                                },
                                {
                                    name: '6',
                                    value: 6
                                },
                                {
                                    name: '7',
                                    value: 7
                                },
                                {
                                    name: '8',
                                    value: 8
                                },
                                {
                                    name: '9',
                                    value: 9
                                },
                                {
                                    name: '1\u5E74',
                                    value: 12,
                                    hoverContent: _config3['default'].saleTip['12']
                                },
                                {
                                    name: '2\u5E74',
                                    value: 24,
                                    disable: true
                                },
                                {
                                    name: '3\u5E74',
                                    value: 36,
                                    disable: true
                                }
                            ];
                        },
                        overdueStatus: function overdueStatus(model) {
                            return _config.api.getOverdueStatus();
                        }
                    };
                }
            }]);
        return CreateModel;
    }(_FormModel2['default']);
    module.exports = CreateModel;
});
define('iot/order/CreateView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./create.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/FormView',
    'inf-ria/app/brpc',
    'common/util/moneyUtil',
    'common/region'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreateTplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcFormView, _infRiaAppBrpc, _commonUtilMoneyUtil, _commonRegion) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormView);
    var _brpc = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaAppBrpc);
    var _moneyUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilMoneyUtil);
    var _R = _babelRuntimeHelpersInteropRequireDefault['default'](_commonRegion);
    var buyBuckeyFields = [
        {
            title: '\u5730\u57DF\uFF1A',
            content: function content(item) {
                return _R['default'].getCurrentRegion().label;
            }
        },
        {
            title: '\u8D2D\u4E70\u89C4\u683C\uFF1A',
            content: function content(item) {
                if (!item.messagesNum) {
                    return '-';
                }
                return item.messagesNum + '\u767E\u4E07\u6761/\u6708';
            }
        },
        {
            title: '\u8D2D\u4E70\u65F6\u957F\uFF1A',
            content: function content(item) {
                if (!item.purchaseLength) {
                    return '-';
                }
                if (item.purchaseLength >= 12) {
                    var purchaseLength = item.purchaseLength / 12;
                    return purchaseLength + '\u5E74';
                }
                return item.purchaseLength + '\u4E2A\u6708';
            }
        },
        {
            title: '\u4EF7\u683C\uFF1A',
            content: function content(item) {
                if (item.loading) {
                    return '<span class="loading">\u52AA\u529B\u52A0\u8F7D\u4E2D...\u8BF7\u7A0D\u5019</span>';
                }
                var result = '';
                var price = item.discount < 100 ? _moneyUtil['default'].showMoney(item.originalPrice * item.discount / 100) : _moneyUtil['default'].showMoney(item.price);
                if (item.originalPrice !== price) {
                    var originalPrice = _moneyUtil['default'].showMoney(item.originalPrice);
                    result = '<span class="price">\uFFE5' + price + '</span>\n                        <br>\n                        <strike class="original-price">\u539F\u4EF7\uFF1A\uFFE5' + originalPrice + '</strike>';
                } else {
                    result = '<span class="price">\uFFE5' + price + '</span>';
                }
                return result;
            }
        }
    ];
    var CreateView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreateView, _FormView);
        function CreateView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateView);
            _FormView.apply(this, arguments);
        }
        CreateView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'buyBucket:confirm': function buyBucketConfirm(e) {
                    _this.fire('SUBMIT');
                    e.preventDefault();
                },
                'buyBucket:reset': function buyBucketReset(e) {
                    _this.fire('REFRESH');
                    e.preventDefault();
                },
                'messagesNum:change': function messagesNumChange(e) {
                    return _this.fire('MESSAGE_NUM_CHANGE');
                },
                'purchaseLength:change': function purchaseLengthChange(e) {
                    return _this.fire('PURCHASE_LENGTH_CHANGE');
                }
            };
        };
        CreateView.prototype.renderOrderConfig = function renderOrderConfig(order, config) {
            var panel = this.get('orderAction');
            var buyStep = this.get('buyStep');
            var actionOptions = {
                order: order,
                config: config
            };
            _brpc['default'].invokeService('billing://order_confirm', panel, actionOptions).then(function () {
                panel.on('action@prevPage', function () {
                    buyStep.set('currentStep', 1);
                    panel.disposeAction();
                    panel.innerHTML = '';
                });
                buyStep.set('currentStep', 2);
            });
        };
        CreateView.prototype.updateBuyBucket = function updateBuyBucket(data) {
            var _this2 = this;
            this.get('buyBucket').setValue({
                loading: true,
                messagesNum: data.messagesNum,
                purchaseLength: data.purchaseLength,
                productType: 'prepay'
            });
            this.get('buyBucket').disable();
            this.model.getPrice(data).then(function (e) {
                _this2.get('buyBucket').setValue({
                    loading: false,
                    messagesNum: data.messagesNum,
                    purchaseLength: data.purchaseLength,
                    productType: 'prepay',
                    price: e.price,
                    originalPrice: e.originalPrice,
                    discount: e.discount
                });
                if (!_this2.model.get('overdueStatus').pass) {
                    _this2.get('buyBucket').disable();
                } else {
                    _this2.get('buyBucket').enable();
                }
            });
        };
        CreateView.prototype.messagesNumSelected = function messagesNumSelected(value) {
            var lenDatasource = [];
            if (value === 1) {
                _u['default'].each(this.model.get('purchaseLenDatasource'), function (item, idx) {
                    if (item.value > 3) {
                        item.disable = true;
                    } else {
                        item.disable = false;
                    }
                    lenDatasource.push(item);
                });
                this.get('purchaseLength').setProperties({ selectedIndex: 2 });
            } else {
                _u['default'].each(this.model.get('purchaseLenDatasource'), function (item, idx) {
                    if (item.value > 12) {
                        item.disable = true;
                    } else {
                        item.disable = false;
                    }
                    lenDatasource.push(item);
                });
            }
            this.get('purchaseLength').setProperties({ datasource: lenDatasource });
            this.updateBuyBucket({
                messagesNum: value,
                purchaseLength: this.get('purchaseLength').getValue()
            });
        };
        CreateView.prototype.enterDocument = function enterDocument() {
            _FormView.prototype.enterDocument.call(this);
            if (this.model.has('free')) {
                this.get('messagesNum').setValue(1);
                this.messagesNumSelected(1);
            } else {
                this.get('messagesNum').setValue(2);
                this.messagesNumSelected(2);
            }
        };
        _babelRuntimeHelpersCreateClass['default'](CreateView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_hubbus_preorder';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        purchaseLength: {
                            datasource: '@purchaseLenDatasource',
                            selectedIndex: 0
                        },
                        messagesNum: {
                            min: 1,
                            max: 1000,
                            length: 350,
                            value: 1
                        },
                        buyBucket: {
                            fields: buyBuckeyFields,
                            disabled: true,
                            value: {},
                            offsetTop: 0,
                            confirmBtn: {
                                text: '\u4E0B\u4E00\u6B65',
                                skin: 'skin-primary-button'
                            }
                        }
                    };
                }
            }
        ]);
        return CreateView;
    }(_FormView2['default']);
    module.exports = CreateView;
});
define('iot/order/NewCreate', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'jquery',
    'inf-ria/mvc/FormAction',
    '../_public/util',
    './NewCreateModel',
    './NewCreateView',
    '../helper'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _underscore, _babelRuntimeHelpersInteropRequireDefault, _jquery, _infRiaMvcFormAction, _publicUtil, _NewCreateModel, _NewCreateView, _helper) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormAction);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_NewCreateModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_NewCreateView);
    var _helper2 = _babelRuntimeHelpersInteropRequireDefault['default'](_helper);
    var NewCreate = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](NewCreate, _FormAction);
        function NewCreate() {
            _babelRuntimeHelpersClassCallCheck['default'](this, NewCreate);
            _FormAction.apply(this, arguments);
        }
        NewCreate.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            this.view.on('PURCHASE_LENGTH_CHANGE', this.updatePurchaseLength, this);
            this.view.on('MESSAGE_NUM_CHANGE', this.updatePurchaseLength, this);
            this.view.on('RESOURCE_TYPE_CHANGE', this.updateResourceType, this);
            this.view.on('PRICING_PACKAGE_CHANGE', this.updatePricingPackage, this);
            this.view.on('UNICOM_CARDNUM_CHANGE', this.updateUnicomCardNum, this);
            this.view.on('REFRESH', this.refresh, this);
            this.view.on('SUBMIT', this.submitOrder, this);
            this.view.on('CLOSE_ICON', this.closeTip, this);
            if (this.model.has('free')) {
                this.redirectToHub();
                this.view.showNormalHub();
                this.view.messagesNumSelected(1);
                this.view.reRenderPricingPackage();
            } else if (this.model.has('unicom')) {
                this.view.initUnicom();
            } else {
                if (!this.model.has('hub')) {
                    this.view.reRenderPricingPackage();
                }
                this.redirectToHub();
                this.view.showNormalHub();
                this.view.get('messagesNum').setValue(2);
                this.view.messagesNumSelected(2);
            }
        };
        NewCreate.prototype.redirectToHub = function redirectToHub() {
            var _this = this;
            this.model.iotServiceStatus().then(function (data) {
                if (data.unicom) {
                    if (_this.model.has('free')) {
                        var resourceType = _this.model.get('resourceType').slice(0);
                        resourceType[1].disable = true;
                        _this.view.get('resourceType').setProperties({ datasource: resourceType });
                    } else {
                        _this.redirect('/iot/order/create~hub');
                    }
                }
            });
        };
        NewCreate.prototype.refresh = function refresh() {
            this.reload();
        };
        NewCreate.prototype.closeTip = function closeTip() {
            _$['default']('.guide').addClass('disappear');
            window.localStorage.setItem('popUnicomGuide', 1);
        };
        NewCreate.prototype.updatePurchaseLength = function updatePurchaseLength() {
            var msgNum = this.view.get('messagesNum').getValue();
            var resourceType = this.view.get('resourceType').getValue();
            if (resourceType === 2) {
                resourceType = 4;
            } else {
                if (msgNum === 1) {
                    resourceType = 1;
                } else {
                    resourceType = 2;
                }
            }
            this.view.messagesNumSelected(resourceType);
        };
        NewCreate.prototype.updateResourceType = function updateResourceType() {
            var buyBucket = this.view.get('buyBucket');
            var resourceType = this.view.get('resourceType').getValue();
            if (resourceType === 1) {
                this.view.showNormalHub();
                buyBucket.set('fields', this.view.getCommonFields());
                if (this.model.has('free')) {
                    this.view.get('messagesNum').setValue(1);
                    this.view.messagesNumSelected(1);
                } else {
                    this.view.get('messagesNum').setValue(2);
                    this.view.get('purchaseLength').setValue(1);
                    this.view.messagesNumSelected(2);
                }
            } else if (resourceType === 2) {
                buyBucket.set('fields', this.view.getUnicomFields());
                if (this.view.getTester()) {
                    this.view.showNormalUnicom();
                    this.view.get('pricingPackage').setValue(2);
                    this.view.get('messagesNum').setValue(1);
                    this.view.messagesNumSelected(4, true);
                } else {
                    this.view.showUnicom();
                    this.view.get('pricingPackage').setValue(1);
                    this.view.messagesNumSelected(3);
                }
            }
        };
        NewCreate.prototype.updatePricingPackage = function updatePricingPackage() {
            var pricingPackage = this.view.get('pricingPackage').getValue();
            if (pricingPackage === 1) {
                this.view.showUnicom();
                this.view.messagesNumSelected(3);
            } else {
                this.view.get('unicomCard').show();
                this.view.get('messages').show();
                this.view.get('messagesNum').setValue(1);
                this.view.get('unicomCardNum').setValue(1);
                this.view.messagesNumSelected(4, true);
            }
        };
        NewCreate.prototype.updateUnicomCardNum = function updateUnicomCardNum() {
            var formData = this.model.getSubmitData(this.view.getFormData());
            this.view.updateBuyBucket(formData);
        };
        NewCreate.prototype.getUnicomPostMsg = function getUnicomPostMsg(formData, newFormData) {
            var province = formData.area.province ? this.view.get('area').getChild('province').getSelectedItem().name : '';
            var city = formData.area.city ? this.view.get('area').getChild('city').getSelectedItem().name : '';
            var address = province + '-' + city + '-' + formData.address + '-' + formData.area.province + '-' + formData.area.city;
            return _u['default'].extend(newFormData, {
                consignee: formData.consignee,
                company: formData.company,
                phone: formData.phone,
                address: address
            });
        };
        NewCreate.prototype.submitOrder = function submitOrder() {
            if (this.view.get('resourceType').getValue() === 1) {
                this.submitData();
            } else {
                if (this.view.get('form').validate()) {
                    this.submitData();
                }
            }
        };
        NewCreate.prototype.submitData = function submitData() {
            var _this2 = this;
            var formData = this.model.getSubmitData(this.view.getFormData());
            var newFormData = this.view.get('resourceType').getValue() === 1 ? this.view.getCommonFormData(formData) : this.view.getUnicomFormData(formData);
            this.model.getPrice(newFormData).then(function (priceInfo) {
                newFormData = _this2.getUnicomPostMsg(formData, newFormData);
                var order = _this2.convertFormData2Order(newFormData, priceInfo);
                _this2.view.renderOrderConfig(order, newFormData);
            });
        };
        NewCreate.prototype.getConfInfo = function getConfInfo(formData) {
            var conf = '-';
            if (formData.type === 'COMMON') {
                conf = [formData.messagesNum + '\u767E\u4E07\u6761/\u6708'];
            } else {
                var pricingPackage = this.view.get('pricingPackage').getValue();
                if (pricingPackage === 1) {
                    pricingPackage = '1\u5143\u8BD5\u7528\u7248';
                } else if (pricingPackage === 2) {
                    pricingPackage = '\u5C0F\u578B\u8BBE\u5907\u7248';
                } else {
                    pricingPackage = '\u5927\u578B\u8BBE\u5907\u7248';
                }
                var unicomMessagesNum = formData.unicomMessagesNum;
                if (unicomMessagesNum < 1) {
                    unicomMessagesNum = unicomMessagesNum * 100 + '\u4E07\u6761/\u6708';
                } else {
                    unicomMessagesNum = unicomMessagesNum + '\u767E\u4E07\u6761/\u6708';
                }
                conf = [
                    '\u5957\u9910\u7C7B\u578B\uFF1A' + pricingPackage,
                    '\u7269\u8054\u7F51\u5361\u6570\uFF1A' + formData.unicomCardNum + '\u5F20',
                    '\u8D2D\u4E70\u89C4\u683C\uFF1A' + unicomMessagesNum
                ];
            }
            return conf;
        };
        NewCreate.prototype.convertFormData2Order = function convertFormData2Order(formData, priceInfo) {
            var unitPrice = _T['default'].formatMoney(priceInfo.unitPrice);
            var price = _T['default'].formatMoney(priceInfo.price);
            var isShowCoupon = _helper2['default'].isShowCoupon(formData.messagesNum, formData.purchaseLength);
            var config = {
                serviceType: 'IOT',
                productType: 'prepay',
                type: 'NEW',
                price: price,
                display: { coupon: isShowCoupon },
                items: [{
                        serviceType: 'IOT',
                        productType: 'prepay',
                        count: 1,
                        time: formData.purchaseLength,
                        timeUnit: 'MONTH',
                        price: price,
                        unitPrice: unitPrice,
                        unitPriceShow: '\u9636\u68AF\u5B9A\u4EF7',
                        chargeType: ['cpt2'],
                        configuration: this.getConfInfo(formData)
                    }]
            };
            return config;
        };
        _babelRuntimeHelpersCreateClass['default'](NewCreate, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return NewCreate;
    }(_FormAction2['default']);
    module.exports = NewCreate;
});
define('iot/order/newCreate.tpl', [], function () {
    return '<!-- target: TPL_iot_new_hubbus_preorder -->\n<div class="iot-new-preorder-wrap main-wrap-new">\n\n    <!-- import: TPL_inf_ria_page_breadcrumb -->\n        <!-- block: back_link -->#/iot/endpoint/list<!-- /block -->\n        <!-- block: text_content_wrapper -->\n            ${i18n.\u521B\u5EFA\u5957\u9910}\n        <!-- /block -->\n        <!-- block: create_step -->\n            <div data-ui-type="ViewStep"\n                data-ui-id="buyStep"\n                data-ui-current-step="1">\n                <ul>\n                    <li bind-for="buyIot">${i18n.\u9009\u62E9\u8BA1\u8D39\u5957\u9910}</li>\n                    <li bind-for="orderConfirm">${i18n.\u786E\u8BA4\u8BA2\u5355}</li>\n                    <li>${i18n.\u5728\u7EBF\u652F\u4ED8}</li>\n                    <li>${i18n.\u652F\u4ED8\u6210\u529F}</li>\n                </ul>\n            </div>\n        <!-- /block -->\n    <!-- /import -->\n    <div class="content-wrap">\n        <div class="create-content create-content-wrapper">\n            <div id="buyIot">\n                <div class="create-main ui-tab-content">\n                    <div class="detail-parts-table">\n                        <form class="create-database-form" data-ui-type="Form" data-ui-id="form">\n                            <div data-ui-id="buyBucket" data-ui-type="BuyBucket"></div>\n                            <dl class="detail-part-1-col detail-create config-info">\n                                <dt>\n                                    <h4><span>\u7269\u63A5\u5165\u914D\u7F6E\u4FE1\u606F</span></h4>\n                                </dt>\n                                <dd class="guide-line">\n                                    <label>\u8D44\u6E90\u7C7B\u578B\uFF1A</label>\n                                    <div class="form-value">\n                                        <div data-ui-id="resourceType"\n                                            data-ui-name="resourceType"\n                                            data-ui-type="RadioSelect"\n                                            class="resource-type">\n                                        </div>\n                                        <span data-ui-type="Tip" class="resource-tip">\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09\u5185\u542B\u767E\u5EA6\u4E91\u5929\u5DE5\u548C\u8054\u901A\u5408\u4F5C\u63A8\u51FA\u7684\u5929\u5DE5\u7269\u8054\u7F51\u5361\uFF0C\u4EE5\u53CA\u5B9A\u5411\u5230\u5929\u5DE5\u7684\u7269\u63A5\u5165\u6D88\u606F\u3002\u8BE6\u60C5\u53EF\u89C1<a href="https://cloud.baidu.com/doc/IOT/ProductDescription.html#.06.09.DD.B5.AB.B2.4F.4C.47.47.10.2D.BE.97.FC.BB">\u4EA7\u54C1\u6587\u6863</a>\u3002</span>\n                                    </div>\n                                    <!-- if: !${resourceType[1].disable} && ${ifGuide} -->\n                                    <div class="ui-radio-block guide">\n                                        <div class="ui-radio-item-hover">\u65B0\u6B3E\u8BA1\u8D39\u65B9\u5F0F\uFF0C\u6B22\u8FCE\u4F7F\u7528\n                                            <esui-button class="ui-dialog-close-icon" data-ui-id="closeIcon">&nbsp;</esui-button>\n                                        </div>\n                                        <div class="arrow-down"><i></i></div>\n                                    </div>\n                                    <!-- /if -->\n                                </dd>\n                                <dd><!-- import: TPL_common_partial_create_current_region --></dd>\n                                <dd data-ui-type="Panel" data-ui-id="unicomChoice">\n                                    <label>\u5957\u9910\u7C7B\u578B\uFF1A</label>\n                                    <div class="form-value">\n                                        <div data-ui-id="pricingPackage"\n                                             data-ui-name="pricingPackage"\n                                             data-ui-type="RadioSelect"\n                                             class="pricing-pakage">\n                                        </div>\n                                    </div>\n                                </dd>\n                                 <dd data-ui-type="Panel" data-ui-id="unicomCard" class="cardNum">\n                                    <label>\u7269\u8054\u7F51\u5361\u6570\uFF1A</label>\n                                    <div data-ui-type="TextBox"\n                                         data-ui-name="unicomCardNum"\n                                         data-ui-id="unicomCardNum"\n                                         class="unicomCardNum">\n                                    </div>\n                                    <span class="unit">\u5F20</span>\n                                </dd>\n                                <dd data-ui-type="Panel" data-ui-id="messages">\n                                    <label>\u8D2D\u4E70\u89C4\u683C\uFF1A</label>\n                                    <div data-ui-type="Panel"\n                                         data-ui-id="messagesNumPanel"\n                                         class="package-list">\n                                        <div class="detail-cell package">\n                                            <div data-ui-id="messagesNum"\n                                                 data-ui-name="messagesNum"\n                                                 data-ui-datasource="@messagesNum"\n                                                 data-ui-type="Dragger"\n                                                 class="messagesNum">\n                                            </div>\n                                        </div>\n                                        <span class="unit">\u767E\u4E07\u6761/\u6708</span>\n                                    </div>\n                                </dd>\n                            </dl>\n                            <dl class="detail-part-1-col detail-create">\n                                <dt>\n                                    <h4><span>\u8D2D\u4E70\u4FE1\u606F</span></h4>\n                                </dt>\n                                <dd data-ui-type="Panel" data-ui-id="panelPurchaseLength" class="form-row">\n                                    <label>\u8D2D\u4E70\u65F6\u957F\uFF1A</label>\n                                    <div class="form-value">\n                                        <div data-ui-id="purchaseLength" data-ui-name="purchaseLength"\n                                             data-ui-type="RadioSelect" class="ui-radioselect-pl"></div>\n                                    </div>\n                                </dd>\n                                <div class="free-notice"\n                                     data-ui-id="freeNotice"\n                                     data-ui-type="ToastLabel"\n                                     data-ui-message-type="alert"\n                                     tip-message="\u514D\u8D39">\u6BCF\u6708\u524D\u4E00\u767E\u4E07\u6761\u514D\u8D39\u3002\u5982\u679C\u8D85\u8FC7\u514D\u8D39\u989D\u5EA6\uFF0C\u6211\u4EEC\u5C06\u4F1A\u6536\u53D6\u76F8\u5E94\u8D39\u7528\u3002</div>\n                                <!-- if: !${overdueStatus.pass} -->\n                                <span class="tip-red overdue-notice">\n                                    \u6E29\u99A8\u63D0\u793A\uFF1A\u60A8\u5DF2\u6B20\u8D39!\u8BF7<a href="/finance/#/finance/account/recharge">\u5145\u503C</a>\u540E\u8D2D\u4E70\n                                </span>\n                                <!-- /if -->\n                            </dl>\n                            <dl class="detail-part-1-col detail-create delivery-info" data-ui-type="Panel" data-ui-id="deliveryInfo">\n                                <dt>\n                                    <h4><span>\u6536\u8D27\u4FE1\u606F</span></h4>\n                                </dt>\n                                <dd class="form-row">\n                                    <label><i>*</i>\u6536\u8D27\u4EBA\u59D3\u540D\uFF1A</label>\n                                    <div class="form-value">\n                                        <div data-ui-type="TextBox"\n                                             data-ui-name="consignee"\n                                             data-ui-id="consignee"></div>\n                                    </div>\n                                </dd>\n                                <dd class="form-row">\n                                    <label><i>*</i>\u516C\u53F8\u540D\u79F0\uFF1A</label>\n                                    <div class="form-value">\n                                        <div data-ui-type="TextBox"\n                                             data-ui-name="company"\n                                             data-ui-id="company"></div>\n                                    </div>\n                                </dd>\n                                <dd class="form-row">\n                                    <label><i>*</i>\u8054\u7CFB\u7535\u8BDD\uFF1A</label>\n                                    <div class="form-value">\n                                        <div data-ui-type="TextBox"\n                                             data-ui-name="phone"\n                                             data-ui-id="phone"></div>\n                                    </div>\n                                </dd>\n                                <dd class="form-row">\n                                    <label><i>*</i>\u6536\u8D27\u5730\u5740\uFF1A</label>\n                                    <div class="form-value region-form-row">\n                                        <div data-ui="id:area;type:RegionSelect;name:area"></div>\n                                        <label data-ui-type="Validity"\n                                            data-ui-id="areaValidity"></label>\n                                    </div>\n                                    <div class="form-value">\n                                        <div data-ui-type="TextBox"\n                                            data-ui-name="address"\n                                            data-ui-id="address"\n                                            data-ui-mode="textarea"></div>\n                                    </div>\n                                </dd>\n                                <dd class="tip-grey">\n                                    \u6E29\u99A8\u63D0\u793A<br/>\n                                    1. \u8D2D\u4E70\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09\u5957\u9910\u540E\uFF0C\u5957\u9910\u5185\u7684\u5929\u5DE5\u7269\u8054\u5361\u914D\u9001\u7269\u6D41\u4E3A<b class="extra">\u987A\u4E30</b>\uFF0C\u4ED8\u6B3E\u65B9\u5F0F\u4E3A<b class="extra italic">\u5230\u4ED8\uFF0C\u90AE\u8D39\u7528\u6237\u81EA\u7406\uFF0820\u5143\u5DE6\u53F3\uFF09\u3002</b><br/>\n                                    2. \u7269\u63A5\u5165\uFF08SIM\u7248\uFF09\u5957\u9910\u5185\u542B\u8054\u901A\u7269\u8054\u7F51\u5361\uFF0C\u662F\u767E\u5EA6\u4E91\u5929\u5DE5\u548C\u8054\u901A\u5408\u4F5C\u63A8\u51FA\u7684\u5929\u5DE5\u7269\u8054\u5361\uFF0C\u8BE5\u5361\u7684\u6D88\u606F\u4EC5\u652F\u6301\u7528\u4E8E\u5929\u5DE5\u7684\u7269\u63A5\u5165SIM\u7248\uFF0C\u540C\u65F6\u5BF9\u4E8E\u5929\u5DE5\u4EA7\u54C1\u4F53\u7CFB\u5185\u7269\u7BA1\u7406\u3001\u7269\u89E3\u6790\u3001\u89C4\u5219\u5F15\u64CE\u76EE\u524D\u4E0D\u652F\u6301\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09\uFF0C\u5982\u9700\u8981\u4F7F\u7528\u8BF7\u8D2D\u4E70\u7269\u63A5\u5165\u8D44\u6E90\u3002<br/>\n                                    3. \u5929\u5DE5\u7269\u8054\u5361\u914D\u9001\u3001\u552E\u540E\u3001\u9000\u6362\u8D27\u7B49\u76F8\u5173\u670D\u52A1\u5747\u7531\u6DF1\u5733\u6C49\u8BAF\u4FE1\u606F\u6280\u672F\u6709\u9650\u516C\u53F8\u63D0\u4F9B\u5E76\u8D1F\u8D23\u3002<br/>\n                                    4. \u7269\u63A5\u5165\uFF08SIM\u7248\uFF09\u5185\u542B\u7684\u5929\u5DE5\u7269\u5361\u662F\u8054\u901A\u666E\u901A\u7269\u8054\u7F51SIM\u5361\uFF0C\u82E5\u9700\u8D34\u7247\u5F0F\u5DE5\u4E1A\u7EA7SIM\u5361\u6216\u63D2\u5361\u5F0FSIM\u5361\u8BF7\u63D0\u5DE5\u5355\u53CD\u9988\u3002<br/>\n                                    5. \u5176\u4ED6\u7279\u6B8A\u60C5\u51B5\u8BF7\u63D0\u5DE5\u5355\u53CD\u9988\u5904\u7406\u3002\n                                </dd>\n                            </dl>\n                        </form>\n                    </div>\n                </div>\n            </div>\n            <div id="orderConfirm" class="order-confirm-panel">\n                <div data-ui="id:orderAction;type:ActionPanel"></div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/order/NewCreateModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'er/events',
    'common/config',
    'common/region',
    '../config',
    './config',
    '../_public/regions'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _erEvents, _commonConfig, _commonRegion, _config, _config2, _publicRegions) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormModel);
    var _events = _babelRuntimeHelpersInteropRequireDefault['default'](_erEvents);
    var _commonConfig2 = _babelRuntimeHelpersInteropRequireDefault['default'](_commonConfig);
    var _R = _babelRuntimeHelpersInteropRequireDefault['default'](_commonRegion);
    var _config3 = _babelRuntimeHelpersInteropRequireDefault['default'](_config2);
    var _regions = _babelRuntimeHelpersInteropRequireDefault['default'](_publicRegions);
    var storage = window.localStorage;
    var NewCreateModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](NewCreateModel, _FormModel);
        function NewCreateModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, NewCreateModel);
            _FormModel.apply(this, arguments);
        }
        NewCreateModel.prototype.getPricingPackage = function getPricingPackage() {
            var pricingPackage = [
                {
                    name: '<span data-index="0">1\u5143\u8BD5\u7528\u7248</span><span class="free">HOT</span><hr/>' + '<p data-index="0">\u5361\u6570\uFF1A3\u5F20\uFF08\u7269\u8054\u7F51\u5361\uFF09<br/>\u6D88\u606F\u6570\uFF1A10\u4E07\u6761\u6D88\u606F/\u6708<br/>\u6D88\u606F\u957F\u5EA6\uFF1A\u4F4E\u4E8E128\u5B57\u8282<br/>\u65F6\u957F\uFF1A3\u4E2A\u6708</p>',
                    value: 1,
                    hoverContent: _config3['default'].saleTip['2']
                },
                {
                    name: '<span data-index="1">\u5C0F\u578B\u8BBE\u5907\u7248</span><hr/>' + '<p data-index="1">\u5361\u670D\u52A1\u8D39\uFF1A1\u5143/\u5361/\u6708<br/>\u6D88\u606F\u6570\uFF1A100\u4E07\u6761\u6D88\u606F/15\u5143/\u6708<br/>\u6D88\u606F\u957F\u5EA6\uFF1A\u4F4E\u4E8E128\u5B57\u8282</p>',
                    value: 2
                },
                {
                    name: '<span data-index="2">\u5927\u578B\u8BBE\u5907\u7248</span><hr/>' + '<p data-index="2">\u5361\u670D\u52A1\u8D39\uFF1A1\u5143/\u5361/\u6708<br/>\u6D88\u606F\u6570\uFF1A100\u4E07\u6761\u6D88\u606F/35\u5143/\u6708<br/>\u6D88\u606F\u957F\u5EA6\uFF1A\u4F4E\u4E8E512\u5B57\u8282</p>',
                    value: 3
                }
            ];
            return pricingPackage;
        };
        NewCreateModel.prototype.iotServiceStatus = function iotServiceStatus() {
            return _commonConfig2['default'].api.iotServiceStatus();
        };
        NewCreateModel.prototype.getUnicomTester = function getUnicomTester() {
            return _config.api.getUnicomTester();
        };
        NewCreateModel.prototype.getPrice = function getPrice(data) {
            return _config.api.getPrice(data, { 'X-silence': true });
        };
        NewCreateModel.prototype.load = function load() {
            if (this.get('region') && this.get('region') !== _R['default'].getCurrentRegion().id) {
                _config.api.setRegion({ regionId: this.get('region') }).then(function () {
                    _events['default'].fire('region_changed');
                    location.reload();
                });
            }
            return _FormModel.prototype.load.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](NewCreateModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        purchaseLenDatasource: function purchaseLenDatasource(model) {
                            return [
                                {
                                    name: '1\u4E2A\u6708',
                                    value: 1
                                },
                                {
                                    name: '2',
                                    value: 2
                                },
                                {
                                    name: '3',
                                    value: 3
                                },
                                {
                                    name: '4',
                                    value: 4
                                },
                                {
                                    name: '5',
                                    value: 5
                                },
                                {
                                    name: '6',
                                    value: 6
                                },
                                {
                                    name: '7',
                                    value: 7
                                },
                                {
                                    name: '8',
                                    value: 8
                                },
                                {
                                    name: '9',
                                    value: 9
                                },
                                {
                                    name: '1\u5E74',
                                    value: 12,
                                    hoverContent: _config3['default'].saleTip['12']
                                },
                                {
                                    name: '2\u5E74',
                                    value: 24,
                                    disable: true
                                },
                                {
                                    name: '3\u5E74',
                                    value: 36,
                                    disable: true
                                }
                            ];
                        },
                        resourceType: function resourceType(model) {
                            var source = [
                                {
                                    name: '\u7269\u63A5\u5165',
                                    value: 1
                                },
                                {
                                    name: '\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09',
                                    value: 2
                                }
                            ];
                            if (model.has('unicom')) {
                                source[0].disable = true;
                            } else if (model.has('hub')) {
                                source[1].disable = true;
                            }
                            return source;
                        },
                        area: function area(model) {
                            return {
                                country: '086',
                                province: '',
                                city: ''
                            };
                        },
                        areaSource: function areaSource(model) {
                            return _regions['default'];
                        },
                        overdueStatus: function overdueStatus(model) {
                            return _config.api.getOverdueStatus();
                        },
                        ifGuide: function ifGuide(model) {
                            if (!storage.getItem('popUnicomGuide')) {
                                return true;
                            } else {
                                return false;
                            }
                        }
                    };
                }
            }]);
        return NewCreateModel;
    }(_FormModel2['default']);
    module.exports = NewCreateModel;
});
define('iot/order/NewCreateView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./newCreate.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/FormView',
    'inf-ria/app/brpc',
    'common/util/moneyUtil',
    'common/region',
    '../_public/util',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplNewCreateTplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcFormView, _infRiaAppBrpc, _commonUtilMoneyUtil, _commonRegion, _publicUtil, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormView);
    var _brpc = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaAppBrpc);
    var _moneyUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilMoneyUtil);
    var _R = _babelRuntimeHelpersInteropRequireDefault['default'](_commonRegion);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    var tester = false;
    var buyBuckeyFieldsRegion = {
        title: '\u5730\u57DF\uFF1A',
        content: function content(item) {
            return _R['default'].getCurrentRegion().label;
        }
    };
    var buyBuckeyFieldsMessagesNum = {
        title: '\u8D2D\u4E70\u89C4\u683C\uFF1A',
        content: function content(item) {
            if (!item.messagesNum) {
                return '-';
            }
            return item.messagesNum + '\u767E\u4E07\u6761/\u6708';
        }
    };
    var buyBuckeyFieldsUnicomMessagesNum = {
        title: '\u8D2D\u4E70\u89C4\u683C\uFF1A',
        content: function content(item) {
            if (!item.unicomMessagesNum) {
                return '-';
            } else if (item.unicomMessagesNum < 1) {
                return item.unicomMessagesNum * 100 + '\u4E07\u6761/\u6708';
            }
            return item.unicomMessagesNum + '\u767E\u4E07\u6761/\u6708';
        }
    };
    var buyBuckeyFieldsPurchaseLength = {
        title: '\u8D2D\u4E70\u65F6\u957F\uFF1A',
        content: function content(item) {
            if (!item.purchaseLength) {
                return '-';
            }
            if (item.purchaseLength >= 12) {
                var purchaseLength = item.purchaseLength / 12;
                return purchaseLength + '\u5E74';
            }
            return item.purchaseLength + '\u4E2A\u6708';
        }
    };
    var buyBuckeyFieldsPricingPackage = {
        title: '\u5957\u9910\u7C7B\u578B\uFF1A',
        content: function content(item) {
            if (!item.pricingPackage) {
                return '-';
            }
            if (item.pricingPackage === 2) {
                return '\u5C0F\u578B\u8BBE\u5907\u7248';
            } else if (item.pricingPackage === 3) {
                return '\u5927\u578B\u8BBE\u5907\u7248';
            }
            return '1\u5143\u8BD5\u7528\u7248';
        }
    };
    var buyBuckeyFieldsUnicomCardNum = {
        title: '\u7269\u8054\u7F51\u5361\u6570\uFF1A',
        content: function content(item) {
            if (!item.unicomCardNum) {
                return '3\u5F20';
            }
            return item.unicomCardNum + '\u5F20';
        }
    };
    var buyBuckeyFieldsPrice = {
        title: '\u4EF7\u683C\uFF1A',
        content: function content(item) {
            if (item.loading) {
                return '<span class="loading">\u52AA\u529B\u52A0\u8F7D\u4E2D...\u8BF7\u7A0D\u5019</span>';
            }
            var result = '';
            var price = item.discount < 100 ? _moneyUtil['default'].showMoney(item.originalPrice * item.discount / 100) : _moneyUtil['default'].showMoney(item.price);
            if (item.originalPrice !== price) {
                var originalPrice = _moneyUtil['default'].showMoney(item.originalPrice);
                result = '<span class="price">\uFFE5' + price + '</span>\n                    <br>\n                    <strike class="original-price">\u539F\u4EF7\uFF1A\uFFE5' + originalPrice + '</strike>';
            } else {
                result = '<span class="price">\uFFE5' + price + '</span>';
            }
            return result;
        }
    };
    var NewCreateView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](NewCreateView, _FormView);
        function NewCreateView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, NewCreateView);
            _FormView.apply(this, arguments);
        }
        NewCreateView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'buyBucket:confirm': function buyBucketConfirm(e) {
                    _this.fire('SUBMIT');
                    e.preventDefault();
                },
                'buyBucket:reset': function buyBucketReset(e) {
                    _this.fire('REFRESH');
                    e.preventDefault();
                },
                'messagesNum:change': function messagesNumChange(e) {
                    return _this.fire('MESSAGE_NUM_CHANGE');
                },
                'purchaseLength:change': function purchaseLengthChange(e) {
                    return _this.fire('PURCHASE_LENGTH_CHANGE');
                },
                'resourceType:change': function resourceTypeChange(e) {
                    return _this.fire('RESOURCE_TYPE_CHANGE');
                },
                'pricingPackage:change': function pricingPackageChange(e) {
                    return _this.fire('PRICING_PACKAGE_CHANGE');
                },
                'unicomCardNum:input': function unicomCardNumInput(e) {
                    return _this.fire('UNICOM_CARDNUM_CHANGE');
                },
                'closeIcon:click': function closeIconClick(e) {
                    return _this.fire('CLOSE_ICON', e);
                }
            };
        };
        NewCreateView.prototype.getUIProperties = function getUIProperties() {
            return {
                resourceType: {
                    datasource: '@resourceType',
                    selectedIndex: 0
                },
                pricingPackage: {
                    datasource: this.model.getPricingPackage(),
                    selectedIndex: 0
                },
                messagesNum: {
                    min: 1,
                    max: 1000,
                    length: 350,
                    value: 1
                },
                purchaseLength: {
                    datasource: '@purchaseLenDatasource',
                    selectedIndex: 0
                },
                unicomCardNum: {
                    width: 60,
                    placeholder: '1',
                    value: 1,
                    pattern: /^\+?[1-9][0-9]*$/
                },
                consignee: {
                    width: 275,
                    placeholder: '\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA',
                    required: 'required'
                },
                company: {
                    width: 275,
                    placeholder: '\u8BF7\u8F93\u5165\u516C\u53F8\u540D\u79F0',
                    required: 'required'
                },
                phone: {
                    width: 275,
                    required: 'required',
                    placeholder: '\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD',
                    pattern: /(^(1(3|4|5|7|8)\d{9})?$)|(^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$)/,
                    patternErrorMessage: '\u60A8\u8F93\u5165\u7684\u8054\u7CFB\u7535\u8BDD\u683C\u5F0F\u4E0D\u6B63\u786E'
                },
                area: {
                    datasource: '@areaSource',
                    required: true,
                    value: '@area',
                    validityLabel: 'areaValidity',
                    extensions: _T['default'].autoValidateExt
                },
                address: {
                    width: 275,
                    height: 58,
                    required: 'required',
                    placeholder: '\u8BF7\u8F93\u5165\u8BE6\u7EC6\u6536\u8D27\u5730\u5740',
                    pattern: /^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,
                    patternErrorMessage: '\u8BF7\u8F93\u5165\u5408\u6CD5\u7684\u4E2D\u82F1\u6587\u5B57\u7B26'
                },
                buyBucket: {
                    fields: this.getCommonFields(),
                    disabled: true,
                    value: {},
                    offsetTop: 0,
                    confirmBtn: {
                        text: '\u4E0B\u4E00\u6B65',
                        skin: 'skin-primary-button'
                    }
                }
            };
        };
        NewCreateView.prototype.getCommonFields = function getCommonFields() {
            return [
                buyBuckeyFieldsRegion,
                buyBuckeyFieldsMessagesNum,
                buyBuckeyFieldsPurchaseLength,
                buyBuckeyFieldsPrice
            ];
        };
        NewCreateView.prototype.getUnicomFields = function getUnicomFields() {
            return [
                buyBuckeyFieldsRegion,
                buyBuckeyFieldsPricingPackage,
                buyBuckeyFieldsUnicomCardNum,
                buyBuckeyFieldsUnicomMessagesNum,
                buyBuckeyFieldsPurchaseLength,
                buyBuckeyFieldsPrice
            ];
        };
        NewCreateView.prototype.getTester = function getTester() {
            return tester;
        };
        NewCreateView.prototype.renderOrderConfig = function renderOrderConfig(order, config) {
            var panel = this.get('orderAction');
            var buyStep = this.get('buyStep');
            var actionOptions = {
                order: order,
                config: config
            };
            _brpc['default'].invokeService('billing://order_confirm', panel, actionOptions).then(function () {
                panel.on('action@prevPage', function () {
                    buyStep.set('currentStep', 1);
                    panel.disposeAction();
                    panel.innerHTML = '';
                });
                buyStep.set('currentStep', 2);
            });
        };
        NewCreateView.prototype.getCommonFormData = function getCommonFormData(formData) {
            return {
                messagesNum: formData.messagesNum,
                purchaseLength: formData.purchaseLength,
                type: 'COMMON'
            };
        };
        NewCreateView.prototype.getUnicomFormData = function getUnicomFormData(formData) {
            var pricingPackage = formData.pricingPackage;
            var unicomCardNum = 3;
            var tester = true;
            var unicomMessageByte = 128;
            var unicomMessagesNum = 0.1;
            if (pricingPackage !== 1) {
                tester = false;
                unicomMessageByte = pricingPackage === 3 ? 512 : unicomMessageByte;
                unicomMessagesNum = formData.messagesNum;
                unicomCardNum = formData.unicomCardNum ? parseInt(formData.unicomCardNum, 10) : 1;
            }
            return {
                purchaseLength: formData.purchaseLength,
                type: 'CHINA_UNICOM',
                tester: tester,
                unicomCardNum: unicomCardNum,
                unicomMessageByte: unicomMessageByte,
                unicomMessagesNum: unicomMessagesNum
            };
        };
        NewCreateView.prototype.updateBuyBucket = function updateBuyBucket(data) {
            var _this2 = this;
            var isCommon = data.resourceType === 1;
            var formData = isCommon ? this.getCommonFormData(data) : this.getUnicomFormData(data);
            this.get('buyBucket').setValue(_u['default'].extend({
                loading: true,
                productType: 'prepay',
                pricingPackage: data.pricingPackage
            }, formData));
            this.get('buyBucket').disable();
            this.model.getPrice(formData).then(function (e) {
                _this2.get('buyBucket').setValue(_u['default'].extend({
                    loading: false,
                    productType: 'prepay',
                    price: e.price,
                    originalPrice: e.originalPrice,
                    discount: e.discount,
                    pricingPackage: data.pricingPackage
                }, formData));
                if (!_this2.model.get('overdueStatus').pass) {
                    _this2.get('buyBucket').disable();
                } else {
                    _this2.get('buyBucket').enable();
                }
            });
        };
        NewCreateView.prototype.messagesNumSelected = function messagesNumSelected(value, notChosed) {
            var lenDatasource = [];
            _u['default'].each(this.model.get('purchaseLenDatasource'), function (item, idx) {
                if (item.value > 12 || (value === 1 || value === 3) && item.value > 3 || (value === 3 || value === 4) && item.value < 3) {
                    item.disable = true;
                } else {
                    item.disable = false;
                }
                lenDatasource.push(item);
            });
            this.get('purchaseLength').setProperties({ datasource: lenDatasource });
            if (value === 1 || value === 3 || notChosed) {
                this.get('purchaseLength').setProperties({ selectedIndex: 2 });
            }
            var messagesNum = value === 3 ? 0.1 : this.get('messagesNum').getValue();
            var formData = this.getFormData();
            this.updateBuyBucket(_u['default'].extend(formData, { messagesNum: messagesNum }));
        };
        NewCreateView.prototype.initUnicomCommon = function initUnicomCommon() {
            this.showNormalUnicom();
            this.get('pricingPackage').setValue(2);
            this.messagesNumSelected(4, true);
            this.get('buyBucket').setValue(this.getFormData());
        };
        NewCreateView.prototype.initUnicomTester = function initUnicomTester() {
            this.showUnicom();
            this.messagesNumSelected(3);
            this.get('buyBucket').setValue(this.getFormData());
        };
        NewCreateView.prototype.reRenderPricingPackage = function reRenderPricingPackage(unicom) {
            var _this3 = this;
            this.model.getUnicomTester().then(function (data) {
                if (data.full || data.boughtBefore) {
                    var pricingPackage = _this3.model.getPricingPackage();
                    pricingPackage[0].disable = true;
                    pricingPackage[0].name = '<span data-index="0">1\u5143\u8BD5\u7528\u7248</span><hr/>' + '<p data-index="0">\u5361\u6570\uFF1A3\u5F20\uFF08\u7269\u8054\u7F51\u5361\uFF09<br/>\u6D88\u606F\u6570\uFF1A10\u4E07\u6761\u6D88\u606F/\u6708<br/>\u6D88\u606F\u957F\u5EA6\uFF1A\u4F4E\u4E8E128\u5B57\u8282<br/>\u65F6\u957F\uFF1A3\u4E2A\u6708</p>';
                    if (data.full) {
                        pricingPackage[0].hoverContent = _config2['default'].saleTip['3'];
                    }
                    if (data.boughtBefore) {
                        pricingPackage[0].hoverContent = _config2['default'].saleTip['4'];
                    }
                    _this3.get('pricingPackage').setProperties({ datasource: pricingPackage });
                    tester = true;
                    if (unicom) {
                        _this3.initUnicomCommon();
                    }
                } else {
                    if (unicom) {
                        _this3.initUnicomTester();
                    }
                }
            });
        };
        NewCreateView.prototype.initUnicom = function initUnicom() {
            this.get('resourceType').setValue(2);
            this.get('buyBucket').set('fields', this.getUnicomFields());
            this.reRenderPricingPackage(true);
        };
        NewCreateView.prototype.showNormalHub = function showNormalHub() {
            this.get('unicomChoice').hide();
            this.get('unicomCard').hide();
            this.get('deliveryInfo').hide();
            this.get('messages').show();
            this.get('freeNotice').show();
        };
        NewCreateView.prototype.showUnicom = function showUnicom() {
            this.get('unicomChoice').show();
            this.get('unicomCard').hide();
            this.get('deliveryInfo').show();
            this.get('messages').hide();
            this.get('freeNotice').hide();
        };
        NewCreateView.prototype.showNormalUnicom = function showNormalUnicom() {
            this.get('unicomChoice').show();
            this.get('unicomCard').show();
            this.get('deliveryInfo').show();
            this.get('messages').show();
            this.get('freeNotice').hide();
        };
        _babelRuntimeHelpersCreateClass['default'](NewCreateView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_new_hubbus_preorder';
                }
            }]);
        return NewCreateView;
    }(_FormView2['default']);
    module.exports = NewCreateView;
});
define('iot/order/NewNotify', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    '../events',
    '../operations',
    './NewNotifyModel',
    './NewNotifyView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _events, _operations, _NewNotifyModel, _NewNotifyView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_NewNotifyModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_NewNotifyView);
    var NewNotify = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](NewNotify, _BaseAction);
        function NewNotify() {
            _babelRuntimeHelpersClassCallCheck['default'](this, NewNotify);
            _BaseAction.apply(this, arguments);
        }
        NewNotify.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('CREATE_FREE', this.createFree, this);
            this.view.on('CREATE', this.createPackage, this);
            this.view.on(_EVENTS['default'].START_TURNKEY, _operations2['default'].startTurnkey, this);
        };
        NewNotify.prototype.createFree = function createFree() {
            this.redirect('/iot/order/create~free');
        };
        NewNotify.prototype.createPackage = function createPackage() {
            this.redirect('/iot/order/create');
        };
        _babelRuntimeHelpersCreateClass['default'](NewNotify, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return NewNotify;
    }(_BaseAction2['default']);
    module.exports = NewNotify;
});
define('iot/order/newNotify.tpl', [], function () {
    return '<!-- target: TPL_iot_charge_new_notify -->\n<div class="iot-order-new-notify main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <span class="active">\u7269\u63A5\u5165IoT Hub</span>\n        </p>\n        <div class="list-content main-view">\n            <!-- if: ${realName.status} !== \'PASS\' -->\n            <h2 class="top-tip">\n                <span class="tip-yellow">\u4E3A\u4FDD\u8BC1\u5B89\u5168\uFF0C\u521B\u5EFA\u65B0\u5B9E\u4F8B\u9700\u8981\u5B9E\u540D\u8BA4\u8BC1\uFF0C\u5DF2\u7ECF\u521B\u5EFA\u7684\u5B9E\u4F8B\u4ECD\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\u4E0D\u53D7\u5F71\u54CD\u3002<a href="/qualify/#/qualify/index" target="_blank">\u7ACB\u5373\u53BB\u8BA4\u8BC1</a></span>\n            </h2>\n            <!-- /if -->\n            <h2 class="no-bottom-border">\u7269\u63A5\u5165\u7B80\u4ECB</h2>\n            <div class="main-content">\n                <div class="description">\n                    \u7269\u63A5\u5165\uFF08IoT Hub\uFF09\u662F\u4E00\u4E2A\u5168\u6258\u7BA1\u7684\u4E91\u670D\u52A1\uFF0C\u5E2E\u52A9\u5EFA\u7ACB\u8BBE\u5907\u4E0E\u4E91\u7AEF\u4E4B\u95F4\u5B89\u5168\u53EF\u9760\u7684\u53CC\u5411\u8FDE\u63A5\uFF0C\u4EE5\u652F\u6491\u6D77\u91CF\u8BBE\u5907\u7684\u6570\u636E\u6536\u96C6\u3001\u76D1\u63A7\u3001\u6545\u969C\u9884\u6D4B\u7B49\u5404\u79CD\u7269\u8054\u7F51\u573A\u666F\u3002\n                </div>\n                <div class="operation-wrap" data-follow-thead="table">\n                    <div class="buttons-wrap">\n                        <button data-ui-id="createPackage"\n                                data-ui-type="Button"\n                                data-ui-skin="create"\n                                <!-- if: ${realName.status} !== \'PASS\' -->\n                                data-ui-disabled="disabled"\n                                <!-- /if -->>\u521B\u5EFA\u8BA1\u8D39\u5957\u9910</button>\n                        <button data-ui-id="createFreePackage" data-ui-type="Button" <!-- if: ${realName.status} !== \'PASS\' -->\n                                data-ui-disabled="disabled"\n                                <!-- /if -->>\u7ACB\u5373\u8BD5\u7528</button>\n                        <button data-ui-id="turnkey"\n                                data-ui-type="Button" <!-- if: ${realName.status} !== \'PASS\' -->\n                                data-ui-disabled="disabled"\n                                <!-- /if -->>\u7269\u8054\u7F51\u5FEB\u901F\u5E94\u7528\u901A\u9053</button>\n                    </div>\n                </div>\n                <div class="line-seperator"></div>\n                <div class="section">\n                    <div class="section-header">\n                        <h2>\u7269\u63A5\u5165\u4F7F\u7528\u6D41\u7A0B</h2>\n                        <a href="https://cloud.baidu.com/doc/IOT/ProductDescription.html?from=productToDoc#.E4.BB.8B.E7.BB.8D" target="_blank">\u4E86\u89E3\u66F4\u591A></a>\n                    </div>\n                    <div class="illustration">\n                        <div class="article">\n                            <div class="pic1"></div>\n                            <div class="title">\u521B\u5EFA\u8D39\u7528\u5957\u9910</div>\n                            <div class="define">\u514D\u8D39\u5957\u9910/\u6536\u8D39\u5957\u9910</div>\n                            <a href="https://cloud.baidu.com/doc/IOT/Pricing.html#Pricing" target="_blank">\u67E5\u770B\u8BE6\u60C5></a>\n                        </div>\n                        <div class="article">\n                            <div class="pic2"></div>\n                            <div class="title">\u521B\u5EFA\u548C\u914D\u7F6E\u5B9E\u4F8B</div>\n                            <div class="define">\u521B\u5EFA\u7269\u63A5\u5165\u7684\u5B9E\u4F8B\u3001\u8BBE\u5907\u3001\u8EAB\u4EFD\u3001\u4E3B\u9898\u7B49\u5B9E\u4F8B\u8981\u7D20</div>\n                            <a href="https://cloud.baidu.com/doc/IOT/Quickstart.html#.E5.88.9B.E5.BB.BA.E5.AE.9E.E4.BE.8B" target="_blank">\u67E5\u770B\u8BE6\u60C5></a>\n                        </div>\n                        <div class="article">\n                            <div class="pic3"></div>\n                            <div class="title">\u914D\u7F6EMQTT\u5BA2\u6237\u7AEF</div>\n                            <div class="define">\u8BBE\u5907\u7AEF\u914D\u7F6EMQTT\u5BA2\u6237\u7AEF</div>\n                            <a href="https://cloud.baidu.com/doc/IOT/Quickstart.html#.E9.85.8D.E7.BD.AEMQTT.E5.AE.A2.E6.88.B7.E7.AB.AF" target="_blank">\u67E5\u770B\u8BE6\u60C5></a>\n                        </div>\n                        <div class="article">\n                            <div class="pic4"></div>\n                            <div class="title">\u6536\u53D1\u6D88\u606F</div>\n                            <div class="define">\u901A\u8FC7PUB\u3001SUB\u6536\u53D1\u6D88\u606F</div>\n                            <a href="https://cloud.baidu.com/doc/IOT/Quickstart.html#.E5.BA.94.E7.94.A8IoT.20Hub.E6.9C.8D.E5.8A.A1" target="_blank">\u67E5\u770B\u8BE6\u60C5></a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="right-siderbar">\n            <div class="wrapper">\n                <div class="right-siderbar-header">\u76F8\u5173\u4EA7\u54C1</div>\n                <div class="product-list">\n                    <div class="product">\n                        <span class="icon"><i class="iconfont icon-modbus"></i></span>\n                        <a href="https://cloud.baidu.com/product/iot_parser.html" target="_blank">\n                            <div class="title">\u7269\u89E3\u6790</div>\n                            <div class="desp">\u7B80\u5355\u5FEB\u901F\u5B8C\u6210\u5404\u79CD\u8BBE\u5907\u6570\u636E\u534F\u8BAE\u89E3\u6790</div>\n                        </a>\n                    </div>\n                    <div class="product">\n                        <span class="icon"><i class="iconfont icon-iotdm"></i></span>\n                        <a href="https://cloud.baidu.com/product/iotdm.html" target="_blank">\n                            <div class="title">\u7269\u7BA1\u7406</div>\n                            <div class="desp">\u667A\u80FD\u3001\u5F3A\u5927\u7684\u8BBE\u5907\u7BA1\u7406\u5E73\u53F0</div>\n                        </a>\n                    </div>\n                    <div class="product">\n                        <span class="icon"><i class="iconfont icon-tsdb"></i></span>\n                        <a href="https://cloud.baidu.com/product/tsdb.html" target="_blank">\n                            <div class="title">\u65F6\u5E8F\u6570\u636E\u5E93</div>\n                            <div class="desp">\u5B58\u50A8\u65F6\u95F4\u5E8F\u5217\u6570\u636E\u7684\u9AD8\u6027\u80FD\u6570\u636E\u5E93</div>\n                        </a>\n                    </div>\n                    <div class="product">\n                        <span class="icon"><i class="iconfont icon-iotre"></i></span>\n                        <a href="https://cloud.baidu.com/product/re.html" target="_blank">\n                            <div class="title">\u89C4\u5219\u5F15\u64CE</div>\n                            <div class="desp">\u7075\u6D3B\u5B9A\u4E49\u5404\u79CD\u8054\u52A8\u89C4\u5219\uFF0C\u4E0E\u4E91\u7AEF\u670D\u52A1\u65E0\u7F1D\u8FDE\u63A5</div>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div class="line-seperator"></div>\n            <div class="help">\n                <div class="title">\u7528\u6237\u6307\u5357</div>\n                <a href="https://cloud.baidu.com/doc/IOT/index.html" target="_blank">\u5E2E\u52A9\u6587\u6863></a>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/order/NewNotifyModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var NewNotifyModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](NewNotifyModel, _BaseModel);
        function NewNotifyModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, NewNotifyModel);
            _BaseModel.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](NewNotifyModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        realName: function realName() {
                            return _config.api.getRealNameStatus();
                        }
                    };
                }
            }]);
        return NewNotifyModel;
    }(_BaseModel2['default']);
    module.exports = NewNotifyModel;
});
define('iot/order/NewNotifyView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./newNotify.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplNewNotifyTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var NewNotifyView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](NewNotifyView, _BaseView);
        function NewNotifyView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, NewNotifyView);
            _BaseView.apply(this, arguments);
        }
        NewNotifyView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'createFreePackage:click': function createFreePackageClick(e) {
                    return _this.fire('CREATE_FREE', e);
                },
                'createPackage:click': function createPackageClick(e) {
                    return _this.fire('CREATE', e);
                },
                'turnkey:click': function turnkeyClick(e) {
                    return _this.fire('START_TURNKEY', e);
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](NewNotifyView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_charge_new_notify';
                }
            }]);
        return NewNotifyView;
    }(_BaseView2['default']);
    module.exports = NewNotifyView;
});
define('iot/order/Notify', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    '../events',
    '../operations',
    './NotifyModel',
    './NotifyView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _events, _operations, _NotifyModel, _NotifyView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_NotifyModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_NotifyView);
    var Notify = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Notify, _BaseAction);
        function Notify() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Notify);
            _BaseAction.apply(this, arguments);
        }
        Notify.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('CREATE_FREE', this.createFree, this);
            this.view.on('CREATE', this.createPackage, this);
            this.view.on(_EVENTS['default'].START_TURNKEY, _operations2['default'].startTurnkey, this);
        };
        Notify.prototype.createFree = function createFree() {
            this.redirect('/iot/order/create~free');
        };
        Notify.prototype.createPackage = function createPackage() {
            this.redirect('/iot/order/create');
        };
        _babelRuntimeHelpersCreateClass['default'](Notify, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Notify;
    }(_BaseAction2['default']);
    module.exports = Notify;
});
define('iot/order/notify.tpl', [], function () {
    return '<!-- target: TPL_iot_charge_notify -->\n<div class="iot-order-notify main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u4EA7\u54C1\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <span class="active">\u7269\u63A5\u5165IoT Hub</span>\n        </p>\n        <div class="list-content main-view">\n            <!-- if: ${realName.status} !== \'PASS\' -->\n            <h2 class="top-tip">\n                <span class="tip-yellow">\u4E3A\u4FDD\u8BC1\u5B89\u5168\uFF0C\u521B\u5EFA\u65B0\u5B9E\u4F8B\u9700\u8981\u5B9E\u540D\u8BA4\u8BC1\uFF0C\u5DF2\u7ECF\u521B\u5EFA\u7684\u5B9E\u4F8B\u4ECD\u53EF\u4EE5\u6B63\u5E38\u4F7F\u7528\u4E0D\u53D7\u5F71\u54CD\u3002<a href="/qualify/#/qualify/index" target="_blank">\u7ACB\u5373\u53BB\u8BA4\u8BC1</a></span>\n            </h2>\n            <!-- /if -->\n            <h2 class="no-bottom-border">\u7269\u63A5\u5165\u7B80\u4ECB</h2>\n            <div class="main-content">\n                <div class="description">\n                    \u7269\u63A5\u5165\uFF08IoT Hub\uFF09\u662F\u4E00\u4E2A\u5168\u6258\u7BA1\u7684\u4E91\u670D\u52A1\uFF0C\u5E2E\u52A9\u5EFA\u7ACB\u8BBE\u5907\u4E0E\u4E91\u7AEF\u4E4B\u95F4\u5B89\u5168\u53EF\u9760\u7684\u53CC\u5411\u8FDE\u63A5\uFF0C\u4EE5\u652F\u6491\u6D77\u91CF\u8BBE\u5907\u7684\u6570\u636E\u6536\u96C6\u3001\u76D1\u63A7\u3001\u6545\u969C\u9884\u6D4B\u7B49\u5404\u79CD\u7269\u8054\u7F51\u573A\u666F\u3002\n                </div>\n                <div class="operation-wrap" data-follow-thead="table">\n                    <div class="buttons-wrap">\n                        <button data-ui-id="createPackage"\n                                data-ui-type="Button"\n                                data-ui-skin="create"\n                                <!-- if: ${realName.status} !== \'PASS\' -->\n                                data-ui-disabled="disabled"\n                                <!-- /if -->>\u521B\u5EFA\u8BA1\u8D39\u5957\u9910</button>\n                        <button data-ui-id="createFreePackage" data-ui-type="Button" <!-- if: ${realName.status} !== \'PASS\' -->\n                                data-ui-disabled="disabled"\n                                <!-- /if -->>\u514D\u8D39\u8BD5\u7528</button>\n                        <button data-ui-id="turnkey"\n                                data-ui-type="Button" <!-- if: ${realName.status} !== \'PASS\' -->\n                                data-ui-disabled="disabled"\n                                <!-- /if -->>\u7269\u8054\u7F51\u5FEB\u901F\u5E94\u7528\u901A\u9053</button>\n                    </div>\n                </div>\n                <div class="line-seperator"></div>\n                <div class="section">\n                    <div class="section-header">\n                        <h2>\u7269\u63A5\u5165\u4F7F\u7528\u6D41\u7A0B</h2>\n                        <a href="https://cloud.baidu.com/doc/IOT/ProductDescription.html?from=productToDoc#.E4.BB.8B.E7.BB.8D" target="_blank">\u4E86\u89E3\u66F4\u591A></a>\n                    </div>\n                    <div class="illustration">\n                        <div class="article">\n                            <div class="pic1"></div>\n                            <div class="title">\u521B\u5EFA\u8D39\u7528\u5957\u9910</div>\n                            <div class="define">\u514D\u8D39\u5957\u9910/\u6536\u8D39\u5957\u9910</div>\n                            <a href="https://cloud.baidu.com/doc/IOT/Pricing.html#Pricing" target="_blank">\u67E5\u770B\u8BE6\u60C5></a>\n                        </div>\n                        <div class="article">\n                            <div class="pic2"></div>\n                            <div class="title">\u521B\u5EFA\u548C\u914D\u7F6E\u5B9E\u4F8B</div>\n                            <div class="define">\u521B\u5EFA\u7269\u63A5\u5165\u7684\u5B9E\u4F8B\u3001\u8BBE\u5907\u3001\u8EAB\u4EFD\u3001\u4E3B\u9898\u7B49\u5B9E\u4F8B\u8981\u7D20</div>\n                            <a href="https://cloud.baidu.com/doc/IOT/Quickstart.html#.E5.88.9B.E5.BB.BA.E5.AE.9E.E4.BE.8B" target="_blank">\u67E5\u770B\u8BE6\u60C5></a>\n                        </div>\n                        <div class="article">\n                            <div class="pic3"></div>\n                            <div class="title">\u914D\u7F6EMQTT\u5BA2\u6237\u7AEF</div>\n                            <div class="define">\u8BBE\u5907\u7AEF\u914D\u7F6EMQTT\u5BA2\u6237\u7AEF</div>\n                            <a href="https://cloud.baidu.com/doc/IOT/Quickstart.html#.E9.85.8D.E7.BD.AEMQTT.E5.AE.A2.E6.88.B7.E7.AB.AF" target="_blank">\u67E5\u770B\u8BE6\u60C5></a>\n                        </div>\n                        <div class="article">\n                            <div class="pic4"></div>\n                            <div class="title">\u6536\u53D1\u6D88\u606F</div>\n                            <div class="define">\u901A\u8FC7PUB\u3001SUB\u6536\u53D1\u6D88\u606F</div>\n                            <a href="https://cloud.baidu.com/doc/IOT/Quickstart.html#.E5.BA.94.E7.94.A8IoT.20Hub.E6.9C.8D.E5.8A.A1" target="_blank">\u67E5\u770B\u8BE6\u60C5></a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="right-siderbar">\n            <div class="wrapper">\n                <div class="right-siderbar-header">\u76F8\u5173\u4EA7\u54C1</div>\n                <div class="product-list">\n                    <div class="product">\n                        <span class="icon"><i class="iconfont icon-modbus"></i></span>\n                        <a href="https://cloud.baidu.com/product/iot_parser.html" target="_blank">\n                            <div class="title">\u7269\u89E3\u6790</div>\n                            <div class="desp">\u7B80\u5355\u5FEB\u901F\u5B8C\u6210\u5404\u79CD\u8BBE\u5907\u6570\u636E\u534F\u8BAE\u89E3\u6790</div>\n                        </a>\n                    </div>\n                    <div class="product">\n                        <span class="icon"><i class="iconfont icon-iotdm"></i></span>\n                        <a href="https://cloud.baidu.com/product/iotdm.html" target="_blank">\n                            <div class="title">\u7269\u7BA1\u7406</div>\n                            <div class="desp">\u667A\u80FD\u3001\u5F3A\u5927\u7684\u8BBE\u5907\u7BA1\u7406\u5E73\u53F0</div>\n                        </a>\n                    </div>\n                    <div class="product">\n                        <span class="icon"><i class="iconfont icon-tsdb"></i></span>\n                        <a href="https://cloud.baidu.com/product/tsdb.html" target="_blank">\n                            <div class="title">\u65F6\u5E8F\u6570\u636E\u5E93</div>\n                            <div class="desp">\u5B58\u50A8\u65F6\u95F4\u5E8F\u5217\u6570\u636E\u7684\u9AD8\u6027\u80FD\u6570\u636E\u5E93</div>\n                        </a>\n                    </div>\n                    <div class="product">\n                        <span class="icon"><i class="iconfont icon-iotre"></i></span>\n                        <a href="https://cloud.baidu.com/product/re.html" target="_blank">\n                            <div class="title">\u89C4\u5219\u5F15\u64CE</div>\n                            <div class="desp">\u7075\u6D3B\u5B9A\u4E49\u5404\u79CD\u8054\u52A8\u89C4\u5219\uFF0C\u4E0E\u4E91\u7AEF\u670D\u52A1\u65E0\u7F1D\u8FDE\u63A5</div>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div class="line-seperator"></div>\n            <div class="help">\n                <div class="title">\u7528\u6237\u6307\u5357</div>\n                <a href="https://cloud.baidu.com/doc/IOT/index.html" target="_blank">\u5E2E\u52A9\u6587\u6863></a>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/order/NotifyModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var NotifyModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](NotifyModel, _BaseModel);
        function NotifyModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, NotifyModel);
            _BaseModel.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](NotifyModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        realName: function realName() {
                            return _config.api.getRealNameStatus();
                        }
                    };
                }
            }]);
        return NotifyModel;
    }(_BaseModel2['default']);
    module.exports = NotifyModel;
});
define('iot/order/NotifyView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./notify.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplNotifyTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var NotifyView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](NotifyView, _BaseView);
        function NotifyView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, NotifyView);
            _BaseView.apply(this, arguments);
        }
        NotifyView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'createFreePackage:click': function createFreePackageClick(e) {
                    return _this.fire('CREATE_FREE', e);
                },
                'createPackage:click': function createPackageClick(e) {
                    return _this.fire('CREATE', e);
                },
                'turnkey:click': function turnkeyClick(e) {
                    return _this.fire('START_TURNKEY', e);
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](NotifyView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_charge_notify';
                }
            }]);
        return NotifyView;
    }(_BaseView2['default']);
    module.exports = NotifyView;
});
define('iot/order/Upgrade', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    '../_public/util',
    './UpgradeModel',
    './UpgradeView',
    '../helper'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _publicUtil, _UpgradeModel, _UpgradeView, _helper) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormAction);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_UpgradeModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_UpgradeView);
    var _helper2 = _babelRuntimeHelpersInteropRequireDefault['default'](_helper);
    var Upgrade = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Upgrade, _FormAction);
        function Upgrade() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Upgrade);
            _FormAction.apply(this, arguments);
        }
        Upgrade.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            this.view.on('PURCHASE_LENGTH_CHANGE', this.updatePrice, this);
            this.view.on('MESSAGE_NUM_CHANGE', this.updatePurchaseLength, this);
            this.view.on('REFRESH', this.refresh, this);
            this.view.on('SUBMIT', this.submitOrder, this);
        };
        Upgrade.prototype.refresh = function refresh() {
            this.reload();
        };
        Upgrade.prototype.updatePrice = function updatePrice() {
            var data = {
                messagesNum: this.view.get('messagesNum').getValue(),
                purchaseLength: this.view.get('purchaseLength').getValue()
            };
            this.view.updateBuyBucket(data);
        };
        Upgrade.prototype.updatePurchaseLength = function updatePurchaseLength() {
            this.view.messagesNumSelected(this.view.get('messagesNum').getValue());
        };
        Upgrade.prototype.submitOrder = function submitOrder() {
            var _this = this;
            var formData = this.model.getSubmitData(this.view.getFormData());
            var data = {
                messagesNum: formData.messagesNum,
                iotResourceId: this.model.get('resourceId')
            };
            this.model.getPrice(data).then(function (priceInfo) {
                var order = _this.convertFormData2Order(formData, priceInfo);
                var config = {
                    messagesNum: formData.messagesNum,
                    instanceId: _this.model.get('resourceId'),
                    type: 'COMMON'
                };
                _this.view.renderOrderConfig(order, config);
            });
        };
        Upgrade.prototype.convertFormData2Order = function convertFormData2Order(formData, priceInfo) {
            var unitPrice = _T['default'].formatMoney(priceInfo.unitPrice);
            var price = _T['default'].formatMoney(priceInfo.price);
            var isShowCoupon = _helper2['default'].isShowCoupon(formData.messagesNum, formData.purchaseLength);
            var config = {
                serviceType: 'IOT',
                productType: 'prepay',
                type: 'RESIZE',
                price: price,
                display: { coupon: isShowCoupon },
                items: [{
                        serviceType: 'IOT',
                        productType: 'prepay',
                        count: 1,
                        time: formData.purchaseLength,
                        timeUnit: 'MONTH',
                        price: price,
                        unitPrice: unitPrice,
                        unitPriceShow: '\u9636\u68AF\u5B9A\u4EF7',
                        chargeType: ['cpt2'],
                        configuration: [formData.messagesNum + '\u767E\u4E07\u6761/\u6708']
                    }]
            };
            return config;
        };
        _babelRuntimeHelpersCreateClass['default'](Upgrade, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Upgrade;
    }(_FormAction2['default']);
    module.exports = Upgrade;
});
define('iot/order/upgrade.tpl', [], function () {
    return '<!-- target: TPL_iot_hubbus_upgrade -->\n<div class="iot-preorder-wrap main-wrap-new">\n\n    <!-- import: TPL_inf_ria_page_breadcrumb -->\n        <!-- block: back_link -->#/iot/endpoint/list<!-- /block -->\n        <!-- block: text_content_wrapper -->\n            ${i18n.\u914D\u7F6E\u5347\u7EA7}\n        <!-- /block -->\n        <!-- block: create_step -->\n            <div data-ui-type="ViewStep"\n                data-ui-id="buyStep"\n                data-ui-current-step="1">\n                <ul>\n                    <li bind-for="buyIot">${i18n.\u5347\u7EA7\u7269\u63A5\u5165\u914D\u7F6E}</li>\n                    <li bind-for="orderConfirm">${i18n.\u786E\u8BA4\u8BA2\u5355}</li>\n                    <li>${i18n.\u5728\u7EBF\u652F\u4ED8}</li>\n                    <li>${i18n.\u652F\u4ED8\u6210\u529F}</li>\n                </ul>\n            </div>\n        <!-- /block -->\n    <!-- /import -->\n    <div class="content-wrap">\n        <div class="create-content create-content-wrapper">\n            <div id="buyIot">\n                <div class="create-main ui-tab-content">\n                    <div class="detail-parts-table">\n                        <form class="create-database-form" data-ui-type="Form" data-ui-id="form">\n                            <div data-ui-id="buyBucket" data-ui-type="BuyBucket"></div>\n                            <dl class="detail-part-1-col detail-create">\n                                <dt>\n                                    <h4><span>\u5F53\u524D\u914D\u7F6E</span></h4>\n                                </dt>\n                                <dd>\n                                    <div class="detail-cell">\n                                        <label>\u652F\u4ED8\u65B9\u5F0F\uFF1A</label>\n                                        <span class="no-content">\n                                            <!-- if: ${orderDetail.productType} === \'prepay\' -->\n                                            \u9884\u4ED8\u8D39\n                                            <!-- else: -->\n                                            \u540E\u4ED8\u8D39\n                                            <!-- /if -->\n                                        </span>\n                                    </div>\n                                    <div class="detail-cell">\n                                        <label>\u8D2D\u4E70\u89C4\u683C\uFF1A</label>\n                                        <span class="no-content">${orderDetail.messagesNum}\u767E\u4E07\u6761/\u6708</span>\n                                    </div>\n                                </dd>\n                                <dd>\n                                    <div class="detail-cell">\n                                        <label>\u5230\u671F\u65F6\u95F4\uFF1A</label>\n                                        <span class="no-content">${orderDetail.expireTime}</span>\n                                    </div>\n                                </dd>\n                            </dl>\n                            <dl class="detail-part-1-col detail-create">\n                                <dt>\n                                    <h4><span>\u8D2D\u4E70\u4FE1\u606F</span></h4>\n                                </dt>\n                                <dd>\n                                    <label>\u8D2D\u4E70\u89C4\u683C\uFF1A</label>\n                                    <div data-ui-type="Panel"\n                                         data-ui-id="messagesNumPanel"\n                                         class="package-list">\n                                        <div class="detail-cell package">\n                                            <div data-ui-id="messagesNum"\n                                                 data-ui-name="messagesNum"\n                                                 data-ui-datasource="@messagesNum"\n                                                 data-ui-type="Dragger"\n                                                 class="messagesNum"></div>\n                                        </div>\n                                        <span class="unit">\u767E\u4E07\u6761/\u6708</span>\n                                    </div>\n                                </dd>\n                            </dl>\n                        </form>\n                    </div>\n                </div>\n            </div>\n            <div id="orderConfirm" class="order-confirm-panel">\n                <div data-ui="id:orderAction;type:ActionPanel"></div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/order/UpgradeModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'common/util/timeUtil',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTimeUtil, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormModel);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var UpgradeModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](UpgradeModel, _FormModel);
        function UpgradeModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UpgradeModel);
            _FormModel.apply(this, arguments);
        }
        UpgradeModel.prototype.getPrice = function getPrice(data) {
            return _config.api.getUpgradePrice(data, { 'X-silence': true });
        };
        _babelRuntimeHelpersCreateClass['default'](UpgradeModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        orderDetail: function orderDetail(model) {
                            return _config.api.getPackageDetail().then(function (item) {
                                item.expireTime = _timeUtil['default'].toTime(item.expireTime);
                                model.set('resourceId', item.resourceId);
                                model.set('minMessagesNum', item.messagesNum + 1);
                                model.set('maxMessagesNum', _config.maxMessagesNum);
                                return item;
                            });
                        }
                    };
                }
            }]);
        return UpgradeModel;
    }(_FormModel2['default']);
    module.exports = UpgradeModel;
});
define('iot/order/UpgradeUnicom', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../_public/util',
    './UpgradeUnicomModel',
    './UpgradeUnicomView',
    '../helper'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _underscore, _publicUtil, _UpgradeUnicomModel, _UpgradeUnicomView, _helper) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormAction);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_UpgradeUnicomModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_UpgradeUnicomView);
    var _helper2 = _babelRuntimeHelpersInteropRequireDefault['default'](_helper);
    var pricingType = 2;
    var UpgradeUnicom = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](UpgradeUnicom, _FormAction);
        function UpgradeUnicom() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UpgradeUnicom);
            _FormAction.apply(this, arguments);
        }
        UpgradeUnicom.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            this.view.on('PURCHASE_LENGTH_CHANGE', this.updatePrice, this);
            this.view.on('MESSAGE_NUM_CHANGE', this.updatePurchaseLength, this);
            this.view.on('REFRESH', this.refresh, this);
            this.view.on('SUBMIT', this.submitOrder, this);
            this.view.on('PRICING_PACKAGE_CHANGE', this.updatePrice, this);
            this.view.on('UNICOM_CARDNUM_CHANGE', this.updateCardNum, this);
        };
        UpgradeUnicom.prototype.refresh = function refresh() {
            this.reload();
        };
        UpgradeUnicom.prototype.updatePurchaseLength = function updatePurchaseLength() {
            this.view.messagesNumSelected(this.view.get('messagesNum').getValue());
        };
        UpgradeUnicom.prototype.updatePrice = function updatePrice() {
            var formData = this.model.getSubmitData(this.view.getFormData());
            var pricingPackage = this.view.getPricingPackage(formData);
            var unicomCardNum = formData.unicomCardNum || 0;
            this.view.updateBuyBucket(_u['default'].extend(formData, {
                pricingPackage: pricingPackage,
                unicomCardNum: unicomCardNum
            }));
        };
        UpgradeUnicom.prototype.updateCardNum = function updateCardNum() {
            var num = this.view.get('unicomCardNum').getValue();
            num > 0 ? this.view.get('deliveryInfo').show() : this.view.get('deliveryInfo').hide();
            this.updatePrice();
        };
        UpgradeUnicom.prototype.getUnicomPostMsg = function getUnicomPostMsg(formData, newFormData) {
            var province = formData.area.province ? this.view.get('area').getChild('province').getSelectedItem().name : '';
            var city = formData.area.city ? this.view.get('area').getChild('city').getSelectedItem().name : '';
            var address = province + '-' + city + '-' + formData.address + '-' + formData.area.province + '-' + formData.area.city;
            return _u['default'].extend(newFormData, {
                consignee: formData.consignee,
                company: formData.company,
                phone: formData.phone,
                address: address
            });
        };
        UpgradeUnicom.prototype.submitOrder = function submitOrder() {
            var _this = this;
            if (this.view.get('form').validate()) {
                (function () {
                    var formData = _this.model.getSubmitData(_this.view.getFormData());
                    var pricingPackage = _this.view.getPricingPackage(formData);
                    pricingType = pricingPackage;
                    var newFormData = _this.view.getUnicomFormData(_u['default'].extend(formData, { pricingPackage: pricingPackage }));
                    var unicomCardNum = _this.model.get('cardNum') + newFormData.unicomCardNum;
                    newFormData = _u['default'].extend(newFormData, { unicomCardNum: unicomCardNum });
                    _this.model.getPrice(newFormData).then(function (priceInfo) {
                        newFormData = _this.getUnicomPostMsg(formData, newFormData);
                        var order = _this.convertFormData2Order(newFormData, priceInfo);
                        var config = _u['default'].extend(newFormData, { instanceId: _this.model.get('resourceId') });
                        _this.view.renderOrderConfig(order, config);
                    });
                }());
            }
        };
        UpgradeUnicom.prototype.getConfInfo = function getConfInfo(formData) {
            var conf = '-';
            var pricingPackage = pricingType === 2 ? '\u5C0F\u578B\u8BBE\u5907\u7248' : '\u5927\u578B\u8BBE\u5907\u7248';
            var unicomMessagesNum = formData.unicomMessagesNum + '\u767E\u4E07\u6761/\u6708';
            conf = [
                '\u5957\u9910\u7C7B\u578B\uFF1A' + pricingPackage,
                '\u7269\u8054\u7F51\u5361\u6570\uFF1A' + formData.unicomCardNum + '\u5F20',
                '\u8D2D\u4E70\u89C4\u683C\uFF1A' + unicomMessagesNum
            ];
            return conf;
        };
        UpgradeUnicom.prototype.convertFormData2Order = function convertFormData2Order(formData, priceInfo) {
            var unitPrice = _T['default'].formatMoney(priceInfo.unitPrice);
            var price = _T['default'].formatMoney(priceInfo.price);
            var isShowCoupon = _helper2['default'].isShowCoupon(formData.messagesNum, formData.purchaseLength);
            var config = {
                serviceType: 'IOT',
                productType: 'prepay',
                type: 'RESIZE',
                price: price,
                display: { coupon: isShowCoupon },
                items: [{
                        serviceType: 'IOT',
                        productType: 'prepay',
                        count: 1,
                        time: formData.purchaseLength,
                        timeUnit: 'MONTH',
                        price: price,
                        unitPrice: unitPrice,
                        unitPriceShow: '\u9636\u68AF\u5B9A\u4EF7',
                        chargeType: ['cpt2'],
                        configuration: this.getConfInfo(formData)
                    }]
            };
            return config;
        };
        _babelRuntimeHelpersCreateClass['default'](UpgradeUnicom, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return UpgradeUnicom;
    }(_FormAction2['default']);
    module.exports = UpgradeUnicom;
});
define('iot/order/upgradeUnicom.tpl', [], function () {
    return '<!-- target: TPL_iot_hubbus_upgrade_unicom -->\n<div class="iot-new-preorder-wrap main-wrap-new iot-upgrade-unicom">\n\n    <!-- import: TPL_inf_ria_page_breadcrumb -->\n        <!-- block: back_link -->#/iot/endpoint/list<!-- /block -->\n        <!-- block: text_content_wrapper -->\n            ${i18n.\u914D\u7F6E\u5347\u7EA7}\n        <!-- /block -->\n        <!-- block: create_step -->\n            <div data-ui-type="ViewStep"\n                data-ui-id="buyStep"\n                data-ui-current-step="1">\n                <ul>\n                    <li bind-for="buyIot">${i18n.\u5347\u7EA7\u7269\u63A5\u5165\u914D\u7F6E}</li>\n                    <li bind-for="orderConfirm">${i18n.\u786E\u8BA4\u8BA2\u5355}</li>\n                    <li>${i18n.\u5728\u7EBF\u652F\u4ED8}</li>\n                    <li>${i18n.\u652F\u4ED8\u6210\u529F}</li>\n                </ul>\n            </div>\n        <!-- /block -->\n    <!-- /import -->\n    <div class="content-wrap">\n        <div class="create-content create-content-wrapper">\n            <div id="buyIot">\n                <div class="create-main ui-tab-content">\n                    <div class="detail-parts-table">\n                        <form class="create-database-form" data-ui-type="Form" data-ui-id="form">\n                            <div data-ui-id="buyBucket" data-ui-type="BuyBucket"></div>\n                            <dl class="detail-part-1-col detail-create">\n                                <dt>\n                                    <h4><span>\u5F53\u524D\u914D\u7F6E</span></h4>\n                                </dt>\n                                <dd>\n                                    <div class="detail-cell">\n                                        <label>\u652F\u4ED8\u65B9\u5F0F\uFF1A</label>\n                                        <span class="no-content">\n                                            <!-- if: ${orderDetail.productType} === \'prepay\' -->\n                                            \u9884\u4ED8\u8D39\n                                            <!-- else: -->\n                                            \u540E\u4ED8\u8D39\n                                            <!-- /if -->\n                                        </span>\n                                    </div>\n                                    <div class="detail-cell">\n                                        <label>\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09\u5957\u9910\uFF1A</label>\n                                        <span class="no-content">${orderDetail.resourceType}</span>\n                                    </div>\n                                </dd>\n                                <dd>\n                                    <div class="detail-cell">\n                                        <label>\u7269\u8054\u7F51\u5361\u6570\uFF08\u5DF2\u5BC4\u9001\uFF09\uFF1A</label>\n                                        <span class="no-content">${orderDetail.cardNum}\u5F20</span>\n                                    </div>\n                                    <div class="detail-cell">\n                                        <label>\u8D2D\u4E70\u89C4\u683C\uFF1A</label>\n                                        <span class="no-content">${orderDetail.messagesNum}\u767E\u4E07\u6761/\u6708</span>\n                                    </div>\n                                </dd>\n                                <dd>\n                                    <div class="detail-cell">\n                                        <label>\u6D88\u606F\u957F\u5EA6\uFF1A</label>\n                                        <span class="no-content">\u5C11\u4E8E${orderDetail.messageByte}\u5B57\u8282/\u6761</span>\n                                    </div>\n                                    <div class="detail-cell">\n                                        <label>\u5230\u671F\u65F6\u95F4\uFF1A</label>\n                                        <span class="no-content">${orderDetail.expireTime}</span>\n                                    </div>\n                                </dd>\n                            </dl>\n                            <dl class="detail-part-1-col detail-create config-info">\n                                <dt>\n                                    <h4><span>\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09\u6D88\u606F\u914D\u7F6E</span></h4>\n                                </dt>\n                                <!-- if: ${orderDetail.messageByte} === 128 -->\n                                <dd data-ui-type="Panel" data-ui-id="unicomChoice">\n                                    <label>\u5957\u9910\u7C7B\u578B\uFF1A</label>\n                                    <div class="form-value">\n                                        <div data-ui-id="pricingPackage"\n                                             data-ui-name="pricingPackage"\n                                             data-ui-type="RadioSelect"\n                                             class="pricing-pakage pricing-type">\n                                        </div>\n                                    </div>\n                                </dd>\n                                <!-- /if -->\n                                 <dd class="cardNum">\n                                    <label>\u7269\u8054\u7F51\u5361\u6570\uFF08\u65B0\u589E\uFF09\uFF1A</label>\n                                    <div data-ui-type="TextBox"\n                                         data-ui-name="unicomCardNum"\n                                         data-ui-id="unicomCardNum"\n                                         class="unicomCardNum">\n                                    </div>\n                                    <span class="unit">\u5F20</span>\n                                </dd>\n                                <dd>\n                                    <label>\u8D2D\u4E70\u89C4\u683C\uFF1A</label>\n                                    <div data-ui-type="Panel"\n                                         data-ui-id="messagesNumPanel"\n                                         class="package-list">\n                                        <div class="detail-cell package">\n                                            <div data-ui-id="messagesNum"\n                                                 data-ui-name="messagesNum"\n                                                 data-ui-datasource="@messagesNum"\n                                                 data-ui-type="Dragger"\n                                                 class="messagesNum"></div>\n                                        </div>\n                                        <span class="unit">\u767E\u4E07\u6761/\u6708</span>\n                                    </div>\n                                </dd>\n                            </dl>\n                            <dl class="detail-part-1-col detail-create delivery-info" data-ui-type="Panel" data-ui-id="deliveryInfo">\n                                <dt>\n                                    <h4><span>\u6536\u8D27\u4FE1\u606F</span></h4>\n                                </dt>\n                                <dd class="form-row">\n                                    <label><i>*</i>\u6536\u8D27\u4EBA\u59D3\u540D\uFF1A</label>\n                                    <div class="form-value">\n                                        <div data-ui-type="TextBox"\n                                             data-ui-name="consignee"\n                                             data-ui-id="consignee"></div>\n                                    </div>\n                                </dd>\n                                <dd class="form-row">\n                                    <label><i>*</i>\u516C\u53F8\u540D\u79F0\uFF1A</label>\n                                    <div class="form-value">\n                                        <div data-ui-type="TextBox"\n                                             data-ui-name="company"\n                                             data-ui-id="company"></div>\n                                    </div>\n                                </dd>\n                                <dd class="form-row">\n                                    <label><i>*</i>\u8054\u7CFB\u7535\u8BDD\uFF1A</label>\n                                    <div class="form-value">\n                                        <div data-ui-type="TextBox"\n                                             data-ui-name="phone"\n                                             data-ui-id="phone"></div>\n                                    </div>\n                                </dd>\n                                <dd class="form-row">\n                                    <label><i>*</i>\u6536\u8D27\u5730\u5740\uFF1A</label>\n                                    <div class="form-value region-form-row">\n                                        <div data-ui="id:area;type:RegionSelect;name:area"></div>\n                                        <label data-ui-type="Validity"\n                                            data-ui-id="areaValidity"></label>\n                                    </div>\n                                    <div class="form-value">\n                                        <div data-ui-type="TextBox"\n                                            data-ui-name="address"\n                                            data-ui-id="address"\n                                            data-ui-mode="textarea"\n                                            class="address"></div>\n                                    </div>\n                                </dd>\n                                <dd class="tip-grey">\n                                    \u6E29\u99A8\u63D0\u793A<br/>\n                                    1. \u8D2D\u4E70\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09\u5957\u9910\u540E\uFF0C\u5957\u9910\u5185\u7684\u5929\u5DE5\u7269\u8054\u5361\u914D\u9001\u7269\u6D41\u4E3A<b class="extra">\u987A\u4E30</b>\uFF0C\u4ED8\u6B3E\u65B9\u5F0F\u4E3A<b class="extra italic">\u5230\u4ED8\uFF0C\u90AE\u8D39\u7528\u6237\u81EA\u7406\uFF0820\u5143\u5DE6\u53F3\uFF09\u3002</b><br/>\n                                    2. \u7269\u63A5\u5165\uFF08SIM\u7248\uFF09\u5957\u9910\u5185\u542B\u8054\u901A\u7269\u8054\u7F51\u5361\uFF0C\u662F\u767E\u5EA6\u4E91\u5929\u5DE5\u548C\u8054\u901A\u5408\u4F5C\u63A8\u51FA\u7684\u5929\u5DE5\u7269\u8054\u5361\uFF0C\u8BE5\u5361\u7684\u6D88\u606F\u4EC5\u652F\u6301\u7528\u4E8E\u5929\u5DE5\u7684\u7269\u63A5\u5165SIM\u7248\uFF0C\u540C\u65F6\u5BF9\u4E8E\u5929\u5DE5\u4EA7\u54C1\u4F53\u7CFB\u5185\u7269\u7BA1\u7406\u3001\u7269\u89E3\u6790\u3001\u89C4\u5219\u5F15\u64CE\u76EE\u524D\u4E0D\u652F\u6301\u7269\u63A5\u5165\uFF08SIM\u7248\uFF09\uFF0C\u5982\u9700\u8981\u4F7F\u7528\u8BF7\u8D2D\u4E70\u7269\u63A5\u5165\u8D44\u6E90\u3002<br/>\n                                    3. \u5929\u5DE5\u7269\u8054\u5361\u914D\u9001\u3001\u552E\u540E\u3001\u9000\u6362\u8D27\u7B49\u76F8\u5173\u670D\u52A1\u5747\u7531\u6DF1\u5733\u6C49\u8BAF\u4FE1\u606F\u6280\u672F\u6709\u9650\u516C\u53F8\u63D0\u4F9B\u5E76\u8D1F\u8D23\u3002<br/>\n                                    4. \u7269\u63A5\u5165\uFF08SIM\u7248\uFF09\u5185\u542B\u7684\u5929\u5DE5\u7269\u5361\u662F\u8054\u901A\u666E\u901A\u7269\u8054\u7F51SIM\u5361\uFF0C\u82E5\u9700\u8D34\u7247\u5F0F\u5DE5\u4E1A\u7EA7SIM\u5361\u6216\u63D2\u5361\u5F0FSIM\u5361\u8BF7\u63D0\u5DE5\u5355\u53CD\u9988\u3002<br/>\n                                    5. \u5176\u4ED6\u7279\u6B8A\u60C5\u51B5\u8BF7\u63D0\u5DE5\u5355\u53CD\u9988\u5904\u7406\u3002\n                                </dd>\n                            </dl>\n                        </form>\n                    </div>\n                </div>\n            </div>\n            <div id="orderConfirm" class="order-confirm-panel">\n                <div data-ui="id:orderAction;type:ActionPanel"></div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/order/UpgradeUnicomModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'common/util/timeUtil',
    '../config',
    '../_public/regions'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTimeUtil, _config, _publicRegions) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormModel);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _regions = _babelRuntimeHelpersInteropRequireDefault['default'](_publicRegions);
    var UpgradeUnicomModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](UpgradeUnicomModel, _FormModel);
        function UpgradeUnicomModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UpgradeUnicomModel);
            _FormModel.apply(this, arguments);
        }
        UpgradeUnicomModel.prototype.getPrice = function getPrice(data) {
            return _config.api.getUpgradePrice(data, { 'X-silence': true });
        };
        _babelRuntimeHelpersCreateClass['default'](UpgradeUnicomModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        orderDetail: function orderDetail(model) {
                            return _config.api.getUnicomDetail().then(function (item) {
                                var messagesNum = item.messagesNum < 1 ? 1 : item.messagesNum;
                                var minMessagesNum = messagesNum;
                                var address = item.address.split('-');
                                model.set('area', {
                                    country: '086',
                                    province: address[3],
                                    city: address[4]
                                });
                                model.set('consignee', item.consignee);
                                model.set('company', item.company);
                                model.set('phone', item.phone);
                                model.set('address', address[2]);
                                item.expireTime = _timeUtil['default'].toTime(item.expireTime);
                                model.set('resourceId', item.resourceId);
                                model.set('minMessagesNum', minMessagesNum);
                                model.set('maxMessagesNum', _config.maxMessagesNum);
                                model.set('cardNum', item.cardNum);
                                if (item.tester) {
                                    item.resourceType = '1\u5143\u8BD5\u7528\u7248';
                                    model.set('pricing', 1);
                                } else if (item.messageByte === 128) {
                                    item.resourceType = '\u5C0F\u578B\u8BBE\u5907\u7248';
                                    model.set('pricing', 2);
                                } else {
                                    item.resourceType = '\u5927\u578B\u8BBE\u5907\u7248';
                                    model.set('pricing', 3);
                                }
                                return item;
                            });
                        },
                        pricingPackage: function pricingPackage(model) {
                            return [
                                {
                                    name: '<span data-index="0">\u5C0F\u578B\u8BBE\u5907\u7248</span><hr/>' + '<p data-index="0">\u5361\u670D\u52A1\u8D39\uFF1A1\u5143/\u5361/\u6708<br/>\u6D88\u606F\u6570\uFF1A100\u4E07\u6761\u6D88\u606F/15\u5143/\u6708<br/>\u6D88\u606F\u957F\u5EA6\uFF1A\u4F4E\u4E8E128\u5B57\u8282</p>',
                                    value: 2
                                },
                                {
                                    name: '<span data-index="1">\u5927\u578B\u8BBE\u5907\u7248</span><hr/>' + '<p data-index="1">\u5361\u670D\u52A1\u8D39\uFF1A1\u5143/\u5361/\u6708<br/>\u6D88\u606F\u6570\uFF1A100\u4E07\u6761\u6D88\u606F/35\u5143/\u6708<br/>\u6D88\u606F\u957F\u5EA6\uFF1A\u4F4E\u4E8E512\u5B57\u8282</p>',
                                    value: 3
                                }
                            ];
                        },
                        areaSource: function areaSource(model) {
                            return _regions['default'];
                        }
                    };
                }
            }]);
        return UpgradeUnicomModel;
    }(_FormModel2['default']);
    module.exports = UpgradeUnicomModel;
});
define('iot/order/UpgradeUnicomView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./upgradeUnicom.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/FormView',
    'inf-ria/app/brpc',
    'common/util/moneyUtil',
    'common/region',
    '../_public/util'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplUpgradeUnicomTplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcFormView, _infRiaAppBrpc, _commonUtilMoneyUtil, _commonRegion, _publicUtil) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormView);
    var _brpc = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaAppBrpc);
    var _moneyUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilMoneyUtil);
    var _R = _babelRuntimeHelpersInteropRequireDefault['default'](_commonRegion);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var buyBuckeyFields = [
        {
            title: '\u5730\u57DF\uFF1A',
            content: function content(item) {
                return _R['default'].getCurrentRegion().label;
            }
        },
        {
            title: '\u5957\u9910\u7C7B\u578B\uFF1A',
            content: function content(item) {
                if (!item.pricingPackage) {
                    return '-';
                }
                if (item.pricingPackage === 2) {
                    return '\u5C0F\u578B\u8BBE\u5907\u7248';
                }
                return '\u5927\u578B\u8BBE\u5907\u7248';
            }
        },
        {
            title: '\u7269\u8054\u7F51\u5361\u6570\uFF08\u65B0\u589E\uFF09\uFF1A',
            content: function content(item) {
                if (!item.unicomCardNum) {
                    return '0\u5F20';
                }
                return item.unicomCardNum + '\u5F20';
            }
        },
        {
            title: '\u8D2D\u4E70\u89C4\u683C\uFF1A',
            content: function content(item) {
                if (!item.unicomMessagesNum) {
                    return '-';
                }
                return item.unicomMessagesNum + '\u767E\u4E07\u6761/\u6708';
            }
        },
        {
            title: '\u4EF7\u683C\uFF1A',
            content: function content(item) {
                if (item.loading) {
                    return '<span class="loading">\u52AA\u529B\u52A0\u8F7D\u4E2D...\u8BF7\u7A0D\u5019</span>';
                }
                var result = '';
                var price = item.discount < 100 ? _moneyUtil['default'].showMoney(item.originalPrice * item.discount / 100) : _moneyUtil['default'].showMoney(item.price);
                if (item.originalPrice !== price) {
                    var originalPrice = _moneyUtil['default'].showMoney(item.originalPrice);
                    result = '<span class="price">\uFFE5' + price + '</span>\n                        <br>\n                        <strike class="original-price">\u539F\u4EF7\uFF1A\uFFE5' + originalPrice + '</strike>';
                } else {
                    result = '<span class="price">\uFFE5' + price + '</span>';
                }
                return result;
            }
        }
    ];
    var UpgradeUnicomView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](UpgradeUnicomView, _FormView);
        function UpgradeUnicomView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UpgradeUnicomView);
            _FormView.apply(this, arguments);
        }
        UpgradeUnicomView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'buyBucket:confirm': function buyBucketConfirm(e) {
                    _this.fire('SUBMIT');
                    e.preventDefault();
                },
                'buyBucket:reset': function buyBucketReset(e) {
                    _this.fire('REFRESH');
                    e.preventDefault();
                },
                'messagesNum:change': function messagesNumChange(e) {
                    return _this.fire('MESSAGE_NUM_CHANGE');
                },
                'pricingPackage:change': function pricingPackageChange(e) {
                    return _this.fire('PRICING_PACKAGE_CHANGE');
                },
                'unicomCardNum:input': function unicomCardNumInput(e) {
                    return _this.fire('UNICOM_CARDNUM_CHANGE');
                }
            };
        };
        UpgradeUnicomView.prototype.getUnicomFormData = function getUnicomFormData(formData) {
            var unicomMessageByte = formData.pricingPackage === 2 ? 128 : 512;
            var tester = this.model.get('pricing') === 1 ? true : false;
            return {
                iotResourceId: this.model.get('resourceId'),
                type: 'CHINA_UNICOM',
                unicomCardNum: parseInt(formData.unicomCardNum, 10),
                unicomMessageByte: unicomMessageByte,
                unicomMessagesNum: formData.messagesNum,
                tester: tester
            };
        };
        UpgradeUnicomView.prototype.updateBuyBucket = function updateBuyBucket(data) {
            var _this2 = this;
            var newFormData = {};
            var formData = this.getUnicomFormData(data);
            this.get('buyBucket').setValue(_u['default'].extend({
                loading: true,
                productType: 'prepay',
                pricingPackage: data.pricingPackage
            }, formData));
            this.get('buyBucket').disable();
            var unicomCardNum = this.model.get('cardNum') + formData.unicomCardNum;
            newFormData = _u['default'].extend(newFormData, formData, { unicomCardNum: unicomCardNum });
            this.model.getPrice(newFormData).then(function (e) {
                _this2.get('buyBucket').setValue(_u['default'].extend({
                    loading: false,
                    productType: 'prepay',
                    price: e.price,
                    originalPrice: e.originalPrice,
                    discount: e.discount,
                    pricingPackage: data.pricingPackage
                }, formData));
                if ((formData.unicomCardNum === 0 || !formData.unicomCardNum) && data.messagesNum === _this2.model.get('minMessagesNum') && data.pricingPackage === _this2.model.get('pricing') || data.messagesNum > _this2.model.get('maxMessagesNum')) {
                    _this2.get('buyBucket').disable();
                } else {
                    _this2.get('buyBucket').enable();
                }
            });
        };
        UpgradeUnicomView.prototype.getPricingPackage = function getPricingPackage(formData) {
            return formData.pricingPackage ? formData.pricingPackage : 3;
        };
        UpgradeUnicomView.prototype.messagesNumSelected = function messagesNumSelected(value) {
            var formData = this.getFormData();
            this.updateBuyBucket({
                messagesNum: value,
                unicomCardNum: formData.unicomCardNum,
                pricingPackage: this.getPricingPackage(formData)
            });
        };
        UpgradeUnicomView.prototype.renderOrderConfig = function renderOrderConfig(order, config) {
            var panel = this.get('orderAction');
            var buyStep = this.get('buyStep');
            var actionOptions = {
                order: order,
                config: config
            };
            _brpc['default'].invokeService('billing://order_confirm', panel, actionOptions).then(function () {
                panel.on('action@prevPage', function () {
                    buyStep.set('currentStep', 1);
                    panel.disposeAction();
                    panel.innerHTML = '';
                });
                buyStep.set('currentStep', 2);
            });
        };
        UpgradeUnicomView.prototype.enterDocument = function enterDocument() {
            _FormView.prototype.enterDocument.call(this);
            this.get('messagesNum').setValue(this.model.get('minMessagesNum'));
            this.messagesNumSelected(this.model.get('minMessagesNum'));
            this.get('deliveryInfo').hide();
        };
        _babelRuntimeHelpersCreateClass['default'](UpgradeUnicomView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_hubbus_upgrade_unicom';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        pricingPackage: {
                            datasource: '@pricingPackage',
                            selectedIndex: 0
                        },
                        unicomCardNum: {
                            width: 60,
                            placeholder: '0',
                            value: 0,
                            pattern: /^\d+$/
                        },
                        messagesNum: {
                            min: '@minMessagesNum',
                            max: '@maxMessagesNum',
                            length: 350,
                            value: '@minMessagesNum'
                        },
                        consignee: {
                            width: 275,
                            placeholder: '\u8BF7\u8F93\u5165\u6536\u8D27\u4EBA',
                            value: '@consignee',
                            required: 'required'
                        },
                        company: {
                            width: 275,
                            placeholder: '\u8BF7\u8F93\u5165\u516C\u53F8\u540D\u79F0',
                            value: '@company',
                            required: 'required'
                        },
                        phone: {
                            width: 275,
                            required: 'required',
                            value: '@phone',
                            placeholder: '\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD',
                            pattern: /(^(1(3|4|5|7|8)\d{9})?$)|(^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$)/,
                            patternErrorMessage: '\u60A8\u8F93\u5165\u7684\u8054\u7CFB\u7535\u8BDD\u683C\u5F0F\u4E0D\u6B63\u786E'
                        },
                        area: {
                            datasource: '@areaSource',
                            required: true,
                            value: '@area',
                            validityLabel: 'areaValidity',
                            extensions: _T['default'].autoValidateExt
                        },
                        address: {
                            width: 275,
                            height: 58,
                            value: '@address',
                            required: 'required',
                            placeholder: '\u8BF7\u8F93\u5165\u8BE6\u7EC6\u6536\u8D27\u5730\u5740',
                            pattern: /^[\u4e00-\u9fa5_a-zA-Z0-9]+$/,
                            patternErrorMessage: '\u8BF7\u8F93\u5165\u5408\u6CD5\u7684\u4E2D\u82F1\u6587\u5B57\u7B26'
                        },
                        buyBucket: {
                            fields: buyBuckeyFields,
                            disabled: true,
                            value: {},
                            offsetTop: 0,
                            confirmBtn: {
                                text: '\u4E0B\u4E00\u6B65',
                                skin: 'skin-primary-button'
                            }
                        }
                    };
                }
            }
        ]);
        return UpgradeUnicomView;
    }(_FormView2['default']);
    module.exports = UpgradeUnicomView;
});
define('iot/order/UpgradeView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./upgrade.tpl',
    'inf-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/app/brpc',
    'common/util/moneyUtil',
    'common/region'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplUpgradeTplHtml, _infRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _infRiaAppBrpc, _commonUtilMoneyUtil, _commonRegion) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormView);
    var _brpc = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaAppBrpc);
    var _moneyUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilMoneyUtil);
    var _R = _babelRuntimeHelpersInteropRequireDefault['default'](_commonRegion);
    var buyBuckeyFields = [
        {
            title: '\u5730\u57DF\uFF1A',
            content: function content(item) {
                return _R['default'].getCurrentRegion().label;
            }
        },
        {
            title: '\u8D2D\u4E70\u89C4\u683C\uFF1A',
            content: function content(item) {
                if (!item.messagesNum) {
                    return '-';
                }
                return item.messagesNum + '\u767E\u4E07\u6761/\u6708';
            }
        },
        {
            title: '\u4EF7\u683C\uFF1A',
            content: function content(item) {
                if (item.loading) {
                    return '<span class="loading">\u52AA\u529B\u52A0\u8F7D\u4E2D...\u8BF7\u7A0D\u5019</span>';
                }
                var result = '';
                var price = item.discount < 100 ? _moneyUtil['default'].showMoney(item.originalPrice * item.discount / 100) : _moneyUtil['default'].showMoney(item.price);
                if (item.originalPrice !== price) {
                    var originalPrice = _moneyUtil['default'].showMoney(item.originalPrice);
                    result = '<span class="price">\uFFE5' + price + '</span>\n                        <br>\n                        <strike class="original-price">\u539F\u4EF7\uFF1A\uFFE5' + originalPrice + '</strike>';
                } else {
                    result = '<span class="price">\uFFE5' + price + '</span>';
                }
                return result;
            }
        }
    ];
    var UpgradeView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](UpgradeView, _FormView);
        function UpgradeView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, UpgradeView);
            _FormView.apply(this, arguments);
        }
        UpgradeView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'buyBucket:confirm': function buyBucketConfirm(e) {
                    _this.fire('SUBMIT');
                    e.preventDefault();
                },
                'buyBucket:reset': function buyBucketReset(e) {
                    _this.fire('REFRESH');
                    e.preventDefault();
                },
                'messagesNum:change': function messagesNumChange(e) {
                    return _this.fire('MESSAGE_NUM_CHANGE');
                }
            };
        };
        UpgradeView.prototype.updateBuyBucket = function updateBuyBucket(data) {
            var _this2 = this;
            this.get('buyBucket').setValue({
                loading: true,
                messagesNum: data.messagesNum,
                productType: 'prepay'
            });
            this.get('buyBucket').disable();
            var config = {
                messagesNum: data.messagesNum,
                iotResourceId: this.model.get('resourceId')
            };
            this.model.getPrice(config).then(function (e) {
                _this2.get('buyBucket').setValue({
                    loading: false,
                    messagesNum: data.messagesNum,
                    productType: 'prepay',
                    price: e.price,
                    originalPrice: e.originalPrice,
                    discount: e.discount
                });
                if (data.messagesNum >= _this2.model.get('minMessagesNum') && data.messagesNum <= _this2.model.get('maxMessagesNum')) {
                    _this2.get('buyBucket').enable();
                }
            });
        };
        UpgradeView.prototype.messagesNumSelected = function messagesNumSelected(value) {
            this.updateBuyBucket({ messagesNum: value });
        };
        UpgradeView.prototype.renderOrderConfig = function renderOrderConfig(order, config) {
            var panel = this.get('orderAction');
            var buyStep = this.get('buyStep');
            var actionOptions = {
                order: order,
                config: config
            };
            _brpc['default'].invokeService('billing://order_confirm', panel, actionOptions).then(function () {
                panel.on('action@prevPage', function () {
                    buyStep.set('currentStep', 1);
                    panel.disposeAction();
                    panel.innerHTML = '';
                });
                buyStep.set('currentStep', 2);
            });
        };
        UpgradeView.prototype.enterDocument = function enterDocument() {
            _FormView.prototype.enterDocument.call(this);
            this.get('messagesNum').setValue(this.model.get('minMessagesNum'));
            this.messagesNumSelected(this.model.get('minMessagesNum'));
        };
        _babelRuntimeHelpersCreateClass['default'](UpgradeView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_hubbus_upgrade';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        purchaseLength: {
                            datasource: '@purchaseLenDatasource',
                            selectedIndex: 0
                        },
                        messagesNum: {
                            min: '@minMessagesNum',
                            max: '@maxMessagesNum',
                            length: 350,
                            value: '@minMessagesNum'
                        },
                        buyBucket: {
                            fields: buyBuckeyFields,
                            disabled: true,
                            value: {},
                            offsetTop: 0,
                            confirmBtn: {
                                text: '\u4E0B\u4E00\u6B65',
                                skin: 'skin-primary-button'
                            }
                        }
                    };
                }
            }
        ]);
        return UpgradeView;
    }(_FormView2['default']);
    module.exports = UpgradeView;
});
define('iot/policy/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var actionsConfig = [
        {
            type: 'iot/policy/List',
            path: '/iot/policy/list'
        },
        {
            type: 'iot/policy/Detail',
            path: '/iot/policy/detail'
        },
        {
            type: 'iot/policy/dialog/Create',
            path: '/iot/policy/create'
        },
        {
            type: 'iot/policy/dialog/Edit',
            path: '/iot/policy/edit'
        }
    ];
    _controller['default'].registerAction(actionsConfig);
    module.exports = {
        noDataHtml: [
            '<div><p>\u4F60\u8FD8\u6CA1\u521B\u5EFA\u4EFB\u4F55\u7B56\u7565</br>',
            '\u70B9\u51FB\u5DE6\u4E0A\u89D2\u6309\u94AE\u7ACB\u5373\u521B\u5EFA\u6216\u8054\u7CFB\u7BA1\u7406\u5458\u521B\u5EFA',
            '</p></div>'
        ].join(''),
        tpl: {
            command: '<span class="operations"><button data-command="<%- command %>" ' + 'data-command-args="<%- args %>" class="cmd-button <%- className %>" <%- disabled %>>' + '<%- label %></button></span>',
            topic: '<div class="topic-box"><p class="topic"><label>\u4E3B\u9898\uFF1A</label><%- topic %></p>' + '<p class="operations"><label>\u6743\u9650\uFF1A</label><%- operations %></p></div>'
        }
    };
});
define('iot/policy/Detail', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'bat-ria/mvc/BaseAction',
    '../events',
    '../operations',
    '../enum',
    './DetailModel',
    './DetailView',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _underscore, _babelRuntimeHelpersInteropRequireDefault, _batRiaMvcBaseAction, _events, _operations, _enum, _DetailModel, _DetailView, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailView);
    var _localConfig = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    var Detail = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Detail, _BaseAction);
        function Detail() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Detail);
            _BaseAction.apply(this, arguments);
        }
        Detail.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].EDIT, this.edit, this);
            this.on(_EVENTS['default'].POLICY_LOADED, this.reload);
            this.on('entercomplete', this.renderTopics);
        };
        Detail.prototype.edit = function edit(e) {
            _operations2['default'].editPolicy.call(this, {
                parentAction: this,
                endpointName: this.model.get('endpointName'),
                policyName: this.model.get('policyName')
            });
        };
        Detail.prototype.renderTopics = function renderTopics(e) {
            var html = [];
            var topics = this.model.get('basicInfo').topics;
            _u['default'].each(topics, function (item) {
                return html.push(_u['default'].template(_localConfig['default'].tpl.topic, {
                    topic: item.topic,
                    operations: _u['default'].map(item.operations, function (operation) {
                        return _enum.OPERATIONS.getTextFromValue(operation);
                    }).join(' | ')
                }));
            });
            this.view.get('topicBox').setContent(html.join('') || '\u672A\u7ED1\u5B9A\u4E3B\u9898');
        };
        _babelRuntimeHelpersCreateClass['default'](Detail, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Detail;
    }(_BaseAction2['default']);
    module.exports = Detail;
});
define('iot/policy/detail.tpl', [], function () {
    return '<!-- target: TPL_iot_policy_detail -->\n<div class="iot-endpoint-detail iot-policy-detail iot-main-wrap main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u7269\u8054\u7F51\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <a href="#/iot/policy/list~endpointName=${endpointName}">\u7B56\u7565\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u7B56\u7565\u8BE6\u60C5</span>\n        </p>\n        <div class="detail-content list-content">\n            <h2>\n                \u7B56\u7565\u8BE6\u60C5\n                <!-- if: ${subPermission.permission.IotHubManage}-->\n                <span data-ui-type="Button"\n                    data-ui-id="edit"\n                    data-ui-skin="edit">\u7F16\u8F91</span>\n                <!-- /if -->\n            </h2>\n            <dl class="detail-content-item">\n                <dt></dt>\n                <dd>\n                    <div class="detail-content-row">\n                        <label>\u540D\u79F0\uFF1A</label>\n                        <div class="detail-content-value">${basicInfo.policyName}</div>\n                    </div>\n                    <div class="detail-content-row">\n                        <label>\u521B\u5EFA\u65F6\u95F4\uFF1A</label>\n                        <div class="detail-content-value">${basicInfo.localTime}</div>\n                    </div>\n                    <div class="detail-content-row">\n                        <label>\u4E3B\u9898\u5217\u8868\uFF1A</label>\n                        <div data-ui-type="Panel"\n                            data-ui-id="topicBox"\n                            class="detail-content-value"></div>\n                    </div>\n                </dd>\n            </dl>\n        </div>\n    </div>\n</div>\n';
});
define('iot/policy/DetailModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'common/util/timeUtil',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _commonUtilTimeUtil, _config) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var DetailModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](DetailModel, _BaseModel);
        function DetailModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailModel);
            _BaseModel.apply(this, arguments);
        }
        DetailModel.prototype.prepare = function prepare() {
            var basicInfo = this.get('basicInfo');
            _u['default'].extend(basicInfo, { localTime: _timeUtil['default'].toTime(basicInfo.createTime) });
            this.set('basicInfo', basicInfo);
        };
        _babelRuntimeHelpersCreateClass['default'](DetailModel, [
            {
                key: 'iotPolicyDetail',
                get: function get() {
                    return _config.api.iotPolicyDetail;
                }
            },
            {
                key: 'subPermission',
                get: function get() {
                    return _config.api.subPermission;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        basicInfo: function basicInfo(model) {
                            return model.iotPolicyDetail({
                                endpointName: model.get('endpointName'),
                                policyName: model.get('policyName')
                            });
                        },
                        subPermission: function subPermission(model) {
                            return model.subPermission({
                                endpointName: model.get('endpointName'),
                                thingName: model.get('thingName')
                            });
                        }
                    };
                }
            }
        ]);
        return DetailModel;
    }(_BaseModel2['default']);
    module.exports = DetailModel;
});
define('iot/policy/DetailView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./detail.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    '../events'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplDetailTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _events) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var DetailView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](DetailView, _BaseView);
        function DetailView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailView);
            _BaseView.apply(this, arguments);
        }
        DetailView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'edit:click': function editClick(e) {
                    return _this.fire(_EVENTS['default'].EDIT, e);
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](DetailView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_policy_detail';
                }
            }]);
        return DetailView;
    }(_BaseView2['default']);
    module.exports = DetailView;
});
define('iot/policy/dialog/Create', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    'esui/lib',
    '../../events',
    './CreateModel',
    './CreateView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _esuiLib, _events, _CreateModel, _CreateView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _lib = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiLib);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateView);
    var Create = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Create, _FormAction);
        function Create() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Create);
            _FormAction.apply(this, arguments);
        }
        Create.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            var container = _lib['default'].g('topicContainer');
            var realContainer = _lib['default'].g('realContainer');
            this.delegateEvent('add-topic', 'click', this.addTopic, realContainer);
            this.delegateEvent('delete-topic', 'click', this.deleteTopic, container);
            this.topicInputEvent('input', container);
            this.on('entercomplete', this.view.loadTopicBox, this.view);
        };
        Create.prototype.addTopic = function addTopic(e) {
            this.view.loadTopicBox();
            this.fire('dialog.resize');
        };
        Create.prototype.deleteTopic = function deleteTopic(e) {
            _lib['default'].removeNode(e.target.parentNode);
            this.fire('dialog.resize');
        };
        Create.prototype.topicInputEvent = function topicInputEvent(eventType, main, context) {
            var _this = this;
            _lib['default'].on(main || document.body, eventType, function (e) {
                var target = _lib['default'].event.getTarget(e);
                var name = target.name;
                var operationsId = name.replace('topic', 'operations');
                var boxGroup = _this.view.get(operationsId);
                var child = boxGroup.getBoxElements()[0];
                if (target.value.startsWith('$SYS/')) {
                    if (child.checked) {
                        child.click();
                    }
                    child.disabled = true;
                } else {
                    child.disabled = false;
                }
            });
        };
        Create.prototype.delegateEvent = function delegateEvent(attr, eventType, handler, main, context) {
            var _this2 = this;
            _lib['default'].on(main || document.body, eventType, function (e) {
                var target = _lib['default'].event.getTarget(e);
                var attribute = target.getAttribute('action-type');
                if (attribute && attribute === attr) {
                    handler.call(context || _this2, {
                        target: target,
                        container: _this2,
                        eventType: eventType,
                        originEvent: e
                    });
                }
            });
        };
        Create.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u7B56\u7565\u521B\u5EFA\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Create.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').fire(_EVENTS['default'].POLICY_LOADED, { policyName: this.view.get('policyName').getValue() });
            this.view.get('form').fire('submitSuccess');
        };
        Create.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Create, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u7B56\u7565\u521B\u5EFA\u6210\u529F\uFF01';
                }
            }
        ]);
        return Create;
    }(_FormAction2['default']);
    module.exports = Create;
});
define('iot/policy/dialog/create.tpl', [], function () {
    return '<!-- target: TPL_iot_create_policy -->\n<div class="iot-policy-create-dialog iot-dialog-form order-recharge">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-data-body">\n            <div class="form-row form-name">\n                <label><i>\uFF0A</i>\u540D\u79F0\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                        data-ui-name="policyName"\n                        data-ui-id="policyName"></div>\n                    <!-- import: TPL_iot_name_tip -->\n                </div>\n            </div>\n            <div id="realContainer">\n                <div id="topicContainer" class="topic-list">\n                </div>\n                <div class="operation-line">\n                    <i class="origin"></i>\n                    <i class="iconfont icon-plus" action-type="add-topic"></i>\n                </div>\n            </div>\n            <p class="iot-form-tip">\u6CE8\uFF1A\u70B9\u51FB\u53F3\u4FA7\u52A0\uFF08\uFF0B\uFF09\u53F7\u4E3A\u672C\u7B56\u7565\u7ED1\u5B9A\u66F4\u591A\u7684\u4E3B\u9898\u3002</p>\n        </div>\n    </form>\n</div>\n<!-- target: TPL_iot_create_policy_child -->\n<!-- import: TPL_iot_create_policy -->\n';
});
define('iot/policy/dialog/CreateModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'bat-ria/mvc/FormModel',
    '../../enum',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _underscore, _babelRuntimeHelpersInteropRequireDefault, _batRiaMvcFormModel, _enum, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var CreateModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreateModel, _FormModel);
        function CreateModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateModel);
            _FormModel.apply(this, arguments);
        }
        CreateModel.prototype.getExtraData = function getExtraData() {
            return { endpointName: this.get('endpointName') };
        };
        CreateModel.prototype.filterData = function filterData(data) {
            this.filterTopicsData(data);
            return data;
        };
        CreateModel.prototype.filterTopicsData = function filterTopicsData(data) {
            var topics = [];
            var indexes = [];
            var indexReg = /[0-9]\d*$/gi;
            var normalizeProperties = [
                'topic',
                'operations'
            ];
            _u['default'].each(data, function (property, key) {
                var originKey = key.replace(indexReg, '');
                if (_u['default'].indexOf(normalizeProperties, originKey) !== -1) {
                    var index = key.match(indexReg);
                    index && indexes.push(index[0]);
                }
            });
            indexes = _u['default'].uniq(indexes);
            _u['default'].each(indexes, function (index) {
                var properties = {};
                _u['default'].each(normalizeProperties, function (property) {
                    var key = '' + property + index;
                    properties[property] = data[key];
                    delete data[key];
                });
                topics.push(properties);
            });
            data.topics = topics;
            return data;
        };
        _babelRuntimeHelpersCreateClass['default'](CreateModel, [
            {
                key: 'submitRequester',
                get: function get() {
                    return _config.api.iotPolicyCreate;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        policySource: function policySource(model) {
                            return _enum.OPERATIONS.toArray();
                        }
                    };
                }
            }
        ]);
        return CreateModel;
    }(_FormModel2['default']);
    module.exports = CreateModel;
});
define('iot/policy/dialog/CreateView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./create.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'esui',
    'esui/lib',
    'er/Deferred',
    '../../enum',
    '../../config',
    '../../helper'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreateTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _esui, _esuiLib, _erDeferred, _enum, _config, _helper) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ui = _babelRuntimeHelpersInteropRequireDefault['default'](_esui);
    var _lib = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiLib);
    var _Deferred = _babelRuntimeHelpersInteropRequireDefault['default'](_erDeferred);
    var _helper2 = _babelRuntimeHelpersInteropRequireDefault['default'](_helper);
    var globalIndex = 0;
    var topicProperties = {
        topic: {
            width: 200,
            title: '\u4E3B\u9898',
            placeholder: '\u8BF7\u586B\u5199\u4E3B\u9898\uFF0C\u957F\u5EA61-255',
            required: 'required',
            custom: _helper2['default'].isValidTopic,
            customErrorMessage: '\u4E3B\u9898\u683C\u5F0F\u9519\u8BEF'
        },
        operations: {
            title: '\u6743\u9650',
            required: 'required',
            value: _u['default'].pluck(_enum.OPERATIONS.toArray(), 'value').join()
        }
    };
    var CreateView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreateView, _FormView);
        function CreateView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateView);
            _FormView.apply(this, arguments);
        }
        CreateView.prototype.loadTopicBox = function loadTopicBox() {
            var _this = this;
            var container = _lib['default'].g('topicContainer');
            this.model.set('index', globalIndex);
            this.loadTemplate('TPL_iot_policy_fragment', container).done(function (args) {
                _ui['default'].init(args.box, {
                    viewContext: _this.viewContext,
                    properties: _this.getTopicBoxProperties(globalIndex++)
                });
                container.scrollTop = container.scrollHeight;
            });
        };
        CreateView.prototype.loadTemplate = function loadTemplate(name, container) {
            var deferred = new _Deferred['default']();
            var html = this.templateRender(name, this.getTemplateData());
            var box = document.createElement('DIV');
            box.className = 'topic-box';
            box.innerHTML = html;
            container.appendChild(box);
            deferred.resolve({
                box: box,
                container: container,
                html: html
            });
            return deferred.promise;
        };
        CreateView.prototype.getTopicBoxProperties = function getTopicBoxProperties(index) {
            var properties = _u['default'].deepClone(topicProperties);
            properties.operations.datasource = this.model.get('policySource');
            _u['default'].each(properties, function (property, key) {
                var newKey = '' + key + index;
                properties[newKey] = property;
                delete properties[key];
            });
            return properties;
        };
        _babelRuntimeHelpersCreateClass['default'](CreateView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_create_policy';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        policyName: {
                            title: '\u540D\u79F0',
                            width: 200,
                            placeholder: '\u8BF7\u586B\u5199\u540D\u79F0\uFF0C\u957F\u5EA63-32',
                            required: 'required',
                            pattern: _config.nameRegExp
                        }
                    };
                }
            }
        ]);
        return CreateView;
    }(_FormView2['default']);
    module.exports = CreateView;
});
define('iot/policy/dialog/Edit', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'bat-ria/mvc/FormAction',
    'esui/lib',
    'er/Deferred',
    '../../events',
    './EditModel',
    './EditView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _underscore, _babelRuntimeHelpersInteropRequireDefault, _batRiaMvcFormAction, _esuiLib, _erDeferred, _events, _EditModel, _EditView) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _lib = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiLib);
    var _Deferred = _babelRuntimeHelpersInteropRequireDefault['default'](_erDeferred);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_EditModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_EditView);
    var Edit = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Edit, _FormAction);
        function Edit() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Edit);
            _FormAction.apply(this, arguments);
        }
        Edit.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            var container = _lib['default'].g('topicContainer');
            var realContainer = _lib['default'].g('realContainer');
            this.delegateEvent('add-topic', 'click', this.addTopic, realContainer);
            this.delegateEvent('delete-topic', 'click', this.deleteTopic, container);
            this.topicInputEvent('input', container);
            this.on('entercomplete', this.getTopics, this);
        };
        Edit.prototype.topicInputEvent = function topicInputEvent(eventType, main, context) {
            var _this = this;
            _lib['default'].on(main || document.body, eventType, function (e) {
                var target = _lib['default'].event.getTarget(e);
                var name = target.name;
                var operationsId = name.replace('topic', 'operations');
                var boxGroup = _this.view.get(operationsId);
                var child = boxGroup.getBoxElements()[0];
                if (target.value.startsWith('$SYS/')) {
                    if (child.checked) {
                        child.click();
                    }
                    child.disabled = true;
                } else {
                    child.disabled = false;
                }
            });
        };
        Edit.prototype.getTopics = function getTopics(e) {
            var _this2 = this;
            var funcs = [];
            var topics = this.model.get('topics');
            _u['default'].each(topics, function (topic) {
                return funcs.push({
                    func: _this2.view.loadTopicBox,
                    param: topic
                });
            });
            this.loadSequence(funcs, this.view).done(function () {
                return _this2.fire('dialog.resize');
            });
        };
        Edit.prototype.addTopic = function addTopic(e) {
            this.view.loadTopicBox();
            this.fire('dialog.resize');
        };
        Edit.prototype.deleteTopic = function deleteTopic(e) {
            _lib['default'].removeNode(e.target.parentNode);
            this.fire('dialog.resize');
        };
        Edit.prototype.delegateEvent = function delegateEvent(attr, eventType, handler, main, context) {
            var _this3 = this;
            _lib['default'].on(main || document.body, eventType, function (e) {
                var target = _lib['default'].event.getTarget(e);
                var attribute = target.getAttribute('action-type');
                if (attribute && attribute === attr) {
                    handler.call(context || _this3, {
                        target: target,
                        container: _this3,
                        eventType: eventType,
                        originEvent: e
                    });
                }
            });
        };
        Edit.prototype.loadSequence = function loadSequence(funcs, context) {
            var _this4 = this;
            var loading = _Deferred['default'].resolved();
            _u['default'].each(funcs, function (unit) {
                var task = _u['default'].bind(unit.func, context || _this4, unit.param, unit);
                loading = loading.done(task);
            });
            return loading;
        };
        Edit.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u7B56\u7565\u7F16\u8F91\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Edit.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').fire(_EVENTS['default'].POLICY_LOADED);
            this.view.get('form').fire('submitSuccess');
        };
        Edit.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Edit, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u7B56\u7565\u7F16\u8F91\u6210\u529F\uFF01';
                }
            }
        ]);
        return Edit;
    }(_FormAction2['default']);
    module.exports = Edit;
});
define('iot/policy/dialog/edit.tpl', [], function () {
    return '<!-- target: TPL_iot_edit_policy -->\n<div class="iot-policy-create-dialog iot-dialog-form order-recharge">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-data-body">\n            <div class="form-row form-name">\n                <label>\u540D\u79F0\uFF1A</label>\n                <div class="form-value">\n                    <div class="default-txt">${policyName}</div>\n                </div>\n            </div>\n            <div id="realContainer">\n                <div id="topicContainer" class="topic-list">\n                </div>\n                <div class="operation-line">\n                    <i class="origin"></i>\n                    <i class="iconfont icon-plus" action-type="add-topic"></i>\n                </div>\n            </div>\n            <p class="iot-form-tip">\u6CE8\uFF1A\u70B9\u51FB\u53F3\u4FA7\u52A0\uFF08\uFF0B\uFF09\u53F7\u4E3A\u672C\u7B56\u7565\u7ED1\u5B9A\u66F4\u591A\u7684\u4E3B\u9898\u3002</p>\n        </div>\n    </form>\n</div>\n<!-- target: TPL_iot_edit_policy_child -->\n<!-- import: TPL_iot_edit_policy -->\n';
});
define('iot/policy/dialog/EditModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'bat-ria/mvc/FormModel',
    '../../enum',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _underscore, _babelRuntimeHelpersInteropRequireDefault, _batRiaMvcFormModel, _enum, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var EditModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](EditModel, _FormModel);
        function EditModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EditModel);
            _FormModel.apply(this, arguments);
        }
        EditModel.prototype.getExtraData = function getExtraData() {
            return {
                endpointName: this.get('endpointName'),
                policyName: this.get('policyName')
            };
        };
        EditModel.prototype.filterData = function filterData(data) {
            this.filterTopicsData(data);
            return data;
        };
        EditModel.prototype.filterTopicsData = function filterTopicsData(data) {
            var topics = [];
            var indexes = [];
            var indexReg = /[0-9]\d*$/gi;
            var normalizeProperties = [
                'topic',
                'operations'
            ];
            _u['default'].each(data, function (property, key) {
                var originKey = key.replace(indexReg, '');
                if (_u['default'].indexOf(normalizeProperties, originKey) !== -1) {
                    var index = key.match(indexReg);
                    index && indexes.push(index[0]);
                }
            });
            indexes = _u['default'].uniq(indexes);
            _u['default'].each(indexes, function (index) {
                var properties = {};
                _u['default'].each(normalizeProperties, function (property) {
                    var key = '' + property + index;
                    properties[property] = data[key];
                    delete data[key];
                });
                topics.push(properties);
            });
            data.topics = topics;
            return data;
        };
        _babelRuntimeHelpersCreateClass['default'](EditModel, [
            {
                key: 'submitRequester',
                get: function get() {
                    return _config.api.iotPolicyEdit;
                }
            },
            {
                key: 'iotPolicyDetail',
                get: function get() {
                    return _config.api.iotPolicyDetail;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        policySource: function policySource(model) {
                            return _enum.OPERATIONS.toArray();
                        },
                        topics: function topics(model) {
                            return model.iotPolicyDetail({
                                endpointName: model.get('endpointName'),
                                policyName: model.get('policyName')
                            }).done(function (data) {
                                return data.topics;
                            });
                        }
                    };
                }
            }
        ]);
        return EditModel;
    }(_FormModel2['default']);
    module.exports = EditModel;
});
define('iot/policy/dialog/EditView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./edit.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'esui',
    'esui/lib',
    'er/Deferred',
    '../../enum',
    '../../helper'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplEditTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _esui, _esuiLib, _erDeferred, _enum, _helper) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ui = _babelRuntimeHelpersInteropRequireDefault['default'](_esui);
    var _lib = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiLib);
    var _Deferred = _babelRuntimeHelpersInteropRequireDefault['default'](_erDeferred);
    var _helper2 = _babelRuntimeHelpersInteropRequireDefault['default'](_helper);
    var globalIndex = 0;
    var topicProperties = {
        topic: {
            width: 200,
            title: '\u4E3B\u9898',
            placeholder: '\u8BF7\u586B\u5199\u4E3B\u9898\uFF0C\u957F\u5EA61-255',
            required: 'required',
            custom: _helper2['default'].isValidTopic,
            customErrorMessage: '\u4E3B\u9898\u683C\u5F0F\u9519\u8BEF'
        },
        operations: {
            title: '\u6743\u9650',
            required: 'required',
            value: _u['default'].pluck(_enum.OPERATIONS.toArray(), 'value').join()
        }
    };
    var EditView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](EditView, _FormView);
        function EditView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EditView);
            _FormView.apply(this, arguments);
        }
        EditView.prototype.loadTopicBox = function loadTopicBox(params) {
            var _this = this;
            var container = _lib['default'].g('topicContainer');
            this.model.set('index', globalIndex);
            this.loadTemplate('TPL_iot_policy_fragment', container).done(function (args) {
                _ui['default'].init(args.box, {
                    viewContext: _this.viewContext,
                    properties: _this.getTopicBoxProperties(globalIndex++, params)
                });
                container.scrollTop = container.scrollHeight;
            });
        };
        EditView.prototype.loadTemplate = function loadTemplate(name, container) {
            var deferred = new _Deferred['default']();
            var html = this.templateRender(name, this.getTemplateData());
            var box = document.createElement('DIV');
            box.className = 'topic-box';
            box.innerHTML = html;
            container.appendChild(box);
            deferred.resolve({
                box: box,
                container: container,
                html: html
            });
            return deferred.promise;
        };
        EditView.prototype.getTopicBoxProperties = function getTopicBoxProperties(index) {
            var params = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];
            var properties = _u['default'].deepClone(topicProperties);
            properties.operations.datasource = this.model.get('policySource');
            _u['default'].each(properties, function (property, key) {
                var newKey = '' + key + index;
                var param = params[key];
                param && (property.value = param.toString());
                properties[newKey] = property;
                delete properties[key];
            });
            return properties;
        };
        _babelRuntimeHelpersCreateClass['default'](EditView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_edit_policy';
                }
            }]);
        return EditView;
    }(_FormView2['default']);
    module.exports = EditView;
});
define('iot/policy/List', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    '../events',
    '../operations',
    './ListModel',
    './ListView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _events, _operations, _ListModel, _ListView) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ListModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ListView);
    var PolicyList = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](PolicyList, _ListAction);
        function PolicyList() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PolicyList);
            _ListAction.apply(this, arguments);
        }
        PolicyList.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].REFRESH, this.reload, this);
            this.view.on(_EVENTS['default'].CREATE, this.create, this);
            this.view.on(_EVENTS['default'].EDIT, this.edit, this);
            this.view.on(_EVENTS['default'].DELETE, this['delete'], this);
            this.on(_EVENTS['default'].POLICY_LOADED, this.reload);
        };
        PolicyList.prototype.create = function create() {
            _operations2['default'].createPolicy.call(this, {
                parentAction: this,
                endpointName: this.model.get('endpointName')
            });
        };
        PolicyList.prototype.edit = function edit(e) {
            var _e$args$split = e.args.split(',');
            var endpointName = _e$args$split[0];
            var policyName = _e$args$split[1];
            _operations2['default'].editPolicy.call(this, {
                parentAction: this,
                endpointName: endpointName,
                policyName: policyName
            });
        };
        PolicyList.prototype['delete'] = function _delete(e) {
            var _e$args$split2 = e.args.split(',');
            var endpointName = _e$args$split2[0];
            var policyName = _e$args$split2[1];
            _operations2['default'].confirmHandler({
                title: '\u5220\u9664\u7B56\u7565',
                content: '\u786E\u8BA4\u5220\u9664\u8BE5\u7B56\u7565',
                width: 300
            }, 'policy.delete', this.view, {
                endpointName: endpointName,
                policyName: policyName
            });
        };
        _babelRuntimeHelpersCreateClass['default'](PolicyList, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return PolicyList;
    }(_ListAction2['default']);
    module.exports = PolicyList;
});
define('iot/policy/list.tpl', [], function () {
    return '<!-- target: TPL_iot_policy_list -->\n<div class="iot-main-wrap iot-thing-list main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u7269\u8054\u7F51\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u7B56\u7565\u5217\u8868</span>\n        </p>\n        <div class="list-content">\n            <h2>\u7B56\u7565\u5217\u8868</h2>\n            <div class="table-full-wrap">\n                <div class="operation-wrap">\n                    <!-- if: ${subPermission.permission.IotHubManage}-->\n                    <button data-ui-id="create"\n                        data-ui-type="Button"\n                        data-ui-skin="create"\n                        title="\u521B\u5EFA\u7B56\u7565">\u521B\u5EFA\u7B56\u7565</button>\n                    <span data-ui-arrow="false" data-ui-type="Tip" data-ui-layer-width="160" class="ssl-tip">\u6700\u591A\u53EF\u521B\u5EFA10000\u4E2A\u7B56\u7565\uFF0C\u53EF<a href="http://ticket.bce.baidu.com/#/ticket/create ">\u63D0\u4EA4\u5DE5\u5355</a>\u7533\u8BF7\u66F4\u591A\u989D\u5EA6</span>\n                    <!-- /if -->\n                    <span class="ui-group ui-search-group">\n                        <input class="search-box"\n                            data-ui-type="TextBox"\n                            data-ui-id="keyword" />\n                        <button data-ui-type="Button"\n                            data-ui-id="searchBtn"\n                            class="search-button"></button>\n                    </span>\n                </div>\n\n                <div data-ui-type="Table" data-ui-id="table"\n                     data-ui-datasource="@tableData"\n                     data-ui-order-by="@orderBy" data-ui-order="@order"\n                     data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                     data-ui-extension-command-type="Command"\n                     data-ui-extension-tableedit-type="TableEdit"\n                     data-ui-extension-tableex-type="TableEx">\n                </div>\n                <div class="ui-row">\n                <!-- import: listPager -->\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/policy/ListModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var PolicyListModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](PolicyListModel, _ListModel);
        function PolicyListModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PolicyListModel);
            _ListModel.apply(this, arguments);
        }
        PolicyListModel.prototype.getExtraQuery = function getExtraQuery() {
            return { endpointName: this.get('endpointName') };
        };
        _babelRuntimeHelpersCreateClass['default'](PolicyListModel, [
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.iotPolicyList;
                }
            },
            {
                key: 'subPermission',
                get: function get() {
                    return _config.api.subPermission;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        subPermission: function subPermission(model) {
                            return model.subPermission({
                                endpointName: model.get('endpointName'),
                                thingName: model.get('thingName')
                            });
                        }
                    };
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize
                    };
                }
            }
        ]);
        return PolicyListModel;
    }(_ListModel2['default']);
    module.exports = PolicyListModel;
});
define('iot/policy/ListView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./list.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/ListView',
    'common/util/tableUtil',
    'common/util/timeUtil',
    '../events',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplListTplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcListView, _commonUtilTableUtil, _commonUtilTimeUtil, _events, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _localConfig = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u7B56\u7565\u540D\u79F0',
                field: 'policyName',
                content: function content(item) {
                    var endpointName = _u['default'].escape(item.endpointName);
                    var policyName = _u['default'].escape(item.policyName);
                    return '<a href=\n                    "#/iot/policy/detail~endpointName=' + endpointName + '&policyName=' + policyName + '"\n                    >' + policyName + '</a>';
                }
            },
            {
                title: '\u4E3B\u9898',
                field: 'topics',
                content: function content(item) {
                    var topics = _u['default'].pluck(item.topics, 'topic');
                    return _u['default'].escape(topics);
                }
            },
            {
                title: '\u521B\u5EFA\u65F6\u95F4',
                field: 'createTime',
                content: function content(item) {
                    return _timeUtil['default'].toTime(item.createTime);
                }
            },
            {
                title: '\u64CD\u4F5C',
                stable: true,
                width: 165,
                field: 'operation',
                content: function content(item, row) {
                    return view.getAllOpertionsHtml(item, row);
                }
            }
        ];
    }
    var PolicyListView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](PolicyListView, _ListView);
        function PolicyListView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PolicyListView);
            _ListView.apply(this, arguments);
        }
        PolicyListView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'create:click': function createClick(e) {
                    return _this.fire(_EVENTS['default'].CREATE, e);
                },
                'table:command': function tableCommand(e) {
                    return _this.fire(e.name, e);
                },
                'keyword:enter': function keywordEnter(e) {
                    return _this.submitSearch(e);
                },
                'searchBtn:enter': function searchBtnEnter(e) {
                    return _this.submitSearch(e);
                }
            });
        };
        PolicyListView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
        };
        PolicyListView.prototype.getAllOpertionsHtml = function getAllOpertionsHtml(item, row) {
            var html = [];
            if (this.model.get('subPermission').permission.IotHubManage) {
                Array.prototype.push.apply(html, [
                    this.getEditHtml(item, row),
                    this.getDeleteHtml(item, row)
                ]);
            }
            return html.join('');
        };
        PolicyListView.prototype.getEditHtml = function getEditHtml(item, row) {
            var canDo = true;
            var args = [
                item.endpointName,
                item.policyName
            ].join();
            return _u['default'].template(_localConfig['default'].tpl.command)({
                label: '\u7F16\u8F91',
                command: _EVENTS['default'].EDIT,
                args: args,
                className: canDo ? '' : 'state-disabled',
                disabled: canDo ? '' : 'disabled'
            });
        };
        PolicyListView.prototype.getDeleteHtml = function getDeleteHtml(item, row) {
            var canDo = true;
            var args = [
                item.endpointName,
                item.policyName
            ].join();
            return _u['default'].template(_localConfig['default'].tpl.command)({
                label: '\u5220\u9664',
                command: _EVENTS['default'].DELETE,
                args: args,
                className: canDo ? '' : 'state-disabled',
                disabled: canDo ? '' : 'disabled'
            });
        };
        _babelRuntimeHelpersCreateClass['default'](PolicyListView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_policy_list';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        keyword: {
                            width: 220,
                            value: '@keyword',
                            placeholder: '\u8BF7\u8F93\u5165\u7B56\u7565\u540D\u79F0'
                        },
                        table: {
                            select: false,
                            editable: 1,
                            columnResizable: true,
                            fields: '@tableFields',
                            noDataHtml: _localConfig['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return PolicyListView;
    }(_ListView2['default']);
    module.exports = PolicyListView;
});
define('iot/principal/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var actionsConfig = [
        {
            type: 'iot/principal/List',
            path: '/iot/principal/list'
        },
        {
            type: 'iot/principal/Detail',
            path: '/iot/principal/detail'
        },
        {
            type: 'iot/principal/dialog/Create',
            path: '/iot/principal/create'
        },
        {
            type: 'iot/principal/dialog/Edit',
            path: '/iot/principal/edit'
        },
        {
            type: 'iot/principal/dialog/Thing',
            path: '/iot/principal/thing'
        },
        {
            type: 'iot/principal/dialog/Principal',
            path: '/iot/principal/principal'
        },
        {
            type: 'iot/principal/dialog/Success',
            path: '/iot/principal/success'
        },
        {
            type: 'iot/principal/dialog/Confirm',
            path: '/iot/principal/confirm'
        }
    ];
    _controller['default'].registerAction(actionsConfig);
    module.exports = {
        noDataHtml: [
            '<div><p>\u4F60\u8FD8\u6CA1\u521B\u5EFA\u4EFB\u4F55\u8EAB\u4EFD</br>',
            '\u70B9\u51FB\u5DE6\u4E0A\u89D2\u6309\u94AE\u7ACB\u5373\u521B\u5EFA\u6216\u8054\u7CFB\u7BA1\u7406\u5458\u521B\u5EFA',
            '</p></div>'
        ].join(''),
        tpl: { command: '<span class="operations"><button data-command="<%- command %>" ' + 'data-command-args="<%- args %>" class="cmd-button <%- className %>" <%- disabled %>>' + '<%- label %></button></span>' }
    };
});
define('iot/principal/Detail', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    '../events',
    '../operations',
    './DetailModel',
    './DetailView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _events, _operations, _DetailModel, _DetailView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailView);
    var Detail = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Detail, _BaseAction);
        function Detail() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Detail);
            _BaseAction.apply(this, arguments);
        }
        Detail.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].EDIT, this.edit, this);
        };
        Detail.prototype.edit = function edit(e) {
            _operations2['default'].editPrincipal.call(this, {
                parentAction: this,
                endpointName: this.model.get('endpointName'),
                principalName: this.model.get('principalName')
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Detail, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Detail;
    }(_BaseAction2['default']);
    module.exports = Detail;
});
define('iot/principal/detail.tpl', [], function () {
    return '<!-- target: TPL_iot_principal_detail -->\n<div class="iot-endpoint-detail iot-main-wrap main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u7269\u8054\u7F51\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <a href="#/iot/principal/list~endpointName=${endpointName}">\u8EAB\u4EFD\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u8EAB\u4EFD\u8BE6\u60C5</span>\n        </p>\n        <div class="detail-content list-content">\n            <h2>\n                \u8EAB\u4EFD\u8BE6\u60C5\n                <!-- if: ${subPermission.permission.IotHubManage}-->\n                <span data-ui-type="Button"\n                    data-ui-id="edit"\n                    data-ui-skin="edit">\u7F16\u8F91</span>\n                <!-- /if -->\n            </h2>\n            <dl class="detail-content-item">\n                <dt></dt>\n                <dd>\n                    <div class="detail-content-row">\n                        <label>\u540D\u79F0\uFF1A</label>\n                        <div class="detail-content-value">${basicInfo.principalName}</div>\n                    </div>\n                    <div class="detail-content-row">\n                        <label>\u521B\u5EFA\u65F6\u95F4\uFF1A</label>\n                        <div class="detail-content-value">${basicInfo.localTime}</div>\n                    </div>\n                    <div class="detail-content-row">\n                        <label>\u7ED1\u5B9A\u7B56\u7565\uFF1A</label>\n                        <div class="detail-content-value">\n                            <a href="#/iot/policy/detail~endpointName=${endpointName}&policyName=${basicInfo.policyName}">${basicInfo.policyName}</a>\n                        </div>\n                    </div>\n                </dd>\n            </dl>\n        </div>\n    </div>\n</div>\n';
});
define('iot/principal/DetailModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'common/util/timeUtil',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _commonUtilTimeUtil, _config) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var DetailModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](DetailModel, _BaseModel);
        function DetailModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailModel);
            _BaseModel.apply(this, arguments);
        }
        DetailModel.prototype.prepare = function prepare() {
            var basicInfo = this.get('basicInfo');
            _u['default'].extend(basicInfo, { localTime: _timeUtil['default'].toTime(basicInfo.createTime) });
            this.set('basicInfo', basicInfo);
        };
        _babelRuntimeHelpersCreateClass['default'](DetailModel, [
            {
                key: 'iotPrincipalDetail',
                get: function get() {
                    return _config.api.iotPrincipalDetail;
                }
            },
            {
                key: 'subPermission',
                get: function get() {
                    return _config.api.subPermission;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        basicInfo: function basicInfo(model) {
                            return model.iotPrincipalDetail({
                                endpointName: model.get('endpointName'),
                                principalName: model.get('principalName')
                            });
                        },
                        subPermission: function subPermission(model) {
                            return model.subPermission({
                                endpointName: model.get('endpointName'),
                                thingName: model.get('thingName')
                            });
                        }
                    };
                }
            }
        ]);
        return DetailModel;
    }(_BaseModel2['default']);
    module.exports = DetailModel;
});
define('iot/principal/DetailView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./detail.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    '../events'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplDetailTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _events) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var DetailView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](DetailView, _BaseView);
        function DetailView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailView);
            _BaseView.apply(this, arguments);
        }
        DetailView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'edit:click': function editClick(e) {
                    return _this.fire(_EVENTS['default'].EDIT, e);
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](DetailView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_principal_detail';
                }
            }]);
        return DetailView;
    }(_BaseView2['default']);
    module.exports = DetailView;
});
define('iot/principal/dialog/Confirm', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './ConfirmModel',
    './ConfirmView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _ConfirmModel, _ConfirmView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ConfirmModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ConfirmView);
    var Confirm = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Confirm, _BaseAction);
        function Confirm() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Confirm);
            _BaseAction.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](Confirm, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Confirm;
    }(_BaseAction2['default']);
    module.exports = Confirm;
});
define('iot/principal/dialog/confirm.tpl', [], function () {
    return '<!-- target: TPL_iot_confirm_principal -->\n<div class="iot-dialog-form iot-principal-confirm-dialog order-recharge">\n    <p class="principal-confirm-tip">\u8EAB\u4EFD\u201C${principalName}\u201D\u7684\u5BC6\u94A5\u751F\u6210\u6210\u529F\uFF0C\u8BF7\u59A5\u5584\u4FDD\u7BA1\u5BC6\u94A5\uFF0C\u4F60\u5C06\u8981\u4F7F\u7528\u8EAB\u4EFD/\u5BC6\u94A5\u6765\u8FDE\u63A5IoT\u670D\u52A1\u3002</p>\n    <div class="password">\n        <label></label>\n        <div>\n            <span>${password}</span>\n            <a data-ui-type="Clipboard"\n                data-ui-id="copyPassword"\n                data-ui-clipboard-text="${password}"\n                class="ui-button skin-primary-button copy-password">\u70B9\u51FB\u590D\u5236</a>\n        </div>\n    </div>\n    <p class="notice">*\u8BF7\u5408\u7406\u4FDD\u7BA1\u4EE5\u4E0A\u5BC6\u94A5\uFF0C\u5BC6\u94A5\u4E22\u5931\u65E0\u6CD5\u627E\u56DE\uFF0C\u53EA\u80FD\u91CD\u65B0\u751F\u6210</p>\n</div>\n<!-- target: TPL_iot_confirm_principal_child -->\n<!-- import: TPL_iot_confirm_principal -->\n';
});
define('iot/principal/dialog/ConfirmModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var ConfirmModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](ConfirmModel, _BaseModel);
        function ConfirmModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ConfirmModel);
            _BaseModel.apply(this, arguments);
        }
        return ConfirmModel;
    }(_BaseModel2['default']);
    module.exports = ConfirmModel;
});
define('iot/principal/dialog/ConfirmView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./confirm.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplConfirmTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var ConfirmView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](ConfirmView, _BaseView);
        function ConfirmView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ConfirmView);
            _BaseView.apply(this, arguments);
        }
        ConfirmView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'copyPassword:aftercopy': function copyPasswordAftercopy(e) {
                    return _this.showToast('\u590D\u5236\u6210\u529F');
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](ConfirmView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_confirm_principal';
                }
            }]);
        return ConfirmView;
    }(_BaseView2['default']);
    module.exports = ConfirmView;
});
define('iot/principal/dialog/Create', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../events',
    '../../_public/util',
    './CreateModel',
    './CreateView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _underscore, _events, _publicUtil, _CreateModel, _CreateView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateView);
    var Create = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Create, _FormAction);
        function Create() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Create);
            _FormAction.apply(this, arguments);
        }
        Create.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].PRINCIPAL_CREATED, this.doCreate, this);
            this.view.on(_EVENTS['default'].BEFORE_CHANGE, this.validateStep, this);
            this.view.on(_EVENTS['default'].CONFIRM, this.redirectAfterSubmit, this);
            this.on('beforesubmit', this.beforeSubmit);
            this.on('entercomplete', this.renderNextView);
        };
        Create.prototype.beforeSubmit = function beforeSubmit(e) {
            e.preventDefault();
            this.renderNextView();
        };
        Create.prototype.renderNextView = function renderNextView() {
            var formData = this.view.getFormData();
            var submitData = this.model.getSubmitData(formData);
            this.view.renderNextView({
                parentAction: this,
                formData: submitData
            });
        };
        Create.prototype.checkDuplicate = function checkDuplicate(formData, key) {
            var isValid = true;
            var form = this.view.get('form');
            var _form$getInputControls = form.getInputControls();
            var suggestInput = _form$getInputControls[0];
            var customInput = _form$getInputControls[1];
            if (_u['default'].contains(_u['default'].pluck(suggestInput._listData, key), formData[key])) {
                customInput.showValidationMessage('invalid', '\u8BE5\u540D\u79F0\u5DF2\u5B58\u5728');
                isValid = false;
            }
            return isValid;
        };
        Create.prototype.validateStep = function validateStep(e) {
            var dir = e.dir;
            var viewStep = e.viewStep;
            var formData = e.formData;
            if (dir) {
                if (viewStep === 2 && formData.policyName) {
                    if (!this.checkDuplicate(formData, 'policyName')) {
                        e.preventDefault();
                    }
                }
            }
        };
        Create.prototype.doCreate = function doCreate(e) {
            var _this = this;
            var queryData = this.filterData(e.allConfig);
            this.model.submitRequester(queryData, { 'X-silence': true }).done(function (data) {
                _this.view.showToast(_this.getToastMessage());
                var main = _this.view.get('form').main;
                var pwdPanel = _T['default'].getUIControls(main, null, 'Panel')[0];
                if (data.password) {
                    pwdPanel.show();
                    var clip = _T['default'].getUIControls(main, null, 'Clipboard')[0];
                    clip && clip.set('clipboardText', data.password);
                } else {
                    pwdPanel.hide();
                }
                _this.view.setFormData(data);
            }).fail(function (data) {
                return _this.handleSubmitError(data);
            });
        };
        Create.prototype.filterData = function filterData(data) {
            var result = {};
            var principal = data[0];
            var policy = data[1];
            var principalData = principal.formData;
            var policyData = policy.formData;
            var endpointName = principalData.endpointName;
            if (policyData && !policyData.policy) {
                result.policy = {
                    endpointName: endpointName,
                    policyName: policyData.policyName,
                    topics: policyData.topics
                };
            }
            result.principal = {
                endpointName: endpointName,
                principalName: principalData.principalName,
                policyName: policyData.policy || policyData.policyName
            };
            return result;
        };
        Create.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u8EAB\u4EFD\u521B\u5EFA\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Create.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        Create.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Create, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u8EAB\u4EFD\u521B\u5EFA\u6210\u529F\uFF01';
                }
            }
        ]);
        return Create;
    }(_FormAction2['default']);
    module.exports = Create;
});
define('iot/principal/dialog/create.tpl', [], function () {
    return '<!-- target: TPL_iot_create_principal -->\n<div class="iot-dialog-form iot-edit-dialog iot-principal-dialog iot-policy-create-dialog order-recharge">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-row step-form-row">\n            <div data-ui-type="ViewStep"\n                data-ui-id="viewStep"\n                data-ui-current-step="0">\n                <ul>\n                    <li>\u521B\u5EFA\u8EAB\u4EFD</li>\n                    <li>\u8BBE\u7F6E\u7B56\u7565</li>\n                    <li>\u914D\u7F6E\u786E\u8BA4</li>\n                </ul>\n            </div>\n        </div>\n        <div class="form-data-body" data-ui="type:ActionPanel;id:stepControl"></div>\n    </form>\n</div>\n<!-- target: TPL_iot_create_principal_child -->\n<!-- import: TPL_iot_create_principal -->\n';
});
define('iot/principal/dialog/CreateModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var CreateModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreateModel, _FormModel);
        function CreateModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateModel);
            _FormModel.apply(this, arguments);
        }
        CreateModel.prototype.getExtraData = function getExtraData() {
            return { endpointName: this.get('endpointName') };
        };
        CreateModel.prototype.filterData = function filterData(data) {
            this.filterTopicsData(data);
            return data;
        };
        CreateModel.prototype.filterTopicsData = function filterTopicsData(data) {
            var topics = [];
            var indexes = [];
            var indexReg = /[0-9]\d*$/gi;
            var normalizeProperties = [
                'topic',
                'operations'
            ];
            _u['default'].each(data, function (property, key) {
                var originKey = key.replace(indexReg, '');
                if (_u['default'].indexOf(normalizeProperties, originKey) !== -1) {
                    var index = key.match(indexReg);
                    index && indexes.push(index[0]);
                }
            });
            indexes = _u['default'].uniq(indexes);
            _u['default'].each(indexes, function (index) {
                var properties = {};
                _u['default'].each(normalizeProperties, function (property) {
                    var key = '' + property + index;
                    properties[property] = data[key];
                    delete data[key];
                });
                topics.push(properties);
            });
            data.topics = topics;
            return data;
        };
        _babelRuntimeHelpersCreateClass['default'](CreateModel, [{
                key: 'submitRequester',
                get: function get() {
                    return _config.api.iotPrincipalCreateV2;
                }
            }]);
        return CreateModel;
    }(_FormModel2['default']);
    module.exports = CreateModel;
});
define('iot/principal/dialog/CreateView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./create.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'er/Deferred',
    'esui',
    'jquery',
    '../../events',
    '../../_public/util'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreateTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _erDeferred, _esui, _jquery, _events, _publicUtil) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _Deferred = _babelRuntimeHelpersInteropRequireDefault['default'](_erDeferred);
    var _ui = _babelRuntimeHelpersInteropRequireDefault['default'](_esui);
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var STEP = [
        {
            url: '/iot/principal/principal',
            hidden: ['btnFootLast'],
            bodyHeight: 87
        },
        {
            url: '/iot/thing/policy',
            access: function access(formData) {
                return !formData.policy;
            },
            bodyHeight: 87
        },
        {
            url: '/iot/principal/success',
            hidden: [
                'btnFootLast',
                'btnFootCancel'
            ],
            bodyHeight: 187
        }
    ];
    var CreateView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreateView, _FormView);
        function CreateView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateView);
            _FormView.apply(this, arguments);
        }
        CreateView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'stepControl:prev': function stepControlPrev(e) {
                    return _this.renderLastView();
                }
            };
        };
        CreateView.prototype.setExtraFormData = function setExtraFormData(formData) {
            var form = this.get('form');
            var labels = _T['default'].getUIControls(form.main, null, 'Label');
            _u['default'].each(labels, function (label) {
                var refKey = label.get('for');
                if (formData[refKey]) {
                    label.setText(formData[refKey]);
                }
            });
        };
        CreateView.prototype.renderLastView = function renderLastView(e) {
            var _this2 = this;
            this.renderActionView().done(function (data) {
                var formData = data.action.formData;
                _this2.setFormData(formData);
            });
        };
        CreateView.prototype.renderNextView = function renderNextView(options) {
            var _this3 = this;
            this.renderActionView(options, true).done(function (data) {
                if (data.viewStep === STEP.length) {
                    _this3.fire(_EVENTS['default'].PRINCIPAL_CREATED, data);
                } else if (data.viewStep > STEP.length) {
                    _this3.fire(_EVENTS['default'].CONFIRM, data);
                }
            });
        };
        CreateView.prototype.renderActionView = function renderActionView(options, dir) {
            if (options === undefined)
                options = {};
            var result = _Deferred['default'].rejected();
            var viewStepControl = this.get('viewStep');
            var viewStep = viewStepControl.get('currentStep');
            var currentAction = STEP[viewStep - 1];
            var handleBeforeChange = this.fire(_EVENTS['default'].BEFORE_CHANGE, _u['default'].extend(options, {
                dir: dir,
                viewStep: viewStep
            }));
            if (handleBeforeChange.isDefaultPrevented()) {
                return;
            }
            if (dir) {
                viewStep = viewStep + 1;
                if (currentAction) {
                    currentAction.formData = options.formData;
                }
                if (!currentAction || !_u['default'].isFunction(currentAction.access) || currentAction.access(options.formData)) {
                    var nextAction = STEP[viewStep - 1];
                    if (nextAction) {
                        result = this.changeStepView(nextAction, options, viewStep);
                    } else {
                        result = _Deferred['default'].resolved({
                            viewStep: viewStep,
                            allConfig: STEP
                        });
                    }
                } else {
                    viewStep = STEP.length;
                    var successAction = STEP[viewStep - 1];
                    result = this.changeStepView(successAction, options, viewStep);
                }
            } else {
                viewStep = viewStep - 1;
                var lastAction = STEP[viewStep - 1];
                options.formData = lastAction.formData;
                result = this.changeStepView(lastAction, options, viewStep);
            }
            return result;
        };
        CreateView.prototype.getDialog = function getDialog() {
            var container = this.getContainerElement();
            var dialogContainer = _$['default'](container).parents('.ui-dialog').get(0);
            return _ui['default'].getControlByDOM(dialogContainer);
        };
        CreateView.prototype.changeStepView = function changeStepView(action, options, viewStep) {
            var panel = this.get('stepControl');
            var viewStepControl = this.get('viewStep');
            var dialog = this.getDialog();
            var dialogBody = dialog.get('body');
            var dialogFoot = dialog.get('foot');
            action.bodyHeight && (dialogBody.main.style.minHeight = action.bodyHeight + 'px');
            dialog.resize();
            _u['default'].each(dialogFoot.children, function (child) {
                var behavior = _u['default'].contains(action.hidden, child.id) ? 'hide' : 'show';
                child[behavior]();
            });
            var btnOk = dialogFoot.getChild('btnOk');
            if (viewStep >= STEP.length) {
                btnOk.setContent('\u786E\u8BA4');
            } else {
                btnOk.setContent('\u4E0B\u4E00\u6B65');
            }
            panel.setProperties({
                url: action.url,
                actionOptions: options
            });
            return panel.action.done(function () {
                viewStepControl.set('currentStep', viewStep);
                return {
                    action: action,
                    viewStep: viewStep,
                    allConfig: STEP,
                    dialog: dialog
                };
            });
        };
        _babelRuntimeHelpersCreateClass['default'](CreateView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_create_principal';
                }
            }]);
        return CreateView;
    }(_FormView2['default']);
    module.exports = CreateView;
});
define('iot/principal/dialog/Edit', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../events',
    '../../_public/util',
    './EditModel',
    './EditView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _underscore, _events, _publicUtil, _EditModel, _EditView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_EditModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_EditView);
    var Edit = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Edit, _FormAction);
        function Edit() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Edit);
            _FormAction.apply(this, arguments);
        }
        Edit.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].PRINCIPAL_CREATED, this.doCreate, this);
            this.view.on(_EVENTS['default'].BEFORE_CHANGE, this.validateStep, this);
            this.view.on(_EVENTS['default'].CONFIRM, this.redirectAfterSubmit, this);
            this.on('beforesubmit', this.beforeSubmit);
            this.on('entercomplete', this.renderNextView);
        };
        Edit.prototype.beforeSubmit = function beforeSubmit(e) {
            e.preventDefault();
            this.renderNextView();
        };
        Edit.prototype.renderNextView = function renderNextView() {
            var formData = this.view.getFormData();
            var submitData = this.model.getSubmitData(formData);
            this.view.renderNextView({
                parentAction: this,
                formData: submitData
            });
        };
        Edit.prototype.checkDuplicate = function checkDuplicate(formData, key) {
            var isValid = true;
            var form = this.view.get('form');
            var _form$getInputControls = form.getInputControls();
            var suggestInput = _form$getInputControls[0];
            var customInput = _form$getInputControls[1];
            if (_u['default'].contains(_u['default'].pluck(suggestInput._listData, key), formData[key])) {
                customInput.showValidationMessage('invalid', '\u8BE5\u540D\u79F0\u5DF2\u5B58\u5728');
                isValid = false;
            }
            return isValid;
        };
        Edit.prototype.validateStep = function validateStep(e) {
            var dir = e.dir;
            var viewStep = e.viewStep;
            var formData = e.formData;
            if (dir) {
                if (viewStep === 2 && formData.policyName) {
                    if (!this.checkDuplicate(formData, 'policyName')) {
                        e.preventDefault();
                    }
                }
            }
        };
        Edit.prototype.doCreate = function doCreate(e) {
            var _this = this;
            var queryData = this.filterData(e.allConfig);
            this.model.submitRequester(queryData, { 'X-silence': true }).done(function (data) {
                _this.view.showToast(_this.getToastMessage());
                var main = _this.view.get('form').main;
                var pwdPanel = _T['default'].getUIControls(main, null, 'Panel')[0];
                if (data.password) {
                    pwdPanel.show();
                    var clip = _T['default'].getUIControls(main, null, 'Clipboard')[0];
                    clip && clip.set('clipboardText', data.password);
                } else {
                    pwdPanel.hide();
                }
                _this.view.setFormData(data);
            }).fail(function (data) {
                return _this.handleSubmitError(data);
            });
        };
        Edit.prototype.filterData = function filterData(data) {
            var result = {};
            var principal = data[0];
            var policy = data[1];
            var principalData = principal.formData;
            var policyData = policy.formData;
            var endpointName = principalData.endpointName;
            if (policyData && !policyData.policy) {
                result.policy = {
                    endpointName: endpointName,
                    policyName: policyData.policyName,
                    topics: policyData.topics
                };
            }
            result.principal = {
                endpointName: endpointName,
                principalName: principalData.principalName,
                policyName: policyData.policy || policyData.policyName
            };
            return result;
        };
        Edit.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u8EAB\u4EFD\u7F16\u8F91\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Edit.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        Edit.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Edit, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u8EAB\u4EFD\u7F16\u8F91\u6210\u529F\uFF01';
                }
            }
        ]);
        return Edit;
    }(_FormAction2['default']);
    module.exports = Edit;
});
define('iot/principal/dialog/edit.tpl', [], function () {
    return '<!-- target: TPL_iot_edit_principal -->\n<div class="iot-dialog-form iot-edit-dialog iot-principal-dialog iot-policy-create-dialog order-recharge">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-row step-form-row">\n            <div data-ui-type="ViewStep"\n                data-ui-id="viewStep"\n                data-ui-current-step="0">\n                <ul>\n                    <li>\u7F16\u8F91\u8EAB\u4EFD</li>\n                    <li>\u8BBE\u7F6E\u7B56\u7565</li>\n                    <li>\u914D\u7F6E\u786E\u8BA4</li>\n                </ul>\n            </div>\n        </div>\n        <div class="form-data-body" data-ui="type:ActionPanel;id:stepControl"></div>\n    </form>\n</div>\n<!-- target: TPL_iot_edit_principal_child -->\n<!-- import: TPL_iot_edit_principal -->\n';
});
define('iot/principal/dialog/EditModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var EditModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](EditModel, _FormModel);
        function EditModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EditModel);
            _FormModel.apply(this, arguments);
        }
        EditModel.prototype.getExtraData = function getExtraData() {
            return { endpointName: this.get('endpointName') };
        };
        EditModel.prototype.filterData = function filterData(data) {
            this.filterTopicsData(data);
            return data;
        };
        EditModel.prototype.filterTopicsData = function filterTopicsData(data) {
            var topics = [];
            var indexes = [];
            var indexReg = /[0-9]\d*$/gi;
            var normalizeProperties = [
                'topic',
                'operations'
            ];
            _u['default'].each(data, function (property, key) {
                var originKey = key.replace(indexReg, '');
                if (_u['default'].indexOf(normalizeProperties, originKey) !== -1) {
                    var index = key.match(indexReg);
                    index && indexes.push(index[0]);
                }
            });
            indexes = _u['default'].uniq(indexes);
            _u['default'].each(indexes, function (index) {
                var properties = {};
                _u['default'].each(normalizeProperties, function (property) {
                    var key = '' + property + index;
                    properties[property] = data[key];
                    delete data[key];
                });
                topics.push(properties);
            });
            data.topics = topics;
            return data;
        };
        _babelRuntimeHelpersCreateClass['default'](EditModel, [
            {
                key: 'submitRequester',
                get: function get() {
                    return _config.api.iotPrincipalEditV2;
                }
            },
            {
                key: 'iotPrincipalDetail',
                get: function get() {
                    return _config.api.iotPrincipalDetail;
                }
            }
        ]);
        return EditModel;
    }(_FormModel2['default']);
    module.exports = EditModel;
});
define('iot/principal/dialog/EditView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./edit.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'er/Deferred',
    'esui',
    'jquery',
    '../../events',
    '../../_public/util'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplEditTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _erDeferred, _esui, _jquery, _events, _publicUtil) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _Deferred = _babelRuntimeHelpersInteropRequireDefault['default'](_erDeferred);
    var _ui = _babelRuntimeHelpersInteropRequireDefault['default'](_esui);
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var STEP = [
        {
            url: '/iot/principal/principal',
            hidden: ['btnFootLast'],
            bodyHeight: 87
        },
        {
            url: '/iot/thing/policy',
            access: function access(formData) {
                return !formData.policy;
            },
            bodyHeight: 87
        },
        {
            url: '/iot/principal/success',
            hidden: [
                'btnFootLast',
                'btnFootCancel'
            ],
            bodyHeight: 187
        }
    ];
    var EditView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](EditView, _FormView);
        function EditView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EditView);
            _FormView.apply(this, arguments);
        }
        EditView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'stepControl:prev': function stepControlPrev(e) {
                    return _this.renderLastView();
                }
            };
        };
        EditView.prototype.setExtraFormData = function setExtraFormData(formData) {
            var form = this.get('form');
            var labels = _T['default'].getUIControls(form.main, null, 'Label');
            _u['default'].each(labels, function (label) {
                var refKey = label.get('for');
                if (formData[refKey]) {
                    label.setText(formData[refKey]);
                }
            });
        };
        EditView.prototype.renderLastView = function renderLastView(e) {
            var _this2 = this;
            this.renderActionView().done(function (data) {
                var formData = data.action.formData;
                _this2.setFormData(formData);
            });
        };
        EditView.prototype.renderNextView = function renderNextView(options) {
            var _this3 = this;
            this.renderActionView(options, true).done(function (data) {
                var viewStep = data.viewStep;
                if (viewStep === STEP.length) {
                    _this3.fire(_EVENTS['default'].PRINCIPAL_CREATED, data);
                } else if (viewStep > STEP.length) {
                    _this3.fire(_EVENTS['default'].CONFIRM, data);
                    return;
                }
                var formData = options.formData;
                switch (viewStep) {
                case 1:
                    _this3.setFormData(_u['default'].extend({ principalName: _this3.model.get('principalName') }, formData));
                    break;
                case 2:
                    var suggestInput = _this3.get('form').getInputControls()[0];
                    suggestInput.setValue('\u6570\u636E\u8BFB\u53D6\u4E2D...');
                    suggestInput.setDisabled(true);
                    _this3.model.iotPrincipalDetail(_u['default'].pick(data.allConfig[0].formData, 'endpointName', 'principalName'), { 'X-silence': true }).done(function (result) {
                        suggestInput.setDisabled(false);
                        suggestInput.setValue(result.policyName, { keyword: '' });
                    });
                default:
                }
            });
        };
        EditView.prototype.renderActionView = function renderActionView(options, dir) {
            if (options === undefined)
                options = {};
            var result = _Deferred['default'].rejected();
            var viewStepControl = this.get('viewStep');
            var viewStep = viewStepControl.get('currentStep');
            var currentAction = STEP[viewStep - 1];
            var handleBeforeChange = this.fire(_EVENTS['default'].BEFORE_CHANGE, _u['default'].extend(options, {
                dir: dir,
                viewStep: viewStep
            }));
            if (handleBeforeChange.isDefaultPrevented()) {
                return;
            }
            if (dir) {
                viewStep = viewStep + 1;
                if (currentAction) {
                    currentAction.formData = options.formData;
                }
                if (!currentAction || !_u['default'].isFunction(currentAction.access) || currentAction.access(options.formData)) {
                    var nextAction = STEP[viewStep - 1];
                    if (nextAction) {
                        result = this.changeStepView(nextAction, options, viewStep);
                    } else {
                        result = _Deferred['default'].resolved({
                            viewStep: viewStep,
                            allConfig: STEP
                        });
                    }
                } else {
                    viewStep = STEP.length;
                    var successAction = STEP[viewStep - 1];
                    result = this.changeStepView(successAction, options, viewStep);
                }
            } else {
                viewStep = viewStep - 1;
                var lastAction = STEP[viewStep - 1];
                options.formData = lastAction.formData;
                result = this.changeStepView(lastAction, options, viewStep);
            }
            return result;
        };
        EditView.prototype.getDialog = function getDialog() {
            var container = this.getContainerElement();
            var dialogContainer = _$['default'](container).parents('.ui-dialog').get(0);
            return _ui['default'].getControlByDOM(dialogContainer);
        };
        EditView.prototype.changeStepView = function changeStepView(action, options, viewStep) {
            var _this4 = this;
            var panel = this.get('stepControl');
            var viewStepControl = this.get('viewStep');
            var dialog = this.getDialog();
            var dialogBody = dialog.get('body');
            var dialogFoot = dialog.get('foot');
            action.bodyHeight && (dialogBody.main.style.minHeight = action.bodyHeight + 'px');
            dialog.resize();
            _u['default'].each(dialogFoot.children, function (child) {
                var behavior = _u['default'].contains(action.hidden, child.id) ? 'hide' : 'show';
                child[behavior]();
            });
            var btnOk = dialogFoot.getChild('btnOk');
            if (viewStep >= STEP.length) {
                btnOk.setContent('\u786E\u8BA4');
            } else {
                btnOk.setContent('\u4E0B\u4E00\u6B65');
            }
            panel.setProperties({
                url: action.url,
                actionOptions: options
            });
            return panel.action.done(function () {
                viewStepControl.set('currentStep', viewStep);
                if (viewStep === 1) {
                    var principalInput = _this4.get('form').getInputControls()[0];
                    principalInput.setReadOnly(true);
                }
                return {
                    action: action,
                    viewStep: viewStep,
                    allConfig: STEP,
                    dialog: dialog
                };
            });
        };
        _babelRuntimeHelpersCreateClass['default'](EditView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_edit_principal';
                }
            }]);
        return EditView;
    }(_FormView2['default']);
    module.exports = EditView;
});
define('iot/principal/dialog/Principal', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './PrincipalModel',
    './PrincipalView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _PrincipalModel, _PrincipalView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_PrincipalModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_PrincipalView);
    var Principal = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Principal, _BaseAction);
        function Principal() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Principal);
            _BaseAction.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](Principal, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Principal;
    }(_BaseAction2['default']);
    module.exports = Principal;
});
define('iot/principal/dialog/principal.tpl', [], function () {
    return '<!-- target: TPL_iot_create_principal_principal -->\n<div class="form-row last-form-row">\n    <label><i>\uFF0A</i>\u540D\u79F0\uFF1A</label>\n    <div class="form-value">\n        <div data-ui-type="TextBox"\n            data-ui-name="principalName"\n            data-ui-id="principalName"></div>\n        <!-- import: TPL_iot_name_tip -->\n    </div>\n</div>\n<!-- target: TPL_iot_create_principal_principal_child -->\n<!-- import: TPL_iot_create_principal_principal -->\n';
});
define('iot/principal/dialog/PrincipalModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var PrincipalModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](PrincipalModel, _BaseModel);
        function PrincipalModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PrincipalModel);
            _BaseModel.apply(this, arguments);
        }
        return PrincipalModel;
    }(_BaseModel2['default']);
    module.exports = PrincipalModel;
});
define('iot/principal/dialog/PrincipalView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./principal.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplPrincipalTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var PrincipalView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](PrincipalView, _BaseView);
        function PrincipalView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PrincipalView);
            _BaseView.apply(this, arguments);
        }
        PrincipalView.prototype.getUIProperties = function getUIProperties() {
            return {
                principalName: {
                    title: '\u540D\u79F0',
                    width: 200,
                    required: 'required',
                    placeholder: '\u8BF7\u586B\u5199\u8EAB\u4EFD\u540D\u79F0\uFF0C\u957F\u5EA63-32',
                    pattern: _config.nameRegExp
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](PrincipalView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_create_principal_principal';
                }
            }]);
        return PrincipalView;
    }(_BaseView2['default']);
    module.exports = PrincipalView;
});
define('iot/principal/dialog/Success', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './SuccessModel',
    './SuccessView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _SuccessModel, _SuccessView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_SuccessModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_SuccessView);
    var Success = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Success, _BaseAction);
        function Success() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Success);
            _BaseAction.apply(this, arguments);
        }
        Success.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](Success, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Success;
    }(_BaseAction2['default']);
    module.exports = Success;
});
define('iot/principal/dialog/success.tpl', [], function () {
    return '<!-- target: TPL_iot_create_principal_success -->\n<div class="iot-success-confirm">\n    <div class="form-row-group">\n        <div class="form-title">\u8EAB\u4EFD</div>\n        <div class="form-row">\n            <label>\u540D\u79F0\uFF1A</label>\n            <div class="form-value">\n                <div class="default-txt">\n                    <label data-ui-type="Label" data-ui-for="principalName">\u6570\u636E\u8BFB\u53D6\u4E2D...</label>\n                </div>\n            </div>\n        </div>\n        <div class="form-row" data-ui-type="Panel" data-ui-id="pwdPanel">\n            <label>\u5BC6\u94A5\uFF1A</label>\n            <div class="form-value">\n                <div class="default-txt">\n                    <label data-ui-type="Label" data-ui-for="password">\u6570\u636E\u8BFB\u53D6\u4E2D...</label>\n                    <a data-ui-type="Clipboard"\n                        data-ui-id="copyPassword"\n                        data-ui-clipboard-text=""\n                        class="ui-button copy-password">\u590D\u5236</a>\n                </div>\n                <p class="warning">\u8BF7\u5408\u7406\u4FDD\u7BA1\u4EE5\u4E0A\u5BC6\u94A5\uFF0C\u5BC6\u94A5\u4E22\u5931\u65E0\u6CD5\u627E\u56DE\uFF0C\u53EA\u80FD\u91CD\u65B0\u751F\u6210</p>\n            </div>\n        </div>\n    </div>\n    <div class="form-row-group last-form-row-group">\n        <div class="form-title">\u7B56\u7565</div>\n        <div class="form-row">\n            <label>\u540D\u79F0\uFF1A</label>\n            <div class="form-value">\n                <div class="default-txt">\n                    <label data-ui-type="Label" data-ui-for="policyName">-</label>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<!-- target: TPL_iot_create_principal_success_child -->\n<!-- import: TPL_iot_create_principal_success -->\n';
});
define('iot/principal/dialog/SuccessModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var SuccessModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](SuccessModel, _BaseModel);
        function SuccessModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SuccessModel);
            _BaseModel.apply(this, arguments);
        }
        return SuccessModel;
    }(_BaseModel2['default']);
    module.exports = SuccessModel;
});
define('iot/principal/dialog/SuccessView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./success.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplSuccessTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var SuccessView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](SuccessView, _BaseView);
        function SuccessView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SuccessView);
            _BaseView.apply(this, arguments);
        }
        SuccessView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'copyPassword:aftercopy': function copyPasswordAftercopy(e) {
                    return _this.showToast('\u590D\u5236\u6210\u529F');
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](SuccessView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_create_principal_success';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return { pwdPanel: { hidden: true } };
                }
            }
        ]);
        return SuccessView;
    }(_BaseView2['default']);
    module.exports = SuccessView;
});
define('iot/principal/List', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    '../events',
    '../operations',
    './ListModel',
    './ListView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _events, _operations, _ListModel, _ListView) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ListModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ListView);
    var PrincipalList = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](PrincipalList, _ListAction);
        function PrincipalList() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PrincipalList);
            _ListAction.apply(this, arguments);
        }
        PrincipalList.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].REFRESH, this.reload, this);
            this.view.on(_EVENTS['default'].CREATE, this.create, this);
            this.view.on(_EVENTS['default'].EDIT, this.edit, this);
            this.view.on(_EVENTS['default'].DELETE, this['delete'], this);
            this.view.on(_EVENTS['default'].GEN_PASSWORD, this.getPasswordV2, this);
            this.on(_EVENTS['default'].PRINCIPAL_LOADED, this.reload);
        };
        PrincipalList.prototype.create = function create() {
            _operations2['default'].createPrincipal.call(this, {
                parentAction: this,
                endpointName: this.model.get('endpointName')
            });
        };
        PrincipalList.prototype.edit = function edit(e) {
            var _e$args$split = e.args.split(',');
            var endpointName = _e$args$split[0];
            var principalName = _e$args$split[1];
            _operations2['default'].editPrincipal.call(this, {
                parentAction: this,
                endpointName: endpointName,
                principalName: principalName
            });
        };
        PrincipalList.prototype['delete'] = function _delete(e) {
            var _e$args$split2 = e.args.split(',');
            var endpointName = _e$args$split2[0];
            var principalName = _e$args$split2[1];
            _operations2['default'].confirmHandler({
                title: '\u5220\u9664\u8EAB\u4EFD',
                content: '\u786E\u8BA4\u5220\u9664\u8BE5\u8EAB\u4EFD',
                width: 300
            }, 'principal.delete', this.view, {
                endpointName: endpointName,
                principalName: principalName
            });
        };
        PrincipalList.prototype.getPassword = function getPassword(e) {
            var _this = this;
            var _e$args$split3 = e.args.split(',');
            var endpointName = _e$args$split3[0];
            var principalName = _e$args$split3[1];
            this.model.iotPrincipalGetPassword({
                endpointName: endpointName,
                principalName: principalName
            }).done(function (data) {
                return _operations2['default'].viewPrincipalResult.call(_this, {
                    parentAction: _this,
                    password: data.password,
                    principalName: principalName
                });
            });
        };
        PrincipalList.prototype.getPasswordV2 = function getPasswordV2(e) {
            var _this2 = this;
            var _e$args$split4 = e.args.split(',');
            var endpointName = _e$args$split4[0];
            var principalName = _e$args$split4[1];
            var model = this.model;
            var view = this.view;
            view.waitConfirm({
                title: '\u63D0\u793A',
                content: '\u91CD\u7F6E\u5BC6\u94A5\u540E\uFF0C\u7F51\u5173\u8FDE\u63A5MQTT\u7684\u5BC6\u94A5\u5C06\u66F4\u6539\uFF0C\u53EF\u80FD\u9700\u8981\u91CD\u65B0\u70E7\u5F55\u7A0B\u5E8F\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\u3002\u662F\u5426\u91CD\u7F6E\u5BC6\u94A5\uFF1F',
                width: 600,
                needFoot: true
            }).done(function () {
                model.iotPrincipalGetPassword({
                    endpointName: endpointName,
                    principalName: principalName
                }).then(function (data) {
                    return _operations2['default'].viewPrincipalResult.call(_this2, {
                        parentAction: _this2,
                        password: data.password,
                        principalName: principalName
                    });
                });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](PrincipalList, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return PrincipalList;
    }(_ListAction2['default']);
    module.exports = PrincipalList;
});
define('iot/principal/list.tpl', [], function () {
    return '<!-- target: TPL_iot_principal_list -->\n<div class="iot-main-wrap iot-thing-list main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u7269\u8054\u7F51\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u8EAB\u4EFD\u5217\u8868</span>\n        </p>\n        <div class="list-content">\n            <h2>\u8EAB\u4EFD\u5217\u8868</h2>\n            <div class="table-full-wrap">\n                <div class="operation-wrap">\n                    <!-- if: ${subPermission.permission.IotHubManage}-->\n                    <button data-ui-id="create"\n                        data-ui-type="Button"\n                        data-ui-skin="create"\n                        title="\u521B\u5EFA\u8EAB\u4EFD">\u521B\u5EFA\u8EAB\u4EFD</button>\n                    <span data-ui-arrow="false" data-ui-type="Tip" data-ui-layer-width="160" class="ssl-tip">\u6700\u591A\u53EF\u521B\u5EFA10000\u4E2A\u8EAB\u4EFD\uFF0C\u53EF<a href="http://ticket.bce.baidu.com/#/ticket/create ">\u63D0\u4EA4\u5DE5\u5355</a>\u7533\u8BF7\u66F4\u591A\u989D\u5EA6</span>\n                    <!-- /if -->\n                    <span class="ui-group ui-search-group">\n                        <input class="search-box"\n                            data-ui-type="TextBox"\n                            data-ui-id="keyword" />\n                        <button data-ui-type="Button"\n                            data-ui-id="searchBtn"\n                            class="search-button"></button>\n                    </span>\n                </div>\n\n                <div data-ui-type="Table" data-ui-id="table"\n                     data-ui-datasource="@tableData"\n                     data-ui-order-by="@orderBy" data-ui-order="@order"\n                     data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                     data-ui-extension-command-type="Command"\n                     data-ui-extension-tableedit-type="TableEdit"\n                     data-ui-extension-tableex-type="TableEx">\n                </div>\n                <div class="ui-row">\n                <!-- import: listPager -->\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/principal/ListModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var PrincipalListModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](PrincipalListModel, _ListModel);
        function PrincipalListModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PrincipalListModel);
            _ListModel.apply(this, arguments);
        }
        PrincipalListModel.prototype.getExtraQuery = function getExtraQuery() {
            return { endpointName: this.get('endpointName') };
        };
        _babelRuntimeHelpersCreateClass['default'](PrincipalListModel, [
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.iotPrincipalList;
                }
            },
            {
                key: 'iotPrincipalGetPassword',
                get: function get() {
                    return _config.api.iotPrincipalGetPassword;
                }
            },
            {
                key: 'subPermission',
                get: function get() {
                    return _config.api.subPermission;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        subPermission: function subPermission(model) {
                            return model.subPermission({
                                endpointName: model.get('endpointName'),
                                thingName: model.get('thingName')
                            });
                        }
                    };
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize
                    };
                }
            }
        ]);
        return PrincipalListModel;
    }(_ListModel2['default']);
    module.exports = PrincipalListModel;
});
define('iot/principal/ListView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./list.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/ListView',
    'common/util/tableUtil',
    'common/util/timeUtil',
    '../events',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplListTplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcListView, _commonUtilTableUtil, _commonUtilTimeUtil, _events, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _localConfig = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u8EAB\u4EFD\u540D\u79F0',
                field: 'principalName',
                content: function content(item, row) {
                    var endpointName = _u['default'].escape(item.endpointName);
                    var principalName = _u['default'].escape(item.principalName);
                    return '<a href=\n                    "#/iot/principal/detail~endpointName=' + endpointName + '&principalName=' + principalName + '"\n                    >' + principalName + '</a>';
                }
            },
            {
                title: '\u521B\u5EFA\u65F6\u95F4',
                field: 'createTime',
                content: function content(item, row) {
                    return _timeUtil['default'].toTime(item.createTime);
                }
            },
            {
                title: '\u64CD\u4F5C',
                stable: true,
                width: 200,
                field: 'operation',
                content: function content(item, row) {
                    return view.getAllOpertionsHtml(item, row);
                }
            }
        ];
    }
    var PrincipalListView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](PrincipalListView, _ListView);
        function PrincipalListView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PrincipalListView);
            _ListView.apply(this, arguments);
        }
        PrincipalListView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'create:click': function createClick(e) {
                    return _this.fire(_EVENTS['default'].CREATE, e);
                },
                'table:command': function tableCommand(e) {
                    return _this.fire(e.name, e);
                },
                'keyword:enter': function keywordEnter(e) {
                    return _this.submitSearch(e);
                },
                'searchBtn:enter': function searchBtnEnter(e) {
                    return _this.submitSearch(e);
                }
            });
        };
        PrincipalListView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
        };
        PrincipalListView.prototype.getAllOpertionsHtml = function getAllOpertionsHtml(item, row) {
            var html = [];
            if (this.model.get('subPermission').permission.IotHubManage) {
                Array.prototype.push.apply(html, [
                    this.getEditHtml(item, row),
                    this.getDeleteHtml(item, row),
                    this.getPasswordHtml(item, row)
                ]);
            }
            return html.join('');
        };
        PrincipalListView.prototype.getEditHtml = function getEditHtml(item, row) {
            var canDo = true;
            var args = [
                item.endpointName,
                item.principalName
            ].join();
            return _u['default'].template(_localConfig['default'].tpl.command)({
                label: '\u7F16\u8F91',
                command: _EVENTS['default'].EDIT,
                args: args,
                className: canDo ? '' : 'state-disabled',
                disabled: canDo ? '' : 'disabled'
            });
        };
        PrincipalListView.prototype.getDeleteHtml = function getDeleteHtml(item, row) {
            var canDo = true;
            var args = [
                item.endpointName,
                item.principalName
            ].join();
            return _u['default'].template(_localConfig['default'].tpl.command)({
                label: '\u5220\u9664',
                command: _EVENTS['default'].DELETE,
                args: args,
                className: canDo ? '' : 'state-disabled',
                disabled: canDo ? '' : 'disabled'
            });
        };
        PrincipalListView.prototype.getPasswordHtml = function getPasswordHtml(item, row) {
            var canDo = true;
            var args = [
                item.endpointName,
                item.principalName
            ].join();
            return _u['default'].template(_localConfig['default'].tpl.command)({
                label: '\u91CD\u7F6E\u5BC6\u94A5',
                command: _EVENTS['default'].GEN_PASSWORD,
                args: args,
                className: canDo ? '' : 'state-disabled',
                disabled: canDo ? '' : 'disabled'
            });
        };
        _babelRuntimeHelpersCreateClass['default'](PrincipalListView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_principal_list';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        keyword: {
                            width: 220,
                            value: '@keyword',
                            placeholder: '\u8BF7\u8F93\u5165\u8EAB\u4EFD\u540D\u79F0'
                        },
                        table: {
                            select: false,
                            editable: 1,
                            columnResizable: true,
                            fields: '@tableFields',
                            noDataHtml: _localConfig['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return PrincipalListView;
    }(_ListView2['default']);
    module.exports = PrincipalListView;
});
define('iot/startup', [
    'exports',
    'jquery',
    'babel-runtime/helpers/interop-require-default',
    'bat-ria/tpl!./common.tpl',
    'bat-ria/tpl!./modbus/common.tpl',
    './_public/SuggestInput',
    './_public/RegionSelect',
    'er/events',
    'inf-ria/helper',
    'common/startup',
    'common/config',
    './temp/config',
    './config',
    './app/manager',
    'er/locator',
    'underscore',
    'common/storage',
    'common/region'
], function (exports, _jquery, _babelRuntimeHelpersInteropRequireDefault, _batRiaTplCommonTplHtml, _batRiaTplModbusCommonTplHtml, _publicSuggestInput, _publicRegionSelect, _erEvents, _infRiaHelper, _commonStartup, _commonConfig, _tempConfig, _config, _appManager, _erLocator, _underscore, _commonStorage, _commonRegion) {
    exports.__esModule = true;
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _events = _babelRuntimeHelpersInteropRequireDefault['default'](_erEvents);
    var _helper = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaHelper);
    var _ria = _babelRuntimeHelpersInteropRequireDefault['default'](_commonStartup);
    var _commonConfig2 = _babelRuntimeHelpersInteropRequireDefault['default'](_commonConfig);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    var _ApplicationManager = _babelRuntimeHelpersInteropRequireDefault['default'](_appManager);
    var _locator = _babelRuntimeHelpersInteropRequireDefault['default'](_erLocator);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _storage = _babelRuntimeHelpersInteropRequireDefault['default'](_commonStorage);
    var _R = _babelRuntimeHelpersInteropRequireDefault['default'](_commonRegion);
    var cookieKey = 'BCE_IOT_MODBUS_LANDING';
    var cookieUserKey = 'BCE_IOT_MODBUS_SUBUSER';
    function customEventHandler(e) {
        if (!e.isChildAction && location.href.indexOf('#/region/404') === -1) {
            _commonConfig2['default'].api.iotServiceStatus({}, { 'X-silence': true }).then(function (data) {
                var url = e.url.getPath();
                if (data.valid && !data.unicom) {
                    _$['default']('.endpoint-unicom-stats').addClass('state-hidden');
                }
                if (!data.valid && data.unicom) {
                    if (url === '/iot/endpoint/stats' || url === '/iot/endpoint/uStats') {
                        var params = e.url.getQuery();
                        _helper['default'].redirectToModule('iot', '/iot/endpoint/uStats~', params);
                        _$['default']('.endpoint-stats').addClass('state-hidden');
                        _$['default']('.endpoint-unicom-stats').addClass('sidebar-current');
                    }
                }
                if (!data.show) {
                    _helper['default'].redirectToModule('iot', '/iot/temp/error');
                } else if (!data.valid && !data.unicom && location.href.indexOf('#/iot/order/') === -1 && location.href.indexOf('#/iot/modbus/') === -1) {
                    _helper['default'].redirectToModule('iot', '/iot/order/notify');
                } else if (location.href.indexOf('#/iot/turnkey/') !== -1) {
                    _config2['default'].api.permissionTurnkey({}, { 'X-silence': true }).then(function (data) {
                        if (!data.iothub || !data.tsdb) {
                            _helper['default'].redirectToModule('iot', _config2['default'].index);
                        }
                    });
                }
                _storage['default'].set(cookieUserKey, data.subUser);
            });
            if (!_storage['default'].get(cookieKey) && location.href.indexOf('#/iot/modbus/manage') !== -1) {
                _config2['default'].api.modbusLandingPage({}, { 'X-silence': true }).then(function (data) {
                    if (data && data.isFirst) {
                        e.action.retrieveListPage = _u['default'].noop;
                        _locator['default'].redirect('#/iot/modbus/landing');
                    }
                });
                _storage['default'].set(cookieKey, true);
            }
        }
    }
    function handleIOTEvent() {
        _events['default'].on('enteraction', customEventHandler);
    }
    var start = function start() {
        handleIOTEvent();
        _ApplicationManager['default'].start();
        _ria['default'].start(_config2['default']);
    };
    exports.start = start;
    var stop = function stop() {
        _events['default'].un('enteraction', customEventHandler);
        _ApplicationManager['default'].dispose();
    };
    exports.stop = stop;
});
define('iot/storage/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var actionsConfig = [
        {
            type: 'iot/storage/List',
            path: '/iot/storage/list'
        },
        {
            type: 'iot/storage/Copylist',
            path: '/iot/storage/copylist'
        },
        {
            type: 'iot/storage/Detail',
            path: '/iot/storage/detail'
        },
        {
            type: 'iot/storage/dialog/Create',
            path: '/iot/storage/copy/create'
        },
        {
            type: 'iot/storage/dialog/CreateStorage',
            path: '/iot/storage/create'
        },
        {
            type: 'iot/storage/dialog/Edit',
            path: '/iot/storage/edit'
        }
    ];
    _controller['default'].registerAction(actionsConfig);
    module.exports = {
        noDataHtml: [
            '<div><p>\u4F60\u8FD8\u6CA1\u521B\u5EFA\u4EFB\u4F55\u5F52\u6863</br>',
            '\u70B9\u51FB\u5DE6\u4E0A\u89D2\u6309\u94AE\u7ACB\u5373\u521B\u5EFA',
            '</p></div>'
        ].join(''),
        tpl: { command: '<span class="operations"><button data-command="<%- command %>" ' + 'data-command-args="<%- args %>" class="cmd-button <%- className %>" <%- disabled %>>' + '<%- label %></button></span>' }
    };
});
define('iot/storage/Copylist', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/helper',
    '../events',
    '../operations',
    './CopylistModel',
    './CopylistView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _infRiaHelper, _events, _operations, _CopylistModel, _CopylistView) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CopylistModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CopylistView);
    var StorageCopylist = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](StorageCopylist, _ListAction);
        function StorageCopylist() {
            _babelRuntimeHelpersClassCallCheck['default'](this, StorageCopylist);
            _ListAction.apply(this, arguments);
        }
        StorageCopylist.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].REFRESH, this.reload, this);
            this.view.on(_EVENTS['default'].CREATE, this.create, this);
            this.view.on(_EVENTS['default'].EDIT, this.edit, this);
            this.view.on(_EVENTS['default'].DELETE, this['delete'], this);
            this.on(_EVENTS['default'].POLICY_LOADED, this.reload);
            this.on('bos.active', this.activeBos);
            this.on('bos.recharge', this.rechargeBos);
        };
        StorageCopylist.prototype.create = function create() {
            _operations2['default'].createStorageCopy.call(this, {
                parentAction: this,
                endpointName: this.model.get('endpointName')
            });
        };
        StorageCopylist.prototype.activeBos = function activeBos() {
            window.open(_infRiaHelper.buildUrl('bos', '/bos/order'));
        };
        StorageCopylist.prototype.rechargeBos = function rechargeBos() {
            window.open(_infRiaHelper.buildUrl('finance', '/finance/account/recharge'));
        };
        StorageCopylist.prototype.edit = function edit(e) {
            var _e$args$split = e.args.split(',');
            var endpointName = _e$args$split[0];
            var storageName = _e$args$split[1];
            var topic = _e$args$split[2];
            var address = _e$args$split[3];
            _operations2['default'].editStorageCopy.call(this, {
                parentAction: this,
                endpointName: endpointName,
                storageName: storageName,
                topic: topic,
                address: address
            });
        };
        StorageCopylist.prototype['delete'] = function _delete(e) {
            var _e$args$split2 = e.args.split(',');
            var endpointName = _e$args$split2[0];
            var storageName = _e$args$split2[1];
            _operations2['default'].confirmHandler({
                title: '\u5220\u9664\u5F52\u6863',
                content: '\u786E\u8BA4\u5220\u9664\u8BE5\u5F52\u6863',
                width: 300
            }, 'storage.deleteCopy', this.view, {
                endpointName: endpointName,
                storageName: storageName
            });
        };
        _babelRuntimeHelpersCreateClass['default'](StorageCopylist, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return StorageCopylist;
    }(_ListAction2['default']);
    module.exports = StorageCopylist;
});
define('iot/storage/copylist.tpl', [], function () {
    return '<!-- target: TPL_iot_storage_copylist -->\n<div class="iot-main-wrap iot-storage-copylist main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u7269\u8054\u7F51\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u6570\u636E\u5B58\u50A8</span>\n        </p>\n        <div class="instance-info">\n            <h1>${endpointName}\u7684\u6570\u636E\u5B58\u50A8\u5217\u8868</h1>\n        </div>\n        <div class="detail-content">\n            <ul class="ui-tab-navigator">\n                <li class="ui-tab-item">\n                    <a href="#/iot/storage/list~endpointName=${endpointName}">\u5B58\u50A8\u5230Kafka</a>\n                </li>\n                <li class="ui-tab-item ui-tab-item-active">\n                    <a href="#/iot/storage/copylist~endpointName=${endpointName}">\u5B58\u50A8\u5230BOS</a>\n                </li>\n            </ul>\n            <div class="ui-tab-content">\n                <div class="row">\n                    <button data-ui-id="create"\n                        data-ui-type="Button"\n                        data-ui-skin="create"\n                        title="\u521B\u5EFA\u5F52\u6863" >\u521B\u5EFA\u5F52\u6863</button>\n                    <span>\n                        \u5982\u9700\u5B58\u50A8\u5230TSDB\uFF0C\u8BF7\u901A\u8FC7<a target="_blank" class="create-link" href="/iotre/${search}#/iotre/rule/list">\u89C4\u5219\u5F15\u64CE</a>\u6765\u5B9E\u73B0\u3002\n                    </span>\n                    <span class="ui-group ui-search-group">\n                        <input class="search-box"\n                            data-ui-type="TextBox"\n                            data-ui-id="keyword" />\n                        <button data-ui-type="Button"\n                            data-ui-id="searchBtn"\n                            class="search-button"></button>\n                    </span>\n                </div>\n                <div class="table-full-wrap">\n                    <div data-ui-type="Table" data-ui-id="table"\n                         data-ui-datasource="@tableData"\n                         data-ui-order-by="@orderBy" data-ui-order="@order"\n                         data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                         data-ui-extension-command-type="Command"\n                         data-ui-extension-tableedit-type="TableEdit"\n                         data-ui-extension-tableex-type="TableEx">\n                    </div>\n                    <div class="ui-row">\n                    <!-- import: listPager -->\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>\n';
});
define('iot/storage/CopylistModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var StorageCopylistModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](StorageCopylistModel, _ListModel);
        function StorageCopylistModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, StorageCopylistModel);
            _ListModel.apply(this, arguments);
        }
        StorageCopylistModel.prototype.getExtraQuery = function getExtraQuery() {
            return { endpointName: this.get('endpointName') };
        };
        _babelRuntimeHelpersCreateClass['default'](StorageCopylistModel, [
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.iotStorageCopylist;
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize
                    };
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        search: function search() {
                            return location.search;
                        }
                    };
                }
            }
        ]);
        return StorageCopylistModel;
    }(_ListModel2['default']);
    module.exports = StorageCopylistModel;
});
define('iot/storage/CopylistView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./copylist.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/ListView',
    'common/util/tableUtil',
    'common/util/timeUtil',
    '../events',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCopylistTplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcListView, _commonUtilTableUtil, _commonUtilTimeUtil, _events, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _localConfig = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u540D\u79F0',
                field: 'storageName',
                content: function content(item, row) {
                    var endpointName = _u['default'].escape(item.endpointName);
                    var storageName = _u['default'].escape(item.storageName);
                    return '<a href=\n                    "#/iot/storage/detail~endpointName=' + endpointName + '&storageName=' + storageName + '"\n                    >' + storageName + '</a>';
                }
            },
            {
                title: '\u4E3B\u9898',
                field: 'topic',
                content: function content(item, row) {
                    return _u['default'].escape(item.topic);
                }
            },
            {
                title: '\u5B58\u50A8',
                field: 'address',
                content: function content(item, row) {
                    return _u['default'].escape(item.address);
                }
            },
            {
                title: '\u521B\u5EFA\u65F6\u95F4',
                field: 'createTime',
                content: function content(item, row) {
                    return _timeUtil['default'].toTime(item.createTime);
                }
            },
            {
                title: '\u64CD\u4F5C',
                stable: true,
                width: 110,
                field: 'operation',
                content: function content(item, row) {
                    return view.getAllOpertionsHtml(item, row);
                }
            }
        ];
    }
    var StorageCopylistView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](StorageCopylistView, _ListView);
        function StorageCopylistView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, StorageCopylistView);
            _ListView.apply(this, arguments);
        }
        StorageCopylistView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'create:click': function createClick(e) {
                    return _this.fire(_EVENTS['default'].CREATE, e);
                },
                'table:command': function tableCommand(e) {
                    return _this.fire(e.name, e);
                },
                'keyword:enter': function keywordEnter(e) {
                    return _this.submitSearch(e);
                },
                'searchBtn:enter': function searchBtnEnter(e) {
                    return _this.submitSearch(e);
                }
            });
        };
        StorageCopylistView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
        };
        StorageCopylistView.prototype.getAllOpertionsHtml = function getAllOpertionsHtml(item, row) {
            var html = [];
            Array.prototype.push.apply(html, [
                this.getEditHtml(item, row),
                this.getDeleteHtml(item, row)
            ]);
            return html.join('');
        };
        StorageCopylistView.prototype.getEditHtml = function getEditHtml(item, row) {
            var canDo = true;
            var args = [
                item.endpointName,
                item.storageName,
                item.topic,
                item.address
            ].join();
            return _u['default'].template(_localConfig['default'].tpl.command)({
                label: '\u7F16\u8F91',
                command: _EVENTS['default'].EDIT,
                args: args,
                className: canDo ? '' : 'state-disabled',
                disabled: canDo ? '' : 'disabled'
            });
        };
        StorageCopylistView.prototype.getDeleteHtml = function getDeleteHtml(item, row) {
            var canDo = true;
            var args = [
                item.endpointName,
                item.storageName
            ].join();
            return _u['default'].template(_localConfig['default'].tpl.command)({
                label: '\u5220\u9664',
                command: _EVENTS['default'].DELETE,
                args: args,
                className: canDo ? '' : 'state-disabled',
                disabled: canDo ? '' : 'disabled'
            });
        };
        _babelRuntimeHelpersCreateClass['default'](StorageCopylistView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_storage_copylist';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        keyword: {
                            width: 220,
                            value: '@keyword',
                            placeholder: '\u8BF7\u8F93\u5165\u5F52\u6863\u540D\u79F0'
                        },
                        table: {
                            select: false,
                            editable: 1,
                            columnResizable: true,
                            fields: '@tableFields',
                            noDataHtml: _localConfig['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return StorageCopylistView;
    }(_ListView2['default']);
    module.exports = StorageCopylistView;
});
define('iot/storage/Detail', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    '../events',
    '../operations',
    './DetailModel',
    './DetailView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _events, _operations, _DetailModel, _DetailView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailView);
    var Detail = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Detail, _BaseAction);
        function Detail() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Detail);
            _BaseAction.apply(this, arguments);
        }
        Detail.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].EDIT, this.edit, this);
        };
        Detail.prototype.edit = function edit(e) {
            _operations2['default'].editStorageCopy.call(this, {
                parentAction: this,
                endpointName: this.model.get('endpointName'),
                storageName: this.model.get('storageName'),
                topic: this.model.get('basicInfo').topic,
                address: this.model.get('basicInfo').address
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Detail, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Detail;
    }(_BaseAction2['default']);
    module.exports = Detail;
});
define('iot/storage/detail.tpl', [], function () {
    return '<!-- target: TPL_iot_storage_detail -->\n<div class="iot-endpoint-detail iot-main-wrap main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u7269\u8054\u7F51\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <a href="#/iot/storage/list~endpointName=${endpointName}">\u5F52\u6863\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u5F52\u6863\u8BE6\u60C5</span>\n        </p>\n        <div class="detail-content list-content">\n            <h2>\n                \u5F52\u6863\u8BE6\u60C5\n                <span data-ui-type="Button"\n                    data-ui-id="edit"\n                    data-ui-skin="edit">\u7F16\u8F91</span>\n            </h2>\n            <dl class="detail-content-item">\n                <dt></dt>\n                <dd>\n                    <div class="detail-content-row">\n                        <label>\u540D\u79F0\uFF1A</label>\n                        <div class="detail-content-value">${basicInfo.storageName}</div>\n                    </div>\n                    <div class="detail-content-row">\n                        <label>\u521B\u5EFA\u65F6\u95F4\uFF1A</label>\n                        <div class="detail-content-value">${basicInfo.localTime}</div>\n                    </div>\n                    <div class="detail-content-row">\n                        <label>\u4E3B\u9898\uFF1A</label>\n                        <div class="detail-content-value">${basicInfo.topic}</div>\n                    </div>\n                    <div class="detail-content-row">\n                        <label>\u5B58\u50A8\u7C7B\u578B\uFF1A</label>\n                        <div class="detail-content-value">${basicInfo.type}</div>\n                    </div>\n                    <div class="detail-content-row">\n                        <label>\u5B58\u50A8\u5730\u5740\uFF1A</label>\n                        <div class="detail-content-value">${basicInfo.address}</div>\n                    </div>\n                </dd>\n            </dl>\n        </div>\n    </div>\n</div>\n';
});
define('iot/storage/DetailModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'common/util/timeUtil',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _commonUtilTimeUtil, _config) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var DetailModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](DetailModel, _BaseModel);
        function DetailModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailModel);
            _BaseModel.apply(this, arguments);
        }
        DetailModel.prototype.prepare = function prepare() {
            var basicInfo = this.get('basicInfo');
            _u['default'].extend(basicInfo, { localTime: _timeUtil['default'].toTime(basicInfo.createTime) });
            this.set('basicInfo', basicInfo);
        };
        _babelRuntimeHelpersCreateClass['default'](DetailModel, [
            {
                key: 'iotStorageDetail',
                get: function get() {
                    return _config.api.iotStorageDetail;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        basicInfo: function basicInfo(model) {
                            return model.iotStorageDetail({
                                endpointName: model.get('endpointName'),
                                storageName: model.get('storageName')
                            });
                        }
                    };
                }
            }
        ]);
        return DetailModel;
    }(_BaseModel2['default']);
    module.exports = DetailModel;
});
define('iot/storage/DetailView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./detail.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    '../events'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplDetailTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _events) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var DetailView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](DetailView, _BaseView);
        function DetailView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailView);
            _BaseView.apply(this, arguments);
        }
        DetailView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'edit:click': function editClick(e) {
                    return _this.fire(_EVENTS['default'].EDIT, e);
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](DetailView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_storage_detail';
                }
            }]);
        return DetailView;
    }(_BaseView2['default']);
    module.exports = DetailView;
});
define('iot/storage/dialog/Create', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    './CreateModel',
    './CreateView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _CreateModel, _CreateView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateView);
    var Create = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Create, _FormAction);
        function Create() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Create);
            _FormAction.apply(this, arguments);
        }
        Create.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u5F52\u6863\u521B\u5EFA\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Create.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        Create.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Create, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u5F52\u6863\u521B\u5EFA\u6210\u529F\uFF01';
                }
            }
        ]);
        return Create;
    }(_FormAction2['default']);
    module.exports = Create;
});
define('iot/storage/dialog/create.tpl', [], function () {
    return '<!-- target: TPL_iot_create_storage_copy -->\n<div class="iot-dialog-form iot-storage-dialog-form order-recharge">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-data-body">\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u540D\u79F0\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                        data-ui-name="storageName"\n                        data-ui-id="storageName"></div>\n                    <!-- import: TPL_iot_name_tip -->\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u4E3B\u9898\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                        data-ui-name="topic"\n                        data-ui-id="topic"></div>\n                    <!-- import: TPL_iot_topic_tip -->\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u5B58\u50A8\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="BucketSelect"\n                        data-ui-id="address"\n                        data-ui-name="address"\n                        data-ui-extension-bucketselect-type="BucketSelectEx"></div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<!-- target: TPL_iot_create_storage_copy_child -->\n<!-- import: TPL_iot_create_storage_copy -->\n';
});
define('iot/storage/dialog/CreateModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'common/region',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _commonRegion, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var _R = _babelRuntimeHelpersInteropRequireDefault['default'](_commonRegion);
    var CreateModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreateModel, _FormModel);
        function CreateModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateModel);
            _FormModel.apply(this, arguments);
        }
        CreateModel.prototype.getExtraData = function getExtraData() {
            return {
                endpointName: this.get('endpointName'),
                type: '1',
                location: _config.region[0].value
            };
        };
        _babelRuntimeHelpersCreateClass['default'](CreateModel, [
            {
                key: 'submitRequester',
                get: function get() {
                    return _config.api.iotStorageCreate;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        getBucketLocations: function getBucketLocations() {
                            return function () {
                                return { locations: [_R['default'].getCurrentRegion().id] };
                            };
                        }
                    };
                }
            }
        ]);
        return CreateModel;
    }(_FormModel2['default']);
    module.exports = CreateModel;
});
define('iot/storage/dialog/CreateStorage', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    './CreateStorageModel',
    './CreateStorageView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _CreateStorageModel, _CreateStorageView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateStorageModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateStorageView);
    var CreateStorage = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](CreateStorage, _FormAction);
        function CreateStorage() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateStorage);
            _FormAction.apply(this, arguments);
        }
        CreateStorage.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            var action = this.model.get('kafkaTopic') ? '\u7F16\u8F91' : '\u521B\u5EFA';
            this.toastMessage = '\u5B58\u50A8\u9879' + action + '\u6210\u529F\uFF01';
        };
        CreateStorage.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            var action = this.model.get('kafkaTopic') ? '\u7F16\u8F91' : '\u521B\u5EFA';
            this.view.showToast('\u5B58\u50A8\u9879' + action + '\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        CreateStorage.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        CreateStorage.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](CreateStorage, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return CreateStorage;
    }(_FormAction2['default']);
    module.exports = CreateStorage;
});
define('iot/storage/dialog/createStorage.tpl', [], function () {
    return '<!-- target: TPL_iot_create_storage -->\n<div class="iot-dialog-form iot-storage-dialog-form order-recharge">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-data-body">\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u5B58\u50A8\u7C7B\u578B\uFF1A</label>\n                <div class="form-value">\n                    <div class="storageType">Kafka</div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u5B58\u50A8\u4E3B\u9898\uFF1A</label>\n                <div class="form-value storage-topic">\n                    <esui-select data-ui-id="kafkaTopic" data-ui-width="220"\n                        data-ui-name="kafkaTopic"\n                        data-ui-required="true"\n                        data-ui-value="${kafkaTopic}"\n                        data-ui-datasource="@topicList"></esui-select>\n                    <span class="storage-tip" data-ui-type="Tip"\n                        data-ui-arrow="true">\u5B58\u50A8\u5230Kafka\uFF0C\u9700\u8981\u5F00\u901A\u300E\u767E\u5EA6Kafka\u300F\u670D\u52A1</span>\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>mqtt\u4E3B\u9898\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                        data-ui-width="220"\n                        data-ui-name="mqttTopic"\n                        data-ui-value="${mqttTopic}"\n                        data-ui-id="mqttTopic"></div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<!-- target: TPL_iot_create_storage_child -->\n<!-- import: TPL_iot_create_storage -->\n';
});
define('iot/storage/dialog/CreateStorageModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'common/region',
    'underscore',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _commonRegion, _underscore, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var _R = _babelRuntimeHelpersInteropRequireDefault['default'](_commonRegion);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var CreateStorageModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreateStorageModel, _FormModel);
        function CreateStorageModel(context) {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateStorageModel);
            _FormModel.call(this, context);
            this.submitRequester = this.get('kafkaTopic') ? _config.api.iotKafkaEdit : _config.api.iotKafkaCreate;
        }
        CreateStorageModel.prototype.getExtraData = function getExtraData() {
            return this.get('kafkaTopic') ? { kafkaMappingUuid: this.get('uuid') } : { endpointName: this.get('endpointName') };
        };
        _babelRuntimeHelpersCreateClass['default'](CreateStorageModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        getBucketLocations: function getBucketLocations() {
                            return { locations: [_R['default'].getCurrentRegion().id] };
                        },
                        topicList: function topicList(model) {
                            return _config.api.iotKafkaTopic().then(function (data) {
                                var listArr = [];
                                _u['default'].each(data, function (item) {
                                    listArr.push({
                                        text: item,
                                        value: item
                                    });
                                });
                                return listArr;
                            });
                        }
                    };
                }
            }]);
        return CreateStorageModel;
    }(_FormModel2['default']);
    module.exports = CreateStorageModel;
});
define('iot/storage/dialog/CreateStorageView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./createStorage.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreateStorageTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var CreateStorageView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreateStorageView, _FormView);
        function CreateStorageView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateStorageView);
            _FormView.apply(this, arguments);
        }
        CreateStorageView.prototype.getUIProperties = function getUIProperties() {
            return {
                mqttTopic: {
                    width: 200,
                    title: '\u4E3B\u9898',
                    placeholder: '\u8BF7\u586B\u5199\u4E3B\u9898\uFF0C\u957F\u5EA61-255',
                    required: 'required',
                    custom: function custom(value) {
                        var reg = /^[a-zA-Z0-9_\-+=%~`!@#$\^\&\*:'",.;:<>\/\?\(\)\[\]\{\}\\\|]{1,255}$/;
                        return reg.test(value);
                    },
                    customErrorMessage: '\u4E3B\u9898\u683C\u5F0F\u9519\u8BEF'
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](CreateStorageView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_create_storage';
                }
            }]);
        return CreateStorageView;
    }(_FormView2['default']);
    module.exports = CreateStorageView;
});
define('iot/storage/dialog/CreateView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./create.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    '../../config',
    '../../helper'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreateTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _config, _helper) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var _helper2 = _babelRuntimeHelpersInteropRequireDefault['default'](_helper);
    var CreateView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreateView, _FormView);
        function CreateView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateView);
            _FormView.apply(this, arguments);
        }
        CreateView.prototype.getUIProperties = function getUIProperties() {
            return {
                storageName: {
                    title: '\u540D\u79F0',
                    width: 200,
                    required: 'required',
                    placeholder: '\u8BF7\u586B\u5199\u5F52\u6863\u540D\u79F0\uFF0C\u957F\u5EA63-128',
                    pattern: /^(?!-)(?!.*?-$)(?!.*?-{2,}.*?)[a-zA-Z0-9-_]{3,128}$/
                },
                topic: {
                    title: '\u4E3B\u9898',
                    width: 200,
                    required: 'required',
                    placeholder: '\u8BF7\u586B\u5199\u5F52\u6863\u4E3B\u9898\uFF0C\u957F\u5EA61-255',
                    custom: _helper2['default'].isValidTopic,
                    customErrorMessage: '\u4E3B\u9898\u683C\u5F0F\u9519\u8BEF'
                },
                address: {
                    width: 222,
                    required: 'required',
                    requiredErrorMessage: '\u8BF7\u9009\u62E9\u6587\u4EF6',
                    pattern: /^bos:\/\/.+\/$/,
                    patternErrorMessage: '\u8BF7\u9009\u62E9\u6B63\u786E\u7684\u8DEF\u5F84',
                    getBucketList: _config.api.iotBosBucketList,
                    getFolderList: _config.api.iotBosFolderList,
                    getObjectList: _config.api.iotBosObjectList,
                    createBucket: _config.api.iotBosCreateBucket,
                    getBucketLocations: '@getBucketLocations',
                    viewtype: 'folder',
                    urlPrefix: 'bos://',
                    placeholder: 'bos://'
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](CreateView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_create_storage_copy';
                }
            }]);
        return CreateView;
    }(_FormView2['default']);
    module.exports = CreateView;
});
define('iot/storage/dialog/Edit', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    './EditModel',
    './EditView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _EditModel, _EditView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_EditModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_EditView);
    var Edit = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Edit, _FormAction);
        function Edit() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Edit);
            _FormAction.apply(this, arguments);
        }
        Edit.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u5F52\u6863\u7F16\u8F91\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Edit.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        Edit.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Edit, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u5F52\u6863\u7F16\u8F91\u6210\u529F\uFF01';
                }
            }
        ]);
        return Edit;
    }(_FormAction2['default']);
    module.exports = Edit;
});
define('iot/storage/dialog/edit.tpl', [], function () {
    return '<!-- target: TPL_iot_edit_storage -->\n<div class="iot-dialog-form iot-storage-dialog-form order-recharge">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-data-body">\n            <div class="form-row">\n                <label>\u540D\u79F0\uFF1A</label>\n                <div class="form-value">\n                    <div class="default-txt">${storageName}</div>\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u4E3B\u9898\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="TextBox"\n                        data-ui-name="topic"\n                        data-ui-id="topic"></div>\n                    <!-- import: TPL_iot_topic_tip -->\n                </div>\n            </div>\n            <div class="form-row">\n                <label><i>\uFF0A</i>\u5B58\u50A8\uFF1A</label>\n                <div class="form-value">\n                    <div data-ui-type="BucketSelect"\n                        data-ui-id="address"\n                        data-ui-name="address"\n                        data-ui-extension-bucketselect-type="BucketSelectEx"></div>\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<!-- target: TPL_iot_edit_storage_child -->\n<!-- import: TPL_iot_edit_storage -->\n';
});
define('iot/storage/dialog/EditModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'common/region',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _commonRegion, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var _R = _babelRuntimeHelpersInteropRequireDefault['default'](_commonRegion);
    var EditModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](EditModel, _FormModel);
        function EditModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EditModel);
            _FormModel.apply(this, arguments);
        }
        EditModel.prototype.getExtraData = function getExtraData() {
            return {
                endpointName: this.get('endpointName'),
                storageName: this.get('storageName'),
                type: '1',
                location: _config.region[0].value
            };
        };
        _babelRuntimeHelpersCreateClass['default'](EditModel, [
            {
                key: 'submitRequester',
                get: function get() {
                    return _config.api.iotStorageEdit;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        getBucketLocations: function getBucketLocations() {
                            return function () {
                                return { locations: [_R['default'].getCurrentRegion().id] };
                            };
                        }
                    };
                }
            }
        ]);
        return EditModel;
    }(_FormModel2['default']);
    module.exports = EditModel;
});
define('iot/storage/dialog/EditView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./edit.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    '../../config',
    '../../helper'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplEditTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _config, _helper) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var _helper2 = _babelRuntimeHelpersInteropRequireDefault['default'](_helper);
    var EditView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](EditView, _FormView);
        function EditView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EditView);
            _FormView.apply(this, arguments);
        }
        EditView.prototype.getUIProperties = function getUIProperties() {
            return {
                topic: {
                    title: '\u4E3B\u9898',
                    value: '@topic',
                    width: 200,
                    required: 'required',
                    placeholder: '\u8BF7\u586B\u5199\u5F52\u6863\u4E3B\u9898\uFF0C\u957F\u5EA61-255',
                    custom: _helper2['default'].isValidTopic,
                    customErrorMessage: '\u4E3B\u9898\u683C\u5F0F\u9519\u8BEF'
                },
                address: {
                    width: 222,
                    value: '@address',
                    required: 'required',
                    requiredErrorMessage: '\u8BF7\u9009\u62E9\u6587\u4EF6',
                    pattern: /^bos:\/\/.+\/$/,
                    patternErrorMessage: '\u8BF7\u9009\u62E9\u6B63\u786E\u7684\u8DEF\u5F84',
                    getBucketList: _config.api.iotBosBucketList,
                    getFolderList: _config.api.iotBosFolderList,
                    getObjectList: _config.api.iotBosObjectList,
                    createBucket: _config.api.iotBosCreateBucket,
                    getBucketLocations: '@getBucketLocations',
                    viewtype: 'folder',
                    urlPrefix: 'bos://',
                    placeholder: 'bos://'
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](EditView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_edit_storage';
                }
            }]);
        return EditView;
    }(_FormView2['default']);
    module.exports = EditView;
});
define('iot/storage/List', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/helper',
    '../events',
    '../operations',
    './ListModel',
    './ListView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _infRiaHelper, _events, _operations, _ListModel, _ListView) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ListModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ListView);
    var StorageList = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](StorageList, _ListAction);
        function StorageList() {
            _babelRuntimeHelpersClassCallCheck['default'](this, StorageList);
            _ListAction.apply(this, arguments);
        }
        StorageList.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].REFRESH, this.reload, this);
            this.view.on(_EVENTS['default'].CREATE, this.create, this);
            this.view.on(_EVENTS['default'].EDIT, this.edit, this);
            this.view.on(_EVENTS['default'].DELETE, this['delete'], this);
            this.on(_EVENTS['default'].POLICY_LOADED, this.reload);
            this.on('bos.active', this.activeBos);
            this.on('bos.recharge', this.rechargeBos);
        };
        StorageList.prototype.create = function create() {
            _operations2['default'].createStorage.call(this, {
                parentAction: this,
                endpointName: this.model.get('endpointName')
            });
        };
        StorageList.prototype.activeBos = function activeBos() {
            window.open(_infRiaHelper.buildUrl('bos', '/bos/order'));
        };
        StorageList.prototype.rechargeBos = function rechargeBos() {
            window.open(_infRiaHelper.buildUrl('finance', '/finance/account/recharge'));
        };
        StorageList.prototype.edit = function edit(e) {
            var _e$args$split = e.args.split(',');
            var endpointName = _e$args$split[0];
            var kafkaTopic = _e$args$split[1];
            var mqttTopic = _e$args$split[2];
            var uuid = _e$args$split[3];
            _operations2['default'].editStorage.call(this, {
                parentAction: this,
                endpointName: endpointName,
                kafkaTopic: kafkaTopic,
                mqttTopic: mqttTopic,
                uuid: uuid
            });
        };
        StorageList.prototype['delete'] = function _delete(e) {
            _operations2['default'].confirmHandler({
                title: '\u5220\u9664\u5B58\u50A8\u9879',
                content: '\u786E\u8BA4\u5220\u9664\u8BE5\u5B58\u50A8\u9879',
                width: 300
            }, 'storage.delete', this.view, { kafkaMappingUuid: e.args });
        };
        _babelRuntimeHelpersCreateClass['default'](StorageList, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return StorageList;
    }(_ListAction2['default']);
    module.exports = StorageList;
});
define('iot/storage/list.tpl', [], function () {
    return '<!-- target: TPL_iot_storage_list -->\n<div class="iot-main-wrap iot-storage-list main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u7269\u8054\u7F51\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u6570\u636E\u5B58\u50A8</span>\n        </p>\n        <div class="instance-info">\n            <h1>${endpointName}\u7684\u6570\u636E\u5B58\u50A8\u5217\u8868</h1>\n        </div>\n        <div class="detail-content">\n            <ul class="ui-tab-navigator">\n                <li class="ui-tab-item ui-tab-item-active">\n                    <a href="#/iot/storage/list~endpointName=${endpointName}">\u5B58\u50A8\u5230Kafka</a>\n                </li>\n                <li class="ui-tab-item">\n                    <a href="#/iot/storage/copylist~endpointName=${endpointName}">\u5B58\u50A8\u5230BOS</a>\n                </li>\n            </ul>\n            <div class="ui-tab-content">\n                <div class="row">\n                    <button data-ui-id="create"\n                        data-ui-type="Button"\n                        data-ui-skin="create"\n                        title="\u521B\u5EFA\u5B58\u50A8\u9879">\u521B\u5EFA\u5B58\u50A8\u9879</button>\n                    <span>\n                        \u5982\u9700\u5B58\u50A8\u5230TSDB\uFF0C\u8BF7\u901A\u8FC7<a target="_blank" class="create-link" href="/iotre/${search}#/iotre/rule/list">\u89C4\u5219\u5F15\u64CE</a>\u6765\u5B9E\u73B0\u3002\n                    </span>\n                </div>\n                <div class="table-full-wrap">\n                    <div data-ui-type="Table" data-ui-id="table"\n                         data-ui-datasource="@tableData"\n                         data-ui-order-by="@orderBy" data-ui-order="@order"\n                         data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                         data-ui-extension-command-type="Command"\n                         data-ui-extension-tableedit-type="TableEdit"\n                         data-ui-extension-tableex-type="TableEx">\n                    </div>\n                    <div class="ui-row">\n                    <!-- import: listPager -->\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>\n';
});
define('iot/storage/ListModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var StorageListModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](StorageListModel, _ListModel);
        function StorageListModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, StorageListModel);
            _ListModel.apply(this, arguments);
        }
        StorageListModel.prototype.getExtraQuery = function getExtraQuery() {
            return { endpointName: this.get('endpointName') };
        };
        _babelRuntimeHelpersCreateClass['default'](StorageListModel, [
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.iotStorageList;
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize
                    };
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        search: function search() {
                            return location.search;
                        }
                    };
                }
            }
        ]);
        return StorageListModel;
    }(_ListModel2['default']);
    module.exports = StorageListModel;
});
define('iot/storage/ListView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./list.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/ListView',
    'common/util/tableUtil',
    'common/util/timeUtil',
    '../events',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplListTplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcListView, _commonUtilTableUtil, _commonUtilTimeUtil, _events, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _localConfig = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u5B58\u50A8\u65B9\u5F0F',
                field: 'storageType',
                stable: true,
                width: 130,
                content: function content(item, row) {
                    return 'kafka';
                }
            },
            {
                title: '\u5B58\u50A8\u4E3B\u9898',
                field: 'topic',
                width: 250,
                content: function content(item, row) {
                    return _u['default'].escape(item.kafkaTopic);
                }
            },
            {
                title: 'mqtt\u4E3B\u9898',
                stable: true,
                width: 200,
                field: 'mqttTopic',
                content: function content(item, row) {
                    return _u['default'].escape(item.mqttTopic);
                }
            },
            {
                title: '\u521B\u5EFA\u65F6\u95F4',
                stable: true,
                width: 200,
                field: 'createTime',
                content: function content(item, row) {
                    return _timeUtil['default'].toTime(item.createTime);
                }
            },
            {
                title: '\u64CD\u4F5C',
                stable: true,
                width: 140,
                field: 'operation',
                content: function content(item, row) {
                    return view.getAllOpertionsHtml(item, row);
                }
            }
        ];
    }
    var StorageListView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](StorageListView, _ListView);
        function StorageListView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, StorageListView);
            _ListView.apply(this, arguments);
        }
        StorageListView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'create:click': function createClick(e) {
                    return _this.fire(_EVENTS['default'].CREATE, e);
                },
                'table:command': function tableCommand(e) {
                    return _this.fire(e.name, e);
                },
                'keyword:enter': function keywordEnter(e) {
                    return _this.submitSearch(e);
                },
                'searchBtn:enter': function searchBtnEnter(e) {
                    return _this.submitSearch(e);
                }
            });
        };
        StorageListView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
        };
        StorageListView.prototype.getAllOpertionsHtml = function getAllOpertionsHtml(item, row) {
            var html = [];
            Array.prototype.push.apply(html, [
                this.getEditHtml(item, row),
                this.getDeleteHtml(item, row)
            ]);
            return html.join('');
        };
        StorageListView.prototype.getEditHtml = function getEditHtml(item, row) {
            var canDo = true;
            var args = [
                item.endpointName,
                item.kafkaTopic,
                item.mqttTopic,
                item.uuid
            ].join();
            return _u['default'].template(_localConfig['default'].tpl.command)({
                label: '\u7F16\u8F91',
                command: _EVENTS['default'].EDIT,
                args: args,
                className: canDo ? '' : 'state-disabled',
                disabled: canDo ? '' : 'disabled'
            });
        };
        StorageListView.prototype.getDeleteHtml = function getDeleteHtml(item, row) {
            var canDo = true;
            var args = item.uuid;
            return _u['default'].template(_localConfig['default'].tpl.command)({
                label: '\u5220\u9664',
                command: _EVENTS['default'].DELETE,
                args: args,
                className: canDo ? '' : 'state-disabled',
                disabled: canDo ? '' : 'disabled'
            });
        };
        _babelRuntimeHelpersCreateClass['default'](StorageListView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_storage_list';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        keyword: {
                            width: 220,
                            value: '@keyword',
                            placeholder: '\u8BF7\u8F93\u5165\u5F52\u6863\u540D\u79F0'
                        },
                        table: {
                            select: false,
                            editable: 1,
                            columnResizable: true,
                            fields: '@tableFields',
                            noDataHtml: _localConfig['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return StorageListView;
    }(_ListView2['default']);
    module.exports = StorageListView;
});
define('iot/temp/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var actionsConfig = [{
            type: 'iot/temp/Error',
            path: '/iot/temp/error'
        }];
    _controller['default'].registerAction(actionsConfig);
    module.exports = {};
});
define('iot/temp/Error', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './ErrorModel',
    './ErrorView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _ErrorModel, _ErrorView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ErrorModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ErrorView);
    var Error = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Error, _BaseAction);
        function Error() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Error);
            _BaseAction.apply(this, arguments);
        }
        Error.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](Error, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Error;
    }(_BaseAction2['default']);
    module.exports = Error;
});
define('iot/temp/error.tpl', [], function () {
    return '<!-- target: TPL_iot_temp_error -->\n<div class="iot-main-wrap iot-temp-error">\n    <div class="content-wrap">\n        \u4E3A\u4E86\u66F4\u597D\u7684\u63D0\u4F9B\u670D\u52A1\uFF0C\u7CFB\u7EDF\u4E8E9\u670829\u65E500:00-02:00\u8FDB\u884C\u5347\u7EA7\uFF0C\u8BF7\u7A0D\u540E\u8BBF\u95EE\u3002\n    </div>\n</div>\n';
});
define('iot/temp/ErrorModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersClassCallCheck, _infRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseModel);
    var ErrorModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](ErrorModel, _BaseModel);
        function ErrorModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ErrorModel);
            _BaseModel.apply(this, arguments);
        }
        return ErrorModel;
    }(_BaseModel2['default']);
    module.exports = ErrorModel;
});
define('iot/temp/ErrorView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./error.tpl',
    'inf-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplErrorTplHtml, _infRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseView);
    var ErrorView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](ErrorView, _BaseView);
        function ErrorView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ErrorView);
            _BaseView.apply(this, arguments);
        }
        ErrorView.prototype.enterDocument = function enterDocument() {
            _BaseView.prototype.enterDocument.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](ErrorView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_temp_error';
                }
            }]);
        return ErrorView;
    }(_BaseView2['default']);
    module.exports = ErrorView;
});
define('iot/thing/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var actionsConfig = [
        {
            type: 'iot/thing/List',
            path: '/iot/thing/list'
        },
        {
            type: 'iot/thing/Connection',
            path: '/iot/thing/connection'
        },
        {
            type: 'iot/thing/Detail',
            path: '/iot/thing/detail'
        },
        {
            type: 'iot/thing/dialog/Create',
            path: '/iot/thing/create'
        },
        {
            type: 'iot/thing/dialog/Edit',
            path: '/iot/thing/edit'
        },
        {
            type: 'iot/thing/dialog/Thing',
            path: '/iot/thing/thing'
        },
        {
            type: 'iot/thing/dialog/Principal',
            path: '/iot/thing/principal'
        },
        {
            type: 'iot/thing/dialog/Policy',
            path: '/iot/thing/policy'
        },
        {
            type: 'iot/thing/dialog/Success',
            path: '/iot/thing/success'
        },
        {
            type: 'iot/thing/dialog/CreateTopic',
            path: '/iot/thing/topic'
        }
    ];
    _controller['default'].registerAction(actionsConfig);
    module.exports = {
        noDataHtml: [
            '<div><p>\u4F60\u8FD8\u6CA1\u521B\u5EFA\u4EFB\u4F55\u8BBE\u5907</br>',
            '\u70B9\u51FB\u5DE6\u4E0A\u89D2\u6309\u94AE\u7ACB\u5373\u521B\u5EFA\u6216\u8054\u7CFB\u7BA1\u7406\u5458\u521B\u5EFA',
            '</p></div>'
        ].join(''),
        tpl: { command: '<span class="operations"><button data-command="<%- command %>" ' + 'data-command-args="<%- args %>" class="cmd-button <%- className %>" <%- disabled %>>' + '<%- label %></button></span>' }
    };
});
define('iot/thing/Connection', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    'jquery',
    'underscore',
    'common/util/timeUtil',
    './ConnectionModel',
    './ConnectionView',
    '../_public/mqttws'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _jquery, _underscore, _commonUtilTimeUtil, _ConnectionModel, _ConnectionView, _publicMqttws) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ConnectionModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ConnectionView);
    var _Messaging = _babelRuntimeHelpersInteropRequireDefault['default'](_publicMqttws);
    var Connection = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Connection, _FormAction);
        function Connection() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Connection);
            _FormAction.call(this);
            this.subscriptions = [];
            this.messages = [];
            this.connected = false;
        }
        Connection.prototype.initBehavior = function initBehavior() {
            var _this = this;
            _FormAction.prototype.initBehavior.call(this);
            this.view.on('connect', this.connect, this);
            this.view.on('createTopic', this.createTopic, this);
            this.view.on('publish', this.publish, this);
            this.view.on('disconnect', this.disconnect, this);
            var eventDoms = [
                'connection',
                'publish',
                'message',
                'sub'
            ];
            _u['default'].each(eventDoms, function (property) {
                _$['default']('#' + property + '-toggle').click(function (e) {
                    _$['default'](e.target).hasClass('icon-arrow-chevron') ? _this.hideContent(property) : _this.showContent(property);
                });
            });
        };
        Connection.prototype.connect = function connect() {
            var formData = this.view.getFormData();
            var host = formData.host;
            var clientId = formData.clientId;
            var username = formData.username;
            var password = formData.password;
            var lwTopic = formData.lwTopic;
            var lwQos = formData.lwQos;
            var lwMessage = formData.lwMessage;
            var port = parseInt(formData.port, 10);
            var keepAlive = parseInt(formData.keepAlive, 10);
            var cleanSession = !!formData.cleanSession;
            var ssl = true;
            var lwRetain = !!formData.lastWillRetain;
            this.client = new _Messaging['default'].Client(host, port, clientId);
            this.client.onConnectionLost = _u['default'].bind(this.onConnectionLost, this);
            this.client.onMessageArrived = _u['default'].bind(this.onMessageArrived, this);
            var options = {
                timeout: 3,
                keepAliveInterval: keepAlive,
                cleanSession: cleanSession,
                useSSL: ssl,
                onSuccess: _u['default'].bind(this.onConnect, this),
                onFailure: _u['default'].bind(this.onFail, this)
            };
            if (username.length > 0) {
                options.userName = username;
            }
            if (password.length > 0) {
                options.password = password;
            }
            if (lwTopic.length > 0) {
                var willmsg = new _Messaging['default'].Message(lwMessage);
                willmsg.qos = lwQos;
                willmsg.destinationName = lwTopic;
                willmsg.retained = lwRetain;
                options.willMessage = willmsg;
            }
            try {
                this.client.connect(options);
            } catch (e) {
                this.view.showToast('\u8FDE\u63A5\u5931\u8D25', { messageType: 'error' });
            }
        };
        Connection.prototype.disconnect = function disconnect() {
            this.client.disconnect();
            this.renderDisconect();
        };
        Connection.prototype.onConnectionLost = function onConnectionLost(message) {
            console.log('onConnectionLost');
            this.view.showToast('\u8FDE\u63A5\u65AD\u5F00', { messageType: 'error' });
            this.renderDisconect();
        };
        Connection.prototype.onConnect = function onConnect() {
            console.log('onConnect');
            console.log('zengjf');
            this.client.sublastSubId = 0;
            this.client.meslastSubId = 0;
            this.connected = true;
            this.hideContent('connection');
            _$['default']('#connect-wqqt').hide();
            _$['default']('#disconnect-wqqt').show();
            _$['default']('#connect-state').show();
            _$['default']('#disconnect-state').hide();
        };
        Connection.prototype.renderDisconect = function renderDisconect() {
            this.showContent('connection');
            _$['default']('#connect-wqqt').show();
            _$['default']('#disconnect-wqqt').hide();
            _$['default']('#connect-state').hide();
            _$['default']('#disconnect-state').show();
            this.subscriptions = [];
            this.messages = [];
            this.connected = false;
            _$['default']('#messageInner').html('');
            _$['default']('#subInner').html('');
        };
        Connection.prototype.getSubscriptionForTopic = function getSubscriptionForTopic(topic) {
            var subscriptions = this.subscriptions;
            for (var index in subscriptions) {
                if (subscriptions.hasOwnProperty(index) && subscriptions[index].topic === topic) {
                    return subscriptions[index];
                }
            }
        };
        Connection.prototype.onMessageArrived = function onMessageArrived(message) {
            console.log('onMessageArrived');
            var messageObj = {
                id: this.client.meslastSubId++,
                topic: message.destinationName,
                retained: message.retained ? 'Retained' : '',
                qos: message.qos,
                payload: message.payloadString,
                timestamp: _timeUtil['default'].toTime(new Date())
            };
            var subscription = this.getSubscriptionForTopic(message.destinationName);
            if (!subscription) {
                messageObj.subscriptionId = '';
                messageObj.color = '#eee';
            } else {
                messageObj.subscriptionId = subscription.id;
                messageObj.color = subscription.color;
            }
            this.messages.push(messageObj);
            _$['default']('#messageInner').append(this.view.messageItem(messageObj));
        };
        Connection.prototype.deleteMesBytopic = function deleteMesBytopic(subscription) {
            var _this2 = this;
            this.messages.map(function (item, index) {
                if (item.topic === subscription.topic) {
                    _this2.messages.splice(index, 1, {});
                }
            });
            _$['default']('.message-' + subscription.id).remove();
        };
        Connection.prototype.onFail = function onFail() {
            console.log('onFail');
            this.view.showToast('\u8FDE\u63A5\u5931\u8D25', { messageType: 'error' });
        };
        Connection.prototype.publish = function publish() {
            if (!this.connected) {
                this.view.showToast('\u8BF7\u5148\u8FDE\u63A5\uFF01', { messageType: 'error' });
                return;
            }
            var topic = this.view.get('publishTopic').getValue();
            var payload = this.view.get('publishPayload').getValue();
            var qos = parseInt(this.view.get('publishQoSInput').getValue(), 10);
            var retain = this.view.get('publishRetain').checked;
            var message = new _Messaging['default'].Message(payload);
            message.destinationName = topic;
            message.qos = qos;
            message.retained = retain;
            this.client.send(message);
        };
        Connection.prototype.hideContent = function hideContent(name) {
            _$['default']('.' + name + '-main').slideUp();
            _$['default']('#' + name + '-toggle.arrow-toggle').removeClass('icon-arrow-chevron').addClass('close-icon-arrow-chevron');
        };
        Connection.prototype.showContent = function showContent(name) {
            _$['default']('.' + name + '-main').slideDown();
            _$['default']('#' + name + '-toggle.arrow-toggle').removeClass('close-icon-arrow-chevron').addClass('icon-arrow-chevron');
        };
        Connection.prototype.listenCloseSub = function listenCloseSub(subscription) {
            var _this3 = this;
            _$['default']('#subclose-' + subscription.id).click(function () {
                _this3.subscriptions.splice(subscription.id, 1, {});
                _this3.deleteMesBytopic(subscription);
                _this3.client.unsubscribe(subscription.topic);
                _$['default']('#sub' + subscription.id).remove();
            });
        };
        Connection.prototype.createTopic = function createTopic() {
            var _this4 = this;
            if (!this.connected) {
                this.view.showToast('\u8BF7\u5148\u8FDE\u63A5\uFF01', { messageType: 'error' });
                return;
            }
            this.view.waitActionDialog({
                title: 'Add New Topic Subscription',
                width: 440,
                url: '/iot/thing/topic',
                needFoot: true
            }).then(function (event) {
                var dialog = event.target;
                var action = dialog.getAction();
                var btnOk = dialog.getChild('foot').getChild('btnOk');
                var btnCancel = dialog.getChild('foot').getChild('btnCancel');
                btnOk.on('click', function () {
                    action.subscribe(function (subscription) {
                        _this4.client.subscribe(subscription.topic, { qos: subscription.qos });
                        var largest = _this4.client.sublastSubId++;
                        subscription.id = largest;
                        _this4.subscriptions.push(subscription);
                        _$['default']('#subInner').append(_this4.view.subItem(subscription));
                        _this4.listenCloseSub(subscription);
                        dialog.dispose();
                    });
                });
                btnCancel.on('click', function () {
                    return dialog.dispose();
                });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Connection, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Connection;
    }(_FormAction2['default']);
    module.exports = Connection;
});
define('iot/thing/connection.tpl', [], function () {
    return '<!-- target: TPL_iot_thing_connection -->\n<div class="iot-thing-connection iot-main-wrap">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u7269\u8054\u7F51\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <a href="#/iot/thing/list~endpointName=${endpointName}">\u8BBE\u5907\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u8FDE\u63A5\u6D4B\u8BD5</span>\n        </p>\n        <div class="connection-content">\n            <div class="content-head">\n            \t<span id="connection-toggle" class="arrow-toggle icon-arrow-chevron"></span>\n                <h2>\u6B65\u9AA41 &nbsp;&nbsp;&nbsp; Connection</h2>\n                <div id="connect-state" class="state" style="display: none;"><span class="point"></span>\u8FD0\u884C\u4E2D</div>\n                <div id="disconnect-state" class="state"><span class="point"></span>\u672A\u8FDE\u63A5</div>\n            </div>\n            <div class="content-main connection-main">\n        \t    <form class="form-body" data-ui-type="Form" data-ui-id="form">\n        \t        <table>\n        \t            <tr>\n        \t                <td>\n        \t                    <label><span>*</span>\u4E3B\u673A\u540D\u79F0\uFF1A</label>\n        \t                </td>\n        \t                <td>\n        \t                    <input data-ui-name="host"\n        \t                    \t   data-ui-id="host"\n        \t                    \t   data-ui-width="253"\n        \t                    \t   data-ui-required-error-message="x"\n                                       data-ui-placeholder="\u8BF7\u586B\u5199\u4E3B\u673A\u540D\u79F0"\n        \t                    \t   data-ui-required="true"\n        \t                    \t   data-ui-type="TextBox"\n        \t                    \t   data-ui-value="${endpointName}.mqtt.iot.${region}.baidubce.com"/>\n        \t                    <label style="top: 3px"><span>&nbsp;&nbsp;&nbsp;&nbsp;*</span>\u7AEF\u53E3\uFF1A</label>\n        \t                    <input data-ui-name="port"\n        \t                    \t   data-ui-id="port"\n        \t                    \t   data-ui-width="40"\n                                       data-ui-required-error-message="x"\n                                       data-ui-placeholder="\u8BF7\u586B\u5199\u7AEF\u53E3\u53F7"\n        \t                    \t   data-ui-required="true"\n        \t                    \t   data-ui-type="TextBox"\n        \t                    \t   data-ui-value="8884" />\n        \t                </td>\n        \t                <td>\n        \t                    <label><span>&nbsp;&nbsp;&nbsp;&nbsp;*</span>\u7528\u6237ID\uFF1A</label>\n        \t                </td>\n        \t                <td colspan="2">\n        \t                    <input data-ui-name="clientId"\n        \t                           data-ui-id="clientId"\n        \t                           data-ui-width="150"\n                                       data-ui-placeholder="\u8BF7\u586B\u5199\u5BA2\u6237\u7AEFID"\n        \t                           data-ui-required-error-message="x"\n        \t                           data-ui-required="true"\n        \t                           data-ui-type="TextBox"\n        \t                           data-ui-value="@deviceId" />\n        \t                </td>\n        \t            </tr>\n        \t            <tr>\n        \t                <td>\n        \t                    <label><span>*</span>\u7528\u6237\u540D\uFF1A</label>\n        \t                </td>\n        \t                <td>\n        \t                    <input data-ui-name="username" data-ui-id="username" data-ui-width="140" data-ui-placeholder="\u8BF7\u586B\u5199\u7528\u6237\u540D\u79F0" data-ui-required-error-message="x" data-ui-required="true" data-ui-type="TextBox" data-ui-value="${endpointName}/${thingName}" />\n        \t                    <label style="top: 3px"><span>&nbsp;&nbsp;&nbsp;&nbsp;*</span>\u8EAB\u4EFD\u5BC6\u94A5\uFF1A</label>\n        \t                    <input data-ui-name="password"\n                                       data-ui-id="password"\n                                       data-ui-width="130"\n                                       data-ui-required-error-message="x"\n                                       data-ui-required="true"\n                                       data-ui-type="TextBox"\n                                       type="password" />\n        \t                </td>\n        \t                <td>\n        \t                    <label>&nbsp;&nbsp;&nbsp;&nbsp;Keep Alive\uFF1A</label>\n        \t                </td>\n        \t                <td>\n        \t                    <input data-ui-name="keepAlive" data-ui-id="keepAlive" data-ui-width="40" data-ui-required="false" data-ui-type="TextBox" data-ui-value="60" />\n        \t                </td>\n        \t                <td>\n        \t                    <label style="top: 2px">&nbsp;&nbsp;&nbsp;&nbsp;SSL</label>\n        \t                    <input data-ui-name="ssl" data-ui-id="ssl" data-ui-type="CheckBox" data-ui-checked="true" data-ui-disabled="disabled" />\n                                <span data-ui-arrow="false" data-ui-type="Tip" data-ui-layer-width="160" class="ssl-tip">\u8BE5\u6D4B\u8BD5\u670D\u52A1\u53EA\u652F\u6301WSS\u8FDE\u63A5</span>\n        \t                    <label style="top: 2px">&nbsp;&nbsp;Clean Session</label>\n        \t                    <input data-ui-name="cleanSession" data-ui-id="cleanSession" data-ui-type="CheckBox" data-ui-checked="true" />\n        \t                </td>\n        \t            </tr>\n        \t            <tr>\n        \t                <td>\n        \t                    <label>Last-Will Topic\uFF1A</label>\n        \t                </td>\n        \t                <td>\n        \t                    <input data-ui-name="lwTopic" data-ui-id="lwTopic" data-ui-width="382" data-ui-required="false" data-ui-type="TextBox" />\n        \t                </td>\n        \t                <td>\n        \t                    <label>&nbsp;&nbsp;&nbsp;&nbsp;Last-Will QoS\uFF1A</label>\n        \t                </td>\n        \t                <td>\n        \t                    <span data-ui-type="Select" data-ui-id="lwQos" data-ui-name="lwQos" data-ui-required="true" data-ui-datasource="@lastWillQoS"></span>\n        \t                </td>\n        \t                <td>\n        \t                    <label  style="top: 2px">&nbsp;&nbsp;&nbsp;&nbsp;Last-Will Retain</label>\n        \t                    <input data-ui-name="lastWillRetain" data-ui-id="lastWillRetain" data-ui-type="CheckBox" />\n        \t                </td>\n        \t            </tr>\n        \t            <tr>\n        \t                <td>\n        \t                    <label>Last-Will Messages\uFF1A</label>\n        \t                </td>\n        \t                <td>\n        \t                    <input data-ui-name="lwMessage" data-ui-id="lwMessage" data-ui-width="382" data-ui-required="false" data-ui-type="TextBox" />\n        \t                </td>\n        \t            </tr>\n        \t        </table>\n        \t        <div class="operation-wrap">\n        \t            <button id="connect-wqqt" data-ui-type="Button" data-ui-skin="primary" data-ui-id="connect">connect</button>\n        \t            <button id="disconnect-wqqt" data-ui-type="Button" data-ui-skin="primary" data-ui-id="disconnect" style="display: none">disconnect</button>\n        \t        </div>\n        \t    </form>\n            </div>\n        </div>\n        <div class="steptwo">\n            <div class="connection-content" >\n                <div class="content-head">\n                \t<span id="publish-toggle" class="arrow-toggle icon-arrow-chevron"></span>\n                    <h2>\u6B65\u9AA42 &nbsp;&nbsp;&nbsp; Publish</h2>\n                </div>\n                <div class="content-main publish-main">\n                    <form class="form-body" data-ui-type="Form" data-ui-id="publishForm">\n                        <table>\n                            <tr>\n                                <td>\n                                    <label>Topic\uFF1A</label>\n                                </td>\n                                <td>\n                                    <input data-ui-name="publishTopic" data-ui-id="publishTopic" data-ui-width="200" data-ui-type="TextBox" />\n                                    <span data-ui-arrow="false" data-ui-type="Tip" data-ui-layer-width="160" class="topic-tip">\u8BF7\u4ECE\u7B56\u7565\u5217\u8868\u4E2D\u83B7\u53D6\u6709\u53D1\u5E03\u6743\u9650\u7684\u4E3B\u9898</span>\n                                    <label style="top: 3px">&nbsp;&nbsp;&nbsp;&nbsp;QoS\uFF1A</label>\n                                </td>\n                                <td>\n                                    <span data-ui-type="Select" data-ui-id="publishQoSInput" data-ui-name="publishQoSInput" data-ui-required="true" data-ui-datasource="@lastWillQoS"></span>\n                                </td>\n                                <td>\n                                    <label style="top: 2px">&nbsp;&nbsp;&nbsp;&nbsp;Retain</label>\n                                    <input data-ui-name="publishRetain" data-ui-id="publishRetain" data-ui-type="CheckBox" />\n                                </td>\n                            </tr>\n                            <tr>\n                                <td>\n                                    <label>Messages\uFF1A</label>\n                                </td>\n                                <td colspan="3">\n                                    <textarea data-ui-type="TextBox" data-ui-id="publishPayload" data-ui-name="publishPayload" data-ui-width="420" data-ui-height="80" ></textarea>\n                                </td>\n                            </tr>\n                        </table>\n                        <div class="operation-wrap">\n                            <button data-ui-type="Button" data-ui-skin="primary" data-ui-id="publish">publish</button>\n                            <span class="publish-tip" data-ui-layer-width="160">\u5982\u679C\u4E3B\u9898\u6CA1\u6709\u8BBE\u7F6E\u53D1\u5E03\u6743\u9650\uFF0C\u4F1A\u5BFC\u81F4\u8FDE\u63A5\u65AD\u5F00</span>\n                        </div>\n                    </form>\n                </div>\n            </div>\n            <div class="connection-content">\n                <div class="content-head">\n                \t<span id="message-toggle" class="arrow-toggle icon-arrow-chevron"></span>\n                    <h2>\u6B65\u9AA43 &nbsp;&nbsp;&nbsp; Messages</h2>\n                </div>\n                <div class="message-main">\n                    <ul id="messageInner" class="message-list"></ul>\n                </div>\n            </div>\n        </div>\n        <div class="connection-content" style="float:right;width:36%;">\n            <div class="content-head">\n            \t<span id="sub-toggle" class="arrow-toggle icon-arrow-chevron"></span>\n                <h2>Subscriptions</h2>\n            </div>\n            <div class="content-main sub-main">\n            \t<div class="operation-wrap">\n                \t<button data-ui-type="Button" data-ui-skin="primary" data-ui-id="newTopic">Add New Topic Subscription</button>\n                </div>\n                <ul id="subInner" class="sub-list" data-ui-id="subscriptions"></ul>\n            </div>\n        </div>\n    </div>\n</div>\n<!-- target: TPL_iot_thing_connection_child -->\n<!-- import: TPL_iot_thing_connection -->\n\n<!-- target: TPL_iot_thing_connection_message -->\n<li class="messageline message-${message.subscriptionId}" id="message${message.id}">\n   <div class="message-content-detail">\n     <div class="message-time"> ${message.timestamp} </div>\n     <div class="message-topic">Topic: ${message.topic} </div>\n     <div class="message-qos">Qos: ${message.qos} </div>\n     <div class="message-retained"> ${message.retained}</div>\n   </div>\n   <div class="message-content-message" style="border-left:5px solid ${message.color}">\n       <div class="message-payload "> ${message.payload} </div>\n   </div>\n</li>\n\n<!-- target: TPL_iot_thing_connection_subscription -->\n<li class="subline" id="sub${sub.id}">\n   <div class="content" style="border-left: solid 7px ${sub.color}">\n     <div class="subclose" id="subclose-${sub.id}" data-value="${sub.id}"></div>\n     <div class="qos">Qos: ${sub.qos}</div>\n     <div class="topic">${sub.topic}</div>\n   </div>\n</li>';
});
define('iot/thing/ConnectionModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'common/region'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _commonRegion) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormModel);
    var _R = _babelRuntimeHelpersInteropRequireDefault['default'](_commonRegion);
    var ConnectionModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](ConnectionModel, _FormModel);
        function ConnectionModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ConnectionModel);
            _FormModel.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](ConnectionModel, [
            {
                key: 'submitRequest',
                get: function get() {
                    return '';
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        deviceId: function deviceId() {
                            var deviceId = 'DeviceId-';
                            var base = '0123456789abcdefghijklmnopqrstuvwxyz';
                            for (var index = 0; index < 10; ++index) {
                                deviceId += base.charAt(Math.floor(Math.random() * base.length));
                            }
                            return deviceId;
                        },
                        lastWillQoS: function lastWillQoS() {
                            return [
                                {
                                    text: '0',
                                    value: 0
                                },
                                {
                                    text: '1',
                                    value: 1
                                }
                            ];
                        },
                        region: function region(model) {
                            var region = _R['default'].getCurrentRegion();
                            return region.id;
                        }
                    };
                }
            }
        ]);
        return ConnectionModel;
    }(_FormModel2['default']);
    module.exports = ConnectionModel;
});
define('iot/thing/ConnectionView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./connection.tpl',
    'inf-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    'etpl'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplConnectionTplHtml, _infRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _etpl) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormView);
    var _etpl2 = _babelRuntimeHelpersInteropRequireDefault['default'](_etpl);
    var ConnectionView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](ConnectionView, _FormView);
        function ConnectionView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ConnectionView);
            _FormView.apply(this, arguments);
        }
        ConnectionView.prototype.messageItem = function messageItem(messageObj) {
            return _etpl2['default'].render('TPL_iot_thing_connection_message', { message: messageObj });
        };
        ConnectionView.prototype.subItem = function subItem(subscription) {
            return _etpl2['default'].render('TPL_iot_thing_connection_subscription', { sub: subscription });
        };
        ConnectionView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'connect:click': function connectClick(e) {
                    return _this.fire('connect');
                },
                'newTopic:click': function newTopicClick(e) {
                    return _this.fire('createTopic');
                },
                'publish:click': function publishClick(e) {
                    return _this.fire('publish');
                },
                'disconnect:click': function disconnectClick(e) {
                    return _this.fire('disconnect');
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](ConnectionView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_thing_connection';
                }
            }]);
        return ConnectionView;
    }(_FormView2['default']);
    module.exports = ConnectionView;
});
define('iot/thing/Detail', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    '../events',
    '../operations',
    './DetailModel',
    './DetailView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _events, _operations, _DetailModel, _DetailView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailView);
    var Detail = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Detail, _BaseAction);
        function Detail() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Detail);
            _BaseAction.apply(this, arguments);
        }
        Detail.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].EDIT, this.edit, this);
        };
        Detail.prototype.edit = function edit(e) {
            _operations2['default'].editThing.call(this, {
                parentAction: this,
                endpointName: this.model.get('endpointName'),
                thingName: this.model.get('thingName')
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Detail, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Detail;
    }(_BaseAction2['default']);
    module.exports = Detail;
});
define('iot/thing/detail.tpl', [], function () {
    return '<!-- target: TPL_iot_thing_detail -->\n<div class="iot-endpoint-detail iot-main-wrap main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u7269\u8054\u7F51\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <a href="#/iot/thing/list~endpointName=${endpointName}">\u8BBE\u5907\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u8BBE\u5907\u8BE6\u60C5</span>\n        </p>\n        <div class="detail-content list-content">\n            <h2>\n                \u8BBE\u5907\u8BE6\u60C5\n                <!-- if: ${subPermission.permission.IotHubManage}-->\n                <span data-ui-type="Button"\n                    data-ui-id="edit"\n                    data-ui-skin="edit">\u7F16\u8F91</span>\n                <!-- /if -->\n            </h2>\n            <dl class="detail-content-item">\n                <dt></dt>\n                <dd>\n                    <div class="detail-content-row">\n                        <label>\u540D\u79F0\uFF1A</label>\n                        <div class="detail-content-value">${basicInfo.thingName}</div>\n                    </div>\n                    <div class="detail-content-row">\n                        <label>\u5168\u540D\uFF1A</label>\n                        <div class="detail-content-value">${basicInfo.endpointName}/${basicInfo.thingName}</div>\n                    </div>\n                    <div class="detail-content-row">\n                        <label>\u521B\u5EFA\u65F6\u95F4\uFF1A</label>\n                        <div class="detail-content-value">${basicInfo.localTime}</div>\n                    </div>\n                    <div class="detail-content-row">\n                        <label>\u7ED1\u5B9A\u8EAB\u4EFD\uFF1A</label>\n                        <div class="detail-content-value">\n                            <a href="#/iot/principal/detail~endpointName=${endpointName}&principalName=${basicInfo.principalName}">${basicInfo.principalName}</a>\n                        </div>\n                    </div>\n                </dd>\n            </dl>\n        </div>\n    </div>\n</div>\n';
});
define('iot/thing/DetailModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'common/util/timeUtil',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _commonUtilTimeUtil, _config) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var DetailModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](DetailModel, _BaseModel);
        function DetailModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailModel);
            _BaseModel.apply(this, arguments);
        }
        DetailModel.prototype.prepare = function prepare() {
            var basicInfo = this.get('basicInfo');
            _u['default'].extend(basicInfo, { localTime: _timeUtil['default'].toTime(basicInfo.createTime) });
            this.set('basicInfo', basicInfo);
        };
        _babelRuntimeHelpersCreateClass['default'](DetailModel, [
            {
                key: 'iotThingDetail',
                get: function get() {
                    return _config.api.iotThingDetail;
                }
            },
            {
                key: 'subPermission',
                get: function get() {
                    return _config.api.subPermission;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        basicInfo: function basicInfo(model) {
                            return model.iotThingDetail({
                                endpointName: model.get('endpointName'),
                                thingName: model.get('thingName')
                            });
                        },
                        subPermission: function subPermission(model) {
                            return model.subPermission({
                                endpointName: model.get('endpointName'),
                                thingName: model.get('thingName')
                            });
                        }
                    };
                }
            }
        ]);
        return DetailModel;
    }(_BaseModel2['default']);
    module.exports = DetailModel;
});
define('iot/thing/DetailView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./detail.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    '../events'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplDetailTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _events) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var DetailView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](DetailView, _BaseView);
        function DetailView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailView);
            _BaseView.apply(this, arguments);
        }
        DetailView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'edit:click': function editClick(e) {
                    return _this.fire(_EVENTS['default'].EDIT, e);
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](DetailView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_thing_detail';
                }
            }]);
        return DetailView;
    }(_BaseView2['default']);
    module.exports = DetailView;
});
define('iot/thing/dialog/Create', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../events',
    '../../_public/util',
    './CreateModel',
    './CreateView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _underscore, _events, _publicUtil, _CreateModel, _CreateView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateView);
    var Create = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Create, _FormAction);
        function Create() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Create);
            _FormAction.apply(this, arguments);
        }
        Create.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].THING_CREATED, this.doCreate, this);
            this.view.on(_EVENTS['default'].BEFORE_CHANGE, this.validateStep, this);
            this.view.on(_EVENTS['default'].CONFIRM, this.redirectAfterSubmit, this);
            this.on('beforesubmit', this.beforeSubmit);
            this.on('entercomplete', this.renderNextView);
        };
        Create.prototype.beforeSubmit = function beforeSubmit(e) {
            e.preventDefault();
            this.renderNextView();
        };
        Create.prototype.renderNextView = function renderNextView() {
            var formData = this.view.getFormData();
            var submitData = this.model.getSubmitData(formData);
            this.view.renderNextView({
                parentAction: this,
                formData: submitData
            });
        };
        Create.prototype.checkDuplicate = function checkDuplicate(formData, key) {
            var isValid = true;
            var form = this.view.get('form');
            var _form$getInputControls = form.getInputControls();
            var suggestInput = _form$getInputControls[0];
            var customInput = _form$getInputControls[1];
            if (_u['default'].contains(_u['default'].pluck(suggestInput._listData, key), formData[key])) {
                customInput.showValidationMessage('invalid', '\u8BE5\u540D\u79F0\u5DF2\u5B58\u5728');
                isValid = false;
            }
            return isValid;
        };
        Create.prototype.validateStep = function validateStep(e) {
            var dir = e.dir;
            var viewStep = e.viewStep;
            var formData = e.formData;
            if (dir) {
                if (viewStep === 2 && formData.principalName) {
                    if (!this.checkDuplicate(formData, 'principalName')) {
                        e.preventDefault();
                    }
                } else if (viewStep === 3 && formData.policyName) {
                    if (!this.checkDuplicate(formData, 'policyName')) {
                        e.preventDefault();
                    }
                }
            }
        };
        Create.prototype.doCreate = function doCreate(e) {
            var _this = this;
            var queryData = this.filterData(e.allConfig);
            this.model.submitRequester(queryData, { 'X-silence': true }).done(function (data) {
                _this.view.showToast(_this.getToastMessage());
                var main = _this.view.get('form').main;
                var pwdPanel = _T['default'].getUIControls(main, null, 'Panel')[0];
                if (data.password) {
                    pwdPanel.show();
                    var clip = _T['default'].getUIControls(main, null, 'Clipboard')[0];
                    clip && clip.set('clipboardText', data.password);
                } else {
                    pwdPanel.hide();
                }
                _this.view.setFormData(data);
            }).fail(function (data) {
                return _this.handleSubmitError(data);
            });
        };
        Create.prototype.filterData = function filterData(data) {
            var result = {};
            var thing = data[0];
            var principal = data[1];
            var policy = data[2];
            var thingData = thing.formData;
            var principalData = principal.formData;
            var policyData = policy.formData;
            var endpointName = thingData.endpointName;
            if (policyData && !policyData.policy) {
                result.policy = {
                    endpointName: endpointName,
                    policyName: policyData.policyName,
                    topics: policyData.topics
                };
            }
            if (principalData && !principalData.principal) {
                result.principal = {
                    endpointName: endpointName,
                    principalName: principalData.principalName,
                    policyName: policyData.policy || policyData.policyName
                };
            }
            result.thing = {
                endpointName: endpointName,
                thingName: thingData.thingName,
                principalName: principalData.principal || principalData.principalName
            };
            return result;
        };
        Create.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u8BBE\u5907\u521B\u5EFA\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Create.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        Create.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Create, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u8BBE\u5907\u521B\u5EFA\u6210\u529F\uFF01';
                }
            }
        ]);
        return Create;
    }(_FormAction2['default']);
    module.exports = Create;
});
define('iot/thing/dialog/create.tpl', [], function () {
    return '<!-- target: TPL_iot_create_thing -->\n<div class="iot-dialog-form iot-thing-edit iot-policy-create-dialog order-recharge">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-row step-form-row">\n            <div data-ui-type="ViewStep"\n                data-ui-id="viewStep"\n                data-ui-current-step="0">\n                <ul>\n                    <li>\u521B\u5EFA\u8BBE\u5907</li>\n                    <li>\u8BBE\u7F6E\u8EAB\u4EFD</li>\n                    <li>\u8BBE\u7F6E\u7B56\u7565</li>\n                    <li>\u914D\u7F6E\u786E\u8BA4</li>\n                </ul>\n            </div>\n        </div>\n        <div class="form-data-body" data-ui="type:ActionPanel;id:stepControl"></div>\n    </form>\n</div>\n<!-- target: TPL_iot_create_thing_child -->\n<!-- import: TPL_iot_create_thing -->\n';
});
define('iot/thing/dialog/CreateModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var CreateModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](CreateModel, _FormModel);
        function CreateModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateModel);
            _FormModel.apply(this, arguments);
        }
        CreateModel.prototype.getExtraData = function getExtraData() {
            return { endpointName: this.get('endpointName') };
        };
        CreateModel.prototype.filterData = function filterData(data) {
            this.filterTopicsData(data);
            return data;
        };
        CreateModel.prototype.filterTopicsData = function filterTopicsData(data) {
            var topics = [];
            var indexes = [];
            var indexReg = /[0-9]\d*$/gi;
            var normalizeProperties = [
                'topic',
                'operations'
            ];
            _u['default'].each(data, function (property, key) {
                var originKey = key.replace(indexReg, '');
                if (_u['default'].indexOf(normalizeProperties, originKey) !== -1) {
                    var index = key.match(indexReg);
                    index && indexes.push(index[0]);
                }
            });
            indexes = _u['default'].uniq(indexes);
            _u['default'].each(indexes, function (index) {
                var properties = {};
                _u['default'].each(normalizeProperties, function (property) {
                    var key = '' + property + index;
                    properties[property] = data[key];
                    delete data[key];
                });
                topics.push(properties);
            });
            data.topics = topics;
            return data;
        };
        _babelRuntimeHelpersCreateClass['default'](CreateModel, [{
                key: 'submitRequester',
                get: function get() {
                    return _config.api.iotThingCreateV2;
                }
            }]);
        return CreateModel;
    }(_FormModel2['default']);
    module.exports = CreateModel;
});
define('iot/thing/dialog/CreateTopic', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './CreateTopicModel',
    './CreateTopicView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _CreateTopicModel, _CreateTopicView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateTopicModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_CreateTopicView);
    var CreateTopic = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](CreateTopic, _BaseAction);
        function CreateTopic() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateTopic);
            _BaseAction.apply(this, arguments);
        }
        CreateTopic.prototype.subscribe = function subscribe(callback) {
            var color = this.getRandomColor();
            var Qos = parseInt(this.view.get('lastWillQoS').getValue(), 10);
            var topic = this.view.get('topic').getValue();
            this.websocketclient = this.model.get('client');
            var subscription = {
                topic: topic,
                qos: Qos,
                color: color
            };
            callback(subscription);
        };
        CreateTopic.prototype.getRandomColor = function getRandomColor() {
            return '#' + (Math.random() * 16777215 << 0).toString(16);
        };
        _babelRuntimeHelpersCreateClass['default'](CreateTopic, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return CreateTopic;
    }(_BaseAction2['default']);
    module.exports = CreateTopic;
});
define('iot/thing/dialog/createtopic.tpl', [], function () {
    return '<!-- target: TPL_iot_create_wqtt_topic -->\n<div class="iot-create-topic">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-group">\n            <div class="form-row form-qos">\n                <label>Qos</label>\n                <div class="form-value">\n                    <select data-ui-id="lastWillQoS"\n                        data-ui-name="lastWillQoS"\n                        data-ui-width="62"\n                        data-ui-type="Select">\n                        <option value="0">0</option>\n                        <option value="1">1</option>\n                    </select>\n                </div>\n            </div>\n            <div class="form-row form-topic">\n                <label>Topic</label>\n                <div class="form-value">\n                    <input data-ui-name="topic"\n                        data-ui-id="topic"\n                        data-ui-width="220"\n                        data-ui-required-error-message="\u8BF7\u586B\u5199Topic"\n                        data-ui-required="true"\n                        data-ui-type="TextBox"\n                        data-ui-value="testtopic/#" />\n                </div>\n            </div>\n        </div>\n    </form>\n</div>\n<!-- target: TPL_iot_create_wqtt_topic_child -->\n<!-- import: TPL_iot_create_wqtt_topic -->\n';
});
define('iot/thing/dialog/CreateTopicModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var CreateTopicModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](CreateTopicModel, _BaseModel);
        function CreateTopicModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateTopicModel);
            _BaseModel.apply(this, arguments);
        }
        return CreateTopicModel;
    }(_BaseModel2['default']);
    module.exports = CreateTopicModel;
});
define('iot/thing/dialog/CreateTopicView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./createtopic.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreatetopicTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var CreateTopicView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](CreateTopicView, _BaseView);
        function CreateTopicView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateTopicView);
            _BaseView.apply(this, arguments);
        }
        CreateTopicView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'subscribe:click': function subscribeClick(e) {
                    return _this.fire('subscribe');
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](CreateTopicView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_create_wqtt_topic';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return { pwdPanel: { hidden: true } };
                }
            }
        ]);
        return CreateTopicView;
    }(_BaseView2['default']);
    module.exports = CreateTopicView;
});
define('iot/thing/dialog/CreateView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./create.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'er/Deferred',
    'esui',
    'jquery',
    '../../events',
    '../../_public/util'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplCreateTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _erDeferred, _esui, _jquery, _events, _publicUtil) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _Deferred = _babelRuntimeHelpersInteropRequireDefault['default'](_erDeferred);
    var _ui = _babelRuntimeHelpersInteropRequireDefault['default'](_esui);
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var STEP = [
        {
            url: '/iot/thing/thing',
            hidden: ['btnFootLast'],
            bodyHeight: 137
        },
        {
            url: '/iot/thing/principal',
            access: function access(formData) {
                return !formData.principal;
            },
            bodyHeight: 117
        },
        {
            url: '/iot/thing/policy',
            access: function access(formData) {
                return !formData.policy;
            },
            bodyHeight: 117
        },
        {
            url: '/iot/thing/success',
            hidden: [
                'btnFootLast',
                'btnFootCancel'
            ],
            bodyHeight: 265
        }
    ];
    var CreateView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](CreateView, _FormView);
        function CreateView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, CreateView);
            _FormView.apply(this, arguments);
        }
        CreateView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'stepControl:prev': function stepControlPrev(e) {
                    return _this.renderLastView();
                }
            };
        };
        CreateView.prototype.setExtraFormData = function setExtraFormData(formData) {
            var form = this.get('form');
            var labels = _T['default'].getUIControls(form.main, null, 'Label');
            _u['default'].each(labels, function (label) {
                var refKey = label.get('for');
                if (formData[refKey]) {
                    label.setText(formData[refKey]);
                }
            });
        };
        CreateView.prototype.renderLastView = function renderLastView(e) {
            var _this2 = this;
            this.renderActionView().done(function (data) {
                var formData = data.action.formData;
                _this2.setFormData(formData);
            });
        };
        CreateView.prototype.renderNextView = function renderNextView(options) {
            var _this3 = this;
            this.renderActionView(options, true).done(function (data) {
                if (data.viewStep === STEP.length) {
                    _this3.fire(_EVENTS['default'].THING_CREATED, data);
                } else if (data.viewStep > STEP.length) {
                    _this3.fire(_EVENTS['default'].CONFIRM, data);
                }
            });
        };
        CreateView.prototype.renderActionView = function renderActionView(options, dir) {
            if (options === undefined)
                options = {};
            var result = _Deferred['default'].rejected();
            var viewStepControl = this.get('viewStep');
            var viewStep = viewStepControl.get('currentStep');
            var currentAction = STEP[viewStep - 1];
            var handleBeforeChange = this.fire(_EVENTS['default'].BEFORE_CHANGE, _u['default'].extend(options, {
                dir: dir,
                viewStep: viewStep
            }));
            if (handleBeforeChange.isDefaultPrevented()) {
                return;
            }
            if (dir) {
                viewStep = viewStep + 1;
                if (currentAction) {
                    currentAction.formData = options.formData;
                }
                if (!currentAction || !_u['default'].isFunction(currentAction.access) || currentAction.access(options.formData)) {
                    var nextAction = STEP[viewStep - 1];
                    if (nextAction) {
                        result = this.changeStepView(nextAction, options, viewStep);
                    } else {
                        result = _Deferred['default'].resolved({
                            viewStep: viewStep,
                            allConfig: STEP
                        });
                    }
                } else {
                    viewStep = STEP.length;
                    var successAction = STEP[viewStep - 1];
                    result = this.changeStepView(successAction, options, viewStep);
                }
            } else {
                viewStep = viewStep - 1;
                var lastAction = STEP[viewStep - 1];
                options.formData = lastAction.formData;
                result = this.changeStepView(lastAction, options, viewStep);
            }
            return result;
        };
        CreateView.prototype.getDialog = function getDialog() {
            var container = this.getContainerElement();
            var dialogContainer = _$['default'](container).parents('.ui-dialog').get(0);
            return _ui['default'].getControlByDOM(dialogContainer);
        };
        CreateView.prototype.changeStepView = function changeStepView(action, options, viewStep) {
            var panel = this.get('stepControl');
            var viewStepControl = this.get('viewStep');
            var dialog = this.getDialog();
            var dialogBody = dialog.get('body');
            var dialogFoot = dialog.get('foot');
            action.bodyHeight && (dialogBody.main.style.minHeight = action.bodyHeight + 'px');
            dialog.resize();
            _u['default'].each(dialogFoot.children, function (child) {
                var behavior = _u['default'].contains(action.hidden, child.id) ? 'hide' : 'show';
                child[behavior]();
            });
            var btnOk = dialogFoot.getChild('btnOk');
            if (viewStep >= STEP.length) {
                btnOk.setContent('\u786E\u8BA4');
            } else {
                btnOk.setContent('\u4E0B\u4E00\u6B65');
            }
            panel.setProperties({
                url: action.url,
                actionOptions: options
            });
            return panel.action.done(function () {
                viewStepControl.set('currentStep', viewStep);
                return {
                    action: action,
                    viewStep: viewStep,
                    allConfig: STEP,
                    dialog: dialog
                };
            });
        };
        _babelRuntimeHelpersCreateClass['default'](CreateView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_create_thing';
                }
            }]);
        return CreateView;
    }(_FormView2['default']);
    module.exports = CreateView;
});
define('iot/thing/dialog/Edit', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../events',
    '../../_public/util',
    './EditModel',
    './EditView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _underscore, _events, _publicUtil, _EditModel, _EditView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormAction);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_EditModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_EditView);
    var Edit = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Edit, _FormAction);
        function Edit() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Edit);
            _FormAction.apply(this, arguments);
        }
        Edit.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].THING_CREATED, this.doCreate, this);
            this.view.on(_EVENTS['default'].BEFORE_CHANGE, this.validateStep, this);
            this.view.on(_EVENTS['default'].CONFIRM, this.redirectAfterSubmit, this);
            this.on('beforesubmit', this.beforeSubmit);
            this.on('entercomplete', this.renderNextView);
        };
        Edit.prototype.beforeSubmit = function beforeSubmit(e) {
            e.preventDefault();
            this.renderNextView();
        };
        Edit.prototype.renderNextView = function renderNextView() {
            var formData = this.view.getFormData();
            var submitData = this.model.getSubmitData(formData);
            this.view.renderNextView({
                parentAction: this,
                formData: submitData
            });
        };
        Edit.prototype.checkDuplicate = function checkDuplicate(formData, key) {
            var isValid = true;
            var form = this.view.get('form');
            var _form$getInputControls = form.getInputControls();
            var suggestInput = _form$getInputControls[0];
            var customInput = _form$getInputControls[1];
            if (_u['default'].contains(_u['default'].pluck(suggestInput._listData, key), formData[key])) {
                customInput.showValidationMessage('invalid', '\u8BE5\u540D\u79F0\u5DF2\u5B58\u5728');
                isValid = false;
            }
            return isValid;
        };
        Edit.prototype.validateStep = function validateStep(e) {
            var dir = e.dir;
            var viewStep = e.viewStep;
            var formData = e.formData;
            if (dir) {
                if (viewStep === 2 && formData.principalName) {
                    if (!this.checkDuplicate(formData, 'principalName')) {
                        e.preventDefault();
                    }
                } else if (viewStep === 3 && formData.policyName) {
                    if (!this.checkDuplicate(formData, 'policyName')) {
                        e.preventDefault();
                    }
                }
            }
        };
        Edit.prototype.doCreate = function doCreate(e) {
            var _this = this;
            var queryData = this.filterData(e.allConfig);
            this.model.submitRequester(queryData, { 'X-silence': true }).done(function (data) {
                _this.view.showToast(_this.getToastMessage());
                var main = _this.view.get('form').main;
                var pwdPanel = _T['default'].getUIControls(main, null, 'Panel')[0];
                if (data.password) {
                    pwdPanel.show();
                    var clip = _T['default'].getUIControls(main, null, 'Clipboard')[0];
                    clip && clip.set('clipboardText', data.password);
                } else {
                    pwdPanel.hide();
                }
                _this.view.setFormData(data);
            }).fail(function (data) {
                return _this.handleSubmitError(data);
            });
        };
        Edit.prototype.filterData = function filterData(data) {
            var result = {};
            var thing = data[0];
            var principal = data[1];
            var policy = data[2];
            var thingData = thing.formData;
            var principalData = principal.formData;
            var policyData = policy.formData;
            var endpointName = thingData.endpointName;
            if (policyData && !policyData.policy) {
                result.policy = {
                    endpointName: endpointName,
                    policyName: policyData.policyName,
                    topics: policyData.topics
                };
            }
            if (principalData && !principalData.principal) {
                result.principal = {
                    endpointName: endpointName,
                    principalName: principalData.principalName,
                    policyName: policyData.policy || policyData.policyName
                };
            }
            result.thing = {
                endpointName: endpointName,
                thingName: thingData.thingName,
                principalName: principalData.principal || principalData.principalName
            };
            return result;
        };
        Edit.prototype.handleSubmitError = function handleSubmitError(message) {
            if (message && message.field) {
                this.view.notifyErrors(message.field);
            }
            this.view.showToast('\u8BBE\u5907\u7F16\u8F91\u5931\u8D25\uFF01');
            this.view.get('form').fire('submitError');
        };
        Edit.prototype.redirectAfterSubmit = function redirectAfterSubmit(result) {
            this.model.get('parentAction').reload();
            this.view.get('form').fire('submitSuccess');
        };
        Edit.prototype.redirectAfterCancel = function redirectAfterCancel() {
            return false;
        };
        _babelRuntimeHelpersCreateClass['default'](Edit, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u8BBE\u5907\u7F16\u8F91\u6210\u529F\uFF01';
                }
            }
        ]);
        return Edit;
    }(_FormAction2['default']);
    module.exports = Edit;
});
define('iot/thing/dialog/edit.tpl', [], function () {
    return '<!-- target: TPL_iot_edit_thing -->\n<div class="iot-dialog-form iot-thing-edit iot-edit-dialog iot-policy-create-dialog order-recharge">\n    <form data-ui-type="Form" data-ui-id="form"\n        data-ui-auto-validate="true">\n        <div class="form-row step-form-row">\n            <div data-ui-type="ViewStep"\n                data-ui-id="viewStep"\n                data-ui-current-step="0">\n                <ul>\n                    <li>\u7F16\u8F91\u8BBE\u5907</li>\n                    <li>\u8BBE\u7F6E\u8EAB\u4EFD</li>\n                    <li>\u8BBE\u7F6E\u7B56\u7565</li>\n                    <li>\u914D\u7F6E\u786E\u8BA4</li>\n                </ul>\n            </div>\n        </div>\n        <div class="form-data-body" data-ui="type:ActionPanel;id:stepControl"></div>\n    </form>\n</div>\n<!-- target: TPL_iot_edit_thing_child -->\n<!-- import: TPL_iot_edit_thing -->';
});
define('iot/thing/dialog/EditModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var EditModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](EditModel, _FormModel);
        function EditModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EditModel);
            _FormModel.apply(this, arguments);
        }
        EditModel.prototype.getExtraData = function getExtraData() {
            return { endpointName: this.get('endpointName') };
        };
        EditModel.prototype.filterData = function filterData(data) {
            this.filterTopicsData(data);
            return data;
        };
        EditModel.prototype.filterTopicsData = function filterTopicsData(data) {
            var topics = [];
            var indexes = [];
            var indexReg = /[0-9]\d*$/gi;
            var normalizeProperties = [
                'topic',
                'operations'
            ];
            _u['default'].each(data, function (property, key) {
                var originKey = key.replace(indexReg, '');
                if (_u['default'].indexOf(normalizeProperties, originKey) !== -1) {
                    var index = key.match(indexReg);
                    index && indexes.push(index[0]);
                }
            });
            indexes = _u['default'].uniq(indexes);
            _u['default'].each(indexes, function (index) {
                var properties = {};
                _u['default'].each(normalizeProperties, function (property) {
                    var key = '' + property + index;
                    properties[property] = data[key];
                    delete data[key];
                });
                topics.push(properties);
            });
            data.topics = topics;
            return data;
        };
        _babelRuntimeHelpersCreateClass['default'](EditModel, [
            {
                key: 'submitRequester',
                get: function get() {
                    return _config.api.iotThingEditV2;
                }
            },
            {
                key: 'iotThingDetail',
                get: function get() {
                    return _config.api.iotThingDetail;
                }
            }
        ]);
        return EditModel;
    }(_FormModel2['default']);
    module.exports = EditModel;
});
define('iot/thing/dialog/EditView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./edit.tpl',
    'bat-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'er/Deferred',
    'esui',
    'jquery',
    '../../events',
    '../../_public/util'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplEditTplHtml, _batRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _erDeferred, _esui, _jquery, _events, _publicUtil) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcFormView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _Deferred = _babelRuntimeHelpersInteropRequireDefault['default'](_erDeferred);
    var _ui = _babelRuntimeHelpersInteropRequireDefault['default'](_esui);
    var _$ = _babelRuntimeHelpersInteropRequireDefault['default'](_jquery);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var STEP = [
        {
            url: '/iot/thing/thing',
            hidden: ['btnFootLast'],
            bodyHeight: 137
        },
        {
            url: '/iot/thing/principal',
            access: function access(formData) {
                return !formData.principal;
            },
            bodyHeight: 87
        },
        {
            url: '/iot/thing/policy',
            access: function access(formData) {
                return !formData.policy;
            },
            bodyHeight: 87
        },
        {
            url: '/iot/thing/success',
            hidden: [
                'btnFootLast',
                'btnFootCancel'
            ],
            bodyHeight: 265
        }
    ];
    var EditView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](EditView, _FormView);
        function EditView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, EditView);
            _FormView.apply(this, arguments);
        }
        EditView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'stepControl:prev': function stepControlPrev(e) {
                    return _this.renderLastView();
                }
            };
        };
        EditView.prototype.setExtraFormData = function setExtraFormData(formData) {
            var form = this.get('form');
            var labels = _T['default'].getUIControls(form.main, null, 'Label');
            _u['default'].each(labels, function (label) {
                var refKey = label.get('for');
                if (formData[refKey]) {
                    label.setText(formData[refKey]);
                }
            });
        };
        EditView.prototype.renderLastView = function renderLastView(e) {
            var _this2 = this;
            this.renderActionView().done(function (data) {
                var formData = data.action.formData;
                _this2.setFormData(formData);
            });
        };
        EditView.prototype.renderNextView = function renderNextView(options) {
            var _this3 = this;
            this.renderActionView(options, true).done(function (data) {
                var viewStep = data.viewStep;
                if (viewStep === STEP.length) {
                    _this3.fire(_EVENTS['default'].THING_CREATED, data);
                } else if (viewStep > STEP.length) {
                    _this3.fire(_EVENTS['default'].CONFIRM, data);
                    return;
                }
                var formData = options.formData;
                var form = _this3.get('form');
                switch (viewStep) {
                case 1:
                    _this3.setFormData(_u['default'].extend({ thingName: _this3.model.get('thingName') }, formData));
                    break;
                case 2:
                    var suggestInput = form.getInputControls()[0];
                    suggestInput.setValue('\u6570\u636E\u8BFB\u53D6\u4E2D...');
                    suggestInput.setDisabled(true);
                    _this3.model.iotThingDetail(_u['default'].pick(data.allConfig[0].formData, 'endpointName', 'thingName'), { 'X-silence': true }).done(function (result) {
                        suggestInput.setDisabled(false);
                        suggestInput.setValue(result.principalName, { keyword: '' });
                    });
                default:
                }
            });
        };
        EditView.prototype.renderActionView = function renderActionView(options, dir) {
            if (options === undefined)
                options = {};
            var result = _Deferred['default'].rejected();
            var viewStepControl = this.get('viewStep');
            var viewStep = viewStepControl.get('currentStep');
            var currentAction = STEP[viewStep - 1];
            var handleBeforeChange = this.fire(_EVENTS['default'].BEFORE_CHANGE, _u['default'].extend(options, {
                dir: dir,
                viewStep: viewStep
            }));
            if (handleBeforeChange.isDefaultPrevented()) {
                return;
            }
            if (dir) {
                viewStep = viewStep + 1;
                if (currentAction) {
                    currentAction.formData = options.formData;
                }
                if (!currentAction || !_u['default'].isFunction(currentAction.access) || currentAction.access(options.formData)) {
                    var nextAction = STEP[viewStep - 1];
                    if (nextAction) {
                        result = this.changeStepView(nextAction, options, viewStep);
                    } else {
                        result = _Deferred['default'].resolved({
                            viewStep: viewStep,
                            allConfig: STEP
                        });
                    }
                } else {
                    viewStep = STEP.length;
                    var successAction = STEP[viewStep - 1];
                    result = this.changeStepView(successAction, options, viewStep);
                }
            } else {
                viewStep = viewStep - 1;
                var lastAction = STEP[viewStep - 1];
                options.formData = lastAction.formData;
                result = this.changeStepView(lastAction, options, viewStep);
            }
            return result;
        };
        EditView.prototype.getDialog = function getDialog() {
            var container = this.getContainerElement();
            var dialogContainer = _$['default'](container).parents('.ui-dialog').get(0);
            return _ui['default'].getControlByDOM(dialogContainer);
        };
        EditView.prototype.changeStepView = function changeStepView(action, options, viewStep) {
            var _this4 = this;
            var panel = this.get('stepControl');
            var viewStepControl = this.get('viewStep');
            var dialog = this.getDialog();
            var dialogBody = dialog.get('body');
            var dialogFoot = dialog.get('foot');
            action.bodyHeight && (dialogBody.main.style.minHeight = action.bodyHeight + 'px');
            dialog.resize();
            _u['default'].each(dialogFoot.children, function (child) {
                var behavior = _u['default'].contains(action.hidden, child.id) ? 'hide' : 'show';
                child[behavior]();
            });
            var btnOk = dialogFoot.getChild('btnOk');
            if (viewStep >= STEP.length) {
                btnOk.setContent('\u786E\u8BA4');
            } else {
                btnOk.setContent('\u4E0B\u4E00\u6B65');
            }
            panel.setProperties({
                url: action.url,
                actionOptions: options
            });
            return panel.action.done(function () {
                viewStepControl.set('currentStep', viewStep);
                if (viewStep === 1) {
                    var thingInput = _this4.get('form').getInputControls()[0];
                    thingInput.setReadOnly(true);
                }
                return {
                    action: action,
                    viewStep: viewStep,
                    allConfig: STEP,
                    dialog: dialog
                };
            });
        };
        _babelRuntimeHelpersCreateClass['default'](EditView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_edit_thing';
                }
            }]);
        return EditView;
    }(_FormView2['default']);
    module.exports = EditView;
});
define('iot/thing/dialog/Policy', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    'esui/lib',
    '../../_public/util',
    '../../events',
    './PolicyModel',
    './PolicyView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _esuiLib, _publicUtil, _events, _PolicyModel, _PolicyView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _lib = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiLib);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_PolicyModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_PolicyView);
    var Policy = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Policy, _BaseAction);
        function Policy() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Policy);
            _BaseAction.apply(this, arguments);
        }
        Policy.prototype.initBehavior = function initBehavior() {
            var _this = this;
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].CREATE_POLICY, function () {
                return _this.togglePolicy(true);
            });
            this.view.on(_EVENTS['default'].CANCEL_CREATE_POLICY, function () {
                return _this.togglePolicy(false);
            });
            var container = _lib['default'].g('topicContainer');
            var realContainer = _lib['default'].g('realContainer');
            this.delegateEvent('add-topic', 'click', this.addTopic, realContainer);
            this.delegateEvent('delete-topic', 'click', this.deleteTopic, container);
            this.topicInputEvent('input', container);
            this.on('entercomplete', this.enterComplete);
        };
        Policy.prototype.topicInputEvent = function topicInputEvent(eventType, main, context) {
            var _this2 = this;
            _lib['default'].on(main || document.body, eventType, function (e) {
                var target = _lib['default'].event.getTarget(e);
                var name = target.name;
                var operationsId = name.replace('topic', 'operations');
                var boxGroup = _this2.view.get(operationsId);
                var child = boxGroup.getBoxElements()[0];
                if (target.value.startsWith('$SYS/')) {
                    if (child.checked) {
                        child.click();
                    }
                    child.disabled = true;
                } else {
                    child.disabled = false;
                }
            });
        };
        Policy.prototype.enterComplete = function enterComplete() {
            var _this3 = this;
            this.view.loadTopicBox().done(function () {
                return _this3.togglePolicy(false);
            });
        };
        Policy.prototype.togglePolicy = function togglePolicy(flag) {
            var createPanel = this.view.get('createPanel');
            var childControls = _T['default'].getInputControls(createPanel.main);
            _T['default'].setControlsDisabled(childControls, !flag);
            this.view.get('createPanel')[flag ? 'show' : 'hide']();
        };
        Policy.prototype.addTopic = function addTopic(e) {
            this.view.loadTopicBox();
            this.model.get('parentAction').fire('dialog.resize');
        };
        Policy.prototype.deleteTopic = function deleteTopic(e) {
            _lib['default'].removeNode(e.target.parentNode);
            this.model.get('parentAction').fire('dialog.resize');
        };
        Policy.prototype.delegateEvent = function delegateEvent(attr, eventType, handler, main, context) {
            var _this4 = this;
            _lib['default'].on(main || document.body, eventType, function (e) {
                var target = _lib['default'].event.getTarget(e);
                var attribute = target.getAttribute('action-type');
                if (attribute && attribute === attr) {
                    handler.call(context || _this4, {
                        target: target,
                        container: _this4,
                        eventType: eventType,
                        originEvent: e
                    });
                }
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Policy, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Policy;
    }(_BaseAction2['default']);
    module.exports = Policy;
});
define('iot/thing/dialog/policy.tpl', [], function () {
    return '<!-- target: TPL_iot_create_thing_policy -->\n<div class="form-row last-form-row form-name">\n    <label><i>\uFF0A</i>\u7B56\u7565\uFF1A</label>\n    <div class="form-value">\n        <div data-ui="\n            type:SuggestInput;\n            id:policy;\n            name:policy;\n            input-autocomplete:off;\n        "></div>\n    </div>\n</div>\n<div class="form-row intro-form-row">\n    <label></label>\n    <div class="form-value">\n        <p class="intro">\u4E3A\u8BBE\u5907\u9009\u62E9\u7B56\u7565\uFF08\u5305\u62EC\u4E3B\u9898\u548C\u6743\u9650\uFF09\uFF0C\u82E5\u6CA1\u6709\u987B\u521B\u5EFA</p>\n    </div>\n</div>\n<div data-ui-type="Panel" data-ui-id="createPanel" class="create-panel">\n    <div class="form-row form-name">\n        <label><i>\uFF0A</i>\u540D\u79F0\uFF1A</label>\n        <div class="form-value">\n            <div data-ui-type="TextBox"\n                data-ui-name="policyName"\n                data-ui-id="policyName"></div>\n            <!-- import: TPL_iot_name_tip -->\n        </div>\n    </div>\n    <div id="realContainer">\n        <div id="topicContainer" class="topic-list create-list">\n        </div>\n        <div class="operation-line">\n            <i class="origin"></i>\n            <i class="iconfont icon-plus" action-type="add-topic"></i>\n        </div>\n    </div>\n    <p class="iot-form-tip">\u6CE8\uFF1A\u70B9\u51FB\u53F3\u4FA7\u52A0\uFF08\uFF0B\uFF09\u53F7\u4E3A\u672C\u7B56\u7565\u7ED1\u5B9A\u66F4\u591A\u7684\u4E3B\u9898\u3002</p>\n</div>\n<!-- target: TPL_iot_create_thing_policy_child -->\n<!-- import: TPL_iot_create_thing_policy -->\n';
});
define('iot/thing/dialog/PolicyModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    '../../enum'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _enum) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var PolicyModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](PolicyModel, _BaseModel);
        function PolicyModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PolicyModel);
            _BaseModel.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](PolicyModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        policySource: function policySource(model) {
                            return _enum.OPERATIONS.toArray();
                        }
                    };
                }
            }]);
        return PolicyModel;
    }(_BaseModel2['default']);
    module.exports = PolicyModel;
});
define('iot/thing/dialog/PolicyView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./policy.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'esui',
    'esui/lib',
    'er/Deferred',
    '../../events',
    '../../enum',
    '../../config',
    '../../helper'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplPolicyTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _esui, _esuiLib, _erDeferred, _events, _enum, _config, _helper) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ui = _babelRuntimeHelpersInteropRequireDefault['default'](_esui);
    var _lib = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiLib);
    var _Deferred = _babelRuntimeHelpersInteropRequireDefault['default'](_erDeferred);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _helper2 = _babelRuntimeHelpersInteropRequireDefault['default'](_helper);
    var globalIndex = 0;
    var topicProperties = {
        topic: {
            width: 200,
            title: '\u4E3B\u9898',
            disabled: true,
            placeholder: '\u8BF7\u586B\u5199\u4E3B\u9898\uFF0C\u957F\u5EA61-255',
            required: 'required',
            custom: _helper2['default'].isValidTopic,
            customErrorMessage: '\u4E3B\u9898\u683C\u5F0F\u9519\u8BEF'
        },
        operations: {
            title: '\u6743\u9650',
            required: 'required',
            value: _u['default'].pluck(_enum.OPERATIONS.toArray(), 'value').join()
        }
    };
    var PolicyView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](PolicyView, _BaseView);
        function PolicyView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PolicyView);
            _BaseView.apply(this, arguments);
        }
        PolicyView.prototype.getUIProperties = function getUIProperties() {
            return {
                policyName: {
                    title: '\u540D\u79F0',
                    width: 200,
                    disabled: true,
                    required: 'required',
                    placeholder: '\u8BF7\u586B\u5199\u7B56\u7565\u540D\u79F0\uFF0C\u957F\u5EA63-32',
                    pattern: _config.nameRegExp
                },
                policy: {
                    width: 222,
                    title: '\u7B56\u7565',
                    required: 'required',
                    placeholder: '\u8BF7\u9009\u62E9\u7ED1\u5B9A\u7B56\u7565',
                    action: _config.api.iotPolicySearch,
                    params: { endpointName: this.model.get('formData').endpointName },
                    formatter: function formatter(item, index) {
                        return item.policyName;
                    }
                },
                createPanel: { hidden: true }
            };
        };
        PolicyView.prototype.getUIEvents = function getUIEvents() {
            return {
                policy: {
                    create: function create(e) {
                        this.fire(_EVENTS['default'].CREATE_POLICY, e);
                    },
                    cancelcreate: function cancelcreate(e) {
                        this.fire(_EVENTS['default'].CANCEL_CREATE_POLICY, e);
                    }
                }
            };
        };
        PolicyView.prototype.loadTopicBox = function loadTopicBox() {
            var _this = this;
            var container = _lib['default'].g('topicContainer');
            this.model.set('index', globalIndex);
            return this.loadTemplate('TPL_iot_policy_fragment', container).done(function (args) {
                _ui['default'].init(args.box, {
                    viewContext: _this.viewContext,
                    properties: _this.getTopicBoxProperties(globalIndex++)
                });
                container.scrollTop = container.scrollHeight;
            });
        };
        PolicyView.prototype.loadTemplate = function loadTemplate(name, container) {
            var deferred = new _Deferred['default']();
            var html = this.templateRender(name, this.getTemplateData());
            var box = document.createElement('DIV');
            box.className = 'topic-box';
            box.innerHTML = html;
            container.appendChild(box);
            deferred.resolve({
                box: box,
                container: container,
                html: html
            });
            return deferred.promise;
        };
        PolicyView.prototype.getTopicBoxProperties = function getTopicBoxProperties(index) {
            var properties = _u['default'].deepClone(topicProperties);
            properties.topic.disabled = false;
            properties.operations.datasource = this.model.get('policySource');
            _u['default'].each(properties, function (property, key) {
                var newKey = '' + key + index;
                properties[newKey] = property;
                delete properties[key];
            });
            return properties;
        };
        _babelRuntimeHelpersCreateClass['default'](PolicyView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_create_thing_policy';
                }
            }]);
        return PolicyView;
    }(_BaseView2['default']);
    module.exports = PolicyView;
});
define('iot/thing/dialog/Principal', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    '../../_public/util',
    '../../events',
    './PrincipalModel',
    './PrincipalView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _publicUtil, _events, _PrincipalModel, _PrincipalView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_PrincipalModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_PrincipalView);
    var Principal = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Principal, _BaseAction);
        function Principal() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Principal);
            _BaseAction.apply(this, arguments);
        }
        Principal.prototype.initBehavior = function initBehavior() {
            var _this = this;
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].CREATE_PRINCIPAL, function () {
                return _this.togglePrincipal(true);
            });
            this.view.on(_EVENTS['default'].CANCEL_CREATE_PRINCIPAL, function () {
                return _this.togglePrincipal(false);
            });
            this.on('entercomplete', this.enterComplete);
        };
        Principal.prototype.enterComplete = function enterComplete() {
            var principalControl = this.view.get('principal');
            var formData = this.model.get('formData');
            if (!formData.principal && formData.principalName) {
                principalControl.updateStatus('creating');
                this.togglePrincipal(true);
            } else {
                this.togglePrincipal();
            }
        };
        Principal.prototype.togglePrincipal = function togglePrincipal(flag) {
            var createPanel = this.view.get('createPanel');
            var childControls = _T['default'].getInputControls(createPanel.main);
            _T['default'].setControlsDisabled(childControls, !flag);
            this.view.get('createPanel')[flag ? 'show' : 'hide']();
        };
        _babelRuntimeHelpersCreateClass['default'](Principal, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Principal;
    }(_BaseAction2['default']);
    module.exports = Principal;
});
define('iot/thing/dialog/principal.tpl', [], function () {
    return '<!-- target: TPL_iot_create_thing_principal -->\n<div class="form-row last-form-row">\n    <label><i>\uFF0A</i>\u8EAB\u4EFD\uFF1A</label>\n    <div class="form-value">\n        <div data-ui="\n            type:SuggestInput;\n            id:principal;\n            name:principal;\n            input-autocomplete:off;\n        "></div>\n    </div>\n</div>\n<div class="form-row intro-form-row">\n    <label></label>\n    <div class="form-value">\n        <p class="intro">\u4E3A\u8BBE\u5907\u9009\u62E9\u5B89\u5168\u8BBF\u95EE\u8EAB\u4EFD\uFF0C\u82E5\u6CA1\u6709\u987B\u521B\u5EFA</p>\n    </div>\n</div>\n<div data-ui-type="Panel" data-ui-id="createPanel" class="create-panel">\n    <div class="form-row">\n        <label><i>\uFF0A</i>\u540D\u79F0\uFF1A</label>\n        <div class="form-value">\n            <div data-ui-type="TextBox"\n                data-ui-name="principalName"\n                data-ui-id="principalName"></div>\n            <!-- import: TPL_iot_name_tip -->\n        </div>\n    </div>\n</div>\n<!-- target: TPL_iot_create_thing_principal_child -->\n<!-- import: TPL_iot_create_thing_principal -->\n';
});
define('iot/thing/dialog/PrincipalModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var PrincipalModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](PrincipalModel, _BaseModel);
        function PrincipalModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PrincipalModel);
            _BaseModel.apply(this, arguments);
        }
        return PrincipalModel;
    }(_BaseModel2['default']);
    module.exports = PrincipalModel;
});
define('iot/thing/dialog/PrincipalView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./principal.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    '../../events',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplPrincipalTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _events, _config) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var PrincipalView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](PrincipalView, _BaseView);
        function PrincipalView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, PrincipalView);
            _BaseView.apply(this, arguments);
        }
        PrincipalView.prototype.getUIProperties = function getUIProperties() {
            return {
                principalName: {
                    title: '\u540D\u79F0',
                    width: 200,
                    disabled: true,
                    required: 'required',
                    placeholder: '\u8BF7\u586B\u5199\u8EAB\u4EFD\u540D\u79F0\uFF0C\u957F\u5EA63-32',
                    pattern: _config.nameRegExp
                },
                principal: {
                    width: 222,
                    title: '\u8EAB\u4EFD',
                    required: 'required',
                    placeholder: '\u8BF7\u9009\u62E9\u7ED1\u5B9A\u8EAB\u4EFD',
                    action: _config.api.iotPrincipalSearch,
                    params: { endpointName: this.model.get('formData').endpointName },
                    formatter: function formatter(item, index) {
                        return item.principalName;
                    }
                },
                createPanel: { hidden: true }
            };
        };
        PrincipalView.prototype.getUIEvents = function getUIEvents() {
            return {
                principal: {
                    create: function create(e) {
                        this.fire(_EVENTS['default'].CREATE_PRINCIPAL, e);
                    },
                    cancelcreate: function cancelcreate(e) {
                        this.fire(_EVENTS['default'].CANCEL_CREATE_PRINCIPAL, e);
                    }
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](PrincipalView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_create_thing_principal';
                }
            }]);
        return PrincipalView;
    }(_BaseView2['default']);
    module.exports = PrincipalView;
});
define('iot/thing/dialog/Success', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './SuccessModel',
    './SuccessView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _SuccessModel, _SuccessView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_SuccessModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_SuccessView);
    var Success = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Success, _BaseAction);
        function Success() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Success);
            _BaseAction.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](Success, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Success;
    }(_BaseAction2['default']);
    module.exports = Success;
});
define('iot/thing/dialog/success.tpl', [], function () {
    return '<!-- target: TPL_iot_create_thing_success -->\n<div class="iot-success-confirm">\n    <div class="form-row-group">\n        <div class="form-title">\u8BBE\u5907</div>\n        <div class="form-row">\n            <label>\u540D\u79F0\uFF1A</label>\n            <div class="form-value">\n                <div class="default-txt">\n                    <label data-ui-type="Label" data-ui-for="thingName">\u6570\u636E\u8BFB\u53D6\u4E2D...</label>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="form-row-group">\n        <div class="form-title">\u8EAB\u4EFD</div>\n        <div class="form-row">\n            <label>\u540D\u79F0\uFF1A</label>\n            <div class="form-value">\n                <div class="default-txt">\n                    <label data-ui-type="Label" data-ui-for="principalName">\u6570\u636E\u8BFB\u53D6\u4E2D...</label>\n                </div>\n            </div>\n        </div>\n        <div class="form-row" data-ui-type="Panel" data-ui-id="pwdPanel">\n            <label>\u5BC6\u94A5\uFF1A</label>\n            <div class="form-value">\n                <div class="default-txt">\n                    <label data-ui-type="Label" data-ui-for="password">\u6570\u636E\u8BFB\u53D6\u4E2D...</label>\n                    <a data-ui-type="Clipboard"\n                        data-ui-id="copyPassword"\n                        data-ui-clipboard-text=""\n                        class="ui-button copy-password">\u590D\u5236</a>\n                </div>\n                <p class="warning">\u8BF7\u5408\u7406\u4FDD\u7BA1\u4EE5\u4E0A\u5BC6\u94A5\uFF0C\u5BC6\u94A5\u4E22\u5931\u65E0\u6CD5\u627E\u56DE\uFF0C\u53EA\u80FD\u91CD\u65B0\u751F\u6210</p>\n            </div>\n        </div>\n    </div>\n    <div class="form-row-group last-form-row-group">\n        <div class="form-title">\u7B56\u7565</div>\n        <div class="form-row">\n            <label>\u540D\u79F0\uFF1A</label>\n            <div class="form-value">\n                <div class="default-txt">\n                    <label data-ui-type="Label" data-ui-for="policyName">-</label>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<!-- target: TPL_iot_create_thing_success_child -->\n<!-- import: TPL_iot_create_thing_success -->\n';
});
define('iot/thing/dialog/SuccessModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var SuccessModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](SuccessModel, _BaseModel);
        function SuccessModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SuccessModel);
            _BaseModel.apply(this, arguments);
        }
        return SuccessModel;
    }(_BaseModel2['default']);
    module.exports = SuccessModel;
});
define('iot/thing/dialog/SuccessView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./success.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplSuccessTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var SuccessView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](SuccessView, _BaseView);
        function SuccessView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SuccessView);
            _BaseView.apply(this, arguments);
        }
        SuccessView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'copyPassword:aftercopy': function copyPasswordAftercopy(e) {
                    return _this.showToast('\u590D\u5236\u6210\u529F');
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](SuccessView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_create_thing_success';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return { pwdPanel: { hidden: true } };
                }
            }
        ]);
        return SuccessView;
    }(_BaseView2['default']);
    module.exports = SuccessView;
});
define('iot/thing/dialog/Thing', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    '../../events',
    './ThingModel',
    './ThingView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _events, _ThingModel, _ThingView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseAction);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ThingModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ThingView);
    var Thing = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Thing, _BaseAction);
        function Thing() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Thing);
            _BaseAction.apply(this, arguments);
        }
        Thing.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].INPUT, this.syncWithName, this);
        };
        Thing.prototype.syncWithName = function syncWithName(e) {
            var input = this.view.get('thingName');
            var label = this.view.get('thingNameLabel');
            var value = input.getValue();
            label.setText(value);
        };
        _babelRuntimeHelpersCreateClass['default'](Thing, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            },
            {
                key: 'toastMessage',
                get: function get() {
                    return '\u8BBE\u5907\u521B\u5EFA\u6210\u529F\uFF01';
                }
            }
        ]);
        return Thing;
    }(_BaseAction2['default']);
    module.exports = Thing;
});
define('iot/thing/dialog/thing.tpl', [], function () {
    return '<!-- target: TPL_iot_create_thing_thing -->\n<div class="form-row">\n    <label><i>\uFF0A</i>\u540D\u79F0\uFF1A</label>\n    <div class="form-value">\n        <div data-ui-type="TextBox"\n            data-ui-id="thingName"\n            data-ui-name="thingName"></div>\n        <!-- import: TPL_iot_name_tip -->\n    </div>\n</div>\n<div class="form-row">\n    <label>\u5168\u540D\uFF1A</label>\n    <div class="form-value">\n        <div class="default-txt">${formData.endpointName}/<label data-ui-type="Label" data-ui-id="thingNameLabel" data-ui-for="thingName"></label></div>\n    </div>\n</div>\n<!-- target: TPL_iot_create_thing_thing_child -->\n<!-- import: TPL_iot_create_thing_thing -->\n';
});
define('iot/thing/dialog/ThingModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersClassCallCheck, _batRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseModel);
    var ThingModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](ThingModel, _BaseModel);
        function ThingModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ThingModel);
            _BaseModel.apply(this, arguments);
        }
        return ThingModel;
    }(_BaseModel2['default']);
    module.exports = ThingModel;
});
define('iot/thing/dialog/ThingView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./thing.tpl',
    'bat-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    '../../events',
    '../../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplThingTplHtml, _batRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _events, _config) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaMvcBaseView);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var ThingView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](ThingView, _BaseView);
        function ThingView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ThingView);
            _BaseView.apply(this, arguments);
        }
        ThingView.prototype.getUIProperties = function getUIProperties() {
            return {
                thingName: {
                    width: 200,
                    title: '\u8BBE\u5907\u540D\u79F0',
                    required: 'required',
                    placeholder: '\u8BF7\u586B\u5199\u8BBE\u5907\u540D\u79F0\uFF0C\u957F\u5EA63-32',
                    pattern: _config.nameRegExp
                }
            };
        };
        ThingView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'thingName:input': function thingNameInput(e) {
                    return _this.fire(_EVENTS['default'].INPUT, e);
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](ThingView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_create_thing_thing';
                }
            }]);
        return ThingView;
    }(_BaseView2['default']);
    module.exports = ThingView;
});
define('iot/thing/List', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    '../events',
    '../operations',
    './ListModel',
    './ListView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _events, _operations, _ListModel, _ListView) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ListModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ListView);
    var ThingList = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](ThingList, _ListAction);
        function ThingList() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ThingList);
            _ListAction.apply(this, arguments);
        }
        ThingList.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].REFRESH, this.reload, this);
            this.view.on(_EVENTS['default'].CREATE, this.create, this);
            this.view.on(_EVENTS['default'].EDIT, this.edit, this);
            this.view.on(_EVENTS['default'].DELETE, this['delete'], this);
            this.view.on(_EVENTS['default'].EDIT_TABLE_CELL, this.editTableCell, this);
        };
        ThingList.prototype.editTableCell = function editTableCell(e) {
            var _this = this;
            if (!this.model.get('subPermission').permission.IotHubManage) {
                this.view.showToast('\u6CA1\u6709\u6743\u9650\u4FEE\u6539\uFF01', { messageType: 'error' });
                return;
            }
            var rowDatasource = this.view.get('table').datasource[e.rowIndex];
            if (e.value === rowDatasource.description) {
                return;
            }
            var data = {
                endpointName: rowDatasource.endpointName,
                thingName: rowDatasource.thingName,
                description: e.value
            };
            this.model.updateDescription(data).then(function () {
                return _this.view.showToast('\u4FEE\u6539\u8BBE\u5907\u63CF\u8FF0\u6210\u529F\uFF01');
            }).then(function () {
                _this.view.get('table').setCellText(e.value, e.rowIndex, e.columnIndex);
                rowDatasource.description = e.value;
            }).fail(function () {
                return _this.view.showToast('\u4FEE\u6539\u8BBE\u5907\u63CF\u8FF0\u5931\u8D25\uFF01');
            });
        };
        ThingList.prototype.create = function create() {
            _operations2['default'].createThing.call(this, {
                parentAction: this,
                endpointName: this.model.get('endpointName')
            });
        };
        ThingList.prototype.edit = function edit(e) {
            var _e$args$split = e.args.split(',');
            var endpointName = _e$args$split[0];
            var thingName = _e$args$split[1];
            _operations2['default'].editThing.call(this, {
                parentAction: this,
                endpointName: endpointName,
                thingName: thingName
            });
        };
        ThingList.prototype['delete'] = function _delete(e) {
            var _e$args$split2 = e.args.split(',');
            var endpointName = _e$args$split2[0];
            var thingName = _e$args$split2[1];
            _operations2['default'].confirmHandler({
                title: '\u5220\u9664\u8BBE\u5907',
                content: '\u786E\u8BA4\u5220\u9664\u8BE5\u8BBE\u5907',
                width: 300
            }, 'thing.delete', this.view, {
                endpointName: endpointName,
                thingName: thingName
            });
        };
        _babelRuntimeHelpersCreateClass['default'](ThingList, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return ThingList;
    }(_ListAction2['default']);
    module.exports = ThingList;
});
define('iot/thing/list.tpl', [], function () {
    return '<!-- target: TPL_iot_thing_list -->\n<div class="iot-main-wrap iot-thing-list main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb">\n            <span>\u7269\u8054\u7F51\u670D\u52A1</span>\n            <span class="divider">/</span>\n            <a href="#/iot/endpoint/list">\u5B9E\u4F8B\u5217\u8868</a>\n            <span class="divider">/</span>\n            <span class="active">\u8BBE\u5907\u5217\u8868</span>\n        </p>\n        <div class="list-content">\n            <h2>\u8BBE\u5907\u5217\u8868</h2>\n            <div class="table-full-wrap">\n                <div class="operation-wrap">\n                    <!-- if: ${subPermission.permission.IotHubManage}-->\n                    <button data-ui-id="create"\n                        data-ui-type="Button"\n                        data-ui-skin="create"\n                        title="\u521B\u5EFA\u8BBE\u5907">\u521B\u5EFA\u8BBE\u5907</button>\n                    <span data-ui-arrow="false" data-ui-type="Tip" data-ui-layer-width="160" class="ssl-tip">\u6700\u591A\u53EF\u521B\u5EFA10000\u4E2A\u8BBE\u5907\uFF0C\u53EF<a href="http://ticket.bce.baidu.com/#/ticket/create ">\u63D0\u4EA4\u5DE5\u5355</a>\u7533\u8BF7\u66F4\u591A\u989D\u5EA6</span>\n                    <!-- /if -->\n                    <span class="ui-group ui-search-group">\n                        <input class="search-box"\n                            data-ui-type="TextBox"\n                            data-ui-id="keyword"\n                            data-ui-name="keyword" />\n                        <button data-ui-type="Button"\n                            data-ui-id="searchBtn"\n                            class="search-button"></button>\n                    </span>\n                </div>\n\n                <div data-ui-type="Table" data-ui-id="table"\n                     data-ui-datasource="@tableData"\n                     data-ui-order-by="@orderBy" data-ui-order="@order"\n                     data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                     data-ui-extension-command-type="Command"\n                     data-ui-extension-tableedit-type="TableEdit"\n                     data-ui-extension-tableex-type="TableEx">\n                </div>\n                <div class="ui-row">\n                <!-- import: listPager -->\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/thing/ListModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var ThingListModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](ThingListModel, _ListModel);
        function ThingListModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ThingListModel);
            _ListModel.apply(this, arguments);
        }
        ThingListModel.prototype.getExtraQuery = function getExtraQuery() {
            return { endpointName: this.get('endpointName') };
        };
        ThingListModel.prototype.updateDescription = function updateDescription(data) {
            return _config.api.updateThingDesp(data);
        };
        _babelRuntimeHelpersCreateClass['default'](ThingListModel, [
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.iotThingList;
                }
            },
            {
                key: 'subPermission',
                get: function get() {
                    return _config.api.subPermission;
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize
                    };
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        subPermission: function subPermission(model) {
                            return model.subPermission({
                                endpointName: model.get('endpointName'),
                                thingName: model.get('thingName')
                            });
                        }
                    };
                }
            }
        ]);
        return ThingListModel;
    }(_ListModel2['default']);
    module.exports = ThingListModel;
});
define('iot/thing/ListView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./list.tpl',
    'underscore',
    'babel-runtime/helpers/interop-require-default',
    'inf-ria/mvc/ListView',
    'common/util/timeUtil',
    '../events',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplListTplHtml, _underscore, _babelRuntimeHelpersInteropRequireDefault, _infRiaMvcListView, _commonUtilTimeUtil, _events, _config) {
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _localConfig = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u8BBE\u5907\u540D\u79F0',
                field: 'thingName',
                content: function content(item, row) {
                    var endpointName = _u['default'].escape(item.endpointName);
                    var thingName = _u['default'].escape(item.thingName);
                    return '<a href=\n                    "#/iot/thing/detail~endpointName=' + endpointName + '&thingName=' + thingName + '"\n                    >' + thingName + '</a>';
                }
            },
            {
                title: '\u63CF\u8FF0',
                field: 'description',
                content: 'description',
                editable: 1
            },
            {
                title: '\u7528\u6237\u540D',
                field: 'wholeName',
                content: function content(item, row) {
                    return _u['default'].escape(item.endpointName + '/' + item.thingName);
                }
            },
            {
                title: '\u521B\u5EFA\u65F6\u95F4',
                stable: true,
                width: 250,
                field: 'createTime',
                content: function content(item, row) {
                    return _timeUtil['default'].toTime(item.createTime);
                }
            },
            {
                title: '\u64CD\u4F5C',
                stable: true,
                width: 170,
                field: 'operation',
                content: function content(item, row) {
                    return view.getAllOpertionsHtml(item, row);
                }
            }
        ];
    }
    var ThingListView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](ThingListView, _ListView);
        function ThingListView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ThingListView);
            _ListView.apply(this, arguments);
        }
        ThingListView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'create:click': function createClick(e) {
                    return _this.fire(_EVENTS['default'].CREATE, e);
                },
                'table:command': function tableCommand(e) {
                    return _this.fire(e.name, e);
                },
                'keyword:enter': function keywordEnter(e) {
                    return _this.submitSearch(e);
                },
                'searchBtn:click': function searchBtnClick(e) {
                    return _this.submitSearch(e);
                },
                'table:saveedit': function tableSaveedit(e) {
                    return _this.fire(_EVENTS['default'].EDIT_TABLE_CELL, e);
                }
            };
        };
        ThingListView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
        };
        ThingListView.prototype.getAllOpertionsHtml = function getAllOpertionsHtml(item, row) {
            var html = [];
            if (this.model.get('subPermission').permission.IotHubManage) {
                Array.prototype.push.apply(html, [
                    this.getConnectionTest(item, row),
                    this.getEditHtml(item, row),
                    this.getDeleteHtml(item, row)
                ]);
            } else {
                Array.prototype.push.apply(html, [this.getConnectionTest(item, row)]);
            }
            return html.join('');
        };
        ThingListView.prototype.getConnectionTest = function getConnectionTest(item, row) {
            return '<a class="operations"\n                    href="#/iot/thing/connection~endpointName=' + item.endpointName + '&thingName=' + item.thingName + '"\n                    target="_blank">\n                    <button class="cmd-button">\n                        \u8FDE\u63A5\u6D4B\u8BD5\n                    </button>\n                </a>';
        };
        ThingListView.prototype.getEditHtml = function getEditHtml(item, row) {
            var canDo = true;
            var args = [
                item.endpointName,
                item.thingName
            ].join();
            return _u['default'].template(_localConfig['default'].tpl.command)({
                label: '\u7F16\u8F91',
                command: _EVENTS['default'].EDIT,
                args: args,
                className: canDo ? '' : 'state-disabled',
                disabled: canDo ? '' : 'disabled'
            });
        };
        ThingListView.prototype.getDeleteHtml = function getDeleteHtml(item, row) {
            var canDo = true;
            var args = [
                item.endpointName,
                item.thingName
            ].join();
            return _u['default'].template(_localConfig['default'].tpl.command)({
                label: '\u5220\u9664',
                command: _EVENTS['default'].DELETE,
                args: args,
                className: canDo ? '' : 'state-disabled',
                disabled: canDo ? '' : 'disabled'
            });
        };
        _babelRuntimeHelpersCreateClass['default'](ThingListView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_thing_list';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        keyword: {
                            width: 220,
                            value: '@keyword',
                            placeholder: '\u8BF7\u8F93\u5165\u8BBE\u5907\u540D\u79F0'
                        },
                        table: {
                            select: false,
                            editable: 1,
                            columnResizable: true,
                            fields: '@tableFields',
                            noDataHtml: _localConfig['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return ThingListView;
    }(_ListView2['default']);
    module.exports = ThingListView;
});
define('iot/turnkey/Choose', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './ChooseModel',
    './ChooseView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _ChooseModel, _ChooseView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ChooseModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ChooseView);
    var Choose = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Choose, _BaseAction);
        function Choose() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Choose);
            _BaseAction.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](Choose, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Choose;
    }(_BaseAction2['default']);
    module.exports = Choose;
});
define('iot/turnkey/choose.tpl', [], function () {
    return '<!-- target: TPL_iot_turnkey_choose -->\n<div class="iot-main-wrap iot-turnkey-choose main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb"><a href="#/iot/turnkey/choose">\u5929\u5DE5-\u5FEB\u901F\u901A\u9053</a></p>\n        <div class="list-content detail-content">\n            <div class="content-header">\n                <h2>\u5929\u5DE5\u7269\u8054\u7F51\u5FEB\u901F\u5E94\u7528\u901A\u9053</h2>\n                <div data-ui-type="ViewStep"\n                        data-ui-id="createStep"\n                        data-ui-current-step="1">\n                    <ul>\n                        <li>\u9009\u62E9\u573A\u666F</li>\n                        <li>\u786E\u8BA4\u573A\u666F</li>\n                        <li>\u521B\u5EFA\u5DE5\u7A0B</li>\n                        <!-- <li>\u6D4B\u8BD5</li> -->\n                    </ul>\n                </div>\n            </div>\n            <div class="content-main">\n                <h3 style="margin-top: 15px;">\u6B22\u8FCE\u8FDB\u5165\u5929\u5DE5\u7269\u8054\u7F51\u5FEB\u901F\u5E94\u7528\u901A\u9053</h3>\n                <p style="margin-bottom: 15px;">\u5FEB\u901F\u901A\u9053\u65E8\u5728\u63D0\u4F9B\u5FEB\u6377\uFF0C\u4E00\u7AD9\u5F0F\u7684\u7269\u8054\u7F51\u5E94\u7528\u642D\u5EFA\u901A\u9053\uFF0C\u901A\u8FC7\u5BF9\u5E94\u7528\u573A\u666F\u7684\u5FEB\u901F\u754C\u5B9A\uFF0C\u667A\u80FD\u5730\u4E3A\u60A8\u5236\u5B9A\u8D44\u6E90\u914D\u7F6E\u65B9\u6848\uFF0C\u7531\u7CFB\u7EDF\u81EA\u52A8\u5728\u540E\u53F0\u521B\u5EFA\u5E76\u914D\u7F6E\u597D\u5404\u9879\u670D\u52A1\uFF0C\u4E3A\u60A8\u7701\u53BB\u5206\u5272\u5728\u5404\u4E2A\u4EA7\u54C1\u63A7\u5236\u53F0\u7684\u8BF8\u591A\u914D\u7F6E\u5DE5\u4F5C\uFF0C\u5927\u5927\u964D\u4F4E\u4EA7\u54C1\u7684\u4F7F\u7528\u95E8\u69DB\u548C\u5B66\u4E60\u6280\u672F\uFF0C\u5E2E\u52A9\u60A8\u66F4\u5FEB\u66F4\u8F7B\u677E\u7684\u5F00\u542F\u4E1A\u52A1\u65B0\u7EAA\u5143\u3002</p>\n                <a href="#/iot/turnkey/list">\u8FDB\u5165\u5FEB\u901F\u5DE5\u7A0B\u5217\u8868></a>\n                <h4>\u76EE\u524D\u652F\u6301\u4EE5\u4E0B\u573A\u666F\uFF1A</h4>\n                <ul class="scene-list">\n                    <li>\n                        <img src="${images.chooseUrl1}" />\n                        <h4>\u901A\u7528\u6570\u636E\u91C7\u96C6\u53CA\u76D1\u63A7</h4>\n                        <p>\u6570\u636E\u6536\u96C6\u53CA\u76D1\u63A7\u662F\u7269\u8054\u7F51\u6700\u5E38\u89C1\u7684\u5E94\u7528\u573A\u666F\uFF0C\u8BBE\u5907\u4E0A\u88C5\u6709\u5404\u79CD\u4F20\u611F\u5668\uFF0C\u901A\u8FC7\u4F20\u611F\u5668\u91C7\u96C6\u5230\u7684\u6570\u636E\u88AB\u5B9E\u65F6\u96C6\u4E2D\u5B58\u50A8\u8D77\u6765\uFF0C\u7BA1\u7406\u4EBA\u5458\u53EF\u4EE5\u901A\u8FC7\u8FDC\u7A0B\u5BF9\u8FD9\u4E9B\u6570\u636E\u8FDB\u884C\u67E5\u8BE2\u3001\u5206\u6790\u3001\u76D1\u63A7\uFF0C\u4ECE\u800C\u8FC5\u901F\u638C\u63E1\u8BBE\u5907\u5728\u8FC7\u53BB\u4E00\u6BB5\u65F6\u95F4\u53CA\u5F53\u524D\u7684\u6700\u65B0\u72B6\u6001\uFF0C\u5927\u5927\u63D0\u9AD8\u5DE5\u4F5C\u6548\u7387\uFF0C\u53CA\u65F6\u53D1\u73B0\u5904\u7406\u5404\u79CD\u6545\u969C\u53CA\u5F02\u5E38\u3002</p>\n                        <a class="goin" href="#/iot/turnkey/confirm">\u8FDB\u5165></a>\n                    </li>\n                    <li class="disable">\n                        <img src="${images.chooseUrl2}" />\n                        <h4>\u5DE5\u4E1A\u8BBE\u5907\u6570\u636E\u91C7\u96C6\u53CA\u76D1\u63A7</h4>\n                        <p>\u9488\u5BF9\u5DE5\u4E1A\u8BBE\u5907\u4E2D\u91C7\u7528\u7684Modbus\u534F\u8BAE\uFF0C\u8BBE\u5907\u5C06\u91C7\u96C6\u5230\u7684\u4FE1\u606F\u901A\u8FC7MQTT/HTTPS/Websocket\u534F\u8BAE\u53D1\u9001\u5230\u7269\u63A5\u5165\uFF08IoT Hub\uFF09,\u7136\u540E\u901A\u8FC7\u89C4\u5219\u5F15\u64CE\uFF08Rule Engine\uFF09\u5C06\u5176\u8F6C\u6362\u6210\u7279\u5B9A\u683C\u5F0F\uFF0C\u5E76\u5199\u5165TSDB\uFF0C\u6700\u7EC8\u5728TSDB\u8FDB\u884C\u6570\u636E\u7684\u56FE\u6807\u5C55\u73B0\u548C\u5206\u6790\u3002</p>\n                        <span class="goin">\u656C\u8BF7\u671F\u5F85</span>\n                    </li>\n                    <li class="disable">\n                        <img src="${images.chooseUrl3}" />\n                        <h4>\u901A\u7528\u6570\u636E\u91C7\u96C6\u53CA\u53CD\u63A7</h4>\n                        <p>\u5C06\u8BBE\u5907\u72B6\u6001\u901A\u8FC7MQTT/HTTPS/Websocket\u534F\u8BAE\u53D1\u9001\u5230\u7269\u63A5\u5165\uFF08Iot Hub\uFF09,\u7136\u540E\u901A\u8FC7\u7269\u7BA1\u7406\u5BF9\u5176\u72B6\u6001\u8FDB\u884C\u76D1\u63A7\uFF0C\u5E76\u4ECE\u4E91\u7AEF\u53D1\u8D77\u6307\u4EE4\u63A7\u5236\u8BBE\u5907\u3002</p>\n                        <span class="goin">\u656C\u8BF7\u671F\u5F85</span>\n                    </li>\n                </ul>\n            </div>\n        </div>\n    </div>\n</div>\n\n<!-- target: TPL_iot_turnkey_choose_child -->\n<!-- import: TPL_iot_turnkey_choose -->\n\n\n<!-- target: TPL_iot_turnkey_choose_step -->\n<div class="iot-turnkey-step">\n    <ul>\n        <li><span>1</span>\u9009\u62E9\u573A\u666F</li>\n        <li><span>2</span>\u786E\u8BA4\u573A\u666F</li>\n        <li><span>3</span>\u521B\u5EFA\u5DE5\u7A0B</li>\n        <li><span>4</span>\u6D4B\u8BD5</li>\n    </ul>\n</div>';
});
define('iot/turnkey/ChooseModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseModel);
    var ChooseModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](ChooseModel, _BaseModel);
        function ChooseModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ChooseModel);
            _BaseModel.apply(this, arguments);
        }
        ChooseModel.prototype.getConfirmTurnkey = function getConfirmTurnkey(request) {
            return _config.api.confirmTurnkey(request);
        };
        _babelRuntimeHelpersCreateClass['default'](ChooseModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        images: function images(model) {
                            return {
                                chooseUrl1: require.toUrl('./img/turnkey-begin1.png'),
                                chooseUrl2: require.toUrl('./img/turnkey-begin2.png'),
                                chooseUrl3: require.toUrl('./img/turnkey-begin3.png')
                            };
                        }
                    };
                }
            }]);
        return ChooseModel;
    }(_BaseModel2['default']);
    module.exports = ChooseModel;
});
define('iot/turnkey/ChooseView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./choose.tpl',
    'inf-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplChooseTplHtml, _infRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseView);
    var ChooseView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](ChooseView, _BaseView);
        function ChooseView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ChooseView);
            _BaseView.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](ChooseView, [{
                key: 'template',
                get: function get() {
                    return 'TPL_iot_turnkey_choose';
                }
            }]);
        return ChooseView;
    }(_BaseView2['default']);
    module.exports = ChooseView;
});
define('iot/turnkey/config', [
    'exports',
    'module',
    'er/controller',
    'babel-runtime/helpers/interop-require-default'
], function (exports, module, _erController, _babelRuntimeHelpersInteropRequireDefault) {
    var _controller = _babelRuntimeHelpersInteropRequireDefault['default'](_erController);
    var actionsConfig = [
        {
            type: 'iot/turnkey/Choose',
            path: '/iot/turnkey/choose'
        },
        {
            type: 'iot/turnkey/Confirm',
            path: '/iot/turnkey/confirm'
        },
        {
            type: 'iot/turnkey/ControlRoute',
            path: '/iot/turnkey/detail'
        },
        {
            type: 'iot/turnkey/ControlRoute',
            path: '/iot/turnkey/success'
        },
        {
            type: 'iot/turnkey/Quicklist',
            path: '/iot/turnkey/list'
        },
        {
            type: 'iot/turnkey/Listdetail',
            path: '/iot/turnkey/listdetail'
        }
    ];
    _controller['default'].registerAction(actionsConfig);
    module.exports = {
        CHOOSE_DATA_KEY: '__CHOOSE_DATA_KEY__',
        CONFIRM_DATA_KEY: '__CONFIRM_DATA_KEY__',
        nameRegExp: /^[0-9a-zA-Z_]{3,40}$/,
        prefixRegExp: /^[0-9a-zA-Z_]{1,40}$/,
        detailNameRegExp: /^(?!-)(?!.*?-$)(?!.*?-{2,}.*?)(?!(?:test|bce|iot|bridge|default)$)[a-zA-Z0-9-_]{3,32}$/,
        noDataHtml: [
            '<div><p>\u4F60\u8FD8\u6CA1\u521B\u5EFA\u4EFB\u4F55\u5DE5\u7A0B</br>',
            '\u8FD4\u56DE<a href="#/iot/turnkey/choose" style="margin-right:0">\u5FEB\u901F\u901A\u9053</a>\u7ACB\u5373\u521B\u5EFA',
            '</p></div>'
        ].join(''),
        tpl: { command: '<a data-command="<%- command %>" ' + 'data-command-args="<%- args %>" class="cmd-button <%- className %>" <%- disabled %>>' + '<%- label %></a>' }
    };
});
define('iot/turnkey/Confirm', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/FormAction',
    'babel-runtime/helpers/interop-require-default',
    'esui/lib',
    'underscore',
    'esui/validator/ValidityState',
    '../_public/storage',
    './config',
    '../_public/util',
    './ConfirmModel',
    './ConfirmView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcFormAction, _babelRuntimeHelpersInteropRequireDefault, _esuiLib, _underscore, _esuiValidatorValidityState, _publicStorage, _config, _publicUtil, _ConfirmModel, _ConfirmView) {
    var _FormAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormAction);
    var _lib = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiLib);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ValidityState = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiValidatorValidityState);
    var _S = _babelRuntimeHelpersInteropRequireDefault['default'](_publicStorage);
    var _T = _babelRuntimeHelpersInteropRequireDefault['default'](_publicUtil);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ConfirmModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ConfirmView);
    var Confirm = function (_FormAction) {
        _babelRuntimeHelpersInherits['default'](Confirm, _FormAction);
        function Confirm() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Confirm);
            _FormAction.apply(this, arguments);
        }
        Confirm.prototype.initBehavior = function initBehavior() {
            _FormAction.prototype.initBehavior.call(this);
            var container1 = _lib['default'].g('addMetrics');
            var container2 = _lib['default'].g('addTags');
            this.delegateEvent('add-new', 'click', this.addNewItem, container1, 'metrics');
            this.delegateEvent('cancel-new', 'click', this.cancelNewItem, container1, 'metrics');
            this.delegateEvent('add-new', 'click', this.addNewItem, container2, 'tags');
            this.delegateEvent('cancel-new', 'click', this.cancelNewItem, container2, 'tags');
            this.view.on('prevStep', this.prevStep, this);
            this.view.on('check', this.checkName, this);
            this.model.on('numError', this.numError, this);
            this.preView();
        };
        Confirm.prototype.checkName = function checkName(e) {
            var _this = this;
            var name = this.view.get('name').getValue();
            if (!name) {
                return;
            }
            this.model.checkNameTurnkey({ name: name }).then(function (data) {
                if (data.used) {
                    _this.model.set('validate', false);
                    _this.view.get('namecheck').show();
                    var inputControl = _this.view.get('name');
                    var validity = inputControl.getValidationResult();
                    validity.addState('invalid', new _ValidityState['default'](false, _this.validMessage));
                    inputControl.showValidity(validity);
                } else {
                    _this.model.set('validate', true);
                    _this.view.get('namecheck').hide();
                }
            });
        };
        Confirm.prototype.preView = function preView() {
            var session = _S['default'].get(_config.CHOOSE_DATA_KEY);
            if (this.model.get('back') && session) {
                var cache = session.request;
                var view = this.view;
                view.get('name').setValue(cache.name);
                view.get('projectType').setValue(cache.things.name);
                if (!cache.things.shareSecrete) {
                    view.get('projectKey').setValue('0');
                    view.get('projectNum').setValue(cache.things.num);
                }
                this.addListView('metrics', cache.metrics);
                this.addListView('tags', cache.tags);
            }
            return;
        };
        Confirm.prototype.addListView = function addListView(key, array) {
            var _this2 = this;
            var metricslist = this.model.get(key + 'list');
            _u['default'].each(array, function (item) {
                if (_T['default'].indexOf(metricslist, item) === -1) {
                    metricslist.push({
                        text: item,
                        value: item
                    });
                    _this2.view.get(key).setProperties({ datasource: [] });
                    _this2.view.get(key).setProperties({ datasource: metricslist });
                }
            });
            this.view.get(key).setValue(array.join(','));
        };
        Confirm.prototype.addNewItem = function addNewItem(key, options) {
            var uKey = key[0].toUpperCase() + key.slice(1);
            var newItem = this.view.get('newItem-add' + uKey).getValue();
            if (!_config.nameRegExp.test(newItem)) {
                return;
            }
            var metricslist = this.model.get(key + 'list');
            metricslist.push({
                text: newItem,
                value: newItem
            });
            this.view.get(key).setProperties({ datasource: [] });
            this.view.get(key).setProperties({ datasource: metricslist });
            _lib['default'].removeNode(options.target.parentNode.parentNode);
            this.view.showAdd('add' + uKey);
        };
        Confirm.prototype.cancelNewItem = function cancelNewItem(key, options) {
            var uKey = key[0].toUpperCase() + key.slice(1);
            _lib['default'].removeNode(options.target.parentNode.parentNode);
            this.view.showAdd('add' + uKey);
        };
        Confirm.prototype.prevStep = function prevStep(e) {
            e.preventDefault();
            this.redirect('/iot/turnkey/choose');
        };
        Confirm.prototype.numError = function numError() {
            var numInput = this.view.get('projectNum');
            numInput.showValidationMessage(false, '\u8F93\u51651-10\u7684\u6570\u5B57');
        };
        Confirm.prototype.handleSubmitResult = function handleSubmitResult(result) {
            _S['default'].set(_config.CHOOSE_DATA_KEY, result);
            this.redirect('/iot/turnkey/detail', { force: true });
        };
        Confirm.prototype.delegateEvent = function delegateEvent(attr, eventType, handler, main, key, context) {
            var _this3 = this;
            _lib['default'].on(main || document.body, eventType, function (e) {
                var target = _lib['default'].event.getTarget(e);
                var attribute = target.getAttribute('action-type');
                if (attribute && attribute === attr) {
                    handler.call(context || _this3, key, {
                        target: target,
                        container: _this3,
                        eventType: eventType,
                        originEvent: e
                    });
                }
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Confirm, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Confirm;
    }(_FormAction2['default']);
    module.exports = Confirm;
});
define('iot/turnkey/confirm.tpl', [], function () {
    return '<!-- target: TPL_iot_turnkey_confirm -->\n<div class="iot-main-wrap iot-turnkey-confirm main-wrap-new">\n    <div class="content-wrap">\n        <p class="breadcrumb"><a href="#/iot/turnkey/choose">\u5929\u5DE5-\u5FEB\u901F\u901A\u9053</a></p>\n        <div class="list-content detail-content">\n            <div class="content-header">\n                <h2>\u5929\u5DE5\u7269\u8054\u7F51\u5FEB\u901F\u5E94\u7528\u901A\u9053</h2>\n                <div data-ui-type="ViewStep"\n                        data-ui-id="createStep"\n                        data-ui-current-step="2">\n                    <ul>\n                        <li>\u9009\u62E9\u573A\u666F</li>\n                        <li>\u786E\u8BA4\u573A\u666F</li>\n                        <li>\u521B\u5EFA\u5DE5\u7A0B</li>\n                        <!-- <li>\u6D4B\u8BD5</li> -->\n                    </ul>\n                </div>\n            </div>\n            <div class="content-main">\n                <form class="form-body" data-ui-type="Form" data-ui-id="form" data-ui-auto-validate="true">\n                    <div class="form-row">\n                        <label class="required-label" class="required-label">\u5DE5\u7A0B\u540D\u79F0: </label>\n                        <input data-ui-type="TextBox"\n                               data-ui-required="true"\n                               data-ui-id="name"\n                               data-ui-name="name"\n                               data-ui-placeholder="\u8BF7\u8F93\u5165\u5DE5\u7A0B\u540D\u79F0"\n                               data-ui-required-error-message="\u8BF7\u586B\u5199\u5DE5\u7A0B\u540D\u79F0"\n                               data-ui-validity-label="validityNameLabel"\n                               data-ui-width="220" class="ui-textbox" />\n                        <span data-ui-type="Tip"\n                               data-ui-content="${tips.name}">\n                        </span>\n                        <span data-ui-type="Label" data-ui-id="namecheck" data-ui-hidden="hidden" class="check-name">\u8BE5\u540D\u5B57\u5DF2\u88AB\u4F7F\u7528</span>\n                        <label data-ui-type="Validity" data-ui-id="validityNameLabel"></label>\n                    </div>\n                    <div class="form-row num-row">\n                        <label class="required-label" width="100">\u79D8\u94A5\u8BBE\u7F6E: </label>\n                        <div data-ui-type="BoxGroup"\n                               data-ui-box-type="radio"\n                               data-ui-datasource="@radiolist"\n                               data-ui-validity-label="validityNumLabel"\n                               data-ui-name="projectKey"\n                               data-ui-id="projectKey" class="BoxGroup"></div>\n                        <input data-ui-type="TextBox"\n                               data-ui-id="projectNum"\n                               data-ui-validity-label="validityNumLabel"\n                               data-ui-name="projectNum"\n                               data-ui-placeholder="1-10"\n                               data-ui-width="50"/>\n                        <label data-ui-type="Validity" data-ui-id="validityNumLabel" width="110"></label>\n                    </div>\n                    <div class="form-row">\n                        <label class="required-label" width="100">\u8BBE\u5907\u7C7B\u578B: </label>\n                        <input data-ui-type="TextBox"\n                               data-ui-required="true"\n                               data-ui-id="projectType"\n                               data-ui-name="projectType"\n                               data-ui-placeholder="\u8BF7\u8F93\u5165\u8BBE\u5907\u7C7B\u578B"\n                               data-ui-required-error-message="\u8BF7\u586B\u5199\u8BBE\u5907\u7C7B\u578B"\n                               data-ui-validity-label="validityTypeLabel"\n                               data-ui-width="220" />\n                        <span data-ui-type="Tip"\n                                data-ui-content="${tips.name}">\n                        </span>\n                        <label data-ui-type="Validity" data-ui-id="validityTypeLabel"></label>\n                    </div>\n                    <div class="form-row">\n                        <label class="required-label" width="100">\u91C7\u96C6\u5EA6\u91CF: </label>\n                        <div class="box">\n                          <div data-ui-type="BoxGroup"\n                               data-ui-box-type="checkbox"\n                               data-ui-id="metrics"></div>\n                          <div data-ui-type="Button" data-ui-id="addMetrics">+\u6DFB\u52A0\u5176\u4ED6</div>\n                          <div id="addMetrics"></div>\n                        </div>\n                    </div>\n                    <div class="form-row">\n                        <label class="required-label" width="100">\u6570\u636E\u6807\u7B7E: </label>\n                        <div class="box">\n                          <div data-ui-type="BoxGroup"\n                               data-ui-box-type="checkbox"\n                               data-ui-id="tags"></div>\n                          <div data-ui-type="Button" data-ui-id="addTags">+\u6DFB\u52A0\u5176\u4ED6</div>\n                          <div id="addTags"></div>\n                        </div>\n                    </div>\n                    <div class="form-row form-row-button">\n                        <button data-ui-type="Button"\n                                class="ui-ctrl ui-button"\n                                data-ui-id="prevStep" type="button">\u4E0A\u4E00\u6B65</button>\n                        <button class="skin-primary-button ui-ctrl ui-button"\n                                data-ui-id="nextStep" type="submit">\u4E0B\u4E00\u6B65</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n</div>\n\n<!-- target: TPL_iot_turnkey_confirm_child -->\n<!-- import: TPL_iot_turnkey_confirm -->\n\n\n<!-- target: TPL_iot_turnkey_confirm_add -->\n<div class="confirm-iot">\n  <input data-ui-type="TextBox"\n         data-ui-id="newItem-${key}"\n         data-ui-name="newItem"\n         data-ui-placeholder="\u8BF7\u8F93\u5165\u6DFB\u52A0\u9879"\n         data-ui-pattern="^[0-9a-zA-Z_]{3,40}$"\n         data-ui-width="120" class="ui-textbox" />\n  <div class="button">\n    <span data-ui-type="Button" class="skin-primary-button ui-ctrl ui-button" action-type="add-new">\u786E\u5B9A</span>\n    <span data-ui-type="Button" class="ui-ctrl ui-button" action-type="cancel-new">\u53D6\u6D88</span>\n  </div>\n  <span data-ui-type="Tip"\n         data-ui-content="3-40\u4E2A\u5B57\u7B26\uFF0C\u5141\u8BB8\u8F93\u5165\u6570\u5B57\u3001\u5B57\u6BCD\u3001\u201C_\u201D"></span>\n</div>';
});
define('iot/turnkey/ConfirmModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/FormModel',
    'babel-runtime/helpers/interop-require-default',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcFormModel, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _FormModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormModel);
    var SILENT_OPTION = { 'X-silence': true };
    var ConfirmModel = function (_FormModel) {
        _babelRuntimeHelpersInherits['default'](ConfirmModel, _FormModel);
        function ConfirmModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ConfirmModel);
            _FormModel.apply(this, arguments);
        }
        ConfirmModel.prototype.validateSubmitData = function validateSubmitData(formData) {
            var validate = true && this.get('validate');
            if (!formData.name || !formData.things.name) {
                validate = false;
            }
            var shareSecrete = !!parseInt(formData.projectKey[0], 10);
            if (!shareSecrete) {
                var num = parseInt(formData.projectNum, 10);
                if (!num || num > 10 || num < 1) {
                    this.fire('numError');
                    validate = false;
                }
            }
            return validate;
        };
        ConfirmModel.prototype.checkNameTurnkey = function checkNameTurnkey(request) {
            return _config.api.checkNameTurnkey(request, SILENT_OPTION);
        };
        _babelRuntimeHelpersCreateClass['default'](ConfirmModel, [
            {
                key: 'submitRequester',
                get: function get() {
                    return _config.api.confirmTurnkey;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        radiolist: function radiolist() {
                            return [
                                {
                                    text: '\u6240\u6709\u8BBE\u5907\u5171\u4EAB\u901A\u8BAF\u5BC6\u7801',
                                    value: 1
                                },
                                {
                                    text: '\u6BCF\u4E2A\u72EC\u7ACB\u8BBE\u5907\u5BC6\u94A5\uFF0C\u8BF7\u8F93\u5165\u8BBE\u5907\u6570\u91CF',
                                    value: 0
                                }
                            ];
                        },
                        tagslist: function tagslist() {
                            return [
                                {
                                    text: 'ID',
                                    value: 'ID'
                                },
                                {
                                    text: 'Address',
                                    value: 'Address'
                                }
                            ];
                        },
                        metricslist: function metricslist() {
                            return [
                                {
                                    text: 'Temperature',
                                    value: 'Temperature'
                                },
                                {
                                    text: 'Voltage',
                                    value: 'Voltage'
                                },
                                {
                                    text: 'Current',
                                    value: 'Current'
                                },
                                {
                                    text: 'Frequency',
                                    value: 'Frequency'
                                },
                                {
                                    text: 'Humidity',
                                    value: 'Humidity'
                                }
                            ];
                        },
                        tips: function tips() {
                            return { name: '3-40\u4E2A\u5B57\u7B26\uFF0C\u5141\u8BB8\u8F93\u5165\u6570\u5B57\u3001\u5B57\u6BCD\u3001\u201C_\u201D' };
                        },
                        validate: function validate() {
                            return true;
                        }
                    };
                }
            }
        ]);
        return ConfirmModel;
    }(_FormModel2['default']);
    module.exports = ConfirmModel;
});
define('iot/turnkey/ConfirmView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./confirm.tpl',
    'inf-ria/mvc/FormView',
    'babel-runtime/helpers/interop-require-default',
    'esui',
    'esui/lib',
    'er/Deferred',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplConfirmTplHtml, _infRiaMvcFormView, _babelRuntimeHelpersInteropRequireDefault, _esui, _esuiLib, _erDeferred, _config) {
    var _FormView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcFormView);
    var _ui = _babelRuntimeHelpersInteropRequireDefault['default'](_esui);
    var _lib = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiLib);
    var _Deferred = _babelRuntimeHelpersInteropRequireDefault['default'](_erDeferred);
    var ConfirmView = function (_FormView) {
        _babelRuntimeHelpersInherits['default'](ConfirmView, _FormView);
        function ConfirmView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ConfirmView);
            _FormView.apply(this, arguments);
        }
        ConfirmView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'prevStep:click': function prevStepClick(e) {
                    return _this.fire('prevStep', e);
                },
                'nextStep:click': function nextStepClick(e) {
                    return _this.fire('submit', e);
                },
                'addMetrics:click': function addMetricsClick(e) {
                    return _this.loadAddBox('addMetrics');
                },
                'addTags:click': function addTagsClick(e) {
                    return _this.loadAddBox('addTags');
                },
                'name:blur': function nameBlur(e) {
                    return _this.fire('check', e);
                }
            };
        };
        ConfirmView.prototype.getExtraFormData = function getExtraFormData() {
            var shareSecrete = !!parseInt(this.get('projectKey').getValue(), 10);
            var data = {
                projectType: 'SCADA',
                things: {
                    name: this.get('projectType').getValue(),
                    num: shareSecrete ? 1 : this.get('projectNum').getValue(),
                    shareSecrete: shareSecrete
                }
            };
            return data;
        };
        ConfirmView.prototype.loadAddBox = function loadAddBox(keys) {
            var _this2 = this;
            this.hideAdd(keys);
            var container = _lib['default'].g(keys);
            this.loadTemplate('TPL_iot_turnkey_confirm_add', container, keys).done(function (args) {
                _ui['default'].init(args.box, { viewContext: _this2.viewContext });
            });
        };
        ConfirmView.prototype.loadTemplate = function loadTemplate(name, container, key) {
            var deferred = new _Deferred['default']();
            var html = this.templateRender(name, { key: key });
            var box = document.createElement('DIV');
            box.className = 'add-box';
            box.innerHTML = html;
            container.appendChild(box);
            deferred.resolve({
                box: box,
                container: container,
                html: html
            });
            return deferred.promise;
        };
        ConfirmView.prototype.showAdd = function showAdd(key) {
            this.get(key).show();
        };
        ConfirmView.prototype.hideAdd = function hideAdd(key) {
            this.get(key).hide();
        };
        _babelRuntimeHelpersCreateClass['default'](ConfirmView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_turnkey_confirm';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        tags: {
                            required: 'required',
                            requiredErrorMessage: '\u5FC5\u9009\u9879',
                            datasource: '@tagslist',
                            name: 'tags'
                        },
                        metrics: {
                            required: 'required',
                            requiredErrorMessage: '\u5FC5\u9009\u9879',
                            datasource: '@metricslist',
                            name: 'metrics'
                        },
                        name: { pattern: _config.nameRegExp },
                        projectType: { pattern: _config.nameRegExp }
                    };
                }
            }
        ]);
        return ConfirmView;
    }(_FormView2['default']);
    module.exports = ConfirmView;
});
define('iot/turnkey/ControlRoute', [
    'exports',
    'module',
    'er/locator',
    'babel-runtime/helpers/interop-require-default',
    '../_public/storage',
    './Detail',
    './SuccessInfo',
    './Choose',
    '../config',
    './config'
], function (exports, module, _erLocator, _babelRuntimeHelpersInteropRequireDefault, _publicStorage, _Detail, _SuccessInfo, _Choose, _config, _config3) {
    var _locator = _babelRuntimeHelpersInteropRequireDefault['default'](_erLocator);
    var _S = _babelRuntimeHelpersInteropRequireDefault['default'](_publicStorage);
    var _Detail2 = _babelRuntimeHelpersInteropRequireDefault['default'](_Detail);
    var _SuccessInfo2 = _babelRuntimeHelpersInteropRequireDefault['default'](_SuccessInfo);
    var _Choose2 = _babelRuntimeHelpersInteropRequireDefault['default'](_Choose);
    var _config2 = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function createRuntimeAction() {
        var mode = location.hash.slice(1);
        if (mode.indexOf('~') !== -1) {
            mode = mode.substr(0, mode.indexOf('~'));
        }
        var chooseData = _S['default'].get(_config3.CHOOSE_DATA_KEY);
        var confirmData = _S['default'].get(_config3.CONFIRM_DATA_KEY);
        var action = null;
        switch (mode) {
        case '/iot/turnkey/detail':
            if (!chooseData) {
                action = new _Choose2['default']();
            } else {
                action = new _Detail2['default']();
            }
            break;
        case '/iot/turnkey/success':
            if (!confirmData) {
                action = new _Choose2['default']();
            } else {
                action = new _SuccessInfo2['default']();
            }
            break;
        default:
            _locator['default'].redirect('#' + _config2['default'].index);
        }
        return action;
    }
    module.exports = { createRuntimeAction: createRuntimeAction };
});
define('iot/turnkey/Detail', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'esui/validator/ValidityState',
    '../_public/storage',
    './config',
    './DetailModel',
    './DetailView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _underscore, _esuiValidatorValidityState, _publicStorage, _config, _DetailModel, _DetailView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseAction);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _ValidityState = _babelRuntimeHelpersInteropRequireDefault['default'](_esuiValidatorValidityState);
    var _S = _babelRuntimeHelpersInteropRequireDefault['default'](_publicStorage);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_DetailView);
    var Detail = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Detail, _BaseAction);
        function Detail() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Detail);
            _BaseAction.apply(this, arguments);
        }
        Detail.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('create', this.create, this);
            this.view.on('prevStep', this.prevStep, this);
            this.view.on('prefixsyn', this.prefixSyn, this);
            this.view.on('endpointsyn', this.endpointSyn, this);
            this.view.on('tsdbsyn', this.tsdbChooseSyn, this);
            this.view.on('tsdbinputsyn', this.tsdbInputSyn, this);
        };
        Detail.prototype.prevStep = function prevStep() {
            this.redirect('/iot/turnkey/confirm~back=1');
        };
        Detail.prototype.endpointSyn = function endpointSyn() {
            var endpoint = this.view.get('thingSelect').getSelectedItem().value;
            this.view.get('thingInput').setValue(endpoint);
        };
        Detail.prototype.prefixSyn = function prefixSyn() {
            var sessionData = this.model.get('sessionData');
            var newPrefix = this.view.get('prefix').getValue();
            var ruledatasource = sessionData.confirmRuleEngine;
            _u['default'].each(ruledatasource, function (item) {
                return item.name = newPrefix + item.name.slice(item.name.indexOf('_'));
            });
            this.view.get('ruleTable').setDatasource(ruledatasource);
        };
        Detail.prototype.tsdbChooseSyn = function tsdbChooseSyn() {
            var selectItem = this.view.get('tsdbSelect').getSelectedItem();
            this.view.get('tsdbNameInput').setValue(selectItem.value);
            this.view.get('tsdbQuotaInput').setValue(selectItem.quota);
            this.tsdbInputSyn();
        };
        Detail.prototype.tsdbInputSyn = function tsdbInputSyn() {
            var tsdbName = this.view.get('tsdbNameInput').getValue();
            var ruledatasource = this.model.get('sessionData').confirmRuleEngine;
            _u['default'].each(ruledatasource, function (item) {
                return item.dest[0].value = tsdbName;
            });
            this.view.get('ruleTable').setDatasource(ruledatasource);
        };
        Detail.prototype.alert = function alert(content, width) {
            this.view.waitAlert({
                title: '\u63D0\u793A',
                content: content,
                width: width
            });
        };
        Detail.prototype.create = function create() {
            var _this = this;
            var sessionData = this.model.get('sessionData');
            var confirm = this.view.get('confirm').isChecked();
            var endpointName = this.view.get('thingInput').getValue();
            var prefix = this.view.get('prefix').getValue();
            if (!endpointName) {
                var inputControl = this.view.get('thingInput');
                var validity = inputControl.getValidationResult();
                validity.addState('invalid', new _ValidityState['default'](false, this.validMessage));
                inputControl.showValidity(validity);
                this.alert('\u8BF7\u8F93\u5165\u5B9E\u4F8B\u540D\u79F0', 320);
                return;
            }
            if (!prefix) {
                var inputControl = this.view.get('prefix');
                var validity = inputControl.getValidationResult();
                validity.addState('invalid', new _ValidityState['default'](false, this.validMessage));
                inputControl.showValidity(validity);
                this.alert('\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0', 320);
                return;
            }
            if (!_config.detailNameRegExp.test(endpointName) || !_config.prefixRegExp.test(prefix)) {
                this.alert('\u540D\u79F0\u53EA\u5141\u8BB8\u5B57\u6BCD\uFF0C\u6570\u5B57\u548C \u201C_\u201D', 320);
                return;
            }
            if (!confirm) {
                this.alert('\u8BF7\u786E\u8BA4\u4E86\u89E3\u5E76\u63A5\u53D7\u4E0A\u8FF0\u914D\u7F6E\u53EF\u80FD\u4EA7\u751F\u7684\u8D39\u7528', 420);
                return;
            }
            var selectItem = this.view.get('tsdbSelect').getSelectedItem();
            var data = {
                name: sessionData.request.name,
                projectType: 'SCADA',
                detail: [{
                        iothub: [{
                                endpoint: endpointName,
                                quota: sessionData.confirmIotHub.quota,
                                things: [{
                                        name: sessionData.request.things.name,
                                        num: sessionData.request.things.num,
                                        shareSecrete: sessionData.request.things.shareSecrete
                                    }]
                            }],
                        ruleEngine: [{
                                prefix: prefix,
                                metrics: sessionData.request.metrics,
                                tags: sessionData.request.tags
                            }],
                        tsdb: [{
                                id: selectItem.id,
                                name: selectItem.name,
                                quota: selectItem.quota
                            }]
                    }]
            };
            this.model.getCreateTurnkey(data).then(function (data) {
                _this.view.addLoading();
                var detailRequest = setInterval(function () {
                    _this.model.getDetailTurnkey(data).then(function (data) {
                        if (data.status === 'RUNNING') {
                            clearInterval(detailRequest);
                            _this.view.deleteLoading();
                            _S['default'].set(_config.CONFIRM_DATA_KEY, data);
                            _this.redirect('/iot/turnkey/success');
                        } else if (data.status === 'FAILED') {
                            clearInterval(detailRequest);
                            _this.view.deleteLoading();
                            _this.alert('\u521B\u5EFA\u5931\u8D25\uFF1A' + data.errorMessage, 420);
                        }
                    }).fail(function (data) {
                        clearInterval(detailRequest);
                        _this.view.deleteLoading();
                        _this.alert('\u521B\u5EFA\u5931\u8D25\uFF01', 320);
                    });
                }, 1000);
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Detail, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Detail;
    }(_BaseAction2['default']);
    module.exports = Detail;
});
define('iot/turnkey/detail.tpl', [], function () {
    return '<!-- target: TPL_iot_turnkey_detail -->\n<div class="iot-main-wrap iot-turnkey-detail">\n    <div class="content-wrap">\n        <p class="breadcrumb"><a href="#/iot/turnkey/choose">\u5929\u5DE5-\u5FEB\u901F\u901A\u9053</a>  / \u901A\u7528\u6570\u636E\u91C7\u96C6\u53CA\u76D1\u63A7</p>\n        <div class="list-content detail-content">\n            <div class="content-header">\n                <h2>\u5929\u5DE5\u7269\u8054\u7F51\u5FEB\u901F\u5E94\u7528\u901A\u9053</h2>\n                <div data-ui-type="ViewStep"\n                        data-ui-id="createStep"\n                        data-ui-current-step="3">\n                    <ul>\n                        <li>\u9009\u62E9\u573A\u666F</li>\n                        <li>\u786E\u8BA4\u573A\u666F</li>\n                        <li>\u521B\u5EFA\u5DE5\u7A0B</li>\n                        <!-- <li>\u6D4B\u8BD5</li> -->\n                    </ul>\n                </div>\n            </div>\n            <div class="content-main">\n                <h4>\u63A8\u8350\u8D44\u6E90\u914D\u7F6E\u6E05\u5355\uFF1A\u6839\u636E\u60A8\u8F93\u5165\u7684\u573A\u666F\u4FE1\u606F\uFF0C\u7CFB\u7EDF\u81EA\u52A8\u4E3A\u60A8\u63A8\u8350\u4EE5\u4E0B\u4EA7\u54C1\u53CA\u8D44\u6E90\u914D\u7F6E\u6E05\u5355\u3002</h4>\n                <p><span class="blue">\u6D41\u7A0B\u8BF4\u660E: </span>\u8BBE\u5907\u5C06\u91C7\u96C6\u5230\u7684\u4FE1\u606F\u901A\u8FC7MQTT/HTPPS/Websocket\u534F\u8BAE\u53D1\u9001\u5230\u7269\u63A5\u5165\uFF08Iot Hub\uFF09,\u7136\u540E\u901A\u8FC7\u89C4\u5219\u5F15\u64CE\uFF08Rule Engineer\uFF09\u5C06\u5176\u8F6C\u6362\u6210\u7279\u5B9A\u683C\u5F0F\uFF0C\u5E76\u5199\u5165TSDB,\u6700\u7EC8\u5728TSDB\u8FDB\u884C\u6570\u636E\u7684\u56FE\u6807\u5C55\u73B0\u548C\u5206\u6790</p>\n                <img src="${createImg}" class="create-img" />\n                <div class="detail-parts-table" style="margin: 0;padding: 0;">\n                    <dl class="detail-part-1-col">\n                        <dt>\n                            <h4>\u8BBE\u5907\u63A5\u5165 \u2014 \u7269\u63A5\u5165\uFF08IoT Hub\uFF09</h4>\n                        </dt>\n                        <dd>\n                            <div class="description">\n                                <div data-ui-type="BoxGroup" data-ui-id="thingRadios"\n                                    data-ui-name="thingRadios" data-ui-box-type="radio">\n                                    <ul>\n                                        <li>\n                                            <input type="radio" id="radioC" name="thingRadios" value="write" checked="checked" />\n                                            <label for="radioC">\u521B\u5EFA\u65B0\u7684\u63A5\u5165\u5B9E\u4F8B</label>\n                                        </li>\n                                        <li>\n                                            <input type="radio" id="radioD" name="thingRadios" value="choose" />\n                                            <label for="radioD">\u9009\u53D6\u73B0\u6709\u63A5\u5165\u5B9E\u4F8B&nbsp;\n                                            </label>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <span data-ui-type="Select" data-ui-id="thingSelect" data-ui-name="thingSelect" ></span>\n                                <div data-ui-id="thingDetail" data-ui-type="Panel">\n                                    <span>\u5B9E\u4F8B\u540D\u79F0\uFF1A\n                                        <input data-ui-type="TextBox"\n                                               data-ui-name="thingInput"\n                                               data-ui-id="thingInput"\n                                               data-ui-placeholder="\u8BF7\u5199\u65B0\u5B9E\u4F8B\u540D\u79F0"\n                                               data-ui-width="100" class="edit-input" />\n                                    </span>\n                                    <span>\u6700\u5927\u6536\u53D1\u6D88\u606F\u6761\u6570\uFF1A${quota}\u767E\u4E07\u6761/\u6708</span>\n                                    <span>\u53C2\u8003\u8D39\u7528\uFF1A3.99\u5143/100\u4E07\u6761/\u6708\uFF08\u6BCF\u6708\u524D100\u4E07\u6761\u6D88\u606F\u514D\u8D39)&nbsp;&nbsp;&nbsp;<a href="https://cloud.baidu.com/doc/IOT/Pricing.html" target="_blank">\u67E5\u770B\u6536\u8D39\u8BE6\u60C5</a></span>\n                                </div>\n                            </div>\n                            <div data-ui-type="Table"\n                                 data-ui-id="iotTable">\n                            </div>\n                        </dd>\n                    </dl>\n                    <dl class="detail-part-1-col">\n                        <dt>\n                            <h4>\u6570\u636E\u5904\u7406\u2014\u89C4\u5219\u5F15\u64CE\uFF08Rule Engine\uFF09</h4>\n                        </dt>\n                        <dd>\n                            <div class="description">\n                                <span>\n                                    <label>\u89C4\u5219\u540D\u79F0\uFF1A</label>\n                                    <input data-ui-type="TextBox"\n                                           data-ui-name="prefix"\n                                           data-ui-id="prefix"\n                                           data-ui-value="${prefix}"\n                                           data-ui-width="120" class="edit-input" />\n                                </span>\n                                <span>\u53C2\u8003\u8D39\u7528\uFF1A\u6682\u4E0D\u6536\u8D39</span>\n                            </div>\n                            <div data-ui-id="ruleTablePanel" data-ui-type="Panel">\n                                <div data-ui-type="Table"\n                                     data-ui-id="ruleTable">\n                                </div>\n                            </div>\n                        </dd>\n                    </dl>\n                    <dl class="detail-part-1-col">\n                        <dt>\n                            <h4>\u6570\u636E\u5B58\u50A8\u2014\u6570\u5E8F\u6570\u636E\u5E93\uFF08TSDB\uFF09</h4>\n                        </dt>\n                        <dd>\n                            <div class="description">\n                                <div data-ui-type="BoxGroup" data-ui-id="tsdbRadios"\n                                    data-ui-name="tsdbRadios" data-ui-box-type="radio" data-ui-disabled="disabled">\n                                    <ul>\n                                        <li>\n                                            <input type="radio" id="radioA" name="tsdbRadios" value="write">\n                                            <label for="radioA">\u521B\u5EFA\u65B0\u7684\u6570\u636E\u5E93</label>\n                                        </li>\n                                        <li>\n                                            <input type="radio" id="radioB" name="tsdbRadios" value="choose"  checked="checked">\n                                            <label for="radioB">\u5199\u5165\u73B0\u6709\u6570\u636E\u5E93&nbsp;\n                                            </label>\n                                        </li>\n                                    </ul>\n                                </div>\n                                <span data-ui-type="Select" data-ui-id="tsdbSelect" data-ui-name="tsdbSelect" ></span>\n                                <div data-ui-id="tsdbDetail" data-ui-type="Panel">\n                                    <span>\n                                    <label>\u6570\u636E\u5E93\u540D\u79F0\uFF1A</label>\n                                    <input data-ui-type="TextBox"\n                                           data-ui-name="tsdbNameInput"\n                                           data-ui-id="tsdbNameInput"\n                                           data-ui-value="${tsdbName}"\n                                           data-ui-width="100" class="edit-input" />\n                                    </span>\n                                    <span><label>\u6700\u5927\u5199\u5165\u6570\u636E\u70B9\u6570\uFF1A</label>\n                                    <input data-ui-type="TextBox"\n                                           data-ui-name="tsdbQuotaInput"\n                                           data-ui-id="tsdbQuotaInput"\n                                           data-ui-value="${tsdbQuota}"\n                                           data-ui-width="40" class="edit-input tsdb-quota-input" disabled="true"/>\u767E\u4E07\u6761/\u6BCF\u6708</span>\n                                    <span>\u53C2\u8003\u8D39\u7528\uFF1A39.99\u5143/100\u4E07\u70B9/\u6708&nbsp;&nbsp;&nbsp;<a href="https://cloud.baidu.com/doc/TSDB/Pricing.html" target="_blank">\u67E5\u770B\u6536\u8D39\u8BE6\u60C5</a></span>\n                                </div>\n                            </div>\n                        </dd>\n                    </dl>\n                    <div>\n                        <input data-ui-name="confirm" data-ui-id="confirm" data-ui-type="CheckBox"/>\n                        <span style="top:2px;position: relative;">\u6309\u914D\u7F6E\u6E05\u5355\u521B\u5EFA\u5DE5\u7A0B\u53CA\u8D44\u6E90\uFF0C\u4E86\u89E3\u5E76\u63A5\u53D7\u4E0A\u8FF0\u914D\u7F6E\u53EF\u80FD\u4EA7\u751F\u7684\u8D39\u7528</span>\n                        <div class="form-row-button">\n                            <button data-ui-type="Button"\n                                    class="ui-ctrl ui-button"\n                                    data-ui-id="prevStep">\u4E0A\u4E00\u6B65</button>\n                            <button data-ui-type="Button"\n                                    class="skin-primary-button ui-ctrl ui-button"\n                                    data-ui-id="nextStep" type="submit">\u521B\u5EFA</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n';
});
define('iot/turnkey/DetailModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    '../config',
    '../_public/storage',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _underscore, _config, _publicStorage, _config2) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseModel);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _S = _babelRuntimeHelpersInteropRequireDefault['default'](_publicStorage);
    var SILENT_OPTION = { 'X-silence': true };
    var DetailModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](DetailModel, _BaseModel);
        function DetailModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailModel);
            _BaseModel.apply(this, arguments);
        }
        DetailModel.prototype.getCreateTurnkey = function getCreateTurnkey(request) {
            return _config.api.createTurnkey(request, SILENT_OPTION);
        };
        DetailModel.prototype.getDetailTurnkey = function getDetailTurnkey(request) {
            return _config.api.detailTurnkey(request, SILENT_OPTION);
        };
        _babelRuntimeHelpersCreateClass['default'](DetailModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        createImg: function createImg() {
                            return require.toUrl('./img/turnkey-create.png');
                        },
                        sessionData: function sessionData(model) {
                            var chooseData = _S['default'].get(_config2.CHOOSE_DATA_KEY);
                            var _chooseData$confirmRuleEngine = chooseData.confirmRuleEngine;
                            var prefix = _chooseData$confirmRuleEngine[0].prefix;
                            var _chooseData$confirmIotHub = chooseData.confirmIotHub;
                            var endpoint = _chooseData$confirmIotHub.endpoint;
                            var quota = _chooseData$confirmIotHub.quota;
                            var tsdbResults = chooseData.confirmTsdb;
                            var _tsdbResults$0 = tsdbResults[0];
                            var tsdbName = _tsdbResults$0.name;
                            var tsdbQuota = _tsdbResults$0.quota;
                            var tsdbList = _u['default'].map(tsdbResults, function (tsdb, index) {
                                return {
                                    id: tsdb.id,
                                    name: tsdb.name,
                                    value: tsdb.name,
                                    quota: tsdb.quota
                                };
                            });
                            var endpoints = _u['default'].map(endpoint, function (endpoint, index) {
                                return {
                                    name: endpoint,
                                    value: endpoint
                                };
                            });
                            model.set('prefix', prefix);
                            model.set('quota', quota);
                            model.set('tsdbName', tsdbName);
                            model.set('tsdbQuota', tsdbQuota);
                            model.set('tsdbList', tsdbList);
                            model.set('endpoints', endpoints);
                            return chooseData;
                        }
                    };
                }
            }]);
        return DetailModel;
    }(_BaseModel2['default']);
    module.exports = DetailModel;
});
define('iot/turnkey/DetailView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./detail.tpl',
    'inf-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    'bat-ria/ui/loading',
    'inf-i18n',
    'underscore',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplDetailTplHtml, _infRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _batRiaUiLoading, _infI18n, _underscore, _config) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseView);
    var _loading = _babelRuntimeHelpersInteropRequireDefault['default'](_batRiaUiLoading);
    var _2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infI18n);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var DetailView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](DetailView, _BaseView);
        function DetailView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, DetailView);
            _BaseView.apply(this, arguments);
        }
        DetailView.prototype.showError = function showError(e) {
            if (!e.target.validityValid) {
                this.showToast('\u8BF7\u8F93\u51653-40\u4E2A\u5B57\u7B26\uFF0C\u5141\u8BB8\u8F93\u5165\u6570\u5B57\u3001\u5B57\u6BCD\u3001\u201C_\u201D', { messageType: 'error' });
            }
        };
        DetailView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'prevStep:click': function prevStepClick(e) {
                    return _this.fire('prevStep');
                },
                'nextStep:click': function nextStepClick(e) {
                    return _this.fire('create');
                },
                'tsdbSelect:change': function tsdbSelectChange(e) {
                    return _this.fire('tsdbsyn');
                },
                'prefix:change': function prefixChange(e) {
                    return _this.fire('prefixsyn');
                },
                'thingSelect:change': function thingSelectChange(e) {
                    return _this.fire('endpointsyn');
                },
                'tsdbNameInput:input': function tsdbNameInputInput(e) {
                    return _this.fire('tsdbinputsyn');
                },
                'tsdbRadios:change': function tsdbRadiosChange(e) {
                    if (e.target.rawValue[0] === 'choose') {
                        _this.get('tsdbSelect').show();
                        var selectItem = _this.get('tsdbSelect').getSelectedItem().value;
                        _this.get('tsdbNameInput').setValue(selectItem);
                        _this.get('tsdbNameInput').setReadOnly(true);
                        _this.fire('tsdbsyn');
                    } else {
                        _this.get('tsdbSelect').hide();
                        _this.get('tsdbNameInput').setReadOnly(false);
                    }
                },
                'thingRadios:change': function thingRadiosChange(e) {
                    if (e.target.rawValue[0] === 'choose') {
                        _this.get('thingSelect').show();
                        var selectItem = _this.get('thingSelect').getSelectedItem().value;
                        _this.get('thingInput').setValue(selectItem);
                        _this.get('thingInput').setReadOnly(true);
                    } else {
                        _this.get('thingSelect').hide();
                        _this.get('thingInput').setReadOnly(false);
                        _this.get('thingInput').setValue('');
                    }
                }
            };
        };
        DetailView.prototype.addLoading = function addLoading() {
            _loading['default'].show(_2['default']('\u6B63\u5728\u521D\u59CB\u5316\uFF0C\u8BF7\u7A0D\u5019...'));
        };
        DetailView.prototype.deleteLoading = function deleteLoading() {
            _loading['default'].hide();
        };
        DetailView.prototype.enterDocument = function enterDocument() {
            _BaseView.prototype.enterDocument.call(this);
            this.get('tsdbSelect').show();
            this.get('thingSelect').hide();
            this.get('tsdbNameInput').setReadOnly(true);
        };
        _babelRuntimeHelpersCreateClass['default'](DetailView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_turnkey_detail';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        iotTable: {
                            datasource: '@sessionData.confirmIotHub.things',
                            fields: [
                                {
                                    title: '\u8BBE\u5907\u7C7B\u578B/\u540D\u79F0',
                                    field: 'thingName',
                                    content: function content(item) {
                                        return _u['default'].escape(item.name);
                                    }
                                },
                                {
                                    title: '\u8EAB\u4EFD',
                                    field: 'principal',
                                    content: function content(item) {
                                        return _u['default'].escape(item.principal);
                                    }
                                },
                                {
                                    title: '\u7B56\u7565',
                                    field: 'policy',
                                    content: function content(item) {
                                        return _u['default'].escape(item.policy);
                                    }
                                },
                                {
                                    title: '\u4E3B\u9898',
                                    field: 'topic',
                                    content: function content(item) {
                                        return _u['default'].escape(item.topic);
                                    }
                                }
                            ]
                        },
                        ruleTable: {
                            datasource: '@sessionData.confirmRuleEngine',
                            fields: [
                                {
                                    title: '\u89C4\u5219\u540D\u79F0',
                                    field: 'rulename',
                                    content: function content(item) {
                                        return _u['default'].escape(item.name);
                                    }
                                },
                                {
                                    title: '\u91C7\u96C6\u5EA6\u91CF',
                                    field: 'metrics',
                                    content: function content(item) {
                                        return _u['default'].escape(item.metric);
                                    }
                                },
                                {
                                    title: '\u6570\u636E\u6E90',
                                    field: 'source',
                                    content: function content(item) {
                                        return _u['default'].escape(item.src.topic);
                                    }
                                },
                                {
                                    title: '\u6570\u636E\u76EE\u7684\u5730',
                                    field: 'dest',
                                    content: function content(item) {
                                        return _u['default'].escape(item.dest[0].value);
                                    }
                                }
                            ]
                        },
                        tsdbSelect: {
                            datasource: '@tsdbList',
                            width: 120
                        },
                        thingSelect: {
                            datasource: '@endpoints',
                            width: 120
                        },
                        thingInput: { pattern: _config.detailNameRegExp },
                        prefix: { pattern: _config.prefixRegExp }
                    };
                }
            }
        ]);
        return DetailView;
    }(_BaseView2['default']);
    module.exports = DetailView;
});
define('iot/turnkey/Listdetail', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    '../operations',
    '../events',
    './ListdetailModel',
    './ListdetailView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _operations, _events, _ListdetailModel, _ListdetailView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseAction);
    var _operations2 = _babelRuntimeHelpersInteropRequireDefault['default'](_operations);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_ListdetailModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_ListdetailView);
    var Listdetail = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](Listdetail, _BaseAction);
        function Listdetail() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Listdetail);
            _BaseAction.apply(this, arguments);
        }
        Listdetail.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on(_EVENTS['default'].GEN_PASSWORD, this.getPasswordV2, this);
        };
        Listdetail.prototype.getPasswordV2 = function getPasswordV2(e) {
            var _this = this;
            var principalName = e.args;
            var endpointName = this.model.get('thingName');
            var model = this.model;
            var view = this.view;
            view.waitConfirm({
                title: '\u63D0\u793A',
                content: '\u91CD\u7F6E\u5BC6\u94A5\u540E\uFF0C\u7F51\u5173\u8FDE\u63A5MQTT\u7684\u5BC6\u94A5\u5C06\u66F4\u6539\uFF0C\u53EF\u80FD\u9700\u8981\u91CD\u65B0\u70E7\u5F55\u7A0B\u5E8F\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C\u3002\u662F\u5426\u91CD\u7F6E\u5BC6\u94A5\uFF1F',
                width: 600,
                needFoot: true
            }).done(function () {
                return model.iotPrincipalGetPassword({
                    endpointName: endpointName,
                    principalName: principalName
                });
            }).done(function (data) {
                return _operations2['default'].viewPrincipalResult.call(_this, {
                    parentAction: _this,
                    password: data.password,
                    principalName: principalName
                });
            });
        };
        _babelRuntimeHelpersCreateClass['default'](Listdetail, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Listdetail;
    }(_BaseAction2['default']);
    module.exports = Listdetail;
});
define('iot/turnkey/listdetail.tpl', [], function () {
    return '<!-- target: TPL_iot_turnkey_listdetail -->\n<div class="iot-main-wrap iot-turnkey-listdetail">\n    <div class="content-wrap">\n        <p class="breadcrumb"><a href="#/iot/turnkey/choose">\u5929\u5DE5-\u5FEB\u901F\u901A\u9053</a> / <a href="#/iot/turnkey/list">\u5FEB\u901F\u5DE5\u7A0B\u5217\u8868</a> / \u5DE5\u7A0B\u8BE6\u60C5</p>\n        <div class="list-content detail-content">\n            <div class="content-header">\n                <h2>\u5DE5\u7A0B\u8BE6\u60C5</h2>\n            </div>\n\n            <div class="content-main">\n                 <div class="detail-parts-table" style="margin: 0;padding: 0;">\n                    <dl class="detail-part-1-col">\n                        <dt>\n                            <h4>\u57FA\u672C\u4FE1\u606F</h4>\n                        </dt>\n                        <dd>\n                            <div class="description">\n                                <span>\u5DE5\u7A0B\u540D\u79F0\uFF1A${basicInfo.name}</span>\n                                <span>\u72B6\u6001\uFF1A<em class="status ${statusEnum.kclass}">${statusEnum.text}</em></span>\n                                <span>\u521B\u5EFA\u65F6\u95F4\uFF1A${createTime}</span>\n                            </div>\n                        </dd>\n                    </dl>\n                     <dl class="detail-part-1-col">\n                         <dt>\n                             <h4>\u8BBE\u5907\u63A5\u5165 \u2014 \u7269\u63A5\u5165\uFF08IoT Hub\uFF09</h4>\n                         </dt>\n                         <dd>\n                             <div class="description">\n                                 <span>\u5B9E\u4F8B\u540D\u79F0\uFF1A${thingName}&nbsp;&nbsp;&nbsp;&nbsp;<a href="#/iot/thing/list~endpointName=${thingName}" target="_blank">\u67E5\u770B\u8BE6\u60C5</a></span>\n                                 <span>\u6700\u5927\u6536\u53D1\u6D88\u606F\u6761\u6570\uFF1A${quota}\u767E\u4E07\u6761/\u6708</span>\n                             </div>\n                             <div data-ui-type="Button" class="ui-ctrl ui-button" data-ui-width=120 style="display: none;">\u6279\u91CF\u91CD\u7F6E\u5E76\u4E0B\u8F7D\u5BC6\u94A5</div>\n                             <a data-ui-type="Clipboard" display="none"></a>\n                             <div data-ui-type="Table"\n                                  data-ui-id="iotTable"\n                                  data-ui-extension-command-type="Command"\n                                  data-ui-extension-tableex-type="TableEx">\n                             </div>\n                         </dd>\n                     </dl>\n                     <dl class="detail-part-1-col">\n                         <dt>\n                             <h4>\u6570\u636E\u5904\u7406\u2014\u89C4\u5219\u5F15\u64CE\uFF08Rule Engine\uFF09</h4>\n                         </dt>\n                         <dd>\n                             <div data-ui-id="ruleTablePanel" data-ui-type="Panel">\n                                 <div data-ui-type="Table"\n                                      data-ui-id="ruleTable">\n                                 </div>\n                             </div>\n                         </dd>\n                     </dl>\n                     <dl class="detail-part-1-col">\n                         <dt>\n                             <h4>\u6570\u636E\u5B58\u50A8\u2014\u6570\u5E8F\u6570\u636E\u5E93\uFF08TSDB\uFF09</h4>\n                         </dt>\n                         <dd>\n                             <div class="description">\n                                 <div data-ui-id="tsdbdetail" data-ui-type="Panel">\n                                     <span>\u6570\u636E\u5E93\u540D\u79F0\uFF1A${tsdbName}&nbsp;&nbsp;&nbsp;&nbsp;<a href="/tsdb/${urlUtil}/tsdb/detail/info~databaseId=${tsdbId}&databaseName=${tsdbName}" target="_blank">\u67E5\u770B\u8BE6\u60C5</a></span>\n                                     <span>\u6700\u5927\u5199\u5165\u6570\u636E\u70B9\u6570\uFF1A${tsdbQuota}\u767E\u4E07\u70B9/\u6708</span>\n                                 </div>\n                             </div>\n                         </dd>\n                     </dl>\n                     <div style="display: none;">\n                         <div class="form-row-button">\n                            <button data-ui-type="Button"\n                                    class="skin-primary-button ui-ctrl ui-button"\n                                    data-ui-id="complete">\u6D4B\u8BD5</button>\n                            <button data-ui-type="Button"\n                                    class="ui-ctrl ui-button"\n                                    data-ui-id="complete">\u4E0B\u8F7D\u793A\u8303\u4EE3\u7801</button>\n                         </div>\n                     </div>\n                 </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n';
});
define('iot/turnkey/ListdetailModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    'common/util/timeUtil',
    '../config',
    '../enum'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTimeUtil, _config, _enum) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseModel);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var ListdetailModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](ListdetailModel, _BaseModel);
        function ListdetailModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ListdetailModel);
            _BaseModel.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](ListdetailModel, [
            {
                key: 'iotProjectDetail',
                get: function get() {
                    return _config.api.detailTurnkey;
                }
            },
            {
                key: 'iotPrincipalGetPassword',
                get: function get() {
                    return _config.api.iotPrincipalGetPassword;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                    return {
                        basicInfo: function basicInfo(model) {
                            return model.iotProjectDetail({ uuid: model.get('uuid') }).then(function (item) {
                                var statusEnum = _enum.INS_STATUS.fromValue(item.status);
                                model.set('statusEnum', statusEnum);
                                var _item$detail = item.detail;
                                var _item$detail$iothub = _item$detail.iothub;
                                var _item$detail$iothub$0 = _item$detail$iothub[0];
                                var thingName = _item$detail$iothub$0.endpoint;
                                var quota = _item$detail$iothub$0.quota;
                                var _item$detail$ruleEngine = _item$detail.ruleEngine;
                                var prefix = _item$detail$ruleEngine[0].name;
                                var _item$detail$tsdb = _item$detail.tsdb;
                                var _item$detail$tsdb$0 = _item$detail$tsdb[0];
                                var tsdbId = _item$detail$tsdb$0.id;
                                var tsdbName = _item$detail$tsdb$0.name;
                                var tsdbQuota = _item$detail$tsdb$0.quota;
                                model.set('thingName', thingName);
                                model.set('prefix', prefix);
                                model.set('quota', quota);
                                model.set('tsdbId', tsdbId);
                                model.set('tsdbName', tsdbName);
                                model.set('tsdbQuota', tsdbQuota);
                                model.set('tsdbQuota', tsdbQuota);
                                model.set('createTime', _timeUtil['default'].toTime(item.createTime));
                                return item;
                            });
                        },
                        urlUtil: function urlUtil() {
                            var urlReg = new RegExp(/\?.*?#/);
                            return urlReg.exec(location.href)[0] || '#';
                        }
                    };
                }
            }
        ]);
        return ListdetailModel;
    }(_BaseModel2['default']);
    module.exports = ListdetailModel;
});
define('iot/turnkey/ListdetailView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./listdetail.tpl',
    'inf-ria/mvc/ListView',
    'babel-runtime/helpers/interop-require-default',
    'underscore',
    'common/util/tableUtil',
    '../events',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplListdetailTplHtml, _infRiaMvcListView, _babelRuntimeHelpersInteropRequireDefault, _underscore, _commonUtilTableUtil, _events, _config) {
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _EVENTS = _babelRuntimeHelpersInteropRequireDefault['default'](_events);
    var _localConfig = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u8BBE\u5907\u7C7B\u578B/\u540D\u79F0',
                field: 'thingName',
                content: function content(item) {
                    return _u['default'].escape(item.name);
                }
            },
            {
                title: '\u8EAB\u4EFD',
                field: 'principal',
                content: function content(item) {
                    return _u['default'].escape(item.principal);
                }
            },
            {
                title: '\u7B56\u7565',
                field: 'policy',
                content: function content(item) {
                    return _u['default'].escape(item.policy);
                }
            },
            {
                title: '\u4E3B\u9898',
                field: 'topic',
                content: function content(item) {
                    return _u['default'].escape(item.topic);
                }
            },
            {
                title: '\u64CD\u4F5C',
                field: 'operation',
                content: function content(item) {
                    return view.getAllOpertionsHtml(item);
                }
            }
        ];
    }
    var ListdetailView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](ListdetailView, _ListView);
        function ListdetailView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, ListdetailView);
            _ListView.apply(this, arguments);
        }
        ListdetailView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'copyPassword:aftercopy': function copyPasswordAftercopy(e) {
                    return _this.showToast('\u590D\u5236\u6210\u529F');
                },
                'iotTable:command': function iotTableCommand(e) {
                    return _this.fire(e.name, e);
                }
            });
        };
        ListdetailView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
        };
        ListdetailView.prototype.getAllOpertionsHtml = function getAllOpertionsHtml(item) {
            var html = [];
            Array.prototype.push.apply(html, [this.resetPasswordHtml(item)]);
            return html.join('');
        };
        ListdetailView.prototype.copyPasswordHtml = function copyPasswordHtml(item) {
            return '<a data-ui-type="Clipboard"\n                   data-ui-id="copyPassword"\n                   data-ui-clipboard-text="' + item.password + '"\n                   class="copy-password">\u590D\u5236\u5BC6\u94A5</a>&nbsp;&nbsp;&nbsp;';
        };
        ListdetailView.prototype.resetPasswordHtml = function resetPasswordHtml(item) {
            var args = item.principal;
            var canDo = true;
            return _u['default'].template(_localConfig['default'].tpl.command)({
                label: '\u91CD\u7F6E\u5BC6\u94A5',
                command: _EVENTS['default'].GEN_PASSWORD,
                args: args,
                className: canDo ? '' : 'state-disabled',
                disabled: canDo ? '' : 'disabled'
            });
        };
        _babelRuntimeHelpersCreateClass['default'](ListdetailView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_turnkey_listdetail';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        iotTable: {
                            datasource: '@basicInfo.detail.iothub.0.things',
                            columnRenderIndexes: [4],
                            fields: '@tableFields'
                        },
                        ruleTable: {
                            datasource: '@basicInfo.detail.ruleEngine',
                            urlUtil: '@urlUtil',
                            fields: [
                                {
                                    title: '\u89C4\u5219\u540D\u79F0',
                                    field: 'rulename',
                                    content: function content(item) {
                                        return _u['default'].escape(item.name);
                                    }
                                },
                                {
                                    title: '\u91C7\u96C6\u5EA6\u91CF',
                                    field: 'metrics',
                                    content: function content(item) {
                                        return _u['default'].escape(item.metric);
                                    }
                                },
                                {
                                    title: '\u6570\u636E\u6E90',
                                    field: 'source',
                                    content: function content(item) {
                                        return _u['default'].escape(item.src.topic);
                                    }
                                },
                                {
                                    title: '\u6570\u636E\u76EE\u7684\u5730',
                                    field: 'dest',
                                    content: function content(item) {
                                        return _u['default'].escape(item.dest[0].value);
                                    }
                                },
                                {
                                    title: '\u64CD\u4F5C',
                                    field: 'control',
                                    content: function content(item) {
                                        return '<a href="/iotre/' + this.urlUtil + '/iotre/rule/detail~uuid=' + item.uuid + '" target="_blank">\n                                \u67E5\u770B\u8BE6\u60C5</a>';
                                    }
                                }
                            ]
                        }
                    };
                }
            }
        ]);
        return ListdetailView;
    }(_ListView2['default']);
    module.exports = ListdetailView;
});
define('iot/turnkey/Quicklist', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListAction',
    'babel-runtime/helpers/interop-require-default',
    './QuicklistModel',
    './QuicklistView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListAction, _babelRuntimeHelpersInteropRequireDefault, _QuicklistModel, _QuicklistView) {
    var _ListAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_QuicklistModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_QuicklistView);
    var Quicklist = function (_ListAction) {
        _babelRuntimeHelpersInherits['default'](Quicklist, _ListAction);
        function Quicklist() {
            _babelRuntimeHelpersClassCallCheck['default'](this, Quicklist);
            _ListAction.apply(this, arguments);
        }
        Quicklist.prototype.initBehavior = function initBehavior() {
            _ListAction.prototype.initBehavior.call(this);
            this.view.on('download', this.downloadFile, this);
        };
        Quicklist.prototype.downloadFile = function downloadFile(e) {
            var url = '/api/iot/turnkey/project/detail/export/' + e.args;
            window.open(url, '_self');
        };
        _babelRuntimeHelpersCreateClass['default'](Quicklist, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return Quicklist;
    }(_ListAction2['default']);
    module.exports = Quicklist;
});
define('iot/turnkey/quicklist.tpl', [], function () {
    return '<!-- target: TPL_iot_turnkey_quicklist -->\n<div class="iot-main-wrap iot-turnkey-quicklist main-wrap-new">\n<div class="content-wrap">\n    <p class="breadcrumb"><a href="#/iot/turnkey/choose">\u5929\u5DE5-\u5FEB\u901F\u901A\u9053</a> / \u5FEB\u901F\u5E94\u7528\u5DE5\u7A0B\u5217\u8868</p>\n    <div class="list-content">\n        <h2>\u5FEB\u901F\u5E94\u7528\u5DE5\u7A0B\u5217\u8868</h2>\n        <div class="table-full-wrap">\n            <div data-ui-type="Table" data-ui-id="table"\n                 data-ui-datasource="@tableData"\n                 data-ui-order-by="@orderBy" data-ui-order="@order"\n                 data-ui-select="@selectMode" data-ui-extension-tip-type="TableTip"\n                 data-ui-extension-command-type="Command"\n                 data-ui-extension-tableedit-type="TableEdit"\n                 data-ui-extension-tableex-type="TableEx">\n            </div>\n            <div class="ui-row">\n                <!-- import: listPager -->\n            </div>\n        </div>\n    </div>\n</div>\n</div>\n\n\n';
});
define('iot/turnkey/QuicklistModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/ListModel',
    'babel-runtime/helpers/interop-require-default',
    '../config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcListModel, _babelRuntimeHelpersInteropRequireDefault, _config) {
    var _ListModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListModel);
    var QuicklistModel = function (_ListModel) {
        _babelRuntimeHelpersInherits['default'](QuicklistModel, _ListModel);
        function QuicklistModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, QuicklistModel);
            _ListModel.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](QuicklistModel, [
            {
                key: 'listRequester',
                get: function get() {
                    return _config.api.listTurnkey;
                }
            },
            {
                key: 'datasource',
                get: function get() {
                }
            },
            {
                key: 'defaultArgs',
                get: function get() {
                    return {
                        order: 'desc',
                        orderBy: 'createTime',
                        pageSize: _config.pageSize
                    };
                }
            }
        ]);
        return QuicklistModel;
    }(_ListModel2['default']);
    module.exports = QuicklistModel;
});
define('iot/turnkey/QuicklistView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./quicklist.tpl',
    'inf-ria/mvc/ListView',
    'babel-runtime/helpers/interop-require-default',
    'common/util/timeUtil',
    'common/util/tableUtil',
    '../enum',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplQuicklistTplHtml, _infRiaMvcListView, _babelRuntimeHelpersInteropRequireDefault, _commonUtilTimeUtil, _commonUtilTableUtil, _enum, _config) {
    var _ListView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcListView);
    var _timeUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTimeUtil);
    var _tableUtil = _babelRuntimeHelpersInteropRequireDefault['default'](_commonUtilTableUtil);
    var _localConfig = _babelRuntimeHelpersInteropRequireDefault['default'](_config);
    function getTableFields(view) {
        return [
            {
                title: '\u5DE5\u7A0B\u540D\u79F0',
                field: 'projectname',
                content: function content(item) {
                    return item.name;
                }
            },
            {
                title: '\u521B\u5EFA\u65F6\u95F4',
                field: 'time',
                content: function content(item) {
                    return _timeUtil['default'].toTime(item.createTime);
                }
            },
            {
                title: '\u72B6\u6001',
                field: 'status',
                content: function content(item) {
                    var statusEnum = _enum.INS_STATUS.fromValue(item.status);
                    return '<span class="status ' + statusEnum.kclass + '">' + statusEnum.text + '</span>';
                }
            },
            {
                title: '\u64CD\u4F5C',
                field: 'principal',
                content: function content(item) {
                    var html = '<a data-command=\'download\'\n                               data-command-args=' + item.uuid + '>\u4E0B\u8F7D\u914D\u7F6E\u6587\u4EF6</a>\n                            <a href="#" style="display:none">\u4E0B\u8F7D\u793A\u4F8B\u4EE3\u7801</a>\n                            <a href="#/iot/turnkey/listdetail~uuid=' + item.uuid + '">\u67E5\u770B\u8BE6\u60C5</a>';
                    return html;
                }
            }
        ];
    }
    var QuicklistView = function (_ListView) {
        _babelRuntimeHelpersInherits['default'](QuicklistView, _ListView);
        function QuicklistView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, QuicklistView);
            _ListView.apply(this, arguments);
        }
        QuicklistView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return _tableUtil['default'].getListEvents({
                'table:command': function tableCommand(e) {
                    return _this.fire(e.name, e);
                }
            });
        };
        QuicklistView.prototype.enterDocument = function enterDocument() {
            this.model.set('tableFields', getTableFields(this));
            _ListView.prototype.enterDocument.call(this);
        };
        _babelRuntimeHelpersCreateClass['default'](QuicklistView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_turnkey_quicklist';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        table: {
                            select: false,
                            columnResizable: true,
                            fields: '@tableFields',
                            noDataHtml: _localConfig['default'].noDataHtml
                        }
                    };
                }
            }
        ]);
        return QuicklistView;
    }(_ListView2['default']);
    module.exports = QuicklistView;
});
define('iot/turnkey/SuccessInfo', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/BaseAction',
    'babel-runtime/helpers/interop-require-default',
    './SuccessInfoModel',
    './SuccessInfoView'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcBaseAction, _babelRuntimeHelpersInteropRequireDefault, _SuccessInfoModel, _SuccessInfoView) {
    var _BaseAction2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseAction);
    var _modelType = _babelRuntimeHelpersInteropRequireDefault['default'](_SuccessInfoModel);
    var _viewType = _babelRuntimeHelpersInteropRequireDefault['default'](_SuccessInfoView);
    var SuccessInfo = function (_BaseAction) {
        _babelRuntimeHelpersInherits['default'](SuccessInfo, _BaseAction);
        function SuccessInfo() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SuccessInfo);
            _BaseAction.apply(this, arguments);
        }
        SuccessInfo.prototype.initBehavior = function initBehavior() {
            _BaseAction.prototype.initBehavior.call(this);
            this.view.on('COMPLETE', this.complete, this);
        };
        SuccessInfo.prototype.complete = function complete() {
            this.redirect('/iot/turnkey/list');
        };
        _babelRuntimeHelpersCreateClass['default'](SuccessInfo, [
            {
                key: 'viewType',
                get: function get() {
                    return _viewType['default'];
                }
            },
            {
                key: 'modelType',
                get: function get() {
                    return _modelType['default'];
                }
            }
        ]);
        return SuccessInfo;
    }(_BaseAction2['default']);
    module.exports = SuccessInfo;
});
define('iot/turnkey/successinfo.tpl', [], function () {
    return '<!-- target: TPL_iot_turnkey_successinfo -->\n<div class="iot-main-wrap iot-turnkey-successinfo">\n    <div class="content-wrap">\n        <p class="breadcrumb"><a href="#/iot/turnkey/choose">\u5929\u5DE5-\u5FEB\u901F\u901A\u9053</a>  / \u901A\u7528\u6570\u636E\u91C7\u96C6\u53CA\u76D1\u63A7</p>\n        <div class="list-content detail-content">\n            <div class="content-header">\n                <h2>\u5929\u5DE5\u7269\u8054\u7F51\u5FEB\u901F\u5E94\u7528\u901A\u9053</h2>\n                <div data-ui-type="ViewStep"\n                        data-ui-id="createStep"\n                        data-ui-current-step="3">\n                    <ul>\n                        <li>\u9009\u62E9\u573A\u666F</li>\n                        <li>\u786E\u8BA4\u573A\u666F</li>\n                        <li>\u521B\u5EFA\u5DE5\u7A0B</li>\n                        <!-- <li>\u6D4B\u8BD5</li> -->\n                    </ul>\n                </div>\n            </div>\n\n            <div class="content-main">\n                 <div class="tip-green">\u5DF2\u4E3A\u60A8\u6210\u529F\u521B\u5EFA\u5E76\u90E8\u7F72\u4E0B\u5217\u8D44\u6E90\u3002</div>\n                 <div class="detail-parts-table" style="margin: 0;padding: 0;">\n                     <dl class="detail-part-1-col">\n                         <dt>\n                             <h4>\u8BBE\u5907\u63A5\u5165 \u2014 \u7269\u63A5\u5165\uFF08IoT Hub\uFF09</h4>\n                         </dt>\n                         <dd>\n                             <div class="description">\n                                 <span>\u5B9E\u4F8B\u540D\u79F0\uFF1A${thingName}&nbsp;&nbsp;&nbsp;&nbsp;<a href="#/iot/thing/list~endpointName=${thingName}" target="_blank">\u67E5\u770B\u8BE6\u60C5</a></span>\n                                 <span>\u6700\u5927\u6536\u53D1\u6D88\u606F\u6761\u6570\uFF1A${quota}\u767E\u4E07\u6761/\u6708</span>\n                             </div>\n                             <a data-ui-type="Clipboard" display="none"></a>\n                             <div data-ui-type="Table"\n                                  data-ui-id="iotTable"\n                                  data-ui-extension-tableex-type="TableEx">\n                             </div>\n                         </dd>\n                     </dl>\n                     <dl class="detail-part-1-col">\n                         <dt>\n                             <h4>\u6570\u636E\u5904\u7406\u2014\u89C4\u5219\u5F15\u64CE\uFF08Rule Engine\uFF09</h4>\n                         </dt>\n                         <dd>\n                             <div data-ui-id="ruleTablePanel" data-ui-type="Panel">\n                                 <div data-ui-type="Table"\n                                      data-ui-id="ruleTable">\n                                 </div>\n                             </div>\n                         </dd>\n                     </dl>\n                     <dl class="detail-part-1-col">\n                         <dt>\n                             <h4>\u6570\u636E\u5B58\u50A8\u2014\u6570\u5E8F\u6570\u636E\u5E93\uFF08TSDB\uFF09</h4>\n                         </dt>\n                         <dd>\n                             <div class="description">\n                                 <div data-ui-id="tsdbdetail" data-ui-type="Panel">\n                                     <span>\u6570\u636E\u5E93\u540D\u79F0\uFF1A${tsdbName}&nbsp;&nbsp;&nbsp;&nbsp;<a href="/tsdb/${urlUtil}/tsdb/detail/info~databaseId=${tsdbId}&databaseName=${tsdbName}" target="_blank">\u67E5\u770B\u8BE6\u60C5</a></span>\n                                     <span>\u6700\u5927\u5199\u5165\u6570\u636E\u70B9\u6570\uFF1A${tsdbQuota}\u767E\u4E07\u70B9/\u6708</span>\n                                 </div>\n                             </div>\n                         </dd>\n                     </dl>\n                     <div>\n                         <div class="form-row-button">\n                             <button data-ui-type="Button"\n                                     class="skin-primary-button ui-ctrl ui-button"\n                                     data-ui-id="complete">\u5B8C\u6210</button>\n                         </div>\n                     </div>\n                 </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n';
});
define('iot/turnkey/SuccessInfoModel', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'inf-ria/mvc/BaseModel',
    'babel-runtime/helpers/interop-require-default',
    '../_public/storage',
    './config'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _infRiaMvcBaseModel, _babelRuntimeHelpersInteropRequireDefault, _publicStorage, _config) {
    var _BaseModel2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseModel);
    var _S = _babelRuntimeHelpersInteropRequireDefault['default'](_publicStorage);
    var SuccessInfoModel = function (_BaseModel) {
        _babelRuntimeHelpersInherits['default'](SuccessInfoModel, _BaseModel);
        function SuccessInfoModel() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SuccessInfoModel);
            _BaseModel.apply(this, arguments);
        }
        _babelRuntimeHelpersCreateClass['default'](SuccessInfoModel, [{
                key: 'datasource',
                get: function get() {
                    return {
                        sessionData: function sessionData(model) {
                            var confirmData = _S['default'].get(_config.CONFIRM_DATA_KEY);
                            var _confirmData$detail = confirmData.detail;
                            var _confirmData$detail$iothub = _confirmData$detail.iothub;
                            var _confirmData$detail$iothub$0 = _confirmData$detail$iothub[0];
                            var thingName = _confirmData$detail$iothub$0.endpoint;
                            var quota = _confirmData$detail$iothub$0.quota;
                            var _confirmData$detail$ruleEngine = _confirmData$detail.ruleEngine;
                            var prefix = _confirmData$detail$ruleEngine[0].name;
                            var _confirmData$detail$tsdb = _confirmData$detail.tsdb;
                            var _confirmData$detail$tsdb$0 = _confirmData$detail$tsdb[0];
                            var tsdbId = _confirmData$detail$tsdb$0.id;
                            var tsdbName = _confirmData$detail$tsdb$0.name;
                            var tsdbQuota = _confirmData$detail$tsdb$0.quota;
                            model.set('thingName', thingName);
                            model.set('prefix', prefix);
                            model.set('quota', quota);
                            model.set('tsdbId', tsdbId);
                            model.set('tsdbName', tsdbName);
                            model.set('tsdbQuota', tsdbQuota);
                            return confirmData;
                        },
                        urlUtil: function urlUtil() {
                            var urlReg = new RegExp(/\?.*?#/);
                            return urlReg.exec(location.href)[0] || '#';
                        }
                    };
                }
            }]);
        return SuccessInfoModel;
    }(_BaseModel2['default']);
    module.exports = SuccessInfoModel;
});
define('iot/turnkey/SuccessInfoView', [
    'exports',
    'module',
    'babel-runtime/helpers/inherits',
    'babel-runtime/helpers/create-class',
    'babel-runtime/helpers/class-call-check',
    'bat-ria/tpl!./successinfo.tpl',
    'inf-ria/mvc/BaseView',
    'babel-runtime/helpers/interop-require-default',
    'underscore'
], function (exports, module, _babelRuntimeHelpersInherits, _babelRuntimeHelpersCreateClass, _babelRuntimeHelpersClassCallCheck, _batRiaTplSuccessinfoTplHtml, _infRiaMvcBaseView, _babelRuntimeHelpersInteropRequireDefault, _underscore) {
    var _BaseView2 = _babelRuntimeHelpersInteropRequireDefault['default'](_infRiaMvcBaseView);
    var _u = _babelRuntimeHelpersInteropRequireDefault['default'](_underscore);
    var SuccessInfoView = function (_BaseView) {
        _babelRuntimeHelpersInherits['default'](SuccessInfoView, _BaseView);
        function SuccessInfoView() {
            _babelRuntimeHelpersClassCallCheck['default'](this, SuccessInfoView);
            _BaseView.apply(this, arguments);
        }
        SuccessInfoView.prototype.getUIEvents = function getUIEvents() {
            var _this = this;
            return {
                'complete:click': function completeClick(e) {
                    return _this.fire('COMPLETE', e);
                },
                'copyPassword:aftercopy': function copyPasswordAftercopy(e) {
                    return _this.showToast('\u590D\u5236\u6210\u529F');
                }
            };
        };
        _babelRuntimeHelpersCreateClass['default'](SuccessInfoView, [
            {
                key: 'template',
                get: function get() {
                    return 'TPL_iot_turnkey_successinfo';
                }
            },
            {
                key: 'uiProperties',
                get: function get() {
                    return {
                        iotTable: {
                            quota: '@quota',
                            datasource: '@sessionData.detail.iothub.0.things',
                            columnRenderIndexes: [4],
                            fields: [
                                {
                                    title: '\u8BBE\u5907\u7C7B\u578B/\u540D\u79F0',
                                    field: 'thingName',
                                    content: function content(item) {
                                        return _u['default'].escape(item.name);
                                    }
                                },
                                {
                                    title: '\u8EAB\u4EFD',
                                    field: 'principal',
                                    content: function content(item) {
                                        return _u['default'].escape(item.principal);
                                    }
                                },
                                {
                                    title: '\u7B56\u7565',
                                    field: 'policy',
                                    content: function content(item) {
                                        return _u['default'].escape(item.policy);
                                    }
                                },
                                {
                                    title: '\u4E3B\u9898',
                                    field: 'topic',
                                    content: function content(item) {
                                        return _u['default'].escape(item.topic);
                                    }
                                },
                                {
                                    title: '\u64CD\u4F5C',
                                    field: 'control',
                                    content: function content(item) {
                                        return '<a data-ui-type="Clipboard"\n                                       data-ui-id="copyPassword"\n                                       data-ui-clipboard-text="' + item.password + '"\n                                       class="copy-password">\u590D\u5236\u5BC6\u94A5</a>';
                                    }
                                }
                            ]
                        },
                        ruleTable: {
                            datasource: '@sessionData.detail.ruleEngine',
                            urlUtil: '@urlUtil',
                            fields: [
                                {
                                    title: '\u89C4\u5219\u540D\u79F0',
                                    field: 'rulename',
                                    content: function content(item) {
                                        return _u['default'].escape(item.name);
                                    }
                                },
                                {
                                    title: '\u91C7\u96C6\u5EA6\u91CF',
                                    field: 'metrics',
                                    content: function content(item) {
                                        return _u['default'].escape(item.metric);
                                    }
                                },
                                {
                                    title: '\u6570\u636E\u6E90',
                                    field: 'source',
                                    content: function content(item) {
                                        return _u['default'].escape(item.src.topic);
                                    }
                                },
                                {
                                    title: '\u6570\u636E\u76EE\u7684\u5730',
                                    field: 'dest',
                                    content: function content(item) {
                                        return _u['default'].escape(item.dest[0].value);
                                    }
                                },
                                {
                                    title: '\u64CD\u4F5C',
                                    field: 'control',
                                    content: function content(item) {
                                        return '<a href="/iotre/' + this.urlUtil + '/iotre/rule/detail~uuid=' + item.uuid + '" target="_blank">\n                                \u67E5\u770B\u8BE6\u60C5</a>';
                                    }
                                }
                            ]
                        }
                    };
                }
            }
        ]);
        return SuccessInfoView;
    }(_BaseView2['default']);
    module.exports = SuccessInfoView;
});